{"version":3,"file":"pullrefresh.js","sources":["pullrefresh.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar moment_1 = tslib_1.__importDefault(require(\"moment\"));\n\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\n\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\n\nvar selectorPrefix = 'adherev-ui-pullrefresh';\nvar defaultImg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHN0eWxlPSJ3aWR0aDozMDhweDtoZWlnaHQ6MzA4cHg7IiB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lvaIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAyNCAxMDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI2VjZjBmMSIgZD0iTTc5Ny43NjQ0MiAzMjYuNTU4NDFjLTguODg0MTk5LTE1LjU2MzMyNy0yNTIuODgwMS0yODYuODE5MDE5LTI2OC4zNzk1MTItMzEzLjU2NzQ4OS0xMC4xMzA1NDQtMTcuNDQ4ODIzLTM0LjI1ODQ5NS0xNy4xOTMxNjItNDQuMzg5MDM4IDBDNDczLjY1MDkzOSAzMi4yNjEzMjQgMjMwLjk5NzI1NSAzMDQuNjM1NTMgMjE4LjM3NDAyMyAzMjcuNDIxMjY0Yy05LjIzNTczMiAxNi41NTQwMTEgMC45NTg3MjcgMzguMzgxMDE5IDIxLjk1NDgzNyAzOC4zODEwMTlsMTE5LjkwNDczMSAwIDAgMjU2LjQ5MTMwMyAwIDM2Ljc4MzE0MSAyOTEuODM2MzU0IDAgMC0yOTMuMzA2NDAyIDEyMy41Nzk4NDkgMEM3OTQuNjk2NDk1IDM2NS43NzAzMjUgODA4Ljk0OTU2MiAzNDYuMTE2NDMxIDc5Ny43NjQ0MiAzMjYuNTU4NDF6IiAvPg0KPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMSIgZmlsbD0iI2VjZjBmMSIgZD0iTTM2MC4yMDE2MzMgNjg5LjY5MjA2MWwyOTIuMzE1NzE4IDAgMCA5MC45MTkyMzItMjkyLjMxNTcxOCAwIDAtOTAuOTE5MjMyWiIgLz4NCjxwYXRoIGNsYXNzPSJzdmdwYXRoIiBkYXRhLWluZGV4PSJwYXRoXzIiIGZpbGw9IiNlY2YwZjEiIGQ9Ik0zNjAuMjAxNjMzIDg0MC45MTUxOTFsMjkyLjMxNTcxOCAwIDAgNjAuNTkxNTE2LTI5Mi4zMTU3MTggMCAwLTYwLjU5MTUxNloiIC8+DQo8cGF0aCBjbGFzcz0ic3ZncGF0aCIgZGF0YS1pbmRleD0icGF0aF8zIiBmaWxsPSIjZWNmMGYxIiBkPSJNMzYwLjIwMTYzMyA5OTIuMzkzOTgybDI5MC40MzAyMjIgMCAwIDMwLjI5NTc1OC0yOTAuNDMwMjIyIDAgMC0zMC4yOTU3NThaIiAvPg0KDQo8L3N2Zz4NCg==';\nvar PullRefresh = {\n  name: 'adv-pullrefresh',\n  props: {\n    className: {\n      type: String,\n      default: ''\n    },\n    scrollClassName: {\n      type: String,\n      default: ''\n    },\n    pullHeight: {\n      type: Number,\n      default: 200\n    },\n    isShowUpdateTime: {\n      type: Boolean,\n      default: true\n    },\n    updateTime: {\n      type: Number,\n      default: moment_1.default().valueOf()\n    },\n    updateTimeFormat: {\n      type: String,\n      default: adherev_util_resource_1.default.Dict.value.ResourceMomentFormat18.value()\n    },\n    loadingAnimation: {\n      type: String,\n      default: 'la-ball-circus la-dark',\n      isRequired: false\n    },\n    renderIcon: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    renderCanLabel: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    renderLabel: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    renderLoadingAnimation: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  slots: ['icon', 'canLabel', 'label', 'loadingAnimation'],\n  emits: ['pull-start', 'pull-can-refresh', 'pull-bottom', 'pull-rebound', 'pull-refresh'],\n  data: function data() {\n    return {\n      isCan: false,\n      preUpdateTime: new Date().getTime(),\n      $maskEl: null,\n      $el: null,\n      $iconEl: null,\n      $scrollEl: null,\n      $triggerInnerEl: null,\n      $pullHeight: 200,\n      $refreshHeight: 0,\n      $startPageY: null,\n      $isDownPull: false,\n      $isTop: true\n    };\n  },\n  computed: {\n    getScrollClassName: function getScrollClassName() {\n      var scrollClassName = this.scrollClassName;\n      return classnames_1.default(selectorPrefix + \"-scroll\", scrollClassName || '');\n    }\n  },\n  methods: {\n    $renderIcon: function $renderIcon(h) {\n      if (this.$slots.icon) {\n        return h(\"div\", {\n          \"class\": selectorPrefix + \"-trigger-icon\"\n        }, [h(\"div\", {\n          \"class\": selectorPrefix + \"-trigger-icon-inner\",\n          \"ref\": \"iconElRef\"\n        }, [this.$slots.icon])]);\n      }\n\n      if (this.renderIcon) {\n        return h(\"div\", {\n          \"class\": selectorPrefix + \"-trigger-icon\"\n        }, [h(\"div\", {\n          \"class\": selectorPrefix + \"-trigger-icon-inner\",\n          \"ref\": \"iconElRef\"\n        }, [this.renderIcon])]);\n      }\n\n      return h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon\"\n      }, [h(\"img\", {\n        \"class\": selectorPrefix + \"-trigger-icon-inner\",\n        \"attrs\": {\n          \"src\": defaultImg,\n          \"alt\": \"\"\n        },\n        \"ref\": \"iconElRef\"\n      })]); // return $slots.icon ? (\n      //   <div class={`${selectorPrefix}-trigger-icon`}>\n      //     <div class={`${selectorPrefix}-trigger-icon-inner`} ref=\"iconElRef\">\n      //       {$slots.icon}\n      //     </div>\n      //   </div>\n      // ) : (\n      //   <div class={`${selectorPrefix}-trigger-icon`}>\n      //     <img\n      //       class={`${selectorPrefix}-trigger-icon-inner`}\n      //       src={defaultImg}\n      //       alt=\"\"\n      //       ref=\"iconElRef\"\n      //     />\n      //   </div>\n      // );\n    },\n    $renderLabel: function $renderLabel(h) {\n      return h(\"p\", {\n        \"class\": selectorPrefix + \"-trigger-label\"\n      }, [this.isCan ? this.$slots.canLabel || this.renderCanLabel || h(\"span\", [adherev_util_intl_1.default.tv('松开刷新')]) : this.$slots.label || this.renderLabel || h(\"span\", [adherev_util_intl_1.default.tv('下拉刷新')])]);\n    },\n    $renderUpdateTime: function $renderUpdateTime(h) {\n      var _a = this,\n          isShowUpdateTime = _a.isShowUpdateTime,\n          updateTimeFormat = _a.updateTimeFormat,\n          preUpdateTime = _a.preUpdateTime;\n\n      return isShowUpdateTime ? h(\"p\", {\n        \"class\": selectorPrefix + \"-trigger-update\"\n      }, [adherev_util_intl_1.default.tv('更新时间'), \"\\uFF1A\", h(\"span\", {\n        \"class\": selectorPrefix + \"-trigger-update-label\"\n      }, [moment_1.default(preUpdateTime).format(updateTimeFormat)])]) : null;\n    },\n    $renderLoadingAnimation: function $renderLoadingAnimation(h) {\n      var _a = this,\n          $slots = _a.$slots,\n          loadingAnimation = _a.loadingAnimation;\n\n      if (!!loadingAnimation) {\n        return h(\"div\", {\n          \"class\": classnames_1.default(selectorPrefix + \"-trigger-refresh\", loadingAnimation || ''),\n          \"ref\": \"refreshElRef\"\n        }, [h(\"div\"), h(\"div\"), h(\"div\"), h(\"div\"), h(\"div\")]);\n      }\n\n      return h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-refresh\",\n        \"ref\": \"refreshElRef\"\n      }, [$slots.loadingAnimation || this.renderLoadingAnimation]);\n    },\n    $renderMask: function $renderMask() {\n      var $data = this.$data;\n      $data.$maskEl = document.querySelector(\".\" + selectorPrefix + \"-mask\");\n\n      if (!$data.$maskEl) {\n        $data.$maskEl = document.createElement('div');\n        $data.$maskEl.className = selectorPrefix + \"-mask\";\n        document.body.appendChild($data.$maskEl);\n      }\n    },\n\n    /**\n     * getPullHeight\n     * @private\n     * @return number\n     */\n    getPullHeight: function getPullHeight() {\n      var _a = this,\n          $data = _a.$data,\n          pullHeight = _a.pullHeight;\n\n      if (pullHeight <= 0) {\n        return 200;\n      } else {\n        if (pullHeight > $data.$scrollEl.clientHeight) {\n          return $data.$scrollEl.clientHeight;\n        } else {\n          return pullHeight;\n        }\n      }\n    },\n    addEvents: function addEvents() {\n      var $scrollEl = this.$data.$scrollEl;\n      $scrollEl.addEventListener('touchstart', this.onTouchStart);\n      $scrollEl.addEventListener('mousedown', this.onTouchStart);\n      $scrollEl.addEventListener('scroll', this.onScroll);\n    },\n    removeEvents: function removeEvents() {\n      var $scrollEl = this.$data.$scrollEl;\n      $scrollEl.removeEventListener('mousemove', this.onTouchMove);\n      $scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n      $scrollEl.removeEventListener('touchmove', this.onTouchMove);\n      $scrollEl.removeEventListener('touchend', this.onTouchEnd);\n    },\n    onTouchStart: function onTouchStart(e) {\n      var $data = this.$data;\n      this.trigger('pull-start');\n      $data.$startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var $scrollEl = $data.$scrollEl;\n      $scrollEl.addEventListener('touchmove', this.onTouchMove);\n      $scrollEl.addEventListener('mousemove', this.onTouchMove);\n      $scrollEl.addEventListener('touchend', this.onTouchEnd);\n      $scrollEl.addEventListener('mouseup', this.onTouchEnd);\n    },\n    onTouchMove: function onTouchMove(e) {\n      var $data = this.$data;\n      var $scrollEl = $data.$scrollEl,\n          $el = $data.$el,\n          $startPageY = $data.$startPageY,\n          $refreshHeight = $data.$refreshHeight,\n          $iconEl = $data.$iconEl,\n          $pullHeight = $data.$pullHeight;\n      $scrollEl.style.overflow = 'hidden';\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - $startPageY;\n      var distance = Math.abs(difference); // 中线下\n\n      if (difference > 0) {\n        e.preventDefault();\n        $data.$isDownPull = true; // 正常拉\n\n        if (distance < $data.$pullHeight) {\n          this.translateY($scrollEl, distance + \"px\", 0);\n          this.translateY($el, \"calc(-100% + \" + distance + \"px)\", 0); // 具备刷新条件\n\n          if (distance >= $refreshHeight + 80) {\n            // console.log('3.具备刷新条件');\n            this.rotateIcon($iconEl, 0, 150);\n            this.isCan = true;\n            this.trigger('pull-can-refresh');\n          } // 不具备刷新条件\n          else {\n            this.rotateIcon($iconEl, 180, 150);\n            this.isCan = false;\n          }\n\n          $el.style.display = 'flex';\n        } // 越界了\n        else {\n          this.translateY($scrollEl, $pullHeight + \"px\", 0);\n          this.translateY($el, \"calc(-100% + \" + $pullHeight + \"px)\", 0);\n          this.rotateIcon($iconEl, 0, 150); // console.log('4.拉动到了底部');\n\n          this.isCan = true;\n          this.trigger('pull-bottom');\n        }\n      } // 中线上\n      else if ($data.$isDownPull) {\n        e.preventDefault();\n        this.translateY($scrollEl, '0px', 0);\n        this.translateY($el, 'calc(-100% + 0px)', 0);\n        this.rotateIcon($iconEl, 180, 0);\n      } // 其他\n      else {\n        this.clear();\n      }\n    },\n    onTouchEnd: function onTouchEnd(e) {\n      var _a = this.$data,\n          $startPageY = _a.$startPageY,\n          $pullHeight = _a.$pullHeight,\n          $refreshHeight = _a.$refreshHeight;\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - $startPageY;\n      var distance = Math.abs(difference); // 中线下\n\n      if (difference > 0) {\n        // 正常拉\n        if (distance < $pullHeight) {\n          if (distance >= $refreshHeight + 80) {\n            this.refresh();\n          } else {\n            // console.log('2.没有具备刷新条件弹回');\n            // self.events.trigger('pullRebound');\n            this.trigger('pull-rebound');\n            this.reset();\n          }\n        } // 越界了\n        else {\n          this.refresh();\n        }\n      } // 中线上\n      else {\n        this.clear();\n      }\n    },\n    onScroll: function onScroll(e) {\n      var $data = this.$data;\n      var $scrollEl = $data.$scrollEl;\n\n      if (e.target.scrollTop === 0) {\n        $data.$isTop = true;\n        $scrollEl.addEventListener('touchstart', this.onTouchStart);\n        $scrollEl.addEventListener('mousedown', this.onTouchStart);\n      } else if ($data.$isTop) {\n        $data.$isTop = false;\n        $scrollEl.removeEventListener('touchstart', this.onTouchStart);\n        $scrollEl.removeEventListener('mousedown', this.onTouchStart);\n      }\n    },\n    translateY: function translateY(el, y, duration) {\n      if (duration === void 0) {\n        duration = 0;\n      }\n\n      el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms ease\";\n      el.style.transform = el.style.webkitTransform = \"translate3d(0,\" + y + \",0)\";\n    },\n    rotateIcon: function rotateIcon(el, distance, duration) {\n      if (duration === void 0) {\n        duration = 0;\n      }\n\n      var deg = distance;\n      el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms linear\";\n      el.style.transform = el.style.webkitTransform = \"rotate(\" + deg + \"deg)\";\n    },\n    trigger: function trigger(action, params) {\n      this.$emit(action, params);\n    },\n    clear: function clear() {\n      this.removeEvents();\n      var $data = this.$data;\n      $data.$isDownPull = false;\n      $data.$isTop = true;\n      $data.$el.style.display = 'flex';\n      this.$refs.refreshElRef.style.display = 'none';\n      $data.$triggerInnerEl.style.display = 'flex';\n      this.rotateIcon($data.$iconEl, 180, 0);\n      $data.$scrollEl.style.overflowY = 'auto';\n      $data.$maskEl.style.display = 'none';\n    },\n    refresh: function refresh() {\n      var self = this;\n\n      function onTransitionEnd() {\n        $triggerInnerEl.style.display = 'none';\n        self.$refs.refreshElRef.style.display = 'block';\n        self.trigger('pull-refresh', self);\n        $scrollEl.removeEventListener('transitionend', onTransitionEnd);\n        self.preUpdateTime = moment_1.default().valueOf();\n      }\n\n      var _a = this.$data,\n          $maskEl = _a.$maskEl,\n          $scrollEl = _a.$scrollEl,\n          $el = _a.$el,\n          $iconEl = _a.$iconEl,\n          $refreshHeight = _a.$refreshHeight,\n          $triggerInnerEl = _a.$triggerInnerEl;\n      $maskEl.style.display = 'block';\n      this.removeEvents();\n      $scrollEl.addEventListener('transitionend', onTransitionEnd);\n      this.translateY($scrollEl, $refreshHeight + \"px\", 500);\n      this.translateY($el, \"calc(-100% + \" + $refreshHeight + \"px)\", 500);\n      this.rotateIcon($iconEl, 180, 300);\n    },\n    reset: function reset() {\n      var _a = this.$data,\n          $scrollEl = _a.$scrollEl,\n          $triggerInnerEl = _a.$triggerInnerEl,\n          $el = _a.$el;\n\n      function onTransitionEnd() {\n        $scrollEl.removeEventListener('transitionend', onTransitionEnd);\n        $triggerInnerEl.style.display = 'flex';\n      }\n\n      this.clear();\n      $scrollEl.addEventListener('transitionend', onTransitionEnd);\n      this.translateY($scrollEl, '0px', 200);\n      this.translateY($el, 'calc(-100% + 0px)', 200);\n    },\n    resetUpdateTime: function resetUpdateTime(updateTime) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.preUpdateTime = updateTime || moment_1.default().valueOf();\n        resolve();\n      });\n    },\n\n    /**\n     * getUpdateTime\n     * @return number\n     */\n    getUpdateTime: function getUpdateTime() {\n      return this.preUpdateTime;\n    }\n  },\n  created: function created() {\n    this.$renderMask();\n  },\n  mounted: function mounted() {\n    var _a = this,\n        $data = _a.$data,\n        $refs = _a.$refs;\n\n    $data.$el = $refs.elRef;\n    $data.$iconEl = $refs.iconElRef;\n    $data.$scrollEl = $refs.scrollElRef;\n    $data.$triggerInnerEl = $refs.triggerInnerElRef;\n    $data.$pullHeight = this.getPullHeight();\n    $data.$refreshHeight = $data.$el.clientHeight;\n    this.addEvents();\n  },\n  render: function render(h) {\n    var $slots = this.$slots;\n    return h(\"div\", {\n      \"class\": selectorPrefix\n    }, [h(\"div\", {\n      \"class\": this.getScrollClassName,\n      \"ref\": \"scrollElRef\"\n    }, [$slots.default]), h(\"div\", {\n      \"class\": selectorPrefix + \"-trigger\",\n      \"ref\": \"elRef\"\n    }, [h(\"div\", {\n      \"class\": selectorPrefix + \"-trigger-inner\",\n      \"ref\": \"triggerInnerElRef\"\n    }, [this.$renderIcon(h), this.$renderLabel(h), this.$renderUpdateTime(h)]), this.$renderLoadingAnimation(h)])]);\n  }\n};\nexports.default = PullRefresh;"],"names":["require","Object","defineProperty","exports","value","tslib_1","classnames_1","__importDefault","moment_1","adherev_util_intl_1","adherev_util_resource_1","selectorPrefix","defaultImg","PullRefresh","name","props","className","type","String","default","scrollClassName","pullHeight","Number","isShowUpdateTime","Boolean","updateTime","valueOf","updateTimeFormat","Dict","ResourceMomentFormat18","loadingAnimation","isRequired","renderIcon","renderCanLabel","renderLabel","renderLoadingAnimation","slots","emits","data","isCan","preUpdateTime","Date","getTime","$maskEl","$el","$iconEl","$scrollEl","$triggerInnerEl","$pullHeight","$refreshHeight","$startPageY","$isDownPull","$isTop","computed","getScrollClassName","this","methods","$renderIcon","h","$slots","icon","class","ref","attrs","src","alt","$renderLabel","canLabel","tv","label","$renderUpdateTime","_a","format","$renderLoadingAnimation","$renderMask","$data","document","querySelector","createElement","body","appendChild","getPullHeight","clientHeight","addEvents","addEventListener","onTouchStart","onScroll","removeEvents","removeEventListener","onTouchMove","onTouchEnd","e","trigger","changedTouches","pageY","style","overflow","difference","distance","Math","abs","preventDefault","translateY","rotateIcon","display","clear","refresh","reset","target","scrollTop","el","y","duration","transition","webkitTransition","transform","webkitTransform","deg","action","params","$emit","$refs","refreshElRef","overflowY","self","onTransitionEnd","resetUpdateTime","_this","Promise","resolve","getUpdateTime","created","mounted","elRef","iconElRef","scrollElRef","triggerInnerElRef","render"],"mappings":"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"}