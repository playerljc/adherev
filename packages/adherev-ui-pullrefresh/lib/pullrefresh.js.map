{"version":3,"file":"pullrefresh.js","sources":["pullrefresh.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar moment_1 = tslib_1.__importDefault(require(\"moment\"));\n\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\n\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\n\nvar selectorPrefix = 'adherev-ui-pullrefresh';\nvar defaultImg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHN0eWxlPSJ3aWR0aDozMDhweDtoZWlnaHQ6MzA4cHg7IiB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lvaIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAyNCAxMDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI2VjZjBmMSIgZD0iTTc5Ny43NjQ0MiAzMjYuNTU4NDFjLTguODg0MTk5LTE1LjU2MzMyNy0yNTIuODgwMS0yODYuODE5MDE5LTI2OC4zNzk1MTItMzEzLjU2NzQ4OS0xMC4xMzA1NDQtMTcuNDQ4ODIzLTM0LjI1ODQ5NS0xNy4xOTMxNjItNDQuMzg5MDM4IDBDNDczLjY1MDkzOSAzMi4yNjEzMjQgMjMwLjk5NzI1NSAzMDQuNjM1NTMgMjE4LjM3NDAyMyAzMjcuNDIxMjY0Yy05LjIzNTczMiAxNi41NTQwMTEgMC45NTg3MjcgMzguMzgxMDE5IDIxLjk1NDgzNyAzOC4zODEwMTlsMTE5LjkwNDczMSAwIDAgMjU2LjQ5MTMwMyAwIDM2Ljc4MzE0MSAyOTEuODM2MzU0IDAgMC0yOTMuMzA2NDAyIDEyMy41Nzk4NDkgMEM3OTQuNjk2NDk1IDM2NS43NzAzMjUgODA4Ljk0OTU2MiAzNDYuMTE2NDMxIDc5Ny43NjQ0MiAzMjYuNTU4NDF6IiAvPg0KPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMSIgZmlsbD0iI2VjZjBmMSIgZD0iTTM2MC4yMDE2MzMgNjg5LjY5MjA2MWwyOTIuMzE1NzE4IDAgMCA5MC45MTkyMzItMjkyLjMxNTcxOCAwIDAtOTAuOTE5MjMyWiIgLz4NCjxwYXRoIGNsYXNzPSJzdmdwYXRoIiBkYXRhLWluZGV4PSJwYXRoXzIiIGZpbGw9IiNlY2YwZjEiIGQ9Ik0zNjAuMjAxNjMzIDg0MC45MTUxOTFsMjkyLjMxNTcxOCAwIDAgNjAuNTkxNTE2LTI5Mi4zMTU3MTggMCAwLTYwLjU5MTUxNloiIC8+DQo8cGF0aCBjbGFzcz0ic3ZncGF0aCIgZGF0YS1pbmRleD0icGF0aF8zIiBmaWxsPSIjZWNmMGYxIiBkPSJNMzYwLjIwMTYzMyA5OTIuMzkzOTgybDI5MC40MzAyMjIgMCAwIDMwLjI5NTc1OC0yOTAuNDMwMjIyIDAgMC0zMC4yOTU3NThaIiAvPg0KDQo8L3N2Zz4NCg==';\nexports.default = {\n  name: 'adv-pullrefresh',\n  props: {\n    className: {\n      type: String,\n      default: ''\n    },\n    scrollClassName: {\n      type: String,\n      default: ''\n    },\n    pullHeight: {\n      type: Number,\n      default: 200\n    },\n    isShowUpdateTime: {\n      type: Boolean,\n      default: true\n    },\n    updateTime: {\n      type: Number,\n      default: moment_1.default().valueOf()\n    },\n    updateTimeFormat: {\n      type: String,\n      default: adherev_util_resource_1.default.Dict.value.ResourceMomentFormatFull.value\n    },\n    loadingAnimation: {\n      type: String,\n      default: 'la-ball-circus la-dark'\n    }\n  },\n  data: function data() {\n    return {\n      isCan: false,\n      $maskEl: null,\n      $el: null,\n      $iconEl: null,\n      $scrollEl: null,\n      $triggerInnerEl: null,\n      $pullHeight: 200,\n      $refreshHeight: 0,\n      $startPageY: null,\n      $isDownPull: false,\n      $isTop: true\n    };\n  },\n  computed: {\n    getScrollClassName: function getScrollClassName() {\n      var scrollClassName = this.scrollClassName;\n      return classnames_1.default.apply(void 0, tslib_1.__spreadArrays([selectorPrefix + \"-scroll\"], scrollClassName.split(/\\s+/)));\n    }\n  },\n  methods: {\n    renderIcon: function renderIcon(h) {\n      var $slots = this.$slots;\n      return $slots.icon ? h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon\"\n      }, [h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon-inner\",\n        \"ref\": \"iconElRef\"\n      }, [$slots.icon])]) : h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon\"\n      }, [h(\"img\", {\n        \"class\": selectorPrefix + \"-trigger-icon-inner\",\n        \"attrs\": {\n          \"src\": defaultImg,\n          \"alt\": \"\"\n        },\n        \"ref\": \"iconElRef\"\n      })]);\n    },\n    renderLabel: function renderLabel(h) {\n      var _a = this,\n          $slots = _a.$slots,\n          isCan = _a.isCan;\n\n      return h(\"p\", {\n        \"class\": selectorPrefix + \"-trigger-label\"\n      }, [isCan ? $slots.canLabel || h({\n        template: \"<span>\" + adherev_util_intl_1.default.tv('松开刷新') + \"</span>\"\n      }) : $slots.label || h({\n        template: \"<span>\" + adherev_util_intl_1.default.tv('下拉刷新') + \"</span>\"\n      })]);\n    },\n    renderUpdateTime: function renderUpdateTime(h) {\n      var _a = this,\n          isShowUpdateTime = _a.isShowUpdateTime,\n          updateTimeFormat = _a.updateTimeFormat,\n          preUpdateTime = _a.preUpdateTime;\n\n      return isShowUpdateTime ? h(\"p\", {\n        \"class\": selectorPrefix + \"-trigger-update\"\n      }, [adherev_util_intl_1.default.tv('更新时间'), \"\\uFF1A\", h(\"span\", {\n        \"class\": selectorPrefix + \"-trigger-update-label\"\n      }, [moment_1.default(preUpdateTime).format(updateTimeFormat)])]) : null;\n    },\n    renderLoadingAnimation: function renderLoadingAnimation(h) {\n      var _a = this,\n          $slots = _a.$slots,\n          loadingAnimation = _a.loadingAnimation;\n\n      return loadingAnimation ? h(\"div\", {\n        \"class\": classnames_1.default.apply(void 0, tslib_1.__spreadArrays([selectorPrefix + \"-trigger-refresh\"], (loadingAnimation || '').split(/\\s+/))),\n        \"ref\": \"refreshElRef\"\n      }, [h(\"div\"), h(\"div\"), h(\"div\"), h(\"div\"), h(\"div\")]) : h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-refresh\",\n        \"ref\": \"refreshElRef\"\n      }, [$slots.loadingAnimation]);\n    },\n    renderMask: function renderMask() {\n      var $data = this.$data;\n      $data.$maskEl = document.querySelector(\".\" + selectorPrefix + \"-mask\");\n\n      if (!$data.$maskEl) {\n        $data.$maskEl = document.createElement('div');\n        $data.$maskEl.className = selectorPrefix + \"-mask\";\n        document.body.appendChild($data.$maskEl);\n      }\n    },\n\n    /**\n     * getPullHeight\n     * @private\n     * @return number\n     */\n    getPullHeight: function getPullHeight() {\n      var _a = this,\n          $data = _a.$data,\n          pullHeight = _a.pullHeight;\n\n      if (pullHeight <= 0) {\n        return 200;\n      } else {\n        if (pullHeight > $data.$scrollEl.clientHeight) {\n          return $data.$scrollEl.clientHeight;\n        } else {\n          return pullHeight;\n        }\n      }\n    },\n    addEvents: function addEvents() {\n      var $scrollEl = this.$data.$scrollEl;\n      $scrollEl.addEventListener('touchstart', this.onTouchStart);\n      $scrollEl.addEventListener('mousedown', this.onTouchStart);\n      $scrollEl.addEventListener('scroll', this.onScroll);\n    },\n    removeEvents: function removeEvents() {\n      var $scrollEl = this.$data.$scrollEl;\n      $scrollEl.removeEventListener('mousemove', this.onTouchMove);\n      $scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n      $scrollEl.removeEventListener('touchmove', this.onTouchMove);\n      $scrollEl.removeEventListener('touchend', this.onTouchEnd);\n    },\n    onTouchStart: function onTouchStart(e) {\n      var $data = this.$data;\n      this.trigger('pull-start');\n      $data.$startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var $scrollEl = $data.$scrollEl;\n      $scrollEl.addEventListener('touchmove', this.onTouchMove);\n      $scrollEl.addEventListener('mousemove', this.onTouchMove);\n      $scrollEl.addEventListener('touchend', this.onTouchEnd);\n      $scrollEl.addEventListener('mouseup', this.onTouchEnd);\n    },\n    onTouchMove: function onTouchMove(e) {\n      var $data = this.$data;\n      var $scrollEl = $data.$scrollEl,\n          $el = $data.$el,\n          $startPageY = $data.$startPageY,\n          $refreshHeight = $data.$refreshHeight,\n          $iconEl = $data.$iconEl,\n          $pullHeight = $data.$pullHeight;\n      $scrollEl.style.overflow = 'hidden';\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - $startPageY;\n      var distance = Math.abs(difference); // 中线下\n\n      if (difference > 0) {\n        e.preventDefault();\n        $data.$isDownPull = true; // 正常拉\n\n        if (distance < $data.$pullHeight) {\n          this.translateY($scrollEl, distance + \"px\", 0);\n          this.translateY($el, \"calc(-100% + \" + distance + \"px)\", 0); // 具备刷新条件\n\n          if (distance >= $refreshHeight + 80) {\n            // console.log('3.具备刷新条件');\n            this.rotateIcon($iconEl, 0, 150);\n            this.isCan = true;\n            this.trigger('pull-can-refresh');\n          } // 不具备刷新条件\n          else {\n            this.rotateIcon($iconEl, 180, 150);\n            this.isCan = false;\n          }\n\n          $el.style.display = 'flex';\n        } // 越界了\n        else {\n          this.translateY($scrollEl, $pullHeight + \"px\", 0);\n          this.translateY($el, \"calc(-100% + \" + $pullHeight + \"px)\", 0);\n          this.rotateIcon($iconEl, 0, 150); // console.log('4.拉动到了底部');\n\n          this.isCan = true;\n          this.trigger('pull-bottom');\n        }\n      } // 中线上\n      else if ($data.$isDownPull) {\n        e.preventDefault();\n        this.translateY($scrollEl, '0px', 0);\n        this.translateY($el, 'calc(-100% + 0px)', 0);\n        this.rotateIcon($iconEl, 180, 0);\n      } // 其他\n      else {\n        this.clear();\n      }\n    },\n    onTouchEnd: function onTouchEnd(e) {\n      var _a = this.$data,\n          $startPageY = _a.$startPageY,\n          $pullHeight = _a.$pullHeight,\n          $refreshHeight = _a.$refreshHeight;\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - $startPageY;\n      var distance = Math.abs(difference); // 中线下\n\n      if (difference > 0) {\n        // 正常拉\n        if (distance < $pullHeight) {\n          if (distance >= $refreshHeight + 80) {\n            this.refresh();\n          } else {\n            // console.log('2.没有具备刷新条件弹回');\n            // self.events.trigger('pullRebound');\n            this.trigger('pull-rebound');\n            this.reset();\n          }\n        } // 越界了\n        else {\n          this.refresh();\n        }\n      } // 中线上\n      else {\n        this.clear();\n      }\n    },\n    onScroll: function onScroll(e) {\n      var $data = this.$data;\n      var $scrollEl = $data.$scrollEl;\n\n      if (e.target.scrollTop === 0) {\n        $data.$isTop = true;\n        $scrollEl.addEventListener('touchstart', this.onTouchStart);\n        $scrollEl.addEventListener('mousedown', this.onTouchStart);\n      } else if ($data.$isTop) {\n        $data.$isTop = false;\n        $scrollEl.removeEventListener('touchstart', this.onTouchStart);\n        $scrollEl.removeEventListener('mousedown', this.onTouchStart);\n      }\n    },\n    translateY: function translateY(el, y, duration) {\n      if (duration === void 0) {\n        duration = 0;\n      }\n\n      el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms ease\";\n      el.style.transform = el.style.webkitTransform = \"translate3d(0,\" + y + \",0)\";\n    },\n    rotateIcon: function rotateIcon(el, distance, duration) {\n      if (duration === void 0) {\n        duration = 0;\n      }\n\n      var deg = distance;\n      el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms linear\";\n      el.style.transform = el.style.webkitTransform = \"rotate(\" + deg + \"deg)\";\n    },\n    trigger: function trigger(action, params) {\n      this.$emit(action, params);\n    },\n    clear: function clear() {\n      this.removeEvents();\n      var $data = this.$data;\n      $data.$isDownPull = false;\n      $data.$isTop = true;\n      $data.$el.style.display = 'flex';\n      this.$refs.refreshElRef.style.display = 'none';\n      $data.$triggerInnerEl.style.display = 'flex';\n      this.rotateIcon($data.$iconEl, 180, 0);\n      $data.$scrollEl.style.overflowY = 'auto';\n      $data.$maskEl.style.display = 'none';\n    },\n    refresh: function refresh() {\n      var self = this;\n\n      function onTransitionEnd() {\n        $triggerInnerEl.style.display = 'none';\n        self.$refs.refreshElRef.style.display = 'block';\n        self.trigger('pull-refresh', self);\n        $scrollEl.removeEventListener('transitionend', onTransitionEnd);\n        self.preUpdateTime = moment_1.default().valueOf();\n      }\n\n      var _a = this.$data,\n          $maskEl = _a.$maskEl,\n          $scrollEl = _a.$scrollEl,\n          $el = _a.$el,\n          $iconEl = _a.$iconEl,\n          $refreshHeight = _a.$refreshHeight,\n          $triggerInnerEl = _a.$triggerInnerEl;\n      $maskEl.style.display = 'block';\n      this.removeEvents();\n      $scrollEl.addEventListener('transitionend', onTransitionEnd);\n      this.translateY($scrollEl, $refreshHeight + \"px\", 500);\n      this.translateY($el, \"calc(-100% + \" + $refreshHeight + \"px)\", 500);\n      this.rotateIcon($iconEl, 180, 300);\n    },\n    reset: function reset() {\n      var _a = this.$data,\n          $scrollEl = _a.$scrollEl,\n          $triggerInnerEl = _a.$triggerInnerEl,\n          $el = _a.$el;\n\n      function onTransitionEnd() {\n        $scrollEl.removeEventListener('transitionend', onTransitionEnd);\n        $triggerInnerEl.style.display = 'flex';\n      }\n\n      this.clear();\n      $scrollEl.addEventListener('transitionend', onTransitionEnd);\n      this.translateY($scrollEl, '0px', 200);\n      this.translateY($el, 'calc(-100% + 0px)', 200);\n    },\n    resetUpdateTime: function resetUpdateTime(updateTime) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.preUpdateTime = updateTime || moment_1.default().valueOf();\n        resolve();\n      });\n    },\n\n    /**\n     * getUpdateTime\n     * @return number\n     */\n    getUpdateTime: function getUpdateTime() {\n      return this.preUpdateTime;\n    }\n  },\n  created: function created() {\n    this.renderMask();\n  },\n  mounted: function mounted() {\n    var _a = this,\n        $data = _a.$data,\n        $refs = _a.$refs;\n\n    $data.$el = $refs.elRef;\n    $data.$iconEl = $refs.iconElRef;\n    $data.$scrollEl = $refs.scrollElRef;\n    $data.$triggerInnerEl = $refs.triggerInnerElRef;\n    $data.$pullHeight = this.getPullHeight();\n    $data.$refreshHeight = $data.$el.clientHeight;\n    this.addEvents();\n  },\n  render: function render(h) {\n    var $slots = this.$slots;\n    return h(\"div\", {\n      \"class\": selectorPrefix\n    }, [h(\"div\", {\n      \"class\": this.getScrollClassName,\n      \"ref\": \"scrollElRef\"\n    }, [$slots.default]), h(\"div\", {\n      \"class\": selectorPrefix + \"-trigger\",\n      \"ref\": \"elRef\"\n    }, [h(\"div\", {\n      \"class\": selectorPrefix + \"-trigger-inner\",\n      \"ref\": \"triggerInnerElRef\"\n    }, [this.renderIcon(h), this.renderLabel(h), this.renderUpdateTime(h)]), this.renderLoadingAnimation(h)])]);\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","classnames_1","__importDefault","moment_1","adherev_util_intl_1","adherev_util_resource_1","selectorPrefix","defaultImg","default","name","props","className","type","String","scrollClassName","pullHeight","Number","isShowUpdateTime","Boolean","updateTime","valueOf","updateTimeFormat","Dict","ResourceMomentFormatFull","loadingAnimation","data","isCan","$maskEl","$el","$iconEl","$scrollEl","$triggerInnerEl","$pullHeight","$refreshHeight","$startPageY","$isDownPull","$isTop","computed","getScrollClassName","this","apply","__spreadArrays","split","methods","renderIcon","h","$slots","icon","class","ref","attrs","src","alt","renderLabel","canLabel","template","tv","label","renderUpdateTime","_a","preUpdateTime","format","renderLoadingAnimation","renderMask","$data","document","querySelector","createElement","body","appendChild","getPullHeight","clientHeight","addEvents","addEventListener","onTouchStart","onScroll","removeEvents","removeEventListener","onTouchMove","onTouchEnd","e","trigger","changedTouches","pageY","style","overflow","difference","distance","Math","abs","preventDefault","translateY","rotateIcon","display","clear","refresh","reset","target","scrollTop","el","y","duration","transition","webkitTransition","transform","webkitTransform","deg","action","params","$emit","$refs","refreshElRef","overflowY","self","onTransitionEnd","resetUpdateTime","_this","Promise","resolve","getUpdateTime","created","mounted","elRef","iconElRef","scrollElRef","triggerInnerElRef","render"],"mappings":"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"}