import{createTextVNode as _createTextVNode,createVNode as _createVNode}from"vue";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.promise.js";import{__spreadArray}from"tslib";import Intl from"@baifendian/adherev-util-intl";import Resource from"@baifendian/adherev-util-resource";import classNames from"classnames";import moment from"moment";import{computed,defineComponent,onMounted,ref}from"vue";import{bool,number,object,string}from"vue-types";var selectorPrefix="adherev-ui-pullrefresh",defaultImg="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHN0eWxlPSJ3aWR0aDozMDhweDtoZWlnaHQ6MzA4cHg7IiB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lvaIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAyNCAxMDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI2VjZjBmMSIgZD0iTTc5Ny43NjQ0MiAzMjYuNTU4NDFjLTguODg0MTk5LTE1LjU2MzMyNy0yNTIuODgwMS0yODYuODE5MDE5LTI2OC4zNzk1MTItMzEzLjU2NzQ4OS0xMC4xMzA1NDQtMTcuNDQ4ODIzLTM0LjI1ODQ5NS0xNy4xOTMxNjItNDQuMzg5MDM4IDBDNDczLjY1MDkzOSAzMi4yNjEzMjQgMjMwLjk5NzI1NSAzMDQuNjM1NTMgMjE4LjM3NDAyMyAzMjcuNDIxMjY0Yy05LjIzNTczMiAxNi41NTQwMTEgMC45NTg3MjcgMzguMzgxMDE5IDIxLjk1NDgzNyAzOC4zODEwMTlsMTE5LjkwNDczMSAwIDAgMjU2LjQ5MTMwMyAwIDM2Ljc4MzE0MSAyOTEuODM2MzU0IDAgMC0yOTMuMzA2NDAyIDEyMy41Nzk4NDkgMEM3OTQuNjk2NDk1IDM2NS43NzAzMjUgODA4Ljk0OTU2MiAzNDYuMTE2NDMxIDc5Ny43NjQ0MiAzMjYuNTU4NDF6IiAvPg0KPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMSIgZmlsbD0iI2VjZjBmMSIgZD0iTTM2MC4yMDE2MzMgNjg5LjY5MjA2MWwyOTIuMzE1NzE4IDAgMCA5MC45MTkyMzItMjkyLjMxNTcxOCAwIDAtOTAuOTE5MjMyWiIgLz4NCjxwYXRoIGNsYXNzPSJzdmdwYXRoIiBkYXRhLWluZGV4PSJwYXRoXzIiIGZpbGw9IiNlY2YwZjEiIGQ9Ik0zNjAuMjAxNjMzIDg0MC45MTUxOTFsMjkyLjMxNTcxOCAwIDAgNjAuNTkxNTE2LTI5Mi4zMTU3MTggMCAwLTYwLjU5MTUxNloiIC8+DQo8cGF0aCBjbGFzcz0ic3ZncGF0aCIgZGF0YS1pbmRleD0icGF0aF8zIiBmaWxsPSIjZWNmMGYxIiBkPSJNMzYwLjIwMTYzMyA5OTIuMzkzOTgybDI5MC40MzAyMjIgMCAwIDMwLjI5NTc1OC0yOTAuNDMwMjIyIDAgMC0zMC4yOTU3NThaIiAvPg0KDQo8L3N2Zz4NCg==",pullRefreshProps={scrollClassName:string().def(""),scrollStyle:object().def({}),pullHeight:number().def(200),isShowUpdateTime:bool().def(!0),updateTime:number().def(moment().valueOf()),updateTimeFormat:string().def(Resource.Dict.value.ResourceMomentFormatFull.value),loadingAnimation:string().def("la-ball-circus la-dark")};export default defineComponent({name:"adv-pullrefresh",props:pullRefreshProps,emits:["pull-start","pull-can-refresh","pull-bottom","pull-rebound","pull-refresh"],setup:function(r,e){var l=e.slots,e=(e.emit,e.expose),t=ref(),o=ref(),i=ref(),c=ref(),a=ref(),M=!1,s=null,n=null,d=computed(function(){return classNames.apply(void 0,__spreadArray(["".concat(selectorPrefix,"-scroll")],(r.scrollClassName||"").split(/\s+/),!1))});return onMounted(function(){}),e({resetUpdateTime:function(r){return new Promise(function(e){s=r||moment().valueOf(),e(null)})},getUpdateTime:function(){return s}}),(n=document.querySelector(".".concat(selectorPrefix,"-mask")))||((n=document.createElement("div")).className="".concat(selectorPrefix,"-mask"),document.body.appendChild(n)),function(){var e;return _createVNode("div",{class:selectorPrefix},[_createVNode("div",{class:d.value,ref:i},[null===(e=null==l?void 0:l.default)||void 0===e?void 0:e.call(l)]),_createVNode("div",{class:"".concat(selectorPrefix,"-trigger"),ref:a},[_createVNode("div",{class:"".concat(selectorPrefix,"-trigger-inner"),ref:c},[l.icon?_createVNode("div",{class:"".concat(selectorPrefix,"-trigger-icon")},[_createVNode("div",{class:"".concat(selectorPrefix,"-trigger-icon-inner"),ref:t},[l.icon()])]):_createVNode("div",{class:"".concat(selectorPrefix,"-trigger-icon")},[_createVNode("img",{class:"".concat(selectorPrefix,"-trigger-icon-inner"),src:defaultImg,alt:"",ref:t},null)]),_createVNode("p",{class:"".concat(selectorPrefix,"-trigger-label")},[M?l.canLabel||_createVNode("span",null,[Intl.tv("松开刷新")]):l.label||_createVNode("span",null,[Intl.tv("下拉刷新")])]),r.isShowUpdateTime?_createVNode("p",{class:"".concat(selectorPrefix,"-trigger-update")},[Intl.tv("更新时间"),_createTextVNode("："),_createVNode("span",{class:"".concat(selectorPrefix,"-trigger-update-label")},[moment(s).format(r.updateTimeFormat)])]):null]),r.loadingAnimation?_createVNode("div",{class:classNames.apply(void 0,__spreadArray(["".concat(selectorPrefix,"-trigger-refresh")],(r.loadingAnimation||"").split(/\s+/),!1)),ref:o},[_createVNode("div",null,null),_createVNode("div",null,null),_createVNode("div",null,null),_createVNode("div",null,null),_createVNode("div",null,null)]):_createVNode("div",{class:"".concat(selectorPrefix,"-trigger-refresh"),ref:o},[null===(e=null==l?void 0:l.loadingAnimation)||void 0===e?void 0:e.call(l)])])])}}});
//# sourceMappingURL=pullrefresh.js.map
