{"version":3,"file":"pullrefresh.js","sources":["pullrefresh.js"],"sourcesContent":["import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { __spreadArrays } from \"tslib\";\nimport classNames from 'classnames';\nimport moment from 'moment';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Resource from '@baifendian/adherev-util-resource';\nvar selectorPrefix = 'adherev-ui-pullrefresh';\nvar defaultImg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHN0eWxlPSJ3aWR0aDozMDhweDtoZWlnaHQ6MzA4cHg7IiB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lvaIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAyNCAxMDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI2VjZjBmMSIgZD0iTTc5Ny43NjQ0MiAzMjYuNTU4NDFjLTguODg0MTk5LTE1LjU2MzMyNy0yNTIuODgwMS0yODYuODE5MDE5LTI2OC4zNzk1MTItMzEzLjU2NzQ4OS0xMC4xMzA1NDQtMTcuNDQ4ODIzLTM0LjI1ODQ5NS0xNy4xOTMxNjItNDQuMzg5MDM4IDBDNDczLjY1MDkzOSAzMi4yNjEzMjQgMjMwLjk5NzI1NSAzMDQuNjM1NTMgMjE4LjM3NDAyMyAzMjcuNDIxMjY0Yy05LjIzNTczMiAxNi41NTQwMTEgMC45NTg3MjcgMzguMzgxMDE5IDIxLjk1NDgzNyAzOC4zODEwMTlsMTE5LjkwNDczMSAwIDAgMjU2LjQ5MTMwMyAwIDM2Ljc4MzE0MSAyOTEuODM2MzU0IDAgMC0yOTMuMzA2NDAyIDEyMy41Nzk4NDkgMEM3OTQuNjk2NDk1IDM2NS43NzAzMjUgODA4Ljk0OTU2MiAzNDYuMTE2NDMxIDc5Ny43NjQ0MiAzMjYuNTU4NDF6IiAvPg0KPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMSIgZmlsbD0iI2VjZjBmMSIgZD0iTTM2MC4yMDE2MzMgNjg5LjY5MjA2MWwyOTIuMzE1NzE4IDAgMCA5MC45MTkyMzItMjkyLjMxNTcxOCAwIDAtOTAuOTE5MjMyWiIgLz4NCjxwYXRoIGNsYXNzPSJzdmdwYXRoIiBkYXRhLWluZGV4PSJwYXRoXzIiIGZpbGw9IiNlY2YwZjEiIGQ9Ik0zNjAuMjAxNjMzIDg0MC45MTUxOTFsMjkyLjMxNTcxOCAwIDAgNjAuNTkxNTE2LTI5Mi4zMTU3MTggMCAwLTYwLjU5MTUxNloiIC8+DQo8cGF0aCBjbGFzcz0ic3ZncGF0aCIgZGF0YS1pbmRleD0icGF0aF8zIiBmaWxsPSIjZWNmMGYxIiBkPSJNMzYwLjIwMTYzMyA5OTIuMzkzOTgybDI5MC40MzAyMjIgMCAwIDMwLjI5NTc1OC0yOTAuNDMwMjIyIDAgMC0zMC4yOTU3NThaIiAvPg0KDQo8L3N2Zz4NCg==';\nvar PullRefresh = {\n  name: 'adv-pullrefresh',\n  props: {\n    className: {\n      type: String,\n      default: ''\n    },\n    scrollClassName: {\n      type: String,\n      default: ''\n    },\n    pullHeight: {\n      type: Number,\n      default: 200\n    },\n    isShowUpdateTime: {\n      type: Boolean,\n      default: true\n    },\n    updateTime: {\n      type: Number,\n      default: moment().valueOf()\n    },\n    updateTimeFormat: {\n      type: String,\n      default: Resource.Dict.value.ResourceMomentFormatFull.value\n    },\n    loadingAnimation: {\n      type: String,\n      default: 'la-ball-circus la-dark'\n    }\n  },\n  data: function data() {\n    return {\n      isCan: false,\n      $maskEl: null,\n      $el: null,\n      $iconEl: null,\n      $scrollEl: null,\n      $triggerInnerEl: null,\n      $pullHeight: 200,\n      $refreshHeight: 0,\n      $startPageY: null,\n      $isDownPull: false,\n      $isTop: true\n    };\n  },\n  computed: {\n    getScrollClassName: function getScrollClassName() {\n      var scrollClassName = this.scrollClassName;\n      return classNames.apply(void 0, __spreadArrays([selectorPrefix + \"-scroll\"], scrollClassName.split(/\\s+/)));\n    }\n  },\n  methods: {\n    renderIcon: function renderIcon(h) {\n      var $slots = this.$slots;\n      return $slots.icon ? h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon\"\n      }, [h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon-inner\",\n        \"ref\": \"iconElRef\"\n      }, [$slots.icon])]) : h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-icon\"\n      }, [h(\"img\", {\n        \"class\": selectorPrefix + \"-trigger-icon-inner\",\n        \"attrs\": {\n          \"src\": defaultImg,\n          \"alt\": \"\"\n        },\n        \"ref\": \"iconElRef\"\n      })]);\n    },\n    renderLabel: function renderLabel(h) {\n      var _a = this,\n          $slots = _a.$slots,\n          isCan = _a.isCan;\n\n      return h(\"p\", {\n        \"class\": selectorPrefix + \"-trigger-label\"\n      }, [isCan ? $slots.canLabel || h({\n        template: \"<span>\" + Intl.tv('松开刷新') + \"</span>\"\n      }) : $slots.label || h({\n        template: \"<span>\" + Intl.tv('下拉刷新') + \"</span>\"\n      })]);\n    },\n    renderUpdateTime: function renderUpdateTime(h) {\n      var _a = this,\n          isShowUpdateTime = _a.isShowUpdateTime,\n          updateTimeFormat = _a.updateTimeFormat,\n          preUpdateTime = _a.preUpdateTime;\n\n      return isShowUpdateTime ? h(\"p\", {\n        \"class\": selectorPrefix + \"-trigger-update\"\n      }, [Intl.tv('更新时间'), \"\\uFF1A\", h(\"span\", {\n        \"class\": selectorPrefix + \"-trigger-update-label\"\n      }, [moment(preUpdateTime).format(updateTimeFormat)])]) : null;\n    },\n    renderLoadingAnimation: function renderLoadingAnimation(h) {\n      var _a = this,\n          $slots = _a.$slots,\n          loadingAnimation = _a.loadingAnimation;\n\n      return loadingAnimation ? h(\"div\", {\n        \"class\": classNames.apply(void 0, __spreadArrays([selectorPrefix + \"-trigger-refresh\"], (loadingAnimation || '').split(/\\s+/))),\n        \"ref\": \"refreshElRef\"\n      }, [h(\"div\"), h(\"div\"), h(\"div\"), h(\"div\"), h(\"div\")]) : h(\"div\", {\n        \"class\": selectorPrefix + \"-trigger-refresh\",\n        \"ref\": \"refreshElRef\"\n      }, [$slots.loadingAnimation]);\n    },\n    renderMask: function renderMask() {\n      var $data = this.$data;\n      $data.$maskEl = document.querySelector(\".\" + selectorPrefix + \"-mask\");\n\n      if (!$data.$maskEl) {\n        $data.$maskEl = document.createElement('div');\n        $data.$maskEl.className = selectorPrefix + \"-mask\";\n        document.body.appendChild($data.$maskEl);\n      }\n    },\n\n    /**\n     * getPullHeight\n     * @private\n     * @return number\n     */\n    getPullHeight: function getPullHeight() {\n      var _a = this,\n          $data = _a.$data,\n          pullHeight = _a.pullHeight;\n\n      if (pullHeight <= 0) {\n        return 200;\n      } else {\n        if (pullHeight > $data.$scrollEl.clientHeight) {\n          return $data.$scrollEl.clientHeight;\n        } else {\n          return pullHeight;\n        }\n      }\n    },\n    addEvents: function addEvents() {\n      var $scrollEl = this.$data.$scrollEl;\n      $scrollEl.addEventListener('touchstart', this.onTouchStart);\n      $scrollEl.addEventListener('mousedown', this.onTouchStart);\n      $scrollEl.addEventListener('scroll', this.onScroll);\n    },\n    removeEvents: function removeEvents() {\n      var $scrollEl = this.$data.$scrollEl;\n      $scrollEl.removeEventListener('mousemove', this.onTouchMove);\n      $scrollEl.removeEventListener('mouseup', this.onTouchEnd);\n      $scrollEl.removeEventListener('touchmove', this.onTouchMove);\n      $scrollEl.removeEventListener('touchend', this.onTouchEnd);\n    },\n    onTouchStart: function onTouchStart(e) {\n      var $data = this.$data;\n      this.trigger('pull-start');\n      $data.$startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var $scrollEl = $data.$scrollEl;\n      $scrollEl.addEventListener('touchmove', this.onTouchMove);\n      $scrollEl.addEventListener('mousemove', this.onTouchMove);\n      $scrollEl.addEventListener('touchend', this.onTouchEnd);\n      $scrollEl.addEventListener('mouseup', this.onTouchEnd);\n    },\n    onTouchMove: function onTouchMove(e) {\n      var $data = this.$data;\n      var $scrollEl = $data.$scrollEl,\n          $el = $data.$el,\n          $startPageY = $data.$startPageY,\n          $refreshHeight = $data.$refreshHeight,\n          $iconEl = $data.$iconEl,\n          $pullHeight = $data.$pullHeight;\n      $scrollEl.style.overflow = 'hidden';\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - $startPageY;\n      var distance = Math.abs(difference); // 中线下\n\n      if (difference > 0) {\n        e.preventDefault();\n        $data.$isDownPull = true; // 正常拉\n\n        if (distance < $data.$pullHeight) {\n          this.translateY($scrollEl, distance + \"px\", 0);\n          this.translateY($el, \"calc(-100% + \" + distance + \"px)\", 0); // 具备刷新条件\n\n          if (distance >= $refreshHeight + 80) {\n            // console.log('3.具备刷新条件');\n            this.rotateIcon($iconEl, 0, 150);\n            this.isCan = true;\n            this.trigger('pull-can-refresh');\n          } // 不具备刷新条件\n          else {\n            this.rotateIcon($iconEl, 180, 150);\n            this.isCan = false;\n          }\n\n          $el.style.display = 'flex';\n        } // 越界了\n        else {\n          this.translateY($scrollEl, $pullHeight + \"px\", 0);\n          this.translateY($el, \"calc(-100% + \" + $pullHeight + \"px)\", 0);\n          this.rotateIcon($iconEl, 0, 150); // console.log('4.拉动到了底部');\n\n          this.isCan = true;\n          this.trigger('pull-bottom');\n        }\n      } // 中线上\n      else if ($data.$isDownPull) {\n        e.preventDefault();\n        this.translateY($scrollEl, '0px', 0);\n        this.translateY($el, 'calc(-100% + 0px)', 0);\n        this.rotateIcon($iconEl, 180, 0);\n      } // 其他\n      else {\n        this.clear();\n      }\n    },\n    onTouchEnd: function onTouchEnd(e) {\n      var _a = this.$data,\n          $startPageY = _a.$startPageY,\n          $pullHeight = _a.$pullHeight,\n          $refreshHeight = _a.$refreshHeight;\n      var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\n      var difference = targetY - $startPageY;\n      var distance = Math.abs(difference); // 中线下\n\n      if (difference > 0) {\n        // 正常拉\n        if (distance < $pullHeight) {\n          if (distance >= $refreshHeight + 80) {\n            this.refresh();\n          } else {\n            // console.log('2.没有具备刷新条件弹回');\n            // self.events.trigger('pullRebound');\n            this.trigger('pull-rebound');\n            this.reset();\n          }\n        } // 越界了\n        else {\n          this.refresh();\n        }\n      } // 中线上\n      else {\n        this.clear();\n      }\n    },\n    onScroll: function onScroll(e) {\n      var $data = this.$data;\n      var $scrollEl = $data.$scrollEl;\n\n      if (e.target.scrollTop === 0) {\n        $data.$isTop = true;\n        $scrollEl.addEventListener('touchstart', this.onTouchStart);\n        $scrollEl.addEventListener('mousedown', this.onTouchStart);\n      } else if ($data.$isTop) {\n        $data.$isTop = false;\n        $scrollEl.removeEventListener('touchstart', this.onTouchStart);\n        $scrollEl.removeEventListener('mousedown', this.onTouchStart);\n      }\n    },\n    translateY: function translateY(el, y, duration) {\n      if (duration === void 0) {\n        duration = 0;\n      }\n\n      el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms ease\";\n      el.style.transform = el.style.webkitTransform = \"translate3d(0,\" + y + \",0)\";\n    },\n    rotateIcon: function rotateIcon(el, distance, duration) {\n      if (duration === void 0) {\n        duration = 0;\n      }\n\n      var deg = distance;\n      el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms linear\";\n      el.style.transform = el.style.webkitTransform = \"rotate(\" + deg + \"deg)\";\n    },\n    trigger: function trigger(action, params) {\n      this.$emit(action, params);\n    },\n    clear: function clear() {\n      this.removeEvents();\n      var $data = this.$data;\n      $data.$isDownPull = false;\n      $data.$isTop = true;\n      $data.$el.style.display = 'flex';\n      this.$refs.refreshElRef.style.display = 'none';\n      $data.$triggerInnerEl.style.display = 'flex';\n      this.rotateIcon($data.$iconEl, 180, 0);\n      $data.$scrollEl.style.overflowY = 'auto';\n      $data.$maskEl.style.display = 'none';\n    },\n    refresh: function refresh() {\n      var self = this;\n\n      function onTransitionEnd() {\n        $triggerInnerEl.style.display = 'none';\n        self.$refs.refreshElRef.style.display = 'block';\n        self.trigger('pull-refresh', self);\n        $scrollEl.removeEventListener('transitionend', onTransitionEnd);\n        self.preUpdateTime = moment().valueOf();\n      }\n\n      var _a = this.$data,\n          $maskEl = _a.$maskEl,\n          $scrollEl = _a.$scrollEl,\n          $el = _a.$el,\n          $iconEl = _a.$iconEl,\n          $refreshHeight = _a.$refreshHeight,\n          $triggerInnerEl = _a.$triggerInnerEl;\n      $maskEl.style.display = 'block';\n      this.removeEvents();\n      $scrollEl.addEventListener('transitionend', onTransitionEnd);\n      this.translateY($scrollEl, $refreshHeight + \"px\", 500);\n      this.translateY($el, \"calc(-100% + \" + $refreshHeight + \"px)\", 500);\n      this.rotateIcon($iconEl, 180, 300);\n    },\n    reset: function reset() {\n      var _a = this.$data,\n          $scrollEl = _a.$scrollEl,\n          $triggerInnerEl = _a.$triggerInnerEl,\n          $el = _a.$el;\n\n      function onTransitionEnd() {\n        $scrollEl.removeEventListener('transitionend', onTransitionEnd);\n        $triggerInnerEl.style.display = 'flex';\n      }\n\n      this.clear();\n      $scrollEl.addEventListener('transitionend', onTransitionEnd);\n      this.translateY($scrollEl, '0px', 200);\n      this.translateY($el, 'calc(-100% + 0px)', 200);\n    },\n    resetUpdateTime: function resetUpdateTime(updateTime) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.preUpdateTime = updateTime || moment().valueOf();\n        resolve();\n      });\n    },\n\n    /**\n     * getUpdateTime\n     * @return number\n     */\n    getUpdateTime: function getUpdateTime() {\n      return this.preUpdateTime;\n    }\n  },\n  created: function created() {\n    this.renderMask();\n  },\n  mounted: function mounted() {\n    var _a = this,\n        $data = _a.$data,\n        $refs = _a.$refs;\n\n    $data.$el = $refs.elRef;\n    $data.$iconEl = $refs.iconElRef;\n    $data.$scrollEl = $refs.scrollElRef;\n    $data.$triggerInnerEl = $refs.triggerInnerElRef;\n    $data.$pullHeight = this.getPullHeight();\n    $data.$refreshHeight = $data.$el.clientHeight;\n    this.addEvents();\n  },\n  render: function render(h) {\n    var $slots = this.$slots;\n    return h(\"div\", {\n      \"class\": selectorPrefix\n    }, [h(\"div\", {\n      \"class\": this.getScrollClassName,\n      \"ref\": \"scrollElRef\"\n    }, [$slots.default]), h(\"div\", {\n      \"class\": selectorPrefix + \"-trigger\",\n      \"ref\": \"elRef\"\n    }, [h(\"div\", {\n      \"class\": selectorPrefix + \"-trigger-inner\",\n      \"ref\": \"triggerInnerElRef\"\n    }, [this.renderIcon(h), this.renderLabel(h), this.renderUpdateTime(h)]), this.renderLoadingAnimation(h)])]);\n  }\n};\nexport default PullRefresh;"],"names":["__spreadArrays","classNames","moment","Intl","Resource","selectorPrefix","defaultImg","PullRefresh","name","props","className","type","String","default","scrollClassName","pullHeight","Number","isShowUpdateTime","Boolean","updateTime","valueOf","updateTimeFormat","Dict","value","ResourceMomentFormatFull","loadingAnimation","data","isCan","$maskEl","$el","$iconEl","$scrollEl","$triggerInnerEl","$pullHeight","$refreshHeight","$startPageY","$isDownPull","$isTop","computed","getScrollClassName","this","apply","split","methods","renderIcon","h","$slots","icon","class","ref","attrs","src","alt","renderLabel","canLabel","template","tv","label","renderUpdateTime","_a","preUpdateTime","format","renderLoadingAnimation","renderMask","$data","document","querySelector","createElement","body","appendChild","getPullHeight","clientHeight","addEvents","addEventListener","onTouchStart","onScroll","removeEvents","removeEventListener","onTouchMove","onTouchEnd","e","trigger","changedTouches","pageY","style","overflow","difference","distance","Math","abs","preventDefault","translateY","rotateIcon","display","clear","refresh","reset","target","scrollTop","el","y","duration","transition","webkitTransition","transform","webkitTransform","deg","action","params","$emit","$refs","refreshElRef","overflowY","self","onTransitionEnd","resetUpdateTime","_this","Promise","resolve","getUpdateTime","created","mounted","elRef","iconElRef","scrollElRef","triggerInnerElRef","render"],"mappings":"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"}