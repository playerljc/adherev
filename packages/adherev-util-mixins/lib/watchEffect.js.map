{"version":3,"file":"watchEffect.js","sources":["watchEffect.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.string.starts-with.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n/**\n * watchEffect\n * data或者props中的属性只要有一个变化就调用watchEffect方法\n */\n\n\nexports.default = {\n  data: function data() {\n    return {\n      $watchHandlers: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    tslib_1.__spreadArrays(Object.keys(this.$props), Object.keys(this.$data).filter(function (p) {\n      return !p.startsWith('$');\n    })).forEach(function (p) {\n      _this.$data.$watchHandlers.push(_this.$watch(p, function (newVal, oldVal) {\n        var _a, _b, _c; // 只要data或者props中的任意一个属性变化，则调用watchEffect方法\n\n\n        (_c = (_b = (_a = _this.$options) === null || _a === void 0 ? void 0 : _a.watchEffect) === null || _b === void 0 ? void 0 : _b.call) === null || _c === void 0 ? void 0 : _c.call(_b, _this, {\n          attr: p,\n          newVal: newVal,\n          oldVal: oldVal\n        });\n      }, // deep打开\n      {\n        deep: true\n      }));\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$data.$watchHandlers.forEach(function (uw) {\n      return uw();\n    });\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","default","data","$watchHandlers","created","_this","this","__spreadArrays","keys","$props","$data","filter","p","startsWith","forEach","push","$watch","newVal","oldVal","_b","_c","_a","$options","watchEffect","call","attr","deep","beforeDestroy","uw"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,0CAERA,QAAQ,mDAERA,QAAQ,qCAERA,QAAQ,sCAERA,QAAQ,4CAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAOtBG,QAAQG,QAAU,CAChBC,KAAM,WACJ,MAAO,CACLC,eAAgB,KAGpBC,QAAS,WACP,IAAIC,EAAQC,KAEZN,QAAQO,eAAeX,OAAOY,KAAKF,KAAKG,QAASb,OAAOY,KAAKF,KAAKI,OAAOC,OAAO,SAAUC,GACxF,OAAQA,EAAEC,WAAW,QACnBC,QAAQ,SAAUF,GACpBP,EAAMK,MAAMP,eAAeY,KAAKV,EAAMW,OAAOJ,EAAG,SAAUK,EAAQC,GAChE,IAAQC,EAAIC,EAG6H,QAAxIA,EAA0F,QAApFD,EAA+B,QAAzBE,EAAKhB,EAAMiB,gBAA6B,IAAPD,OAAgB,EAASA,EAAGE,mBAAgC,IAAPJ,OAAgB,EAASA,EAAGK,YAAyB,IAAPJ,GAAyBA,EAAGI,KAAKL,EAAId,EAAO,CAC3LoB,KAAMb,EACNK,OAAQA,EACRC,OAAQA,KAGZ,CACEQ,MAAM,QAIZC,cAAe,WACbrB,KAAKI,MAAMP,eAAeW,QAAQ,SAAUc,GAC1C,OAAOA"}