{"version":3,"file":"watchEffect.js","sources":["watchEffect.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.string.starts-with.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\n/**\n * watchEffect\n * data或者props中的属性只要有一个变化就调用watchEffect方法\n */\nexports.default = {\n  data: function data() {\n    return {\n      $watchHandlers: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n    tslib_1.__spreadArray(tslib_1.__spreadArray([], Object.keys(this.$props), true), Object.keys(this.$data).filter(function (p) {\n      return !p.startsWith('$');\n    }), true).forEach(function (p) {\n      _this.$data.$watchHandlers.push(_this.$watch(p, function (newVal, oldVal) {\n        var _a, _b, _c;\n        // 只要data或者props中的任意一个属性变化，则调用watchEffect方法\n        (_c = (_b = (_a = _this.$options) === null || _a === void 0 ? void 0 : _a.watchEffect) === null || _b === void 0 ? void 0 : _b.call) === null || _c === void 0 ? void 0 : _c.call(_b, _this, {\n          attr: p,\n          newVal: newVal,\n          oldVal: oldVal\n        });\n      },\n      // deep打开\n      {\n        deep: true\n      }));\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$data.$watchHandlers.forEach(function (uw) {\n      return uw();\n    });\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","default","data","$watchHandlers","created","_this","this","__spreadArray","keys","$props","$data","filter","p","startsWith","forEach","push","$watch","newVal","oldVal","_b","_c","_a","$options","watchEffect","call","attr","deep","beforeDestroy","uw"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDA,QAAQ,wCAAwC,EAChDA,QAAQ,iDAAiD,EACzDA,QAAQ,mCAAmC,EAC3CA,QAAQ,oCAAoC,EAC5CA,QAAQ,0CAA0C,EAClDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACD,IAAIC,QAAUL,QAAQ,OAAO,EAK7BG,QAAQG,QAAU,CAChBC,KAAM,WACJ,MAAO,CACLC,eAAgB,EAClB,CACF,EACAC,QAAS,WACP,IAAIC,EAAQC,KACZN,QAAQO,cAAcP,QAAQO,cAAc,GAAIX,OAAOY,KAAKF,KAAKG,MAAM,EAAG,CAAA,CAAI,EAAGb,OAAOY,KAAKF,KAAKI,KAAK,EAAEC,OAAO,SAAUC,GACxH,MAAO,CAACA,EAAEC,WAAW,GAAG,CAC1B,CAAC,EAAG,CAAA,CAAI,EAAEC,QAAQ,SAAUF,GAC1BP,EAAMK,MAAMP,eAAeY,KAAKV,EAAMW,OAAOJ,EAAG,SAAUK,EAAQC,GAChE,IAAQC,EAAIC,EAEZ,OAACA,EAAK,OAACD,EAAK,OAACE,EAAKhB,EAAMiB,UAAsC,KAAA,EAASD,EAAGE,aAAyC,KAAA,EAASJ,EAAGK,OAA2CJ,EAAGI,KAAKL,EAAId,EAAO,CAC3LoB,KAAMb,EACNK,OAAQA,EACRC,OAAQA,CACV,CAAC,CACH,EAEA,CACEQ,KAAM,CAAA,CACR,CAAC,CAAC,CACJ,CAAC,CACH,EACAC,cAAe,WACbrB,KAAKI,MAAMP,eAAeW,QAAQ,SAAUc,GAC1C,OAAOA,EAAG,CACZ,CAAC,CACH,CACF"}