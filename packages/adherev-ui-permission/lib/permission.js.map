{"version":3,"file":"permission.js","sources":["permission.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.index-of.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Permission = exports.checkPermission = exports.getPermission = exports.setPermission = void 0;\n\nvar vue_1 = require(\"vue\");\n\nvar vue_types_1 = require(\"vue-types\"); // 所有的权限\n\n\nvar permissions = [];\n/**\n * setPermission - 设置拥有的所有权限\n * @param {Array<String>} permission\n */\n\nvar setPermission = function setPermission(permission) {\n  permissions = permission;\n};\n\nexports.setPermission = setPermission;\n/**\n * getPermission - 获取拥有的所有权限\n * @return\n */\n\nvar getPermission = function getPermission() {\n  return JSON.parse(JSON.stringify(permissions));\n};\n\nexports.getPermission = getPermission;\n/**\n * checkPermission - 判断是否有权限方法\n * @param {Array<String>} allPermission\n * @param {String | Array<String>} currentPermissions 当前组件或者页面对应得权限key\n * @return boolean\n */\n\nvar checkPermission = function checkPermission(allPermission, currentPermissions) {\n  if (allPermission === void 0) {\n    allPermission = (0, exports.getPermission)();\n  }\n\n  allPermission = allPermission || (0, exports.getPermission)(); // 所有的权限\n\n  if (!allPermission || !Array.isArray(allPermission) || !currentPermissions) {\n    return true;\n  }\n\n  if (Array.isArray(currentPermissions)) {\n    return currentPermissions.every(function (curPermissions) {\n      return allPermission.indexOf(curPermissions) !== -1;\n    });\n  }\n\n  return allPermission.indexOf(currentPermissions) !== -1;\n};\n\nexports.checkPermission = checkPermission;\nexports.Permission = (0, vue_1.defineComponent)({\n  name: 'adv-permission',\n  props: {\n    allPermission: (0, vue_types_1.array)().def([]),\n    permissions: (0, vue_types_1.array)()\n  },\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    return function () {\n      return (0, exports.checkPermission)(props.allPermission, props.permissions) ? slots.default ? slots.default() : null : slots.noMatch ? slots === null || slots === void 0 ? void 0 : slots.noMatch() : null;\n    };\n  }\n});"],"names":["require","Object","defineProperty","exports","value","Permission","checkPermission","getPermission","setPermission","vue_1","vue_types_1","permissions","permission","JSON","parse","stringify","allPermission","currentPermissions","Array","isArray","every","curPermissions","indexOf","defineComponent","name","props","array","def","setup","_a","slots","default","noMatch"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,0CAERA,QAAQ,wCAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAQE,WAAaF,QAAQG,gBAAkBH,QAAQI,cAAgBJ,QAAQK,mBAAgB,EAE/F,IAAIC,MAAQT,QAAQ,OAEhBU,YAAcV,QAAQ,aAGtBW,YAAc,GAMdH,cAAgB,SAAuBI,GACzCD,YAAcC,GASZL,eANJJ,QAAQK,cAAgBA,cAMJ,WAClB,OAAOK,KAAKC,MAAMD,KAAKE,UAAUJ,gBAW/BL,iBARJH,QAAQI,cAAgBA,cAQF,SAAyBS,EAAeC,GAO5D,SAFAD,GAHEA,OADoB,IAAlBA,GACc,EAAIb,QAAQI,iBAGdS,KAAiB,EAAIb,QAAQI,mBAEtBW,MAAMC,QAAQH,IAAmBC,KAIpDC,MAAMC,QAAQF,GACTA,EAAmBG,MAAM,SAAUC,GACxC,OAAkD,IAA3CL,EAAcM,QAAQD,MAIqB,IAA/CL,EAAcM,QAAQL,MAG/Bd,QAAQG,gBAAkBA,gBAC1BH,QAAQE,YAAa,EAAII,MAAMc,iBAAiB,CAC9CC,KAAM,iBACNC,MAAO,CACLT,eAAe,EAAIN,YAAYgB,SAASC,IAAI,IAC5ChB,aAAa,EAAID,YAAYgB,UAE/BE,MAAO,SAAeH,EAAOI,GAC3B,IAAIC,EAAQD,EAAGC,MACf,OAAO,WACL,OAAO,EAAI3B,QAAQG,iBAAiBmB,EAAMT,cAAeS,EAAMd,aAAemB,EAAMC,QAAUD,EAAMC,UAAY,KAAOD,EAAME,QAAUF,MAAAA,OAAqC,EAASA,EAAME,UAAY"}