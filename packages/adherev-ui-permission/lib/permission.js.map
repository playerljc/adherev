{"version":3,"file":"permission.js","sources":["permission.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.index-of.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.match.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PermissionFun = exports.Permission = exports.checkPermission = exports.getPermission = exports.setPermission = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\")); // 所有的权限\n\n\nvar permissions = [];\n/**\n * setPermission - 设置拥有的所有权限\n * @param {Array<String>} permission\n */\n\nexports.setPermission = function (permission) {\n  permissions = permission;\n};\n/**\n * getPermission - 获取拥有的所有权限\n * @return\n */\n\n\nexports.getPermission = function () {\n  return JSON.parse(JSON.stringify(permissions));\n};\n/**\n * checkPermission - 判断是否有权限方法\n * @param {Array<String>} allPermission\n * @param {String | Array<String>} currentPermissions 当前组件或者页面对应得权限key\n * @return boolean\n */\n\n\nexports.checkPermission = function (allPermission, currentPermissions) {\n  if (allPermission === void 0) {\n    allPermission = exports.getPermission();\n  }\n\n  allPermission = allPermission || exports.getPermission(); // 所有的权限\n\n  if (!allPermission || !Array.isArray(allPermission) || !currentPermissions) {\n    return true;\n  }\n\n  if (Array.isArray(currentPermissions)) {\n    return currentPermissions.every(function (curPermissions) {\n      return allPermission.indexOf(curPermissions) !== -1;\n    });\n  }\n\n  return allPermission.indexOf(currentPermissions) !== -1;\n};\n\nexports.Permission = {\n  name: 'adv-permission',\n  props: {\n    allPermission: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    permissions: {\n      type: [String, Array]\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n        _b = _a.allPermission,\n        allPermission = _b === void 0 ? exports.getPermission() : _b,\n        permissions = _a.permissions,\n        $slots = _a.$slots;\n\n    return exports.checkPermission(allPermission, permissions) ? $slots.default : $slots.noMatch ? $slots.noMatch : null;\n  }\n};\n/**\n * PermissionFun - 函数方式实现\n * @param allPermission\n * @param permissions\n * @param match\n * @param noMatch\n * @constructor\n */\n\nfunction PermissionFun(_a) {\n  var _b = _a.allPermission,\n      allPermission = _b === void 0 ? exports.getPermission() : _b,\n      permissions = _a.permissions,\n      match = _a.match,\n      noMatch = _a.noMatch;\n  return adherev_ui_conditionalrender_1.default.conditionalRender({\n    conditional: exports.checkPermission(allPermission, permissions),\n    match: match,\n    noMatch: noMatch\n  });\n}\n\nexports.PermissionFun = PermissionFun;"],"names":["require","Object","defineProperty","exports","value","PermissionFun","Permission","checkPermission","getPermission","setPermission","tslib_1","adherev_ui_conditionalrender_1","__importDefault","permissions","_a","_b","allPermission","match","noMatch","default","conditionalRender","conditional","permission","JSON","parse","stringify","currentPermissions","Array","isArray","every","curPermissions","indexOf","name","props","type","String","render","h","this","$slots"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,0CAERA,QAAQ,wCAERA,QAAQ,qCAERA,QAAQ,sCAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAQE,cAAgBF,QAAQG,WAAaH,QAAQI,gBAAkBJ,QAAQK,cAAgBL,QAAQM,mBAAgB,EAEvH,IAAIC,QAAUV,QAAQ,SAElBW,+BAAiCD,QAAQE,gBAAgBZ,QAAQ,6CAGjEa,YAAc,GA8ElB,SAASR,cAAcS,GACrB,IAAIC,EAAKD,EAAGE,cACRA,OAAuB,IAAPD,EAAgBZ,QAAQK,gBAAkBO,EAC1DF,EAAcC,EAAGD,YACjBI,EAAQH,EAAGG,MACXC,EAAUJ,EAAGI,QACjB,OAAOP,+BAA+BQ,QAAQC,kBAAkB,CAC9DC,YAAalB,QAAQI,gBAAgBS,EAAeH,GACpDI,MAAOA,EACPC,QAASA,IAjFbf,QAAQM,cAAgB,SAAUa,GAChCT,YAAcS,GAQhBnB,QAAQK,cAAgB,WACtB,OAAOe,KAAKC,MAAMD,KAAKE,UAAUZ,eAUnCV,QAAQI,gBAAkB,SAAUS,EAAeU,GAOjD,SAFAV,GAHEA,OADoB,IAAlBA,EACcb,QAAQK,gBAGVQ,IAAiBb,QAAQK,kBAElBmB,MAAMC,QAAQZ,IAAmBU,KAIpDC,MAAMC,QAAQF,GACTA,EAAmBG,MAAM,SAAUC,GACxC,OAAkD,IAA3Cd,EAAce,QAAQD,MAIqB,IAA/Cd,EAAce,QAAQL,KAG/BvB,QAAQG,WAAa,CACnB0B,KAAM,iBACNC,MAAO,CACLjB,cAAe,CACbkB,KAAMP,MACNR,QAAS,WACP,MAAO,KAGXN,YAAa,CACXqB,KAAM,CAACC,OAAQR,SAGnBS,OAAQ,SAAgBC,GACtB,IAAIvB,EAAKwB,KACLvB,EAAKD,EAAGE,cACRA,OAAuB,IAAPD,EAAgBZ,QAAQK,gBAAkBO,EAC1DF,EAAcC,EAAGD,YACjB0B,EAASzB,EAAGyB,OAEhB,OAAOpC,QAAQI,gBAAgBS,EAAeH,GAAe0B,EAAOpB,QAAUoB,EAAOrB,SAA2B,OAyBpHf,QAAQE,cAAgBA"}