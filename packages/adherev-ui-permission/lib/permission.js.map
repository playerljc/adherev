{"version":3,"file":"permission.js","sources":["permission.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.match.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PermissionFun = exports.Permission = exports.permissionProps = exports.checkPermission = exports.getPermission = exports.setPermission = void 0;\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\n// 所有的权限\nvar permissions = [];\n/**\n * setPermission - 设置拥有的所有权限\n * @param {Array<String>} permission\n */\nvar setPermission = function setPermission(permission) {\n  permissions = permission;\n};\nexports.setPermission = setPermission;\n/**\n * getPermission - 获取拥有的所有权限\n * @return\n */\nvar getPermission = function getPermission() {\n  return JSON.parse(JSON.stringify(permissions));\n};\nexports.getPermission = getPermission;\n/**\n * checkPermission - 判断是否有权限方法\n * @param {Array<String>} allPermission\n * @param {String | Array<String>} currentPermissions 当前组件或者页面对应得权限key\n * @return boolean\n */\nvar checkPermission = function checkPermission(allPermission, currentPermissions) {\n  if (allPermission === void 0) {\n    allPermission = (0, exports.getPermission)();\n  }\n  allPermission = allPermission || (0, exports.getPermission)();\n  // 所有的权限\n  if (!allPermission || !Array.isArray(allPermission) || !currentPermissions) {\n    return true;\n  }\n  if (Array.isArray(currentPermissions)) {\n    return currentPermissions.every(function (curPermissions) {\n      return allPermission.indexOf(curPermissions) !== -1;\n    });\n  }\n  return allPermission.indexOf(currentPermissions) !== -1;\n};\nexports.checkPermission = checkPermission;\nexports.permissionProps = {\n  allPermission: (0, vue_types_1.array)().def([]),\n  permissions: (0, vue_types_1.array)()\n};\nexports.Permission = (0, vue_1.defineComponent)({\n  name: 'adv-permission',\n  props: exports.permissionProps,\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    return function () {\n      return (0, exports.checkPermission)(props.allPermission, props.permissions) ? slots.default ? slots.default() : null : slots.noMatch ? slots === null || slots === void 0 ? void 0 : slots.noMatch() : null;\n    };\n  }\n});\n/**\n * PermissionFun - 函数方式实现\n * @param allPermission\n * @param permissions\n * @param match\n * @param noMatch\n * @constructor\n */\nfunction PermissionFun(_a) {\n  var _b = _a.allPermission,\n    allPermission = _b === void 0 ? (0, exports.getPermission)() : _b,\n    permissions = _a.permissions,\n    match = _a.match,\n    noMatch = _a.noMatch;\n  return adherev_ui_conditionalrender_1.default.conditionalRender({\n    conditional: (0, exports.checkPermission)(allPermission, permissions),\n    match: match,\n    noMatch: noMatch\n  });\n}\nexports.PermissionFun = PermissionFun;"],"names":["require","Object","defineProperty","exports","value","PermissionFun","Permission","permissionProps","checkPermission","getPermission","setPermission","tslib_1","vue_1","vue_types_1","adherev_ui_conditionalrender_1","__importDefault","permissions","permission","JSON","parse","stringify","allPermission","currentPermissions","Array","isArray","every","curPermissions","indexOf","_a","_b","match","noMatch","default","conditionalRender","conditional","array","def","defineComponent","name","props","setup","slots"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDA,QAAQ,wCAAwC,EAChDA,QAAQ,sCAAsC,EAC9CA,QAAQ,mCAAmC,EAC3CA,QAAQ,oCAAoC,EAC5CC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACDD,QAAQE,cAAgBF,QAAQG,WAAaH,QAAQI,gBAAkBJ,QAAQK,gBAAkBL,QAAQM,cAAgBN,QAAQO,cAAgB,KAAA,EACjJ,IAAIC,QAAUX,QAAQ,OAAO,EACzBY,MAAQZ,QAAQ,KAAK,EACrBa,YAAcb,QAAQ,WAAW,EACjCc,+BAAiCH,QAAQI,gBAAgBf,QAAQ,0CAA0C,CAAC,EAE5GgB,YAAc,GAKdN,cAAgB,SAAuBO,GACzCD,YAAcC,CAChB,EAMIR,eALJN,QAAQO,cAAgBA,cAKJ,WAClB,OAAOQ,KAAKC,MAAMD,KAAKE,UAAUJ,WAAW,CAAC,CAC/C,GAQIR,iBAPJL,QAAQM,cAAgBA,cAOF,SAAyBY,EAAeC,GAM5D,MAAI,GAFJD,GAFEA,EADoB,KAAA,IAAlBA,GACc,EAAIlB,QAAQM,eAAe,EAE7BY,KAAiB,EAAIlB,QAAQM,eAAe,IAErCc,MAAMC,QAAQH,CAAa,GAAMC,KAGpDC,MAAMC,QAAQF,CAAkB,EAC3BA,EAAmBG,MAAM,SAAUC,GACxC,MAAiD,CAAC,IAA3CL,EAAcM,QAAQD,CAAc,CAC7C,CAAC,EAEkD,CAAC,IAA/CL,EAAcM,QAAQL,CAAkB,EACjD,GAwBA,SAASjB,cAAcuB,GACrB,IAAIC,EAAKD,EAAGP,cACVA,EAAuB,KAAA,IAAPQ,GAAgB,EAAI1B,QAAQM,eAAe,EAAIoB,EAC/Db,EAAcY,EAAGZ,YACjBc,EAAQF,EAAGE,MACXC,EAAUH,EAAGG,QACf,OAAOjB,+BAA+BkB,QAAQC,kBAAkB,CAC9DC,aAAa,EAAI/B,QAAQK,iBAAiBa,EAAeL,CAAW,EACpEc,MAAOA,EACPC,QAASA,CACX,CAAC,CACH,CAlCA5B,QAAQK,gBAAkBA,gBAC1BL,QAAQI,gBAAkB,CACxBc,eAAe,EAAIR,YAAYsB,OAAO,EAAEC,IAAI,EAAE,EAC9CpB,aAAa,EAAIH,YAAYsB,OAAO,CACtC,EACAhC,QAAQG,YAAa,EAAIM,MAAMyB,iBAAiB,CAC9CC,KAAM,iBACNC,MAAOpC,QAAQI,gBACfiC,MAAO,SAAeD,EAAOX,GAC3B,IAAIa,EAAQb,EAAGa,MACf,OAAO,WACL,OAAO,EAAItC,QAAQK,iBAAiB+B,EAAMlB,cAAekB,EAAMvB,WAAW,EAAIyB,EAAMT,QAAUS,EAAMT,QAAQ,EAAI,KAAOS,EAAMV,QAAUU,MAAAA,EAAqC,KAAA,EAASA,EAAMV,QAAQ,EAAI,IACzM,CACF,CACF,CAAC,EAqBD5B,QAAQE,cAAgBA"}