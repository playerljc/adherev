{"version":3,"file":"permission.js","sources":["permission.js"],"sourcesContent":["import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\n// 所有的权限\nvar permissions = [];\n/**\n * setPermission - 设置拥有的所有权限\n * @param {Array<String>} permission\n */\nexport var setPermission = function setPermission(permission) {\n  permissions = permission;\n};\n/**\n * getPermission - 获取拥有的所有权限\n * @return\n */\nexport var getPermission = function getPermission() {\n  return JSON.parse(JSON.stringify(permissions));\n};\n/**\n * checkPermission - 判断是否有权限方法\n * @param {Array<String>} allPermission\n * @param {String | Array<String>} currentPermissions 当前组件或者页面对应得权限key\n * @return boolean\n */\nexport var checkPermission = function checkPermission(allPermission, currentPermissions) {\n  if (allPermission === void 0) {\n    allPermission = getPermission();\n  }\n  allPermission = allPermission || getPermission();\n  // 所有的权限\n  if (!allPermission || !Array.isArray(allPermission) || !currentPermissions) {\n    return true;\n  }\n  if (Array.isArray(currentPermissions)) {\n    return currentPermissions.every(function (curPermissions) {\n      return allPermission.indexOf(curPermissions) !== -1;\n    });\n  }\n  return allPermission.indexOf(currentPermissions) !== -1;\n};\nexport var Permission = {\n  name: 'adv-permission',\n  props: {\n    allPermission: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    permissions: {\n      type: [String, Array]\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n      _b = _a.allPermission,\n      allPermission = _b === void 0 ? getPermission() : _b,\n      permissions = _a.permissions,\n      $slots = _a.$slots;\n    return checkPermission(allPermission, permissions) ? $slots.default : $slots.noMatch ? $slots.noMatch : null;\n  }\n};\n/**\n * PermissionFun - 函数方式实现\n * @param allPermission\n * @param permissions\n * @param match\n * @param noMatch\n * @constructor\n */\nexport function PermissionFun(_a) {\n  var _b = _a.allPermission,\n    allPermission = _b === void 0 ? getPermission() : _b,\n    permissions = _a.permissions,\n    match = _a.match,\n    noMatch = _a.noMatch;\n  return ConditionalRender.conditionalRender({\n    conditional: checkPermission(allPermission, permissions),\n    match: match,\n    noMatch: noMatch\n  });\n}"],"names":["ConditionalRender","permissions","setPermission","permission","getPermission","JSON","parse","stringify","checkPermission","allPermission","currentPermissions","Array","isArray","every","curPermissions","indexOf","Permission","name","props","type","default","String","render","h","_a","this","_b","$slots","noMatch","PermissionFun","match","conditionalRender","conditional"],"mappings":"MAAO,+CACA,6CACA,0CACA,4CACAA,sBAAuB,2CAE9B,IAAIC,YAAc,GAKPC,cAAgB,SAAuBC,GAChDF,YAAcE,CAChB,EAKWC,cAAgB,WACzB,OAAOC,KAAKC,MAAMD,KAAKE,UAAUN,WAAW,CAAC,CAC/C,EAOWO,gBAAkB,SAAyBC,EAAeC,GAMnE,MAAI,GAFJD,GAFEA,EADoB,KAAA,IAAlBA,EACcL,cAAc,EAEhBK,IAAiBL,cAAc,IAExBO,MAAMC,QAAQH,CAAa,GAAMC,KAGpDC,MAAMC,QAAQF,CAAkB,EAC3BA,EAAmBG,MAAM,SAAUC,GACxC,MAAiD,CAAC,IAA3CL,EAAcM,QAAQD,CAAc,CAC7C,CAAC,EAEkD,CAAC,IAA/CL,EAAcM,QAAQL,CAAkB,EACjD,EACWM,WAAa,CACtBC,KAAM,iBACNC,MAAO,CACLT,cAAe,CACbU,KAAMR,MACNS,QAAS,WACP,MAAO,EACT,CACF,EACAnB,YAAa,CACXkB,KAAM,CAACE,OAAQV,MACjB,CACF,EACAW,OAAQ,SAAgBC,GACtB,IAAIC,EAAKC,KACPC,EAAKF,EAAGf,cACRA,EAAuB,KAAA,IAAPiB,EAAgBtB,cAAc,EAAIsB,EAClDzB,EAAcuB,EAAGvB,YACjB0B,EAASH,EAAGG,OACd,OAAOnB,gBAAgBC,EAAeR,CAAW,EAAI0B,EAAOP,QAAUO,EAAOC,SAA2B,IAC1G,CACF,EASO,SAASC,cAAcL,GAC5B,IAAIE,EAAKF,EAAGf,cACVA,EAAuB,KAAA,IAAPiB,EAAgBtB,cAAc,EAAIsB,EAClDzB,EAAcuB,EAAGvB,YACjB6B,EAAQN,EAAGM,MACXF,EAAUJ,EAAGI,QACf,OAAO5B,kBAAkB+B,kBAAkB,CACzCC,YAAaxB,gBAAgBC,EAAeR,CAAW,EACvD6B,MAAOA,EACPF,QAASA,CACX,CAAC,CACH,QAzEW1B,cAOAE,cASAI,gBAgBAQ,WA8BKa,aAWhB"}