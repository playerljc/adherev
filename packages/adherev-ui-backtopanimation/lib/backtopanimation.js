"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js");var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var classnames_1=__importDefault(require("classnames")),adherev_util_resource_1=__importDefault(require("@baifendian/adherev-util-resource")),selectorPrefix="adherev-ui-backtopanimation";exports.default={name:"adv-backtopanimation",props:{className:{type:String,default:""},zIndex:{type:[String,Number],default:adherev_util_resource_1.default.Dict.value.ResourceNormalMaxZIndex.value},duration:{type:Number,default:300},onTarget:{type:Function,default:function(){return"undefined"!=typeof window?window:null}},onTrigger:{type:Function},onScrollTop:{type:Function}},data:function(){return{$maskEl:null,$scrollEl:null,$key:!1}},mounted:function(){this.initScrollEvent(),this.renderMask()},beforeDestroy:function(){var e=this.$data;e.$maskEl&&e.$maskEl.parentElement.removeChild(e.$maskEl)},methods:{trigger:function(){var o;this.$data.$key||(o=this).$emit("trigger",function(){var t=o.$data,e=o.duration;t.$key=!0,t.$maskEl.style.display="block";var l=t.$scrollEl.scrollTop,n=t.$scrollEl.scrollHeight/(e/(screen.updateInterval||16.7)+(e%(screen.updateInterval||16.7)!=0?1:0));window.requestAnimationFrame(function e(){function r(){t.$maskEl.style.display="none",t.$key=!1}t.$scrollEl.scrollTop<0?0<l+n?l=0:l+=n:l-n<0?l=0:l-=n,t.$scrollEl.scrollTop=l,o.$emit("scrollTop",l),t.$scrollEl.scrollTop<0?0<=l?r():window.requestAnimationFrame(e):l<=0?r():window.requestAnimationFrame(e)})})},initScrollEvent:function(){var l=this;this.$emit("target",function(e){var r=l.$data,t=l.$refs;r.$scrollEl=e,r.$scrollEl.addEventListener("scroll",function(){0!==r.$scrollEl.scrollTop?window.requestAnimationFrame(function(){t.ref.style.display="block"}):window.requestAnimationFrame(function(){t.ref.style.display="none"})},!1)})},renderMask:function(){var e=this.$data;e.$maskEl=document.body.querySelector("."+selectorPrefix+"-mask"),e.$maskEl||(e.$maskEl=document.createElement("div"),e.$maskEl.className=selectorPrefix+"-mask",document.body.appendChild(e.$maskEl))}},render:function(e){var r=this,t=this.className;return e("div",{class:classnames_1.default(selectorPrefix,t.split(" ")),ref:"ref",on:{click:function(){r.trigger()}}})}};
//# sourceMappingURL=backtopanimation.js.map
