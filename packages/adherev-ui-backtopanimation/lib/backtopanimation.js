"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.number.constructor.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),adherev_util_resource_1=tslib_1.__importDefault(require("@baifendian/adherev-util-resource")),selectorPrefix="adherev-ui-backtopanimation",BackTopAnimation={name:"adv-backtopanimation",props:{zIndex:{type:[String,Number],default:adherev_util_resource_1.default.Dict.value.ResourceNormalMaxZIndex.value},duration:{type:Number,default:300}},emits:["target","trigger","scrollTop"],data:function(){return{$maskEl:null,$scrollEl:null,$key:!1}},mounted:function(){this.initScrollEvent(),this.renderMask()},beforeDestroy:function(){var e=this.$data;if(e.$maskEl)try{e.$maskEl.parentElement.removeChild(e.$maskEl)}catch(e){}},methods:{trigger:function(){var i;this.$data.$key||(i=this).$emit("trigger",function(){var t=i.$data,e=i.duration;t.$key=!0,t.$maskEl.style.display="block";var l=t.$scrollEl.scrollTop,o=t.$scrollEl.scrollHeight/(e/(screen.updateInterval||16.7)+(e%(screen.updateInterval||16.7)!=0?1:0));window.requestAnimationFrame(function e(){function r(){t.$maskEl.style.display="none",t.$key=!1}t.$scrollEl.scrollTop<0?0<l+o?l=0:l+=o:l-o<0?l=0:l-=o,t.$scrollEl.scrollTop=l,i.$emit("scrollTop",l),t.$scrollEl.scrollTop<0?0<=l?r():window.requestAnimationFrame(e):l<=0?r():window.requestAnimationFrame(e)})})},initScrollEvent:function(){var l=this;this.$emit("target",function(e){var r=l.$data,t=l.$refs;r.$scrollEl=e,r.$scrollEl.addEventListener("scroll",function(){0!==r.$scrollEl.scrollTop?window.requestAnimationFrame(function(){t.ref.style.display="block"}):window.requestAnimationFrame(function(){t.ref.style.display="none"})},!1)})},renderMask:function(){var e=this.$data;e.$maskEl=document.body.querySelector("."+selectorPrefix+"-mask"),e.$maskEl||(e.$maskEl=document.createElement("div"),e.$maskEl.className=selectorPrefix+"-mask",document.body.appendChild(e.$maskEl))}},render:function(e){var r=this;return e("div",{class:selectorPrefix,ref:"ref",on:{click:function(){r.trigger()}}})}};exports.default=BackTopAnimation;
//# sourceMappingURL=backtopanimation.js.map
