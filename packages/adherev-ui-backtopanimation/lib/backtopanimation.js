"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_util_resource_1=tslib_1.__importDefault(require("@baifendian/adherev-util-resource")),selectorPrefix="adherev-ui-backtopanimation",props={className:(0,vue_types_1.string)().def(""),zIndex:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]).def(adherev_util_resource_1.default.Dict.value.ResourceNormalMaxZIndex.value),duration:(0,vue_types_1.integer)().def(300)};exports.default=(0,vue_1.defineComponent)({name:"adv-backtopanimation",props:props,emits:["trigger","scrollTop","target"],setup:function(e,t){function r(){a||u("trigger",function(){var r,n,o;l&&i&&(a=!0,l.style.display="block",r=i.scrollTop,n=0,o=i.scrollHeight/(e.duration/(screen.updateInterval||16.7)+(e.duration%(screen.updateInterval||16.7)!=0?1:0)),window.requestAnimationFrame(function e(){function t(){l&&i&&(l.style.display="none",a=!1)}l&&i&&(i&&i.scrollTop<n?n<r+o?r=n:r+=o:r-o<n?r=n:r-=o,i&&(i.scrollTop=r),u("scrollTop",r),i.scrollTop<n?n<=r?t():window.requestAnimationFrame(e):r<=n?t():window.requestAnimationFrame(e))}))})}var u=t.emit,n=(0,vue_1.ref)(),i=null,l=null,a=!1,o=((0,vue_1.onMounted)(function(){s(),o()}),(0,vue_1.onBeforeUnmount)(function(){var e;if(l)try{null!=(e=null==l?void 0:l.parentElement)&&e.removeChild(l)}catch(e){}}),function(){u("target",function(e){i=e,l&&i&&i.addEventListener("scroll",function(){l&&i&&n.value&&(0!==i.scrollTop?n.value&&(n.value.style.display="block"):n.value&&(n.value.style.display="none"))},!1)})}),s=function(){(l=document.body.querySelector(".".concat(selectorPrefix,"-mask")))||((l=document.createElement("div")).className="".concat(selectorPrefix,"-mask"),document.body.appendChild(l))};return function(){return(0,_vue.createVNode)("div",{ref:n,class:selectorPrefix,onClick:function(){r()}},null)}}});
//# sourceMappingURL=backtopanimation.js.map
