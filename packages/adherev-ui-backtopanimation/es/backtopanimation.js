import"core-js/modules/es.number.constructor.js";import Resource from"@baifendian/adherev-util-resource";var selectorPrefix="adherev-ui-backtopanimation",BackTopAnimation={name:"adv-backtopanimation",props:{zIndex:{type:[String,Number],default:Resource.Dict.value.ResourceNormalMaxZIndex.value},duration:{type:Number,default:300}},emits:["target","trigger","scrollTop"],data:function(){return{$maskEl:null,$scrollEl:null,$key:!1}},mounted:function(){this.initScrollEvent(),this.renderMask()},beforeDestroy:function(){var e=this.$data;if(e.$maskEl)try{e.$maskEl.parentElement.removeChild(e.$maskEl)}catch(e){}},methods:{trigger:function(){var n;this.$data.$key||(n=this).$emit("trigger",function(){var r=n.$data,e=n.duration,o=(r.$key=!0,r.$maskEl.style.display="block",r.$scrollEl.scrollTop),l=r.$scrollEl.scrollHeight/(e/(screen.updateInterval||16.7)+(e%(screen.updateInterval||16.7)!=0?1:0));window.requestAnimationFrame(function e(){function t(){r.$maskEl.style.display="none",r.$key=!1}r.$scrollEl.scrollTop<0?0<o+l?o=0:o+=l:o-l<0?o=0:o-=l,r.$scrollEl.scrollTop=o,n.$emit("scrollTop",o),r.$scrollEl.scrollTop<0?0<=o?t():window.requestAnimationFrame(e):o<=0?t():window.requestAnimationFrame(e)})})},initScrollEvent:function(){var o=this;this.$emit("target",function(e){var t=o.$data,r=o.$refs;t.$scrollEl=e,t.$scrollEl.addEventListener("scroll",function(){0!==t.$scrollEl.scrollTop?window.requestAnimationFrame(function(){r.ref.style.display="block"}):window.requestAnimationFrame(function(){r.ref.style.display="none"})},!1)})},renderMask:function(){var e=this.$data;e.$maskEl=document.body.querySelector(".".concat(selectorPrefix,"-mask")),e.$maskEl||(e.$maskEl=document.createElement("div"),e.$maskEl.className="".concat(selectorPrefix,"-mask"),document.body.appendChild(e.$maskEl))}},render:function(e){var t=this;return e("div",{class:selectorPrefix,ref:"ref",on:{click:function(){t.trigger()}}})}};export default BackTopAnimation;
//# sourceMappingURL=backtopanimation.js.map
