import{createVNode as _createVNode}from"vue";import Resource from"@baifendian/adherev-util-resource";import{defineComponent,onBeforeUnmount,onMounted,ref}from"vue";import{integer,number,oneOfType,string}from"vue-types";var selectorPrefix="adherev-ui-backtopanimation",props={className:string().def(""),zIndex:oneOfType([string,number]).def(Resource.Dict.value.ResourceNormalMaxZIndex.value),duration:integer().def(300)};export default defineComponent({name:"adv-backtopanimation",props:props,emits:["trigger","scrollTop","target"],setup:function(e,n){function o(){u||i("trigger",function(){var o,r,t;a&&l&&(u=!0,a.style.display="block",o=l.scrollTop,r=0,t=l.scrollHeight/(e.duration/(screen.updateInterval||16.7)+(e.duration%(screen.updateInterval||16.7)!=0?1:0)),window.requestAnimationFrame(function e(){function n(){a&&l&&(a.style.display="none",u=!1)}a&&l&&(l&&l.scrollTop<r?r<o+t?o=r:o+=t:o-t<r?o=r:o-=t,l&&(l.scrollTop=o),i("scrollTop",o),l.scrollTop<r?r<=o?n():window.requestAnimationFrame(e):o<=r?n():window.requestAnimationFrame(e))}))})}var i=n.emit,r=ref(),l=null,a=null,u=!1,t=(onMounted(function(){c(),t()}),onBeforeUnmount(function(){var e;a&&null!==(e=null==a?void 0:a.parentElement)&&void 0!==e&&e.removeChild(a)}),function(){i("target",function(e){l=e,a&&l&&l.addEventListener("scroll",function(){a&&l&&r.value&&(0!==l.scrollTop?r.value&&(r.value.style.display="block"):r.value&&(r.value.style.display="none"))},!1)})}),c=function(){(a=document.body.querySelector(".".concat(selectorPrefix,"-mask")))||((a=document.createElement("div")).className="".concat(selectorPrefix,"-mask"),document.body.appendChild(a))};return function(){return _createVNode("div",{ref:r,class:selectorPrefix,onClick:function(){o()}},null)}}});
//# sourceMappingURL=backtopanimation.js.map
