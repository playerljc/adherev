{"version":3,"file":"intl.js","sources":["intl.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport { createI18n } from 'vue-i18n';\r\nimport en_US from './locales/en_US';\r\nimport pt_PT from './locales/pt_PT';\r\nimport zh_CN from './locales/zh_CN';\r\n// 组件的国际化文件\r\nvar finallyLocales = {\r\n    en_US: en_US,\r\n    zh_CN: zh_CN,\r\n    pt_PT: pt_PT,\r\n};\r\nvar intlMap = {};\r\nvar mainLocales = {};\r\nvar i18n = null;\r\n/**\r\n * initIntlMap - 初始化以中文为key,intl.get()为值的Map\r\n * @param zh_CN\r\n */\r\nfunction initIntlMap(zh_CN) {\r\n    var propertys = Object.getOwnPropertyNames(zh_CN);\r\n    propertys.forEach(function (p) {\r\n        // 中文key 国际化值为值\r\n        intlMap[zh_CN[p]] = p;\r\n    });\r\n}\r\n/**\r\n * getLocal\r\n * @param prefix\r\n * @param data\r\n * @return object\r\n */\r\nexport function getLocal(prefix, data) {\r\n    if (prefix === void 0) { prefix = 'local'; }\r\n    var result = __spreadArray([], Array.from(new Set(data)), true);\r\n    var local = {};\r\n    for (var i = 0; i < result.length; i++) {\r\n        local[\"\".concat(prefix).concat(i + 1)] = result[i];\r\n    }\r\n    return local;\r\n}\r\n/**\r\n * extend\r\n * @param app\r\n */\r\nexport function extend(app) {\r\n    // if (!app.config.globalProperties.hasOwnProperty('$i18n')) {\r\n    //   // $FlowFixMe\r\n    //   Object.defineProperty(app.config.globalProperties, '$i18n', {\r\n    //     get() {\r\n    //       return i18n /*this._i18n*/;\r\n    //     },\r\n    //   });\r\n    // }\r\n    app.config.globalProperties.$tv = function (zh) {\r\n        var values = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            values[_i - 1] = arguments[_i];\r\n        }\r\n        // const i18n = this.$i18n;\r\n        // const key = intlMap[zh];\r\n        return I18nFactory.tv.apply(this, __spreadArray([zh], values, true)); // i18n.t(key, i18n.locale, i18n._getMessages(), this, ...values);\r\n    };\r\n    app.config.globalProperties.$tcv = function (zh, choice) {\r\n        var values = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            values[_i - 2] = arguments[_i];\r\n        }\r\n        // const i18n = this.$i18n;\r\n        // const key = intlMap[zh];\r\n        // @ts-ignore\r\n        return I18nFactory.tcv.apply(this, __spreadArray([zh], values, true)); // i18n._tc(key, i18n.locale, i18n._getMessages(), this, choice, ...values);\r\n    };\r\n    app.config.globalProperties.$tev = function (zh, locale) {\r\n        // const i18n = this.$i18n;\r\n        // const key = intlMap[zh];\r\n        // @ts-ignore\r\n        return I18nFactory.tv.apply(this, [zh, locale]); //i18n._te(key, i18n.locale, i18n._getMessages(), locale);\r\n    };\r\n}\r\n/**\r\n * I18nFactory\r\n * @param config\r\n * @constructor\r\n */\r\nvar I18nFactory = function (config) {\r\n    var I18nOptions = config.I18nOptions, _a = config.prefix, prefix = _a === void 0 ? 'local' : _a;\r\n    var _b = I18nOptions.messages, locales = _b === void 0 ? {} : _b, locale = I18nOptions.locale;\r\n    var finallyLocalesKeys = Object.keys(finallyLocales);\r\n    var localesKeys = Object.keys(locales || {});\r\n    var masterLocales;\r\n    var slaveLocales;\r\n    if (finallyLocalesKeys.length > localesKeys.length) {\r\n        masterLocales = finallyLocales;\r\n        slaveLocales = locales || {};\r\n    }\r\n    else if (finallyLocalesKeys.length <= localesKeys.length) {\r\n        masterLocales = locales || {};\r\n        slaveLocales = finallyLocales;\r\n    }\r\n    // 整合用户的locales\r\n    for (var p in masterLocales) {\r\n        mainLocales[p] = getLocal(prefix, \r\n        // @ts-ignore\r\n        Array.from(new Set(__spreadArray(__spreadArray([], masterLocales[p], true), (slaveLocales[p] || []), true))));\r\n    }\r\n    // 反转资源文件\r\n    // @ts-ignore\r\n    initIntlMap(mainLocales.zh_CN);\r\n    // i18n实例\r\n    i18n = createI18n(__assign(__assign({}, I18nOptions), { messages: mainLocales }));\r\n    // 初始化@baifendian/adhere-util-intl\r\n    Intl.init({\r\n        // @ts-ignore\r\n        currentLocale: locale,\r\n        locales: locales,\r\n    });\r\n    return i18n;\r\n};\r\n/**\r\n * tv\r\n * @param zh\r\n * @param values\r\n */\r\nI18nFactory.tv = I18nFactory.v = function (zh) {\r\n    var _a, _b, _c;\r\n    var values = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        values[_i - 1] = arguments[_i];\r\n    }\r\n    var key = intlMap[zh];\r\n    return (_c = (_b = (_a = i18n === null || i18n === void 0 ? void 0 : i18n.global) === null || _a === void 0 ? void 0 : _a.t) === null || _b === void 0 ? void 0 : _b.apply) === null || _c === void 0 ? void 0 : _c.call(_b, i18n, __spreadArray([key], (values || []), true));\r\n};\r\n/**\r\n * tcv\r\n * @param zh\r\n * @param values\r\n */\r\nI18nFactory.tcv = function (zh) {\r\n    var _a, _b, _c;\r\n    var values = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        values[_i - 1] = arguments[_i];\r\n    }\r\n    var key = intlMap[zh];\r\n    return (_c = (_b = (_a = i18n === null || i18n === void 0 ? void 0 : i18n.global) === null || _a === void 0 ? void 0 : _a.tc) === null || _b === void 0 ? void 0 : _b.apply) === null || _c === void 0 ? void 0 : _c.call(_b, i18n, __spreadArray([key], (values || []), true));\r\n};\r\n/**\r\n * tev\r\n * @param zh\r\n * @param values\r\n */\r\nI18nFactory.tev = function (zh) {\r\n    var _a, _b, _c;\r\n    var values = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        values[_i - 1] = arguments[_i];\r\n    }\r\n    var key = intlMap[zh];\r\n    return (_c = (_b = (_a = i18n === null || i18n === void 0 ? void 0 : i18n.global) === null || _a === void 0 ? void 0 : _a.te) === null || _b === void 0 ? void 0 : _b.apply) === null || _c === void 0 ? void 0 : _c.call(_b, i18n, __spreadArray([key], values, true));\r\n};\r\n/**\r\n * vue-i18n Factory\r\n * @param config\r\n */\r\nexport default I18nFactory;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","ar","l","Array","slice","concat","Intl","createI18n","en_US","pt_PT","zh_CN","finallyLocales","intlMap","mainLocales","i18n","initIntlMap","getOwnPropertyNames","forEach","getLocal","prefix","data","result","Set","local","extend","app","config","globalProperties","$tv","zh","values","_i","I18nFactory","tv","$tcv","choice","tcv","$tev","locale","masterLocales","slaveLocales","I18nOptions","_a","_b","messages","locales","finallyLocalesKeys","keys","localesKeys","init","currentLocale","v","_c","key","global","tc","tev","te"],"mappings":"AAAA,IAAIA,SAAYC,MAAQA,KAAKD,UAAa,WAStC,OARAA,SAAWE,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,IAEKU,MAAMb,KAAMO,YAE5BO,cAAiBd,MAAQA,KAAKc,eAAkB,SAAUC,EAAIC,EAAMC,GACpE,GAAIA,GAA6B,IAArBV,UAAUC,OAAc,IAAK,IAA4BU,EAAxBb,EAAI,EAAGc,EAAIH,EAAKR,OAAYH,EAAIc,EAAGd,KACxEa,GAAQb,KAAKW,KACJE,EAAJA,GAASE,MAAMV,UAAUW,MAAMT,KAAKI,EAAM,EAAGX,IAC/CA,GAAKW,EAAKX,IAGrB,OAAOU,EAAGO,OAAOJ,GAAME,MAAMV,UAAUW,MAAMT,KAAKI,YAE/CO,+CACEC,iCACFC,mCACAC,mCACAC,4BAEP,IAAIC,eAAiB,CACjBH,MAAOA,MACPE,MAAOA,MACPD,MAAOA,OAEPG,QAAU,GACVC,YAAc,GACdC,KAAO,KAKX,SAASC,YAAYL,GACD1B,OAAOgC,oBAAoBN,GACjCO,QAAQ,SAAUzB,GAExBoB,QAAQF,EAAMlB,IAAMA,IASrB,SAAS0B,SAASC,EAAQC,QACd,IAAXD,IAAqBA,EAAS,SAGlC,IAFA,IAAIE,EAASxB,cAAc,GAAIM,MAAMJ,KAAK,IAAIuB,IAAIF,KAAQ,GACtDG,EAAQ,GACHnC,EAAI,EAAGA,EAAIiC,EAAO9B,OAAQH,IAC/BmC,EAAM,GAAGlB,OAAOc,GAAQd,OAAOjB,EAAI,IAAMiC,EAAOjC,GAEpD,OAAOmC,EAMJ,SAASC,OAAOC,GASnBA,EAAIC,OAAOC,iBAAiBC,IAAM,SAAUC,GAExC,IADA,IAAIC,EAAS,GACJC,EAAK,EAAGA,EAAKzC,UAAUC,OAAQwC,IACpCD,EAAOC,EAAK,GAAKzC,UAAUyC,GAI/B,OAAOC,YAAYC,GAAGrC,MAAMb,KAAMc,cAAc,CAACgC,GAAKC,GAAQ,KAElEL,EAAIC,OAAOC,iBAAiBO,KAAO,SAAUL,EAAIM,GAE7C,IADA,IAAIL,EAAS,GACJC,EAAK,EAAGA,EAAKzC,UAAUC,OAAQwC,IACpCD,EAAOC,EAAK,GAAKzC,UAAUyC,GAK/B,OAAOC,YAAYI,IAAIxC,MAAMb,KAAMc,cAAc,CAACgC,GAAKC,GAAQ,KAEnEL,EAAIC,OAAOC,iBAAiBU,KAAO,SAAUR,EAAIS,GAI7C,OAAON,YAAYC,GAAGrC,MAAMb,KAAM,CAAC8C,EAAIS,KAQ/C,IAAIN,YAAc,SAAUN,GACxB,IAIIa,EACAC,EAUKhD,EAfLiD,EAAcf,EAAOe,YAAaC,EAAKhB,EAAOP,OAAQA,OAAgB,IAAPuB,EAAgB,QAAUA,EACzFC,EAAKF,EAAYG,SAAUC,OAAiB,IAAPF,EAAgB,GAAKA,EAAIL,EAASG,EAAYH,OACnFQ,EAAqB9D,OAAO+D,KAAKpC,gBACjCqC,EAAchE,OAAO+D,KAAKF,GAAW,IAYzC,IAASrD,KATLsD,EAAmBvD,OAASyD,EAAYzD,QACxCgD,EAAgB5B,eAChB6B,EAAeK,GAAW,IAErBC,EAAmBvD,QAAUyD,EAAYzD,SAC9CgD,EAAgBM,GAAW,GAC3BL,EAAe7B,gBAGL4B,EACV1B,YAAYrB,GAAK0B,SAASC,EAE1BhB,MAAMJ,KAAK,IAAIuB,IAAIzB,cAAcA,cAAc,GAAI0C,EAAc/C,IAAI,GAAQgD,EAAahD,IAAM,IAAK,MAazG,OATAuB,YAAYF,YAAYH,OAExBI,KAAOP,WAAWzB,SAASA,SAAS,GAAI2D,GAAc,CAAEG,SAAU/B,eAElEP,KAAK2C,KAAK,CAENC,cAAeZ,EACfO,QAASA,IAEN/B,MAOXkB,YAAYC,GAAKD,YAAYmB,EAAI,SAAUtB,GAGvC,IAFA,IAAQc,EAAIS,EACRtB,EAAS,GACJC,EAAK,EAAGA,EAAKzC,UAAUC,OAAQwC,IACpCD,EAAOC,EAAK,GAAKzC,UAAUyC,GAE/B,IAAIsB,EAAMzC,QAAQiB,GAClB,OAAgL,QAAxKuB,EAAyH,QAAnHT,EAAwE,QAAlED,EAAK5B,MAAAA,UAAmC,EAASA,KAAKwC,cAA2B,IAAPZ,OAAgB,EAASA,EAAGxD,SAAsB,IAAPyD,OAAgB,EAASA,EAAG/C,aAA0B,IAAPwD,OAAgB,EAASA,EAAGzD,KAAKgD,EAAI7B,KAAMjB,cAAc,CAACwD,GAAOvB,GAAU,IAAK,KAO5QE,YAAYI,IAAM,SAAUP,GAGxB,IAFA,IAAQc,EAAIS,EACRtB,EAAS,GACJC,EAAK,EAAGA,EAAKzC,UAAUC,OAAQwC,IACpCD,EAAOC,EAAK,GAAKzC,UAAUyC,GAE/B,IAAIsB,EAAMzC,QAAQiB,GAClB,OAAiL,QAAzKuB,EAA0H,QAApHT,EAAwE,QAAlED,EAAK5B,MAAAA,UAAmC,EAASA,KAAKwC,cAA2B,IAAPZ,OAAgB,EAASA,EAAGa,UAAuB,IAAPZ,OAAgB,EAASA,EAAG/C,aAA0B,IAAPwD,OAAgB,EAASA,EAAGzD,KAAKgD,EAAI7B,KAAMjB,cAAc,CAACwD,GAAOvB,GAAU,IAAK,KAO7QE,YAAYwB,IAAM,SAAU3B,GAGxB,IAFA,IAAQc,EAAIS,EACRtB,EAAS,GACJC,EAAK,EAAGA,EAAKzC,UAAUC,OAAQwC,IACpCD,EAAOC,EAAK,GAAKzC,UAAUyC,GAE/B,IAAIsB,EAAMzC,QAAQiB,GAClB,OAAiL,QAAzKuB,EAA0H,QAApHT,EAAwE,QAAlED,EAAK5B,MAAAA,UAAmC,EAASA,KAAKwC,cAA2B,IAAPZ,OAAgB,EAASA,EAAGe,UAAuB,IAAPd,OAAgB,EAASA,EAAG/C,aAA0B,IAAPwD,OAAgB,EAASA,EAAGzD,KAAKgD,EAAI7B,KAAMjB,cAAc,CAACwD,GAAMvB,GAAQ,oBAMtPE,mBArICd,SAaAM"}