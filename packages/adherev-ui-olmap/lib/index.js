module.exports=function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=35)}([function(e,t){e.exports=require("ol/style.js")},function(e,t){e.exports=require("@baifendian/adherev-util-resource")},function(e,t,n){"use strict";function s(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var u,i,c,l=n(4),r=n(18),_=n.n(r),r=n(19),d=n.n(r),r=n(15),p=n.n(r),r=n(20),f=n.n(r),v=n(7),r=n(21),g=n.n(r),r=n(6),h=n.n(r),r=n(12),m=n.n(r),r=n(22),o=n.n(r),y=n(3),M=n(13),P=n(23),a=n(16),x=n(5),O=n(0),w=n(17),E=n.n(w),r=n(24),b=n.n(r),D=n(25),r=n(26),I=n.n(r),r=n(27),j=n.n(r),r=n(28),L=n.n(r),r=n(1),S=n.n(r),C=n(9),A=n(10),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},R=S.a.Dict.value.ResourceGisEarthRadius.value,k="#1788F3";function q(e){e=e.clientWidth;return Math.ceil(Math.LOG2E*Math.log(e/256))}function F(e){return Object(y.transform)(e,S.a.Dict.value.ResourceGisEpsg3857.value,S.a.Dict.value.ResourceGisEpsg4326.value)}t.a={SHOWBASESTATION_MINZOOM:5,createMap:function(e){var t=e.config,n=e.fitZoom,r=e.zoom,o=void 0===r?q(t.target)||3:r,a=e.minZoom,i=void 0===a?q(t.target)||3:a,u=e.maxZoom,r=void 0===u?S.a.Dict.value.ResourceGisMapMaxZoom.value:u,a=e.center,u=void 0===a?S.a.Dict.value.ResourceGisXinbeiquCenterPoint.value:a,a=e.extent,c=void 0===a?S.a.Dict.value.ResourceGisXinbeiquMapExtent.value:a,e=e.layers,e=void 0===e?[C.getOSMTileLayer()]:e;console.log(u),console.log(Object(y.fromLonLat)(u),o,c,e,n);var s=new _.a(T(T({},t),{controls:Object(D.defaults)({attributionOptions:{collapsible:!1}}).extend([new I.a,new L.a,new j.a({coordinateFormat:Object(P.createStringXY)(5),projection:S.a.Dict.value.ResourceGisEpsg4326.value})]),pixelRatio:1,view:new g.a({center:Object(y.fromLonLat)(u),minZoom:i,maxZoom:r,zoom:o,extent:Object(y.transformExtent)(Object(M.boundingExtent)(c),S.a.Dict.value.ResourceGisEpsg4326.value,S.a.Dict.value.ResourceGisEpsg3857.value)}),layers:e}));return setTimeout(function(){var e;e=n||(e=[].concat(Object(y.fromLonLat)(c[0])).concat(Object(y.fromLonLat)(c[1])),e=s.getView().getResolutionForExtent(e),s.getView().getZoomForResolution(e)),s.getView().setZoom(e)},100),s},setOverlayState:function(e,t){e.setPosition(t)},addClickListener:function(t,n,r,o,a){void 0===r&&(r=function(e){}),void 0===o&&(o=function(e){}),i&&t.un("click",i),c&&t.un("pointermove",c),i=function(e){e.dragging||(e=e.pixel,t.forEachFeatureAtPixel(e,function(e,t){return(t===n?r:o)(e),!0}))},c=function(e){e.dragging||t.forEachFeatureAtPixel(e.pixel,function(e,t){return a(t===n?"pointer":""),!0})},t.on("click",i),t.on("pointermove",c)},addHoverListener:function(r,o,a,i){u&&r.un("pointermove",u),u=function(e){var n;e.dragging||(e=r.getEventPixel(e.originalEvent),n=!1,r.forEachFeatureAtPixel(e,function(e,t){return n=!0,t===o?(r.getTarget().style.cursor="pointer",a(e)):(r.getTarget().style.cursor="",i(e)),!0}),n||i())},r.on("pointermove",u)},addGeoLayer:function(e,t,n,r){r=new A.a(t,n=void 0===n?function(){}:n,r=void 0===r?0:r);return e.addLayer(r),r},addVectorLayer:function(e,t){var n=new x.Vector,t=new a.Vector({source:n,zIndex:t});return e.addLayer(t),{vectorLayer:t,vectorSource:n}},addHeatmapLayer:function(e,t){var n=new x.Vector,t=new a.Heatmap(T({source:n,gradient:["#00005c","#020288","#0202c0","#0ff","#0f0","#ff0","#f00"],weight:function(){return 1},shadow:500,blur:15,radius:20},t));return e.addLayer(t),n},drawCircle:function(e){var t=e.center,n=e.radius,r=e.color,o=void 0===r?"rgba(23,136,243,.2)":r,a=e.strokeColor,i=void 0===a?k:a,u=e.strokeWidth,r=void 0===u?2:u,a=e.zIndex,u=void 0===a?S.a.Dict.value.ResourceNormalMaxZIndex.value:a,a=e.id,a=void 0===a?Object(l.v4)():a,e=e.propertys,e=void 0===e?{}:e,e=new h.a(T({zIndex:u,geometry:new d.a(t,n)},e));return e.setId(a),e.setStyle(new O.Style({fill:new O.Fill({color:o}),stroke:new O.Stroke({width:r,color:i})})),e},drawPolygon:function(e){var t=e.points,n=e.color,r=void 0===n?"rgba(23,136,243,.2)":n,o=e.strokeColor,a=void 0===o?k:o,i=e.strokeWidth,n=void 0===i?2:i,o=e.zIndex,i=void 0===o?S.a.Dict.value.ResourceNormalMaxZIndex.value:o,o=e.id,o=void 0===o?Object(l.v4)():o,e=e.propertys,e=void 0===e?{}:e,e=new h.a(T({zIndex:i,geometry:new p.a(t)},e));return e.setId(o),e.setStyle(new O.Style({fill:new O.Fill({color:r}),stroke:new O.Stroke({width:n,color:a})})),e},drawCirclePoint:function(e){var t=e.id,n=e.pos,r=e.fillOpt,o=void 0===r?{color:"rgba(23,136,243,.2)"}:r,a=e.strokeOpt,i=void 0===a?{width:2,color:k}:a,u=e.radius,c=void 0===u?10:u,r=e.textOpt,a=void 0===r?{}:r,u=e.zIndex,r=void 0===u?1:u,u=e.text,u=void 0===u?"":u,e=e.propertys,e=void 0===e?{}:e,e=new h.a(T({zIndex:S.a.Dict.value.ResourceNormalMaxZIndex.value,geometry:new v.Point(n)},e));return e.setId(t),e.setStyle(new O.Style({image:new O.Circle({fill:new O.Fill(o),stroke:new O.Stroke(i),radius:c}),text:new m.a(T({text:u,textAlign:"center",fill:new O.Fill({color:"#fff"})},a)),zIndex:r})),e},drawRegularShapePoint:function(e){var t=e.id,n=e.pos,r=e.fillOpt,o=void 0===r?{color:"rgba(23,136,243,.2)"}:r,a=e.strokeOpt,i=void 0===a?{width:2,color:k}:a,u=e.text,c=void 0===u?"":u,r=e.textOpt,a=void 0===r?{}:r,u=e.zIndex,r=void 0===u?1:u,u=e.propertys,u=void 0===u?{}:u,e=s(e,["id","pos","fillOpt","strokeOpt","text","textOpt","zIndex","propertys"]),u=new h.a(T({zIndex:S.a.Dict.value.ResourceNormalMaxZIndex.value,geometry:new v.Point(n)},u));return u.setId(t),u.setStyle(new O.Style({image:new O.RegularShape(T({fill:new O.Fill(o),stroke:new O.Stroke(i)},e)),text:new m.a(T({text:c,textAlign:"center",fill:new O.Fill({color:"#fff"})},a)),zIndex:r})),u},drawImagePoint:function(e){var t=e.id,n=e.pos,r=e.zIndex,o=void 0===r?1:r,a=e.src,i=e.color,u=e.opacity,c=e.scale,s=e.anchor,l=e.rotation,_=void 0===l?0:l,d=e.offset,p=void 0===d?[0,0]:d,f=e.offsetOrigin,r=e.size,l=e.text,d=void 0===l?"":l,l=e.textOpt,l=void 0===l?{}:l,e=e.propertys,e=void 0===e?{}:e,e=new h.a(T({zIndex:S.a.Dict.value.ResourceNormalMaxZIndex.value,geometry:new v.Point(n)},e));return e.setId(t),e.setStyle(new O.Style({image:new O.Icon({color:i,src:a,anchor:s,opacity:u,scale:c,rotation:_,offset:p,offsetOrigin:f,size:r}),fill:new O.Fill({color:"#fff"}),text:new m.a(T({text:d,textAlign:"center",fill:new O.Fill({color:"#fff"})},l)),zIndex:o})),e},createRegularPolygonCurve:function(e,t,n,r,o){var a,i,u=360-r,c=Math.PI*(1/n-.5);u&&(c+=u/180*Math.PI);for(var s=[],l=0;l<n;++l)i=c+l*((360-u)/360)*2*Math.PI/n,a=e[0]+t*Math.cos(i),i=e[1]+t*Math.sin(i),s.push([a,i]);0!=u&&s.push(e);var _=new f.a(s);_.rotate(Math.PI-(o-r/2)/180*Math.PI,e);r=new p.a([s]),_=_.A;return r.A=_,r},removeFeature:function(e,t){e.removeFeature(t)},removeAllFeature:function(e){e.clear()},removeAllOverlay:function(e){e.getOverlays().clear()},setMapCenterAnimate:function(e){var t=e.map,n=e.point,e=e.duration,e=void 0===e?600:e;t.getView().animate({center:n,duration:e})},drawLine:function(e){var t=e.points,n=e.width,r=e.color,o=e.lineCap,o=void 0===o?"square":o,e=e.lineJoin,e=void 0===e?"round":e,t=new h.a({geometry:new v.LineString(t)});return t.setStyle(new O.Style({stroke:new O.Stroke({width:n,color:r,lineCap:o,lineJoin:e})})),t},createInteraction:function(e,t){var n=t.onDrawStart,t=new E.a(t);return t.on("drawstart",function(e){n&&n(e)}),e.addInteraction(t),t},polygonInteraction:function(e){var a=e.map,t=e.freehand,n=void 0===t||t,t=e.vectorSource,i=e.onDrawEnd,e=s(e,["map","freehand","vectorSource","onDrawEnd"]),e=this.createInteraction(a,T({source:t,type:"Polygon",freehand:n},e));return e.on("drawend",function(e){e.feature.setId(Object(l.v4)());var t=e.feature.getGeometry(),n=[],r=t.getCoordinates()[0].map(function(e){return n.push(F(e)),e}),o=a.getView().getCenter();i&&i({e:e,geometry:t,coordinates:r,lonlats:n,centerp:o,transformCenterp:F(o)})}),e},circleInteraction:function(e){var t=e.map,n=e.vectorSource,o=e.onDrawEnd,e=s(e,["map","vectorSource","onDrawEnd"]),e=this.createInteraction(t,T({source:n,type:"Circle",freehand:!0},e));return e.on("drawend",function(e){var t=e.feature.getGeometry(),n=t.getRadius(),r=t.getCenter();e.feature.setId(Object(l.v4)()),o&&o({e:e,geometry:t,radius:n,center:r,transformCenter:F(r)})}),e},boxInteraction:function(e){var o=e.map,t=e.vectorSource,a=e.onDrawEnd,e=s(e,["map","vectorSource","onDrawEnd"]),e=this.createInteraction(o,T({source:t,type:"Circle",freehand:!0,geometryFunction:Object(w.createBox)()},e));return e.on("drawend",function(e){e.feature.setId(Object(l.v4)());var t=e.feature.getGeometry(),n=t.getCoordinates()[0].map(function(e){return e}),r=o.getView().getCenter();a&&a({e:e,geometry:t,coordinates:n,centerp:r})}),e},linStringInteraction:function(e){var i=e.map,t=e.freehand,n=void 0===t||t,t=e.vectorSource,u=e.onDrawEnd,e=s(e,["map","freehand","vectorSource","onDrawEnd"]),e=this.createInteraction(i,T({source:t,type:"LineString",freehand:n},e));return e.on("drawend",function(e){e.feature.setId(Object(l.v4)());var t=e.feature.getGeometry(),n=[],r=t.getCoordinates().map(function(e){return n.push(F(e)),e}),o=i.getView().getCenter(),a=t.getLength().toFixed(3);u&&u({e:e,geometry:t,coordinates:r,lonlats:n,centerp:o,mileage:a,transformCenterp:F(o)})}),e},createModifyInteraction:function(e){var t=e.map,n=e.vectorSource,r=e.onModifyEnd,n=new b.a({source:n});return n.on("modifyend",function(e){var t=e.features.getArray(),t=t[t.length-1].getGeometry();r({e:e,geometry:t})}),t.addInteraction(n),n},removeInteraction:function(e,t){e.removeInteraction(t)},removeInteractionAll:function(e){e.getInteractions().clear()},mapFit:function(e,t,n){void 0===t&&(t={}),0!==(e=void 0===e?[]:e).length&&n.getView().fit(e,T({padding:[40,40,40,40],constrainResolution:!1,nearest:!0,duration:200},t))},addArrowsSource:function(e){for(var t=e.points,n=e.color,r=e.icon,o=[],a=0;a<t.length-1;a++){var i=t[a],u=t[a+1],c=u[0]-i[0],i=u[1]-i[1],c=Math.atan2(i,c),u=new h.a({geometry:new v.Point(u)});u.setStyle(new O.Style({image:new O.Icon({color:n,src:r,anchor:[.5,.5],rotateWithView:!0,rotation:-c})})),o.push(u)}return o},addArrowsOverlay:function(e,t,n,r){for(var o=0;o<r.length-1;o++){var a=r[o],i=r[o+1],u=i[0]-a[0],a=i[1]-a[1],a=Math.atan2(a,u)*(180/Math.PI),u=document.createElement("div");u.className="fa fa-caret-right overleayArrowPoint",u.style.transform="rotate("+-a+"deg)",u.style.color=n,t.appendChild(u),this.addOverlay(e,i,u)}},addOverlay:function(e,t,n){t=new o.a(t);return e.addOverlay(t),t},getRad:function(e){return e*Math.PI/180},getExtentByCoordinates:function(e){if(0===e.length)return[];if(1===e.length)return[].concat(e[0],e[0]);for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];t.push(o[0]),n.push(o[1])}return t.sort(function(e,t){return e<t?-1:t<e?1:0}),n.sort(function(e,t){return e<t?-1:t<e?1:0}),[t[0],n[0],t[t.length-1],n[n.length-1]]},getExtentByVectorSource:function(e,t){t=this.getCectorSourceCoordinates(e,t=void 0===t?"Point":t);return this.getExtentByCoordinates(t)},getCectorSourceCoordinates:function(e,r){void 0===r&&(r="Point");var o=[];return e.getFeatures().filter(function(e){return e.getGeometry().getType()===r}).map(function(e){var t,n=e.getGeometry();"Circle"===r?(e=n.getExtent(),o.push([e[0],e[1]]),o.push([e[2],e[3]])):"Point"===r?(t=n.getCoordinates(),o.push(t)):(t=n.getCoordinates(),o=o.concat(t))}),o},getCenterByCoordinates:function(e,r){void 0===r&&(r="Point");var o=[];return e.getFeatures().filter(function(e){return e.getGeometry().getType()===r}).map(function(e){var t,n=e.getGeometry();"Circle"===r?(e=n.getExtent(),o.push([e[0],e[1]]),o.push([e[2],e[3]])):"Point"===r?(t=n.getCoordinates(),o.push(t)):(t=n.getCoordinates(),o=o.concat(t))}),this.getCenterByPoints(o)},getCenterByPoints:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=Object(y.transform)(e[r],S.a.Dict.value.ResourceGisEpsg3857.value,S.a.Dict.value.ResourceGisEpsg4326.value);t.push(o[0]),n.push(o[1])}return{centerLon:Math.min.apply(Math,t)+(Math.max.apply(Math,t)-Math.min.apply(Math,t))/2,centerLat:Math.min.apply(Math,n)+(Math.max.apply(Math,n)-Math.min.apply(Math,n))/2}},getPointsExtent:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=Object(y.transform)(e[r],S.a.Dict.value.ResourceGisEpsg4326.value,S.a.Dict.value.ResourceGisEpsg3857.value);t.push(o[0]),n.push(o[1])}return{leftTop:[Math.min.apply(Math,t),Math.min.apply(Math,n)],rightBottom:[Math.max.apply(Math,t),Math.max.apply(Math,n)]}},getFlatternDistance:function(e,t,n,r){var o=this.getRad((e+n)/2),a=this.getRad((e-n)/2),i=this.getRad((t-r)/2),e=R,n=Math.sin(a),t=Math.sin(i),r=Math.sin(o),a=(n*=n)*(1-(t*=t))+(1-(r*=r))*t,i=(1-n)*(1-t)+r*t,o=Math.atan(Math.sqrt(a/i)),t=Math.sqrt(a*i)/o;return 2*o*e*(1+1/298.257*((3*t-1)/2/i*r*(1-n)-(3*t+1)/2/a*(1-r)*n))},wrapLon:function(e){return e-360*Math.floor((e+180)/360)},getMapExtent:function(e){if(!e)return!1;var t=e.getView().calculateExtent(e.getSize()),n=Object(y.toLonLat)(Object(M.getBottomLeft)(t)),r=Object(y.toLonLat)(Object(M.getTopRight)(t)),e=r[1],t=this.wrapLon(r[0]),r=this.wrapLon(n[0]),n=n[1];return[{lon:r,lat:e},{lon:t,lat:e},{lon:t,lat:n},{lon:r,lat:n},{lon:r,lat:e}]},getFeaturesInExtent:function(e,t){t=t.getGeometry().getExtent();return e.getLayers().getArray()[1].getSource().getFeaturesInExtent(t)},getLayersCount:function(e){return e.getLayers().getLength()},rgb:function(){return"("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"},color16:function(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),n=Math.floor(256*Math.random());return"#"+e.toString(16)+t.toString(16)+n.toString(16)},getLineColor:function(e){return 0<=e&&e<=9?["red","green","blue","yellow","gray","#0000cc","#99ffff","#000000","#003333","#ff6600"][e]:this.color16()},downLoadMap:function(e){e.once("postcompose",function(e){var t=e.context.canvas.toDataURL(),n=document.createElement("a"),e=new MouseEvent("click");n.download="map",n.href=t,n.dispatchEvent(e)}),e.renderSync()}}},function(e,t){e.exports=require("ol/proj.js")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("ol/source.js")},function(e,t){e.exports=require("ol/Feature.js")},function(e,t){e.exports=require("ol/geom")},function(e,t){e.exports=require("ol/layer/Tile")},function(e,t,n){"use strict";n.r(t),n.d(t,"getOSM",function(){return i}),n.d(t,"getXYZ",function(){return u}),n.d(t,"getWMTS",function(){return s}),n.d(t,"getTileWMS",function(){return c}),n.d(t,"getOSMTileLayer",function(){return l}),n.d(t,"getXYZTileLayer",function(){return _}),n.d(t,"getWMTSTileLayer",function(){return d}),n.d(t,"getTileWMSTileLayer",function(){return p});var t=n(8),r=n.n(t),o=n(5),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e){return new o.OSM(e)}function u(e){return new o.XYZ(e)}function c(e){return new o.TileWMS(e)}function s(e){return new o.WMTS(e)}function l(e){var t=void 0===e?{sourceOptions:{},options:{}}:e,e=t.sourceOptions,t=t.options,t=void 0===t?{}:t;return new r.a(a({source:i((void 0===e?{}:e)||{})},t||{}))}function _(e){var t=void 0===e?{sourceOptions:{},options:{}}:e,e=t.sourceOptions,t=t.options,t=void 0===t?{}:t;return new r.a(a({source:u((void 0===e?{}:e)||{})},t||{}))}function d(e){var t=void 0===e?{sourceOptions:{},options:{}}:e,e=t.sourceOptions,t=t.options,t=void 0===t?{}:t;return new r.a(a({source:s((void 0===e?{}:e)||{})},t||{}))}function p(e){var t=void 0===e?{sourceOptions:{},options:{}}:e,e=t.sourceOptions,t=t.options,t=void 0===t?{}:t;return new r.a(a({source:c((void 0===e?{}:e)||{})},t||{}))}},function(e,t,n){"use strict";var r,o,a=n(11),i=n(29),u=n(30),c=n.n(u),u=n(1),s=n.n(u),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=(o=a.Vector,u(l,o),l);function l(e,t,n){var r=this,e=new i.Vector({features:new c.a({dataProjection:s.a.Dict.value.ResourceGisEpsg4326.value,featureProjection:s.a.Dict.value.ResourceGisEpsg3857.value}).readFeatures(e)});return(r=o.call(this,{source:e,style:t,zIndex:n})||this).vectorSource=e,r}t.a=u},function(e,t){e.exports=require("ol/layer")},function(e,t){e.exports=require("ol/style/Text")},function(e,t){e.exports=require("ol/extent.js")},function(e,t){e.exports=require("algebra.js")},function(e,t){e.exports=require("ol/geom/Polygon")},function(e,t){e.exports=require("ol/layer.js")},function(e,t){e.exports=require("ol/interaction/Draw.js")},function(e,t){e.exports=require("ol/Map")},function(e,t){e.exports=require("ol/geom/Circle")},function(e,t){e.exports=require("ol/geom/LinearRing")},function(e,t){e.exports=require("ol/View")},function(e,t){e.exports=require("ol/Overlay.js")},function(e,t){e.exports=require("ol/coordinate")},function(e,t){e.exports=require("ol/interaction/Modify")},function(e,t){e.exports=require("ol/control.js")},function(e,t){e.exports=require("ol/control/Zoom.js")},function(e,t){e.exports=require("ol/control/MousePosition.js")},function(e,t){e.exports=require("ol/control/ScaleLine.js")},function(e,t){e.exports=require("ol/source")},function(e,t){e.exports=require("ol/format/GeoJSON")},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(33),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),uuid__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_3__),algebra_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14),algebra_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(algebra_js__WEBPACK_IMPORTED_MODULE_4__),ol_proj_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),ol_proj_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(ol_proj_js__WEBPACK_IMPORTED_MODULE_5__),_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2);function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var AnimationManager=function(){function AnimationManager(e,t){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,AnimationManager),this.runing=!1,this.vectorSource=e,this.animationMap=[],this.preAnimations=[],this.config=t}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(AnimationManager,[{key:"isRun",value:function(){return this.runing}},{key:"getPoints",value:function getPoints(locations){console.log("locations",locations);var distance=0,addPoints=[];this.animationMap=[];for(var i=locations.length-1;1<=i;i--){var startPoint=Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_5__.fromLonLat)(locations[i]),endPoint=Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_5__.fromLonLat)(locations[i-1]),xDistance=Math.abs(startPoint[0]-endPoint[0]);distance+=xDistance}var speed=Math.floor(distance/(80*locations.length));0===speed&&(speed=.01),this.animationMap[0]=locations.length-1;for(var _i=locations.length-1;1<=_i;_i--){var _startPoint=Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_5__.fromLonLat)(locations[_i]),_endPoint=Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_5__.fromLonLat)(locations[_i-1]),xDirection=_startPoint[0]<_endPoint[0]?"->":"<-",yDirection=_startPoint[1]<_endPoint[1]?"->":"<-";if(_startPoint[0]!==_endPoint[0]||_startPoint[1]!==_endPoint[1]){if(_startPoint[0]===_endPoint[0]&&_startPoint[1]!==_endPoint[1]){var xdistance=Math.abs(_startPoint[1]-_endPoint[1]),interval=Math.floor(xdistance/speed);0<xdistance%speed&&(interval+=1);for(var j=1;j<=interval;j++){var x=_startPoint[0],y=void 0;"->"===yDirection?y=xdistance<j*speed?(x=_endPoint[0],_endPoint[1]):_startPoint[1]+j*speed:"<-"===yDirection&&(y=xdistance<j*speed?(x=_endPoint[0],_endPoint[1]):_startPoint[1]-j*speed),addPoints.push([x,y])}}else if(_startPoint[0]!==_endPoint[0]&&_startPoint[1]===_endPoint[1]){var _xDistance=Math.abs(_startPoint[0]-_endPoint[0]),_interval=Math.floor(_xDistance/speed);0<_xDistance%speed&&(_interval+=1);for(var _j=1;_j<=_interval;_j++){var _x=void 0,_y=_startPoint[1];"->"===xDirection?_xDistance<_j*speed?(_x=_endPoint[0],_y=_endPoint[1]):_x=_startPoint[0]+_j*speed:"<-"===xDirection&&(_xDistance<_j*speed?(_x=_endPoint[0],_y=_endPoint[1]):_x=_startPoint[0]-_j*speed),addPoints.push([_x,_y])}}else{var time=150,_xDistance2=Math.abs(_startPoint[0]-_endPoint[0]),speed=_xDistance2/time,_interval2=Math.floor(_xDistance2/speed);0<_xDistance2%speed&&(_interval2+=1);for(var Equation=algebra_js__WEBPACK_IMPORTED_MODULE_4___default.a.Equation,x1=algebra_js__WEBPACK_IMPORTED_MODULE_4___default.a.parse("".concat(_startPoint[1],"=").concat(_startPoint[0],"k+b")),answer1=x1.solveFor("k"),x2=algebra_js__WEBPACK_IMPORTED_MODULE_4___default.a.parse("".concat(_endPoint[1],"=").concat(_endPoint[0],"k+b")),answer2=x2.solveFor("k"),eq=new Equation(answer1,answer2),answerX=eq.solveFor("b"),eq=x1.eval({b:answerX}),answerY=eq.solveFor("k"),b=eval(answerX.toString()),k=eval(answerY.toString()),_j2=1;_j2<=_interval2;_j2++){var _x2=void 0,_y2=void 0;"->"===xDirection?_y2=_xDistance2<_j2*speed?(_x2=_endPoint[0],_endPoint[1]):(_x2=_startPoint[0]+_j2*speed,k*_x2+b):"<-"===xDirection&&(_y2=_xDistance2<_j2*speed?(_x2=_endPoint[0],_endPoint[1]):(_x2=_startPoint[0]-_j2*speed,k*_x2+b)),addPoints.push([_x2,_y2])}}this.animationMap[addPoints.length-1]=_i-1}}return addPoints}},{key:"run",value:function(e,t){var n=this;if(!e||this.runing)return!1;this.runing=!0,this.pointsMapIndex=t;e=e.values();this.loopTask(e).then(function(){n.runing=!1,console.log("finish")})}},{key:"loopTask",value:function(r){var o=this;return new Promise(function(e,t){var n=r.next();n.done?e():(n=n.value,n=o.getPoints(n),o.runTask(n).then(function(){o.loopTask(r).then(function(){e()})}).catch(function(e){t(e)}))})}},{key:"runTask",value:function(s){var e=this;return this.preActiveId="",new Promise(function(i){var u=e;if(!s.length)return i(),!1;var c=0;e.pref=null,e.lines=[],e.handler=null,u.handler=requestAnimationFrame(function e(){if(c===s.length)return u.stopTask(),u.preAnimations&&(u.preAnimations.forEach(function(e){u.vectorSource.removeFeature(e)}),u.preAnimations=[]),i(),!1;u.pref&&u.vectorSource.removeFeature(u.pref);var t,n,r,o=s[c],a=0;0!==c&&(r=_util__WEBPACK_IMPORTED_MODULE_6__.a.drawLine({points:[s[c-1],s[c]],width:u.config.lineWidth,color:u.config.lineColor}),u.vectorSource.addFeature(r),u.lines.push(r),t=s[c-1],r=o[0]-t[0],t=o[1]-t[1],a=Math.atan2(t,r)),!u.animationMap[c]&&0!==u.animationMap[c]||(u.preActiveId&&(n=u.vectorSource.getFeatureById(u.preActiveId),u.vectorSource.removeFeature(n),u.preActiveId=""),(r=u.pointsMapIndex[u.animationMap[c]])&&(n="active_".concat(r.id),r=_util__WEBPACK_IMPORTED_MODULE_6__.a.drawImagePoint(_objectSpread(_objectSpread({},r),{},{id:n,src:u.config.pointImg,zIndex:r.zIndex+10})),u.vectorSource.addFeature(r),u.preActiveId=n));a=_util__WEBPACK_IMPORTED_MODULE_6__.a.drawImagePoint({id:Object(uuid__WEBPACK_IMPORTED_MODULE_3__.v1)(),pos:o,src:u.config.arrowImg,scale:1,zIndex:1e3,rotation:-a});u.vectorSource.addFeature(a),u.pref=a,++c,u.handler=requestAnimationFrame(e)})})}},{key:"stopTask",value:function(){if(!this.runing)return!1;if(this.handler&&cancelAnimationFrame(this.handler),this.pref&&this.vectorSource.removeFeature(this.pref),this.lines)for(var e=0;e<this.lines.length;e++)this.vectorSource.removeFeature(this.lines[e]);var t;this.preActiveId&&(t=this.vectorSource.getFeatureById(this.preActiveId),this.vectorSource.removeFeature(t),this.preActiveId="")}},{key:"stop",value:function(){this.stopTask(),this.runing=!1}}]),AnimationManager}();__webpack_exports__.a=AnimationManager},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),o=n.n(r),i={MAP_TYPE_ADMINISTRATIVE:"administrative",MAP_TYPE_SATELLITE:"satellite"},c=n(2),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u={name:"adv-olmap",props:{type:{type:String,default:i.MAP_TYPE_ADMINISTRATIVE,validator:function(e){return-1!==[i.MAP_TYPE_ADMINISTRATIVE,i.MAP_TYPE_SATELLITE].indexOf(e)}},mapConfig:{type:Object,default:function(){}},maxZoom:{type:[String,Number],default:o.a.Dict.value.ResourceGisMapMaxZoom.value},zoom:{type:[String,Number],default:o.a.Dict.value.ResourceGisMapMaxZoom.value},fitZoom:{type:[String,Number],default:o.a.Dict.value.ResourceGisMapMaxZoom.value},minZoom:{type:[String,Number],default:o.a.Dict.value.ResourceGisMapMinZoom.value},center:{type:Array,default:function(){return o.a.Dict.value.ResourceGisXinbeiquCenterPoint.value}},layers:{type:Array,default:function(){}}},data:function(){return{_map:null,_zoom:null,_mainGeoLayer:null}},mounted:function(){var e=this,t=e.mapConfig,n=e.type,r=e.maxZoom,o=e.minZoom,a=e.zoom,i=e.layers,u=e.center,e=e.extent;this.$data._map=c.a.createMap(s({config:{target:this.$refs.ref},type:n,maxZoom:r,zoom:a,minZoom:o,center:u,extent:e,layers:i},t)),this.$data._zoom=this.$data._map.getView().getZoom()},methods:{addMainGeoJSONLayer:function(e){var t=e.geoJSONStyle,e=e.geoJSONData,n=t.stroke,r=t.fill,o=t.text;this.$data._mainGeoLayer=this.addGeoLayer(e,function(){return new a.Style({fill:new a.Fill(s({},r)),stroke:new a.Stroke(s({},n)),text:new a.Text(s(s({},o),{fill:new a.Fill({color:o.color}),overflow:!0}))})})},addGeoLayer:function(e,t,n){return c.a.addGeoLayer(this.$data._map,e,t,n=void 0===n?0:n)},addDataLayer:function(e){return c.a.addVectorLayer(this.$data._map,e)},addHoverListener:function(e,t,n){c.a.addHoverListener(this.$data._map,e,t,n)},addZoomListener:function(n){var r=this;this.$data._map.on("moveend",function(e){var t=r.$data._map.getView().getZoom();t!==r.$data._zoom&&n(t),r.$data._zoom=t})},addClickListener:function(e,t,n){c.a.addClickListener(this.$data._map,e,t,n,this.setCursor)},addOverlay:function(e){return c.a.addOverlay(this.$data._map,e)},setOverlayState:function(e,t){c.a.setOverlayState(e,t)},setCursor:function(e){this.$data._map.getTarget().style.cursor=e},clear:function(){for(var e=this.$data._map.getLayers(),t=1;t<e.getLength();t++)this.$data._map.removeLayer(e.item(t))},getMap:function(){return this.$data._map}},render:function(e){return e("div",{class:"adherev-ui-olmap",ref:"ref"})}},l=n(11),_={name:"adv-olmap-heatmap",props:{heatMapLayerConfig:{type:Object,default:function(){}}},data:function(){return{_vectorSource:null}},mixins:[u],methods:{addLayer:function(){var e=this.heatMapLayerConfig;this.$data._vectorSource=c.a.addHeatmapLayer(this.$data._map,e)},getHeatmapLayer:function(){for(var e=this.$data._map.getLayers(),t=null,n=1;n<e.getLength();n++){var r=e.item(n);if(r instanceof l.Heatmap){t=r;break}}return t}}},d=n(10),p=n(9),r=function(t){var n=t;return n.install=function(e){e.component(n.displayName||n.name,t)},t},f={AnimationManager:n(31).a,GeoLayer:d.a,TitleLayer:p,OLMap:u,HeatMap:_,Util:c.a,isUse:function(){return!0},use:function(e){e.use(f.OLMap),e.use(f.HeatMap)}};f.OLMap=r(f.OLMap),f.HeatMap=r(f.HeatMap),t.default=f}]).default;
//# sourceMappingURL=index.js.map
