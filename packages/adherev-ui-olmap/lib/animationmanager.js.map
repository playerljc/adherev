{"version":3,"file":"animationmanager.js","sources":["animationmanager.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.regexp.to-string.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.promise.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar algebra_js_1 = tslib_1.__importDefault(require(\"algebra.js\"));\nvar proj_js_1 = require(\"ol/proj.js\");\nvar uuid_1 = require(\"uuid\");\nvar util_1 = tslib_1.__importDefault(require(\"./util\"));\n/**\n * AnimationManager\n * @class AnimationManager\n * @classdesc 地图轨迹播放动画\n */\nvar AnimationManager = /** @class */function () {\n  // runing: boolean;\n  // vectorSource: any;\n  // animationMap: {};\n  // preAnimations: any[];\n  // pointsMapIndex: any;\n  // preActiveId: string | undefined;\n  // handler: any;\n  // lines: any;\n  // pref: any;\n  // config: {\n  //   arrowImg: '';\n  //   pointImg: '';\n  //   lineWidth: 8,\n  //   lineColor: '#FF5D00',\n  // };\n  function AnimationManager(vectorSource, config) {\n    this.runing = false;\n    this.vectorSource = vectorSource;\n    this.animationMap = [];\n    this.preAnimations = [];\n    this.config = config;\n  }\n  AnimationManager.prototype.isRun = function () {\n    return this.runing;\n  };\n  AnimationManager.prototype.getPoints = function (locations) {\n    console.log('locations', locations);\n    var distance = 0;\n    // let speed = 0;\n    var addPoints = [];\n    this.animationMap = [];\n    for (var i = locations.length - 1; i >= 1; i--) {\n      var startPoint = (0, proj_js_1.fromLonLat)(locations[i]);\n      var endPoint = (0, proj_js_1.fromLonLat)(locations[i - 1]);\n      // 距离\n      var xDistance = Math.abs(startPoint[0] - endPoint[0]);\n      distance += xDistance;\n    }\n    var speed = Math.floor(distance / (locations.length * 80));\n    if (speed === 0) {\n      speed = 0.01;\n    }\n    this.animationMap[0] = locations.length - 1;\n    for (var i = locations.length - 1; i >= 1; i--) {\n      var startPoint = (0, proj_js_1.fromLonLat)(locations[i]);\n      var endPoint = (0, proj_js_1.fromLonLat)(locations[i - 1]);\n      var xDirection = startPoint[0] < endPoint[0] ? '->' : '<-';\n      var yDirection = startPoint[1] < endPoint[1] ? '->' : '<-';\n      // 同一个点没有轨迹\n      // eslint-disable-next-line no-continue\n      if (startPoint[0] === endPoint[0] && startPoint[1] === endPoint[1]) continue;\n      // 垂直的\n      if (startPoint[0] === endPoint[0] && startPoint[1] !== endPoint[1]) {\n        // 距离\n        var xdistance = Math.abs(startPoint[1] - endPoint[1]);\n        // 段数\n        var interval = Math.floor(xdistance / speed);\n        if (xdistance % speed > 0) {\n          interval += 1;\n        }\n        for (var j = 1; j <= interval; j++) {\n          var x = startPoint[0];\n          var y = void 0;\n          if (yDirection === '->') {\n            if (j * speed > xdistance) {\n              // eslint-disable-next-line prefer-destructuring\n              x = endPoint[0];\n              // eslint-disable-next-line prefer-destructuring\n              y = endPoint[1];\n            } else {\n              y = startPoint[1] + j * speed;\n            }\n          } else if (yDirection === '<-') {\n            if (j * speed > xdistance) {\n              // eslint-disable-next-line prefer-destructuring\n              x = endPoint[0];\n              // eslint-disable-next-line prefer-destructuring\n              y = endPoint[1];\n            } else {\n              y = startPoint[1] - j * speed;\n            }\n          }\n          addPoints.push([x, y]);\n        }\n      } else if (startPoint[0] !== endPoint[0] && startPoint[1] === endPoint[1]) {\n        // 水平的\n        // 距离\n        var xDistance = Math.abs(startPoint[0] - endPoint[0]);\n        // 段数\n        var interval = Math.floor(xDistance / speed);\n        if (xDistance % speed > 0) {\n          interval += 1;\n        }\n        for (var j = 1; j <= interval; j++) {\n          var x = void 0;\n          var y = startPoint[1];\n          if (xDirection === '->') {\n            if (j * speed > xDistance) {\n              // eslint-disable-next-line prefer-destructuring\n              x = endPoint[0];\n              // eslint-disable-next-line prefer-destructuring\n              y = endPoint[1];\n            } else {\n              x = startPoint[0] + j * speed;\n            }\n          } else if (xDirection === '<-') {\n            if (j * speed > xDistance) {\n              // eslint-disable-next-line prefer-destructuring\n              x = endPoint[0];\n              // eslint-disable-next-line prefer-destructuring\n              y = endPoint[1];\n            } else {\n              x = startPoint[0] - j * speed;\n            }\n          }\n          addPoints.push([x, y]);\n        }\n      } else {\n        // 有角度的\n        // 距离\n        var time = 5 * 30;\n        var xDistance = Math.abs(startPoint[0] - endPoint[0]);\n        speed = xDistance / time;\n        // 段数\n        var interval = Math.floor(xDistance / speed);\n        if (xDistance % speed > 0) {\n          interval += 1;\n        }\n        var Equation = algebra_js_1.default.Equation;\n        //= ======================================\n        var x1 = algebra_js_1.default.parse(\"\".concat(startPoint[1], \"=\").concat(startPoint[0], \"k+b\"));\n        var answer1 = x1.solveFor('k');\n        // console.log(`k = ${answer1.toString()}`);\n        var x2 = algebra_js_1.default.parse(\"\".concat(endPoint[1], \"=\").concat(endPoint[0], \"k+b\"));\n        var answer2 = x2.solveFor('k');\n        // console.log(`k = ${answer2.toString()}`);\n        //= ================================================\n        // 解出b值\n        var eq = new Equation(answer1, answer2);\n        // console.log(`b表达式：${eq.toString()}`);\n        var answerX = eq.solveFor('b');\n        // console.log(`解出B的值为：${answerX.toString()}`);\n        //= ================================================\n        // 解出Y值（把x的值代入x1或x2）\n        eq = x1.eval({\n          b: answerX\n        });\n        // console.log(`k表达式：${eq.toString()}`);\n        var answerY = eq.solveFor('k');\n        // console.log(`解出k的值为：${answerY.toString()}`);\n        // eslint-disable-next-line no-eval\n        var b = eval(answerX.toString());\n        // eslint-disable-next-line no-eval\n        var k = eval(answerY.toString());\n        for (var j = 1; j <= interval; j++) {\n          var x = void 0;\n          var y = void 0;\n          if (xDirection === '->') {\n            if (j * speed > xDistance) {\n              // eslint-disable-next-line prefer-destructuring\n              x = endPoint[0];\n              // eslint-disable-next-line prefer-destructuring\n              y = endPoint[1];\n            } else {\n              x = startPoint[0] + j * speed;\n              y = k * x + b;\n            }\n          } else if (xDirection === '<-') {\n            if (j * speed > xDistance) {\n              // eslint-disable-next-line prefer-destructuring\n              x = endPoint[0];\n              // eslint-disable-next-line prefer-destructuring\n              y = endPoint[1];\n            } else {\n              x = startPoint[0] - j * speed;\n              y = k * x + b;\n            }\n          }\n          addPoints.push([x, y]);\n        }\n      }\n      this.animationMap[addPoints.length - 1] = i - 1;\n    }\n    return addPoints;\n  };\n  AnimationManager.prototype.run = function (lineData, pointsMapIndex) {\n    var _this = this;\n    if (!lineData || this.runing) return false;\n    this.runing = true;\n    this.pointsMapIndex = pointsMapIndex;\n    var it = lineData.values();\n    this.loopTask(it).then(function () {\n      // 所有动画完成\n      _this.runing = false;\n    });\n  };\n  AnimationManager.prototype.loopTask = function (it) {\n    var _this = this;\n    return new Promise(function (resolve, reject) {\n      var entry = it.next();\n      if (entry.done) {\n        resolve();\n      } else {\n        var lines = entry.value;\n        var points = _this.getPoints(lines);\n        _this.runTask(points).then(function () {\n          _this.loopTask(it).then(function () {\n            resolve();\n          });\n        }).catch(function (error) {\n          reject(error);\n        });\n      }\n    });\n  };\n  AnimationManager.prototype.runTask = function (points) {\n    var _this = this;\n    this.preActiveId = '';\n    return new Promise(function (resolve) {\n      var self = _this;\n      if (!points.length) {\n        resolve();\n        return false;\n      }\n      var topIndex = 0;\n      _this.pref = null;\n      _this.lines = [];\n      _this.handler = null;\n      function loop() {\n        if (topIndex === points.length) {\n          self.stopTask();\n          if (self.preAnimations) {\n            self.preAnimations.forEach(function (p) {\n              self.vectorSource.removeFeature(p);\n            });\n            self.preAnimations = [];\n          }\n          resolve();\n          return false;\n        }\n        if (self.pref) {\n          self.vectorSource.removeFeature(self.pref);\n        }\n        var point = points[topIndex];\n        var rotation = 0;\n        if (topIndex !== 0) {\n          var line = util_1.default.drawLine({\n            points: [points[topIndex - 1], points[topIndex]],\n            width: self.config.lineWidth,\n            color: self.config.lineColor\n          });\n          self.vectorSource.addFeature(line);\n          self.lines.push(line);\n          var prePoint = points[topIndex - 1];\n          var dx = point[0] - prePoint[0];\n          var dy = point[1] - prePoint[1];\n          rotation = Math.atan2(dy, dx);\n        }\n        if (self.animationMap[topIndex] || self.animationMap[topIndex] === 0) {\n          if (self.preActiveId) {\n            var preFeature = self.vectorSource.getFeatureById(self.preActiveId);\n            self.vectorSource.removeFeature(preFeature);\n            self.preActiveId = '';\n          }\n          var pointConfig = self.pointsMapIndex[self.animationMap[topIndex]];\n          if (pointConfig) {\n            var id = \"active_\".concat(pointConfig.id);\n            var node = util_1.default.drawImagePoint(tslib_1.__assign(tslib_1.__assign({}, pointConfig), {\n              id: id,\n              src: self.config.pointImg,\n              zIndex: pointConfig.zIndex + 10\n            }));\n            self.vectorSource.addFeature(node);\n            self.preActiveId = id;\n          }\n        }\n        var f = util_1.default.drawImagePoint({\n          id: (0, uuid_1.v1)(),\n          pos: point,\n          src: self.config.arrowImg,\n          scale: 1,\n          zIndex: 1000,\n          rotation: -rotation\n        });\n        self.vectorSource.addFeature(f);\n        self.pref = f;\n        // eslint-disable-next-line no-plusplus\n        ++topIndex;\n        self.handler = requestAnimationFrame(loop);\n      }\n      self.handler = requestAnimationFrame(loop);\n    });\n  };\n  AnimationManager.prototype.stopTask = function () {\n    if (!this.runing) return false;\n    if (this.handler) {\n      cancelAnimationFrame(this.handler);\n    }\n    if (this.pref) {\n      this.vectorSource.removeFeature(this.pref);\n    }\n    if (this.lines) {\n      for (var i = 0; i < this.lines.length; i++) {\n        this.vectorSource.removeFeature(this.lines[i]);\n      }\n    }\n    if (this.preActiveId) {\n      var preFeature = this.vectorSource.getFeatureById(this.preActiveId);\n      this.vectorSource.removeFeature(preFeature);\n      this.preActiveId = '';\n    }\n  };\n  AnimationManager.prototype.stop = function () {\n    this.stopTask();\n    this.runing = false;\n  };\n  return AnimationManager;\n}();\nexports.default = AnimationManager;"],"names":["require","Object","defineProperty","exports","value","tslib_1","algebra_js_1","__importDefault","proj_js_1","uuid_1","util_1","AnimationManager","vectorSource","config","this","runing","animationMap","preAnimations","prototype","isRun","getPoints","locations","console","log","distance","addPoints","i","length","startPoint","fromLonLat","endPoint","xDistance","Math","abs","speed","floor","xDirection","yDirection","xdistance","interval","j","x","y","push","time","Equation","default","x1","parse","concat","answer1","solveFor","x2","answer2","eq","answerX","eval","b","answerY","toString","k","run","lineData","pointsMapIndex","_this","it","values","loopTask","then","Promise","resolve","reject","entry","next","done","lines","points","runTask","catch","error","preActiveId","self","topIndex","pref","handler","requestAnimationFrame","loop","stopTask","forEach","p","removeFeature","id","point","rotation","f","line","drawLine","width","lineWidth","color","lineColor","addFeature","prePoint","dx","dy","atan2","preFeature","getFeatureById","pointConfig","node","drawImagePoint","__assign","src","pointImg","zIndex","v1","pos","arrowImg","scale","cancelAnimationFrame","stop"],"mappings":"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"}