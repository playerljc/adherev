{"version":3,"file":"MenuItem.js","sources":["MenuItem.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport { __assign } from \"tslib\";\nimport classNames from 'classnames';\nimport { computed, defineComponent, h, inject } from 'vue';\nimport { object } from 'vue-types';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport Util from '@baifendian/adherev-util';\nimport SubMenu from './SubMenu';\nvar selectorPrefix = 'adherev-ui-contextmenu-menuitem';\nvar props = {\n  data: object().def({})\n};\nexport default defineComponent({\n  props: props,\n  setup: function setup(props) {\n    var context = inject('context');\n    var root = inject('root');\n    var getClass = computed(function () {\n      return classNames(selectorPrefix, props.data.disabled ? 'disabled' : '', (props.data.className || '').split(/\\s+/));\n    });\n    var renderIcon = function renderIcon() {\n      var _a, _b, _c;\n      if (props.data.icon && ((_a = Util === null || Util === void 0 ? void 0 : Util.isString) === null || _a === void 0 ? void 0 : _a.call(Util, props.data.icon))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-icon\"), props.data.icon)\n        }, null);\n      }\n      if (props.data.icon && ((_b = Util === null || Util === void 0 ? void 0 : Util.isObject) === null || _b === void 0 ? void 0 : _b.call(Util, props.data.icon))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-icon\"))\n        }, [h(props.data.icon)]);\n      }\n      if (props.data.icon && ((_c = Util === null || Util === void 0 ? void 0 : Util.isFunction) === null || _c === void 0 ? void 0 : _c.call(Util, props.data.icon))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-icon\"))\n        }, [props.data.icon(h, __assign({}, props.data))]);\n      }\n      return null;\n    };\n    var renderName = function renderName() {\n      var _a, _b, _c;\n      if (props.data.name && ((_a = Util === null || Util === void 0 ? void 0 : Util.isString) === null || _a === void 0 ? void 0 : _a.call(Util, props.data.name))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-name\"))\n        }, [props.data.name]);\n      }\n      if (props.data.name && ((_b = Util === null || Util === void 0 ? void 0 : Util.isObject) === null || _b === void 0 ? void 0 : _b.call(Util, props.data.name))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-name\"))\n        }, [h(props.data.name)]);\n      }\n      if (props.data.name && ((_c = Util === null || Util === void 0 ? void 0 : Util.isFunction) === null || _c === void 0 ? void 0 : _c.call(Util, props.data.name))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-name\"))\n        }, [props.data.name(h, __assign({}, props.data))]);\n      }\n      return null;\n    };\n    var renderMore = function renderMore() {\n      var _a, _b;\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": ((_b = (_a = props === null || props === void 0 ? void 0 : props.data) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length) !== 0\n        }, {\n          default: function _default() {\n            return [_createVNode(\"span\", {\n              \"class\": \"\".concat(selectorPrefix, \"-more fa fa-caret-right\")\n            }, null)];\n          }\n        })\n      );\n    };\n    var renderSubMenu = function renderSubMenu() {\n      var _a, _b, _c;\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": ((_b = (_a = props === null || props === void 0 ? void 0 : props.data) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length) !== 0\n        }, {\n          default: function _default() {\n            return [_createVNode(SubMenu, {\n              \"data\": (_c = props === null || props === void 0 ? void 0 : props.data) === null || _c === void 0 ? void 0 : _c.children,\n              \"className\": props.data.subMenuClassName,\n              \"style\": props.data.subMenuStyle\n            }, null)];\n          }\n        })\n      );\n    };\n    var onClick = function onClick(e) {\n      var _a, _b;\n      e.stopPropagation();\n      // const { config, el } = inject('getContext') as ContextReturnType;\n      var handler = context.config.handler;\n      if (props.data.disabled || (props.data.children || []).length > 0) return false;\n      if (handler) {\n        handler(props.data.id, props.data.attribute);\n        root.unmount();\n        (_b = (_a = context.el) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(context.el);\n      }\n    };\n    return function () {\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !props.data.separation\n        }, {\n          default: function _default() {\n            return _createVNode(\"li\", {\n              \"class\": getClass.value,\n              \"style\": props.data.style,\n              \"onClick\": onClick\n            }, [renderIcon(), renderName(), renderMore(), renderSubMenu()]);\n          },\n          noMatch: function noMatch() {\n            return _createVNode(\"li\", {\n              \"class\": \"\".concat(selectorPrefix, \"-separation\")\n            }, null);\n          }\n        })\n      );\n    };\n  }\n});"],"names":["_createVNode","__assign","classNames","computed","defineComponent","h","inject","object","ConditionalRender","Util","SubMenu","selectorPrefix","props","data","def","setup","onClick","e","stopPropagation","handler","context","config","disabled","children","length","id","attribute","root","unmount","_b","_a","el","parentElement","removeChild","getClass","className","split","conditional","separation","default","class","value","style","icon","isString","call","concat","isObject","_c","isFunction","name","subMenuClassName","subMenuStyle","noMatch"],"mappings":"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"}