{"version":3,"file":"MenuItem.js","sources":["MenuItem.js"],"sourcesContent":["import \"core-js/modules/es.function.name.js\";\nimport { __spreadArrays } from \"tslib\";\nimport classNames from 'classnames'; // import { Fragment } from 'vue-fragment';\n\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport Util from '@baifendian/adherev-util';\nimport SubMenu from './SubMenu';\nvar selectorPrefix = 'adherev-ui-contextmenu-menuitem';\nvar MenuItem = {\n  props: {\n    data: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  inject: ['getContext'],\n  computed: {\n    getClass: function getClass() {\n      var _a = this.data,\n          _b = _a.disabled,\n          disabled = _b === void 0 ? false : _b,\n          className = _a.className;\n      return classNames(selectorPrefix, disabled ? 'disabled' : '', className || '');\n    }\n  },\n  methods: {\n    renderIcon: function renderIcon(h) {\n      var icon = this.data.icon;\n\n      if (icon && Util.isString(icon)) {\n        return h(\"span\", {\n          \"class\": classNames(selectorPrefix + \"-icon\", icon)\n        });\n      }\n\n      if (icon && Util.isObject(icon)) {\n        return h(\"span\", {\n          \"class\": classNames(selectorPrefix + \"-icon\")\n        }, [h(icon)]);\n      }\n\n      if (icon && Util.isFunction) {\n        return h(\"span\", {\n          \"class\": classNames(selectorPrefix + \"-icon\")\n        }, [icon.apply(void 0, __spreadArrays([h], this.data))]);\n      }\n\n      return null;\n      /*return (\n        <ConditionalRender conditional={Util.isString(icon)}>\n          <span class={classNames(`${selectorPrefix}-icon`, icon)} />\n                  {/!*@ts-ignore*!/}\n          <Fragment slot=\"noMatch\">\n            <ConditionalRender conditional={Util.isObject(icon)}>\n              <span class={classNames(`${selectorPrefix}-icon`)}>{h(icon)}</span>\n                      {/!*@ts-ignore*!/}\n              <Fragment slot=\"noMatch\">\n                <ConditionalRender conditional={Util.isFunction(icon)}>\n                  <span class={classNames(`${selectorPrefix}-icon`)}>\n                    {Util.isFunction(icon) ? icon(h) : null}\n                  </span>\n                </ConditionalRender>\n              </Fragment>\n            </ConditionalRender>\n          </Fragment>\n        </ConditionalRender>\n      );*/\n    },\n    renderName: function renderName(h) {\n      var name = this.data.name;\n\n      if (name && Util.isString(name)) {\n        return h(\"span\", {\n          \"class\": classNames(selectorPrefix + \"-name\")\n        }, [name]);\n      }\n\n      if (name && Util.isObject(name)) {\n        return h(\"span\", {\n          \"class\": classNames(selectorPrefix + \"-name\")\n        }, [h(name)]);\n      }\n\n      if (name && Util.isFunction(name)) {\n        return h(\"span\", {\n          \"class\": classNames(selectorPrefix + \"-name\")\n        }, [name.apply(void 0, __spreadArrays([h], this.data))]);\n      }\n\n      return null;\n      /*return (\n        <ConditionalRender conditional={Util.isString(name)}>\n          <span class={classNames(`${selectorPrefix}-name`)}>{name}</span>\n                  {/!*@ts-ignore*!/}\n          <Fragment slot=\"noMatch\">\n            <ConditionalRender conditional={Util.isObject(name)}>\n              {<span class={classNames(`${selectorPrefix}-name`)}>{h(name)}</span>}\n                      {/!*@ts-ignore*!/}\n              <Fragment slot=\"noMatch\">\n                <ConditionalRender conditional={Util.isFunction(name)}>\n                  <span class={classNames(`${selectorPrefix}-name`)}>\n                    {Util.isFunction(name) ? name(h) : null}\n                  </span>\n                </ConditionalRender>\n              </Fragment>\n            </ConditionalRender>\n          </Fragment>\n        </ConditionalRender>\n      );*/\n    },\n    renderMore: function renderMore(h) {\n      var children = this.data.children;\n      return h(ConditionalRender, {\n        \"attrs\": {\n          \"conditional\": children.length !== 0\n        }\n      }, [h(\"span\", {\n        \"class\": selectorPrefix + \"-more fa fa-caret-right\"\n      })]);\n    },\n    renderSubMenu: function renderSubMenu(h) {\n      var _a = this.data,\n          children = _a.children,\n          subMenuClassName = _a.subMenuClassName,\n          subMenuStyle = _a.subMenuStyle;\n      return h(ConditionalRender, {\n        \"attrs\": {\n          \"conditional\": children.length !== 0\n        }\n      }, [h(SubMenu, {\n        \"attrs\": {\n          \"data\": children,\n          \"className\": subMenuClassName,\n          \"styleName\": subMenuStyle\n        }\n      })]);\n    },\n    onClick: function onClick(e) {\n      var _a;\n\n      e.stopPropagation();\n      var _b = this.data,\n          id = _b.id,\n          attribute = _b.attribute,\n          disabled = _b.disabled,\n          children = _b.children;\n\n      var _c = this.getContext(),\n          config = _c.config,\n          el = _c.el;\n\n      var handler = config.handler;\n      if (disabled || (children || []).length > 0) return false;\n\n      if (handler) {\n        handler(id, attribute);\n        this.$root.$destroy();\n        (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(el);\n      }\n    }\n  },\n  render: function render(h) {\n    var _a = this.data,\n        separation = _a.separation,\n        styleName = _a.styleName;\n    return h(ConditionalRender, {\n      \"attrs\": {\n        \"conditional\": !separation\n      }\n    }, [h(\"li\", {\n      \"class\": this.getClass,\n      \"style\": styleName,\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [this.renderIcon(h), this.renderName(h), this.renderMore(h), this.renderSubMenu(h)]), h(\"li\", {\n      \"slot\": \"noMatch\",\n      \"class\": selectorPrefix + \"-separation\"\n    })]);\n  }\n};\nexport default MenuItem;"],"names":["__spreadArrays","classNames","ConditionalRender","Util","SubMenu","selectorPrefix","MenuItem","props","data","type","Object","default","inject","computed","getClass","_a","this","_b","disabled","className","methods","renderIcon","h","icon","isString","class","isObject","isFunction","apply","renderName","name","renderMore","children","attrs","conditional","length","renderSubMenu","subMenuClassName","subMenuStyle","styleName","onClick","e","stopPropagation","id","attribute","_c","getContext","config","el","handler","$root","$destroy","parentElement","removeChild","render","separation","style","on","click","slot"],"mappings":"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"}