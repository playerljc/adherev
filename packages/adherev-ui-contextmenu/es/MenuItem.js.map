{"version":3,"file":"MenuItem.js","sources":["MenuItem.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport { __assign } from \"tslib\";\nimport classNames from 'classnames';\nimport { computed, defineComponent, h, inject } from 'vue';\nimport { object } from 'vue-types';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport Util from '@baifendian/adherev-util';\nimport SubMenu from './SubMenu';\nvar selectorPrefix = 'adherev-ui-contextmenu-menuitem';\nexport var menuItemProps = {\n  data: object().def({})\n};\nexport default defineComponent({\n  props: menuItemProps,\n  setup: function setup(props) {\n    var context = inject('context');\n    var root = inject('root');\n    var getClass = computed(function () {\n      return classNames(selectorPrefix, props.data.disabled ? 'disabled' : '', (props.data.className || '').split(/\\s+/));\n    });\n    var renderIcon = function renderIcon() {\n      var _a, _b, _c;\n      if (props.data.icon && ((_a = Util === null || Util === void 0 ? void 0 : Util.isString) === null || _a === void 0 ? void 0 : _a.call(Util, props.data.icon))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-icon\"), props.data.icon)\n        }, null);\n      }\n      if (props.data.icon && ((_b = Util === null || Util === void 0 ? void 0 : Util.isObject) === null || _b === void 0 ? void 0 : _b.call(Util, props.data.icon))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-icon\"))\n        }, [h(props.data.icon)]);\n      }\n      if (props.data.icon && ((_c = Util === null || Util === void 0 ? void 0 : Util.isFunction) === null || _c === void 0 ? void 0 : _c.call(Util, props.data.icon))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-icon\"))\n        }, [props.data.icon(h, __assign({}, props.data))]);\n      }\n      return null;\n    };\n    var renderName = function renderName() {\n      var _a, _b, _c;\n      if (props.data.name && ((_a = Util === null || Util === void 0 ? void 0 : Util.isString) === null || _a === void 0 ? void 0 : _a.call(Util, props.data.name))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-name\"))\n        }, [props.data.name]);\n      }\n      if (props.data.name && ((_b = Util === null || Util === void 0 ? void 0 : Util.isObject) === null || _b === void 0 ? void 0 : _b.call(Util, props.data.name))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-name\"))\n        }, [h(props.data.name)]);\n      }\n      if (props.data.name && ((_c = Util === null || Util === void 0 ? void 0 : Util.isFunction) === null || _c === void 0 ? void 0 : _c.call(Util, props.data.name))) {\n        return _createVNode(\"span\", {\n          \"class\": classNames(\"\".concat(selectorPrefix, \"-name\"))\n        }, [props.data.name(h, __assign({}, props.data))]);\n      }\n      return null;\n    };\n    var renderMore = function renderMore() {\n      var _a, _b;\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": ((_b = (_a = props === null || props === void 0 ? void 0 : props.data) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length) !== 0\n        }, {\n          default: function _default() {\n            return [_createVNode(\"span\", {\n              \"class\": \"\".concat(selectorPrefix, \"-more fa fa-caret-right\")\n            }, null)];\n          }\n        })\n      );\n    };\n    var renderSubMenu = function renderSubMenu() {\n      var _a, _b, _c;\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": ((_b = (_a = props === null || props === void 0 ? void 0 : props.data) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length) !== 0\n        }, {\n          default: function _default() {\n            return [_createVNode(SubMenu, {\n              \"data\": (_c = props === null || props === void 0 ? void 0 : props.data) === null || _c === void 0 ? void 0 : _c.children,\n              \"className\": props.data.subMenuClassName,\n              \"style\": props.data.subMenuStyle\n            }, null)];\n          }\n        })\n      );\n    };\n    var onClick = function onClick(e) {\n      var _a, _b;\n      e.stopPropagation();\n      // const { config, el } = inject('getContext') as ContextReturnType;\n      var handler = context.config.handler;\n      if (props.data.disabled || (props.data.children || []).length > 0) return false;\n      if (handler) {\n        handler(props.data.id, props.data.attribute);\n        root.unmount();\n        (_b = (_a = context.el) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(context.el);\n      }\n    };\n    return function () {\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !props.data.separation\n        }, {\n          default: function _default() {\n            return _createVNode(\"li\", {\n              \"class\": getClass.value,\n              \"style\": props.data.style,\n              \"onClick\": onClick\n            }, [renderIcon(), renderName(), renderMore(), renderSubMenu()]);\n          },\n          noMatch: function noMatch() {\n            return _createVNode(\"li\", {\n              \"class\": \"\".concat(selectorPrefix, \"-separation\")\n            }, null);\n          }\n        })\n      );\n    };\n  }\n});"],"names":["_createVNode","__assign","classNames","computed","defineComponent","h","inject","object","ConditionalRender","Util","SubMenu","selectorPrefix","menuItemProps","data","def","props","setup","onClick","e","stopPropagation","handler","context","config","disabled","children","length","id","attribute","root","unmount","_b","_a","el","parentElement","removeChild","getClass","className","split","conditional","separation","default","class","value","style","icon","isString","call","concat","isObject","_c","isFunction","name","subMenuClassName","subMenuStyle","noMatch"],"mappings":"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"}