{"version":3,"file":"ContextMenu.js","sources":["ContextMenu.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport Vue from 'vue';\nimport Menu from './Menu';\nvar selectorPrefix = 'adherev-ui-contextmenu';\n/**\n * ContextMenuComponent\n * @class ContextMenuComponent\n * @classdesc ContextMenuComponent\n */\n\nvar ContextMenuComponent = {\n  props: {\n    data: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    config: {\n      type: Object,\n      default: function _default() {}\n    },\n    el: {\n      type: HTMLElement,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  provide: function provide() {\n    return {\n      getContext: this.getContext\n    };\n  },\n  computed: {\n    getStyle: function getStyle() {\n      return \"z-index: \" + 9999 * 2;\n    }\n  },\n  methods: {\n    getContext: function getContext() {\n      return {\n        config: this.config,\n        el: this.el\n      };\n    },\n    mount: function mount() {\n      var _a;\n\n      (_a = this.$refs.menuIns) === null || _a === void 0 ? void 0 : _a.mount();\n    },\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      this.$destroy();\n      var el = this.el;\n      el.parentElement.removeChild(el);\n    },\n    onContextMenu: function onContextMenu(e) {\n      e.preventDefault();\n      this.$destroy();\n      var el = this.el;\n      el.parentElement.removeChild(el);\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        config = _a.config;\n\n    return h(\"div\", {\n      \"class\": selectorPrefix,\n      \"style\": this.getStyle,\n      \"on\": {\n        \"click\": this.onClick,\n        \"contextMenu\": this.onContextMenu\n      }\n    }, [h(Menu, {\n      \"attrs\": {\n        \"data\": data,\n        \"className\": config.className,\n        \"styleName\": config.styleName\n      },\n      \"ref\": \"menuIns\"\n    })]);\n  }\n};\nvar ContextMenu = {\n  /**\n   * config\n   * {\n   *   name - {String} 名字\n   *   icon - {String} 图标\n   *   id - {String} 唯一的id\n   *   disabled - {Boolean} 不可用\n   *   separation - {Bolean} 分割线\n   *   attribute - {Object} 自定义属性\n   *   children - {Array<Object> 孩子\n   * }\n   *{\n   *   width - {Number} 宽度\n   *   x - {Number} 显示的x坐标 相对于body\n   *   y - {Number} 现实的y坐标 相对于body\n   *   maskClosable - {Boolean} 点击其他位置是否关闭菜单\n   *   handler - {Function} 点击的事件句柄\n   * }\n   * @return {HTMLDivElement}\n   * @param data\n   * @param config\n   */\n  open: function open(data, config) {\n    config = __assign({\n      width: 200,\n      maskClosable: true\n    }, config);\n    var parentEl = document.createElement('div');\n    var replaceEl = document.createElement('div');\n    parentEl.appendChild(replaceEl);\n    document.body.appendChild(parentEl);\n    var vm = new Vue({\n      mounted: function mounted() {\n        this.$refs.ref.mount();\n      },\n      render: function render(h) {\n        return h(ContextMenuComponent, {\n          props: {\n            data: data,\n            config: config,\n            el: parentEl\n          },\n          ref: 'ref'\n        });\n      }\n    });\n    vm.$mount(replaceEl);\n    return {\n      vm: vm,\n      el: parentEl\n    };\n  },\n\n  /**\n   * close\n   * @param vm\n   * @param el\n   */\n  close: function close(_a) {\n    var _b, _c;\n\n    var vm = _a.vm,\n        el = _a.el;\n    vm.$destroy();\n    (_c = (_b = el === null || el === void 0 ? void 0 : el.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild) === null || _c === void 0 ? void 0 : _c.call(_b, el);\n  }\n};\nexport default ContextMenu;"],"names":["__assign","Vue","Menu","selectorPrefix","ContextMenuComponent","props","data","type","Array","default","config","Object","el","HTMLElement","provide","getContext","this","computed","getStyle","methods","mount","_a","$refs","menuIns","onClick","e","stopPropagation","$destroy","parentElement","removeChild","onContextMenu","preventDefault","render","h","_b","class","style","on","click","contextMenu","attrs","className","styleName","ref","ContextMenu","open","width","maskClosable","parentEl","document","createElement","replaceEl","appendChild","body","vm","mounted","$mount","close","_c","call"],"mappings":"OAASA,4BACFC,qBACAC,kBACP,IAAIC,eAAiB,yBAOjBC,qBAAuB,CACzBC,MAAO,CACLC,KAAM,CACJC,KAAMC,MACNC,QAAS,WACP,MAAO,KAGXC,OAAQ,CACNH,KAAMI,OACNF,QAAS,cAEXG,GAAI,CACFL,KAAMM,YACNJ,QAAS,WACP,OAAO,QAIbK,QAAS,WACP,MAAO,CACLC,WAAYC,KAAKD,aAGrBE,SAAU,CACRC,SAAU,WACR,MAAO,mBAGXC,QAAS,CACPJ,WAAY,WACV,MAAO,CACLL,OAAQM,KAAKN,OACbE,GAAII,KAAKJ,KAGbQ,MAAO,WACL,IAAIC,EAE0B,QAA7BA,EAAKL,KAAKM,MAAMC,eAA4B,IAAPF,GAAyBA,EAAGD,SAEpEI,QAAS,SAAiBC,GACxBA,EAAEC,kBACFV,KAAKW,WACDf,EAAKI,KAAKJ,GACdA,EAAGgB,cAAcC,YAAYjB,IAE/BkB,cAAe,SAAuBL,GACpCA,EAAEM,iBACFf,KAAKW,WACDf,EAAKI,KAAKJ,GACdA,EAAGgB,cAAcC,YAAYjB,KAGjCoB,OAAQ,SAAgBC,GACtB,IACIC,EADKlB,KACGV,KACRA,OAAc,IAAP4B,EAAgB,GAAKA,EAC5BxB,EAHKM,KAGON,OAEhB,OAAOuB,EAAE,MAAO,CACdE,MAAShC,eACTiC,MAASpB,KAAKE,SACdmB,GAAM,CACJC,MAAStB,KAAKQ,QACde,YAAevB,KAAKc,gBAErB,CAACG,EAAE/B,KAAM,CACVsC,MAAS,CACPlC,KAAQA,EACRmC,UAAa/B,EAAO+B,UACpBC,UAAahC,EAAOgC,WAEtBC,IAAO,gBAITC,YAAc,CAuBhBC,KAAM,SAAcvC,EAAMI,GACxBA,EAASV,SAAS,CAChB8C,MAAO,IACPC,cAAc,GACbrC,GACH,IAAIsC,EAAWC,SAASC,cAAc,OAClCC,EAAYF,SAASC,cAAc,OACvCF,EAASI,YAAYD,GACrBF,SAASI,KAAKD,YAAYJ,GAC1B,IAAIM,EAAK,IAAIrD,IAAI,CACfsD,QAAS,WACPvC,KAAKM,MAAMqB,IAAIvB,SAEjBY,OAAQ,SAAgBC,GACtB,OAAOA,EAAE7B,qBAAsB,CAC7BC,MAAO,CACLC,KAAMA,EACNI,OAAQA,EACRE,GAAIoC,GAENL,IAAK,WAKX,OADAW,EAAGE,OAAOL,GACH,CACLG,GAAIA,EACJ1C,GAAIoC,IASRS,MAAO,SAAepC,GACpB,IAEIiC,EAAKjC,EAAGiC,GACR1C,EAAKS,EAAGT,GACZ0C,EAAG3B,WAC4H,QAA9H+B,EAAyE,QAAnExB,EAAKtB,MAAAA,OAA+B,EAASA,EAAGgB,qBAAkC,IAAPM,OAAgB,EAASA,EAAGL,mBAAgC,IAAP6B,GAAyBA,EAAGC,KAAKzB,EAAItB,oBAGjKgC"}