import{createVNode as _createVNode}from"vue";import{__assign}from"tslib";import{computed,createApp,defineComponent,onMounted,provide,reactive,ref}from"vue";import{array,object}from"vue-types";import Menu from"./Menu";var selectorPrefix="adherev-ui-contextmenu",props={data:array().def([]),config:object().def(),el:object().def()},ContextMenuComponent=defineComponent({props:props,setup:function(t,e){function n(e){var n;e.stopPropagation(),null!=(n=null==(e=null==(e=t.el)?void 0:e.parentElement)?void 0:e.removeChild)&&n.call(e,t.el)}function o(e){var n;e.preventDefault(),null!=(n=null==(e=null==(e=t.el)?void 0:e.parentElement)?void 0:e.removeChild)&&n.call(e,t.el)}function r(){return l.value.mount()}var e=e.expose,l=ref(null),u=reactive({config:t.config,el:t.el}),a=computed(function(){return{zIndex:19998}});return provide("context",u),e({mount:r}),onMounted(r),function(){return _createVNode("div",{class:selectorPrefix,style:a.value,onClick:n,onContextmenu:o},[_createVNode(Menu,{data:t.data,className:t.config.className,style:t.config.style,ref:l},null)])}}}),ContextMenu={open:function(n,e){var t=__assign(__assign({},e),{width:200,maskClosable:!0}),o=document.createElement("div"),r=(document.body.appendChild(o),createApp({setup:function(){var e=ref(null);return onMounted(function(){e.value.mount()}),provide("root",{unmount:function(){var n;try{r.unmount()}catch(e){null!=(n=null==o?void 0:o.parentElement)&&n.removeChild(o)}}}),function(){return _createVNode(ContextMenuComponent,{ref:e,data:n,config:t,el:o},null)}}}).mount(o));return{vm:r,el:o}},close:function(n){var t=n.vm,n=n.el;try{t.unmount()}catch(e){null!=(t=null==n?void 0:n.parentElement)&&t.removeChild(n)}}};export default ContextMenu;
//# sourceMappingURL=ContextMenu.js.map
