import{createVNode as _createVNode}from"vue";import{__assign}from"tslib";import{computed,createApp,defineComponent,onMounted,provide,reactive,ref}from"vue";import{array,object}from"vue-types";import Menu from"./Menu";var selectorPrefix="adherev-ui-contextmenu",props={data:array().def([]),config:object().def(),el:object().def()},ContextMenuComponent=defineComponent({props:props,setup:function(o,e){function n(e){var n;e.stopPropagation(),null!==(n=null===(e=null===(e=o.el)||void 0===e?void 0:e.parentElement)||void 0===e?void 0:e.removeChild)&&void 0!==n&&n.call(e,o.el)}function t(e){var n;e.preventDefault(),null!==(n=null===(e=null===(e=o.el)||void 0===e?void 0:e.parentElement)||void 0===e?void 0:e.removeChild)&&void 0!==n&&n.call(e,o.el)}var e=e.expose,r=ref(null),l=reactive({config:o.config,el:o.el}),u=computed(function(){return{zIndex:19998}}),i=(onMounted(function(){return i()}),function(){return r.value.mount()});return provide("context",l),e({mount:i}),function(){return _createVNode("div",{class:selectorPrefix,style:u.value,onClick:n,onContextMenu:t},[_createVNode(Menu,{data:o.data,className:o.config.className,style:o.config.style,ref:r},null)])}}}),ContextMenu={open:function(n,e){var o=__assign(__assign({},e),{width:200,maskClosable:!0}),t=document.createElement("div"),r=(document.body.appendChild(t),createApp({setup:function(){var e=ref(null);return onMounted(function(){e.value.mount()}),provide("root",{unmount:function(){var n;console.log("app",r,t);try{r.unmount()}catch(e){null!==(n=null===t||void 0===t?void 0:t.parentElement)&&void 0!==n&&n.removeChild(t)}}}),function(){return _createVNode(ContextMenuComponent,{ref:e,data:n,config:o,el:t},null)}}}).mount(t));return{vm:r,el:t}},close:function(n){var o=n.vm,n=n.el;try{o.unmount()}catch(e){null!==(o=null===n||void 0===n?void 0:n.parentElement)&&void 0!==o&&o.removeChild(n)}}};export default ContextMenu;
//# sourceMappingURL=ContextMenu.js.map
