import{createVNode as _createVNode}from"vue";import{__assign}from"tslib";import{computed,createApp,defineComponent,onMounted,provide,reactive,ref}from"vue";import{array,object}from"vue-types";import Menu from"./Menu";var selectorPrefix="adherev-ui-contextmenu",contextMenuProps={data:array().def([]),config:object().def(),el:object().def()},ContextMenuComponent=defineComponent({props:contextMenuProps,setup:function(o,e){function n(e){var n;e.stopPropagation(),null!=(n=null==(e=null==(e=o.el)?void 0:e.parentElement)?void 0:e.removeChild)&&n.call(e,o.el)}function t(e){var n;e.preventDefault(),null!=(n=null==(e=null==(e=o.el)?void 0:e.parentElement)?void 0:e.removeChild)&&n.call(e,o.el)}function l(){return r.value.mount()}var e=e.expose,r=ref(null),u=reactive({config:o.config,el:o.el}),a=computed(function(){return{zIndex:19998}});return provide("context",u),e({mount:l}),onMounted(l),function(){return _createVNode("div",{class:selectorPrefix,style:a.value,onClick:n,onContextmenu:t},[_createVNode(Menu,{data:o.data,className:o.config.className,style:o.config.style,ref:r},null)])}}}),globalConfig=null,ContextMenu={open:function(n,e){var o=__assign(__assign({},e),{width:200,maskClosable:!0}),t=document.createElement("div"),l=(document.body.appendChild(t),createApp({setup:function(){var e=ref(null);return onMounted(function(){e.value.mount()}),provide("root",{unmount:function(){var n;try{l.unmount()}catch(e){null!=(n=null==t?void 0:t.parentElement)&&n.removeChild(t)}}}),function(){return _createVNode(ContextMenuComponent,{ref:e,data:n,config:o,el:t},null)}}}));return globalConfig&&null!=(e=null==globalConfig?void 0:globalConfig.beforeMount)&&e.call(globalConfig,l),l.mount(t),{vm:l,el:t}},close:function(n){var o=n.vm,n=n.el;try{o.unmount()}catch(e){null!=(o=null==n?void 0:n.parentElement)&&o.removeChild(n)}},setConfig:function(e){globalConfig=e}};export default ContextMenu;export{contextMenuProps};
//# sourceMappingURL=ContextMenu.js.map
