{"version":3,"file":"ContextMenu.js","sources":["ContextMenu.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = tslib_1.__importDefault(require(\"vue\"));\nvar Menu_1 = tslib_1.__importDefault(require(\"./Menu\"));\nvar selectorPrefix = 'adherev-ui-contextmenu';\nvar globalConfig;\n/**\n * ContextMenuComponent\n * @class ContextMenuComponent\n * @classdesc ContextMenuComponent\n */\nvar ContextMenuComponent = {\n  props: {\n    data: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    config: {\n      type: Object,\n      default: function _default() {}\n    },\n    el: {\n      type: HTMLElement,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  provide: function provide() {\n    return {\n      getContext: this.getContext\n    };\n  },\n  computed: {\n    getStyle: function getStyle() {\n      return \"z-index: \".concat(9999 * 2);\n    }\n  },\n  methods: {\n    getContext: function getContext() {\n      return {\n        config: this.config,\n        el: this.el\n      };\n    },\n    mount: function mount() {\n      var _a;\n      (_a = this.$refs.menuIns) === null || _a === void 0 ? void 0 : _a.mount();\n    },\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      this.$destroy();\n      var el = this.el;\n      el.parentElement.removeChild(el);\n    },\n    onContextMenu: function onContextMenu(e) {\n      e.preventDefault();\n      this.$destroy();\n      var el = this.el;\n      el.parentElement.removeChild(el);\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n      _b = _a.data,\n      data = _b === void 0 ? [] : _b,\n      config = _a.config;\n    return h(\"div\", {\n      \"class\": selectorPrefix,\n      \"style\": this.getStyle,\n      \"on\": {\n        \"click\": this.onClick,\n        \"contextMenu\": this.onContextMenu\n      }\n    }, [h(Menu_1.default, {\n      \"attrs\": {\n        \"data\": data,\n        \"className\": config.className,\n        \"styleName\": config.styleName\n      },\n      \"ref\": \"menuIns\"\n    })]);\n  }\n};\nvar ContextMenu = {\n  setConfig: function setConfig(gc) {\n    globalConfig = gc;\n  },\n  /**\n   * config\n   * {\n   *   name - {String} 名字\n   *   icon - {String} 图标\n   *   id - {String} 唯一的id\n   *   disabled - {Boolean} 不可用\n   *   separation - {Bolean} 分割线\n   *   attribute - {Object} 自定义属性\n   *   children - {Array<Object> 孩子\n   * }\n   *{\n   *   width - {Number} 宽度\n   *   x - {Number} 显示的x坐标 相对于body\n   *   y - {Number} 现实的y坐标 相对于body\n   *   maskClosable - {Boolean} 点击其他位置是否关闭菜单\n   *   handler - {Function} 点击的事件句柄\n   * }\n   * @return {HTMLDivElement}\n   * @param data\n   * @param config\n   */\n  open: function open(data, config) {\n    config = tslib_1.__assign({\n      width: 200,\n      maskClosable: true\n    }, config);\n    var parentEl = document.createElement('div');\n    var replaceEl = document.createElement('div');\n    parentEl.appendChild(replaceEl);\n    document.body.appendChild(parentEl);\n    var vm = new vue_1.default(tslib_1.__assign(tslib_1.__assign({}, globalConfig || {}), {\n      mounted: function mounted() {\n        this.$refs.ref.mount();\n      },\n      render: function render(h) {\n        return h(ContextMenuComponent, {\n          props: {\n            data: data,\n            config: config,\n            el: parentEl\n          },\n          ref: 'ref'\n        });\n      }\n    }));\n    vm.$mount(replaceEl);\n    return {\n      vm: vm,\n      el: parentEl\n    };\n  },\n  /**\n   * close\n   * @param vm\n   * @param el\n   */\n  close: function close(_a) {\n    var _b, _c;\n    var vm = _a.vm,\n      el = _a.el;\n    vm.$destroy();\n    (_c = (_b = el === null || el === void 0 ? void 0 : el.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild) === null || _c === void 0 ? void 0 : _c.call(_b, el);\n  }\n};\nexports.default = ContextMenu;"],"names":["require","Object","defineProperty","exports","value","globalConfig","tslib_1","vue_1","__importDefault","Menu_1","selectorPrefix","ContextMenuComponent","props","data","type","Array","default","config","el","HTMLElement","provide","getContext","this","computed","getStyle","concat","methods","mount","_a","$refs","menuIns","onClick","e","stopPropagation","$destroy","parentElement","removeChild","onContextMenu","preventDefault","render","h","_b","class","style","on","click","contextMenu","attrs","className","styleName","ref","ContextMenu","setConfig","gc","open","__assign","width","maskClosable","parentEl","document","createElement","replaceEl","vm","appendChild","body","mounted","$mount","close","_c","call"],"mappings":"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"}