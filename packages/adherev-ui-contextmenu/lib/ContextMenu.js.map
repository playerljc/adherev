{"version":3,"file":"ContextMenu.js","sources":["ContextMenu.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar vue_1 = __importDefault(require(\"vue\"));\n\nvar classnames_1 = __importDefault(require(\"classnames\"));\n\nvar Menu_1 = __importDefault(require(\"./Menu\"));\n\nvar selectorPrefix = 'adherev-ui-contextmenu';\n/**\n * ContextMenuComponent\n * @class ContextMenuComponent\n * @classdesc ContextMenuComponent\n */\n\nvar ContextMenuComponent = {\n  props: {\n    data: {\n      type: Array,\n      default: function _default() {\n        return [];\n      },\n      validator: function validator(val) {\n        return val instanceof Array;\n      }\n    },\n    config: {\n      type: Object,\n      default: function _default() {},\n      validator: function validator(val) {\n        return val instanceof Object;\n      }\n    },\n    el: {\n      type: HTMLElement\n    }\n  },\n  provide: function provide() {\n    return {\n      getContext: this.getContext\n    };\n  },\n  computed: {\n    getClass: function getClass() {\n      return classnames_1.default(selectorPrefix);\n    },\n    getStyle: function getStyle() {\n      return \"z-index: \" + 9999 * 2;\n    }\n  },\n  methods: {\n    getContext: function getContext() {\n      return {\n        config: this.config,\n        el: this.el\n      };\n    },\n    mount: function mount() {\n      var _a;\n\n      (_a = this.$refs.menuIns) === null || _a === void 0 ? void 0 : _a.mount();\n    },\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      this.$destroy();\n      var el = this.el;\n      el.parentElement.removeChild(el);\n    },\n    onContextMenu: function onContextMenu(e) {\n      e.preventDefault();\n      this.$destroy();\n      var el = this.el;\n      el.parentElement.removeChild(el);\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        config = _a.config;\n\n    return h(\"div\", {\n      \"class\": this.getClass,\n      \"style\": this.getStyle,\n      \"on\": {\n        \"click\": this.onClick,\n        \"contextMenu\": this.onContextMenu\n      }\n    }, [h(Menu_1.default, {\n      \"attrs\": {\n        \"data\": data,\n        \"className\": config.className,\n        \"styleName\": config.styleName\n      },\n      \"ref\": \"menuIns\"\n    })]);\n  }\n};\nvar ContextMenu = {\n  /**\n   * config\n   * {\n   *   name - {String} 名字\n   *   icon - {String} 图标\n   *   id - {String} 唯一的id\n   *   disabled - {Boolean} 不可用\n   *   separation - {Bolean} 分割线\n   *   attribute - {Object} 自定义属性\n   *   children - {Array<Object> 孩子\n   * }\n   *{\n   *   width - {Number} 宽度\n   *   x - {Number} 显示的x坐标 相对于body\n   *   y - {Number} 现实的y坐标 相对于body\n   *   maskClosable - {Boolean} 点击其他位置是否关闭菜单\n   *   handler - {Function} 点击的事件句柄\n   * }\n   * @return {HTMLDivElement}\n   * @param data\n   * @param config\n   */\n  open: function open(data, config) {\n    config = __assign({\n      width: 200,\n      maskClosable: true\n    }, config);\n    var parentEl = document.createElement('div');\n    var replaceEl = document.createElement('div');\n    parentEl.appendChild(replaceEl);\n    document.body.appendChild(parentEl);\n    var vm = new vue_1.default({\n      mounted: function mounted() {\n        this.$refs.ref.mount();\n      },\n      render: function render(h) {\n        return h(ContextMenuComponent, {\n          props: {\n            data: data,\n            config: config,\n            el: parentEl\n          },\n          ref: 'ref'\n        });\n      }\n    });\n    vm.$mount(replaceEl);\n    return {\n      vm: vm,\n      el: parentEl\n    };\n  },\n\n  /**\n   * close\n   * @param vm\n   * @param el\n   */\n  close: function close(_a) {\n    var vm = _a.vm,\n        el = _a.el;\n    vm.$destroy();\n    el.parentElement.removeChild(el);\n  }\n};\nexports.default = ContextMenu;"],"names":["require","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__importDefault","mod","__esModule","default","defineProperty","exports","value","vue_1","classnames_1","Menu_1","selectorPrefix","ContextMenuComponent","props","data","type","Array","validator","val","config","el","HTMLElement","provide","getContext","computed","getClass","getStyle","methods","mount","_a","$refs","menuIns","onClick","e","stopPropagation","$destroy","parentElement","removeChild","onContextMenu","preventDefault","render","h","_b","class","style","on","click","contextMenu","attrs","className","styleName","ref","ContextMenu","open","width","maskClosable","parentEl","document","createElement","replaceEl","appendChild","body","vm","mounted","$mount","close"],"mappings":"aAEAA,QAAQ,uCAERA,QAAQ,gDAER,IAAIC,SAA0C,WAa5C,OAZAA,SAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAG9C,IAAK,IAAII,KAFTL,EAAIG,UAAUF,GAGRJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,IAI7D,OAAON,IAGOU,MAAMC,KAAMP,YAG1BQ,gBAAwD,SAAUC,GACpE,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnCE,QAAWF,IAIff,OAAOkB,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,MAAQP,gBAAgBhB,QAAQ,QAEhCwB,aAAeR,gBAAgBhB,QAAQ,eAEvCyB,OAAST,gBAAgBhB,QAAQ,WAEjC0B,eAAiB,yBAOjBC,qBAAuB,CACzBC,MAAO,CACLC,KAAM,CACJC,KAAMC,MACNZ,QAAS,WACP,MAAO,IAETa,UAAW,SAAmBC,GAC5B,OAAOA,aAAeF,QAG1BG,OAAQ,CACNJ,KAAM5B,OACNiB,QAAS,aACTa,UAAW,SAAmBC,GAC5B,OAAOA,aAAe/B,SAG1BiC,GAAI,CACFL,KAAMM,cAGVC,QAAS,WACP,MAAO,CACLC,WAAYvB,KAAKuB,aAGrBC,SAAU,CACRC,SAAU,WACR,OAAOhB,aAAaL,QAAQO,iBAE9Be,SAAU,WACR,MAAO,mBAGXC,QAAS,CACPJ,WAAY,WACV,MAAO,CACLJ,OAAQnB,KAAKmB,OACbC,GAAIpB,KAAKoB,KAGbQ,MAAO,WACL,IAAIC,EAE0B,QAA7BA,EAAK7B,KAAK8B,MAAMC,eAA4B,IAAPF,GAAyBA,EAAGD,SAEpEI,QAAS,SAAiBC,GACxBA,EAAEC,kBACFlC,KAAKmC,WACDf,EAAKpB,KAAKoB,GACdA,EAAGgB,cAAcC,YAAYjB,IAE/BkB,cAAe,SAAuBL,GACpCA,EAAEM,iBACFvC,KAAKmC,WACDf,EAAKpB,KAAKoB,GACdA,EAAGgB,cAAcC,YAAYjB,KAGjCoB,OAAQ,SAAgBC,GACtB,IACIC,EADK1C,KACGc,KAERK,EAHKnB,KAGOmB,OAEhB,OAAOsB,EAAE,MAAO,CACdE,MAAS3C,KAAKyB,SACdmB,MAAS5C,KAAK0B,SACdmB,GAAM,CACJC,MAAS9C,KAAKgC,QACde,YAAe/C,KAAKsC,gBAErB,CAACG,EAAE/B,OAAON,QAAS,CACpB4C,MAAS,CACPlC,UAZc,IAAP4B,EAAgB,GAAKA,EAa5BO,UAAa9B,EAAO8B,UACpBC,UAAa/B,EAAO+B,WAEtBC,IAAO,gBAITC,YAAc,CAuBhBC,KAAM,SAAcvC,EAAMK,GACxBA,EAASjC,SAAS,CAChBoE,MAAO,IACPC,cAAc,GACbpC,GACH,IAAIqC,EAAWC,SAASC,cAAc,OAClCC,EAAYF,SAASC,cAAc,OACvCF,EAASI,YAAYD,GACrBF,SAASI,KAAKD,YAAYJ,GAC1B,IAAIM,EAAK,IAAItD,MAAMJ,QAAQ,CACzB2D,QAAS,WACP/D,KAAK8B,MAAMqB,IAAIvB,SAEjBY,OAAQ,SAAgBC,GACtB,OAAOA,EAAE7B,qBAAsB,CAC7BC,MAAO,CACLC,KAAMA,EACNK,OAAQA,EACRC,GAAIoC,GAENL,IAAK,WAKX,OADAW,EAAGE,OAAOL,GACH,CACLG,GAAIA,EACJ1C,GAAIoC,IASRS,MAAO,SAAepC,GACpB,IAAIiC,EAAKjC,EAAGiC,GACR1C,EAAKS,EAAGT,GACZ0C,EAAG3B,WACHf,EAAGgB,cAAcC,YAAYjB,KAGjCd,QAAQF,QAAUgD"}