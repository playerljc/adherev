{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { Button, Input, Popover } from 'ant-design-vue';\nimport { Picker } from 'emoji-mart-vue';\nimport Intl from '@baifendian/adherev-util-intl'; // @ts-ignore\n\nimport data from '@emoji-mart/data'; // @ts-ignore\n\nimport ar from '@emoji-mart/data/i18n/ar.json'; // @ts-ignore\n\nimport de from '@emoji-mart/data/i18n/de.json'; // @ts-ignore\n\nimport en from '@emoji-mart/data/i18n/en.json'; // @ts-ignore\n\nimport es from '@emoji-mart/data/i18n/es.json'; // @ts-ignore\n\nimport fa from '@emoji-mart/data/i18n/fa.json'; // @ts-ignore\n\nimport fr from '@emoji-mart/data/i18n/fr.json'; // @ts-ignore\n\nimport it from '@emoji-mart/data/i18n/it.json'; // @ts-ignore\n\nimport ja from '@emoji-mart/data/i18n/ja.json'; // @ts-ignore\n\nimport nl from '@emoji-mart/data/i18n/nl.json'; // @ts-ignore\n\nimport pl from '@emoji-mart/data/i18n/pl.json'; // @ts-ignore\n\nimport pt from '@emoji-mart/data/i18n/pt.json'; // @ts-ignore\n\nimport ru from '@emoji-mart/data/i18n/ru.json'; // @ts-ignore\n\nimport uk from '@emoji-mart/data/i18n/uk.json'; // @ts-ignore\n\nimport zh from '@emoji-mart/data/i18n/zh.json';\nimport { selectorPrefix } from '../../Comment';\nimport EmojiIcon from './emoji';\nvar TextArea = Input.TextArea;\nvar LOCAL_MAP = new Map([['ar', ar], ['de', de], ['en', en], ['es', es], ['fa', fa], ['fr', fr], ['it', it], ['ja', ja], ['nl', nl], ['pl', pl], ['pt', pt], ['ru', ru], ['uk', uk], ['zh', zh]]);\nvar Reply = {\n  name: selectorPrefix + \"-reply\",\n  props: {\n    local: {\n      type: String,\n      default: 'zh'\n    },\n    emojiPickerProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['onResult', 'onCancel'],\n  data: function data() {\n    return {\n      value: '',\n      emojiIconWrapVisible: false\n    };\n  },\n  methods: {\n    onEmojiSelect: function onEmojiSelect(_a) {\n      var native = _a.native; // 获取textarea的dom\n\n      var textareaEl = this.$refs.textAreaRef.querySelector('textarea'); // 光标开始索引\n\n      var selectionStart = textareaEl.selectionStart; // (0) 1 (1) 2 (2) 3 (3)\n\n      this.value = \"\" + this.value.substring(0, selectionStart) + native + this.value.substring(selectionStart);\n      this.$nextTick(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    }\n  },\n  render: function render(h) {\n    var _this = this;\n\n    return h(\"div\", {\n      \"class\": \"\" + selectorPrefix\n    }, [h(\"div\", {\n      \"class\": selectorPrefix + \"-textarea-wrap\",\n      \"ref\": \"textAreaRef\"\n    }, [h(TextArea, {\n      \"class\": selectorPrefix + \"-textarea\",\n      \"attrs\": {\n        \"placeholder\": Intl.v('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": this.value,\n        \"showCount\": true,\n        \"maxLength\": 100\n      },\n      \"on\": {\n        \"change\": function change(e) {\n          _this.value = e.target.value;\n        }\n      }\n    })]), h(\"div\", {\n      \"ref\": \"emojiWrapRef\",\n      \"class\": selectorPrefix + \"-emoji-wrap\"\n    }), h(\"div\", {\n      \"class\": selectorPrefix + \"-toolbar\"\n    }, [h(Popover, {\n      \"attrs\": {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return _this.$refs.emojiWrapRef;\n        },\n        \"content\": h(Picker, {\n          \"attrs\": {\n            \"data\": data,\n            \"i18n\": LOCAL_MAP.get(this.local || 'zh'),\n            \"select\": this.onEmojiSelect\n          },\n          \"props\": _objectSpread({}, this.emojiPickerProps || {})\n        }),\n        \"visible\": this.emojiIconWrapVisible\n      }\n    }, [h(\"div\", {\n      \"on\": {\n        \"click\": function click(e) {\n          e.stopPropagation();\n          _this.emojiIconWrapVisible = !_this.emojiIconWrapVisible;\n        }\n      }\n    }, [h(EmojiIcon, {\n      \"class\": selectorPrefix + \"-toolbar-item-emoji\"\n    })])]), h(\"div\", {\n      \"class\": selectorPrefix + \"-toolbar-inner\"\n    }, [h(Button, {\n      \"attrs\": {\n        \"type\": \"primary\",\n        \"disabled\": !this.value\n      },\n      \"class\": selectorPrefix + \"-toolbar-item\",\n      \"on\": {\n        \"click\": function click() {\n          _this.$emit('onResult', _this.value.trim());\n        }\n      }\n    }, [Intl.v('添加')]), h(Button, {\n      \"class\": selectorPrefix + \"-toolbar-item\",\n      \"on\": {\n        \"click\": function click() {\n          _this.$emit('onCancel');\n        }\n      }\n    }, [Intl.v('取消')])])])]);\n  }\n};\nexport default Reply;"],"names":["_defineProperty","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","Button","Input","Popover","Picker","Intl","data","ar","de","en","es","fa","fr","it","ja","nl","pl","pt","ru","uk","zh","selectorPrefix","EmojiIcon","TextArea","LOCAL_MAP","Map","Reply","name","props","local","type","String","default","emojiPickerProps","emits","value","emojiIconWrapVisible","methods","onEmojiSelect","_a","native","textareaEl","this","$refs","textAreaRef","querySelector","selectionStart","substring","$nextTick","focus","setSelectionRange","render","h","_this","class","ref","attrs","placeholder","v","autoFocus","showCount","maxLength","on","change","e","placement","getPopupContainer","emojiWrapRef","content","i18n","get","select","visible","click","stopPropagation","disabled","$emit","trim"],"mappings":"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"}