{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["import _Button from \"ant-design-vue/es/button\";\nimport _Popover from \"ant-design-vue/es/popover\";\nimport _Input from \"ant-design-vue/es/input\";\nimport { isVNode as _isVNode, mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { defineComponent, nextTick, onBeforeUnmount, onMounted, ref } from 'vue';\nimport { object, string } from 'vue-types';\nimport Intl from '@baifendian/adherev-util-intl';\nimport ar from '@emoji-mart/data/i18n/ar.json';\nimport de from '@emoji-mart/data/i18n/de.json';\nimport en from '@emoji-mart/data/i18n/en.json';\nimport es from '@emoji-mart/data/i18n/es.json';\nimport fa from '@emoji-mart/data/i18n/fa.json';\nimport fr from '@emoji-mart/data/i18n/fr.json';\nimport it from '@emoji-mart/data/i18n/it.json';\nimport ja from '@emoji-mart/data/i18n/ja.json';\nimport nl from '@emoji-mart/data/i18n/nl.json';\nimport pl from '@emoji-mart/data/i18n/pl.json';\nimport pt from '@emoji-mart/data/i18n/pt.json';\nimport ru from '@emoji-mart/data/i18n/ru.json';\nimport uk from '@emoji-mart/data/i18n/uk.json';\nimport zh from '@emoji-mart/data/i18n/zh.json';\nimport Emoji from '../../Components/Emoji';\nimport EmojiIcon from './emoji';\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !_isVNode(s);\n}\nvar TextArea = _Input.TextArea;\nexport var LOCAL_MAP = new Map([['ar', ar], ['de', de], ['en', en], ['es', es], ['fa', fa], ['fr', fr], ['it', it], ['ja', ja], ['nl', nl], ['pl', pl], ['pt', pt], ['ru', ru], ['uk', uk], ['zh', zh]]);\nvar selectorPrefix = 'adherev-ui-comment-reply';\nexport var submitProps = {\n  local: string().def('zh'),\n  emojiPickerProps: object().def({})\n};\nexport default defineComponent({\n  name: \"adv-comment-reply\",\n  emits: ['result', 'cancel'],\n  props: submitProps,\n  setup: function setup(props, _a) {\n    var emit = _a.emit;\n    var textAreaRef = ref();\n    var emojiWrapRef = ref();\n    var value = ref('');\n    var emojiIconWrapVisible = ref(false);\n    var onEmojiSelect = function onEmojiSelect(_a) {\n      var native = _a.native;\n      // 获取textarea的dom\n      var textareaEl = textAreaRef.value.querySelector('textarea');\n      // 光标开始索引\n      var selectionStart = textareaEl.selectionStart;\n      // (0) 1 (1) 2 (2) 3 (3)\n      value.value = \"\".concat(value.value.substring(0, selectionStart)).concat(native).concat(value.value.substring(selectionStart));\n      nextTick(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    };\n    var onDocBodyClick = function onDocBodyClick(e) {\n      var target = e.target;\n      var textareaEl = textAreaRef.value;\n      if (![textareaEl.querySelector('textarea')].includes(target)) {\n        emojiIconWrapVisible.value = false;\n      }\n    };\n    var onEmojiWrapClick = function onEmojiWrapClick(e) {\n      e.stopPropagation();\n    };\n    onMounted(function () {\n      var _a, _b;\n      document.body.addEventListener('click', onDocBodyClick);\n      (_b = (_a = emojiWrapRef.value).addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', onEmojiWrapClick);\n    });\n    onBeforeUnmount(function () {\n      var _a, _b;\n      document.body.removeEventListener('click', onDocBodyClick);\n      (_b = (_a = emojiWrapRef.value).removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', onEmojiWrapClick);\n    });\n    return function () {\n      var _slot, _slot2;\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix)\n      }, [_createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-textarea-wrap\"),\n        \"ref\": textAreaRef\n      }, [_createVNode(TextArea, {\n        \"class\": \"\".concat(selectorPrefix, \"-textarea\"),\n        \"placeholder\": Intl.tv('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": value.value,\n        \"onChange\": function onChange(e) {\n          value.value = e.target.value;\n        },\n        \"maxLength\": 100\n      }, null)]), _createVNode(\"div\", {\n        \"ref\": emojiWrapRef,\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-emoji-wrap\")\n      }, null), _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar\")\n      }, [_createVNode(_Popover, {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return emojiWrapRef.value;\n        },\n        \"content\": _createVNode(Emoji, _mergeProps({\n          \"i18n\": LOCAL_MAP.get(props.local || 'zh'),\n          \"onEmojiSelect\": onEmojiSelect\n        }, props.emojiPickerProps || {}), null),\n        \"visible\": emojiIconWrapVisible.value\n      }, {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"onClick\": function onClick(e) {\n              e.stopPropagation();\n              emojiIconWrapVisible.value = !emojiIconWrapVisible.value;\n            }\n          }, [_createVNode(EmojiIcon, {\n            \"class\": \"\".concat(selectorPrefix, \"-toolbar-item-emoji\")\n          }, null)])];\n        }\n      }), _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-inner\")\n      }, [_createVNode(_Button, {\n        \"type\": \"primary\",\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n        \"disabled\": !value,\n        \"onClick\": function onClick() {\n          return emit('result', value.value.trim());\n        }\n      }, _isSlot(_slot = Intl.tv('添加')) ? _slot : {\n        default: function _default() {\n          return [_slot];\n        }\n      }), _createVNode(_Button, {\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n        \"onClick\": function onClick() {\n          return emit('cancel');\n        }\n      }, _isSlot(_slot2 = Intl.tv('取消')) ? _slot2 : {\n        default: function _default() {\n          return [_slot2];\n        }\n      })])])]);\n    };\n  }\n});"],"names":["_Button","_Popover","_Input","_isVNode","_mergeProps","_createVNode","defineComponent","nextTick","onBeforeUnmount","onMounted","ref","object","string","Intl","ar","de","en","es","fa","fr","it","ja","nl","pl","pt","ru","uk","zh","Emoji","EmojiIcon","_isSlot","s","Object","prototype","toString","call","TextArea","LOCAL_MAP","Map","selectorPrefix","submitProps","local","def","emojiPickerProps","name","emits","props","setup","_a","onEmojiSelect","native","textareaEl","textAreaRef","value","querySelector","selectionStart","concat","substring","focus","setSelectionRange","length","onDocBodyClick","e","target","includes","emojiIconWrapVisible","onEmojiWrapClick","stopPropagation","emit","emojiWrapRef","_b","document","body","addEventListener","removeEventListener","_slot","_slot2","class","placeholder","tv","autoFocus","onChange","maxLength","placement","getPopupContainer","content","i18n","get","visible","default","onClick","type","disabled","trim"],"mappings":"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"}