{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { Button, Input, Popover } from 'ant-design-vue';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Emoji from '../../Components/Emoji';\nimport en from '../../Components/Emoji/locales/en';\nimport zh from '../../Components/Emoji/locales/zh';\nimport EmojiIcon from './emoji';\nvar TextArea = Input.TextArea;\nvar LOCAL_MAP = new Map([['en', en], ['zh', zh]]);\nvar selectorPrefix = 'adherev-ui-comment-reply';\nvar Reply = {\n  name: \"adv-comment-reply\",\n  props: {\n    local: {\n      type: String,\n      default: 'zh'\n    },\n    emojiPickerProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['result', 'cancel'],\n  data: function data() {\n    return {\n      value: '',\n      emojiIconWrapVisible: false\n    };\n  },\n  methods: {\n    $onEmojiSelect: function $onEmojiSelect(_a) {\n      var native = _a.native; // 获取textarea的dom\n\n      var textareaEl = this.$refs.textAreaRef.querySelector('textarea'); // 光标开始索引\n\n      var selectionStart = textareaEl.selectionStart; // (0) 1 (1) 2 (2) 3 (3)\n\n      this.value = \"\" + this.value.substring(0, selectionStart) + native + this.value.substring(selectionStart);\n      this.$nextTick(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    },\n    $onDocBodyClick: function $onDocBodyClick(e) {\n      var target = e.target;\n      var textareaEl = this.$refs.textAreaRef;\n\n      if (![textareaEl.querySelector('textarea')].includes(target)) {\n        this.emojiIconWrapVisible = false;\n      }\n    },\n    $onEmojiWrapClick: function $onEmojiWrapClick(e) {\n      e.stopPropagation();\n    }\n  },\n  mounted: function mounted() {\n    var _a, _b;\n\n    document.body.addEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  beforeDestroy: function beforeDestroy() {\n    var _a, _b;\n\n    document.body.removeEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  render: function render(h) {\n    var _this = this;\n\n    return h(\"div\", {\n      \"class\": \"\" + selectorPrefix\n    }, [h(\"div\", {\n      \"class\": selectorPrefix + \"-textarea-wrap\",\n      \"ref\": \"textAreaRef\"\n    }, [h(TextArea, {\n      \"class\": selectorPrefix + \"-textarea\",\n      \"attrs\": {\n        \"placeholder\": Intl.tv('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": this.value,\n        \"maxLength\": 100\n      },\n      \"on\": {\n        \"change\": function change(e) {\n          _this.value = e.target.value;\n        }\n      }\n    })]), h(\"div\", {\n      \"ref\": \"emojiWrapRef\",\n      \"class\": selectorPrefix + \"-toolbar-emoji-wrap\"\n    }), h(\"div\", {\n      \"class\": selectorPrefix + \"-toolbar\"\n    }, [h(Popover, {\n      \"attrs\": {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return _this.$refs.emojiWrapRef;\n        },\n        \"content\": h(Emoji, {\n          \"attrs\": {\n            \"set\": \"emojione\",\n            \"i18n\": LOCAL_MAP.get(this.local || 'zh')\n          },\n          \"on\": {\n            \"select\": this.$onEmojiSelect\n          },\n          \"props\": _objectSpread({}, this.emojiPickerProps || {})\n        }),\n        \"visible\": this.emojiIconWrapVisible\n      }\n    }, [h(\"div\", {\n      \"on\": {\n        \"click\": function click(e) {\n          e.stopPropagation();\n          _this.emojiIconWrapVisible = !_this.emojiIconWrapVisible;\n        }\n      }\n    }, [h(EmojiIcon, {\n      \"class\": selectorPrefix + \"-toolbar-item-emoji\"\n    })])]), h(\"div\", {\n      \"class\": selectorPrefix + \"-toolbar-inner\"\n    }, [h(Button, {\n      \"attrs\": {\n        \"type\": \"primary\",\n        \"disabled\": !this.value\n      },\n      \"class\": selectorPrefix + \"-toolbar-item\",\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('result', _this.value.trim());\n        }\n      }\n    }, [Intl.tv('添加')]), h(Button, {\n      \"class\": selectorPrefix + \"-toolbar-item\",\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('cancel');\n        }\n      }\n    }, [Intl.tv('取消')])])])]);\n  }\n};\nexport default Reply;"],"names":["_defineProperty","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","Button","Input","Popover","Intl","Emoji","en","zh","EmojiIcon","TextArea","LOCAL_MAP","Map","selectorPrefix","Reply","name","props","local","type","String","default","emojiPickerProps","emits","data","value","emojiIconWrapVisible","methods","$onEmojiSelect","_a","native","textareaEl","this","$refs","textAreaRef","querySelector","selectionStart","substring","$nextTick","focus","setSelectionRange","$onDocBodyClick","e","includes","$onEmojiWrapClick","stopPropagation","mounted","_b","document","body","addEventListener","emojiWrapRef","call","beforeDestroy","removeEventListener","render","h","_this","class","ref","attrs","placeholder","tv","autoFocus","maxLength","on","change","placement","getPopupContainer","content","set","i18n","get","select","visible","click","disabled","$emit","trim"],"mappings":"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"}