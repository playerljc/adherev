{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { Button, Input, Popover } from 'ant-design-vue';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Emoji from '../../Components/Emoji';\nimport en from '../../Components/Emoji/locales/en';\nimport zh from '../../Components/Emoji/locales/zh';\nimport EmojiIcon from './emoji';\nvar TextArea = Input.TextArea;\nvar LOCAL_MAP = new Map([['en', en], ['zh', zh]]);\nvar selectorPrefix = 'adherev-ui-comment-reply';\nvar Reply = {\n  name: \"adv-comment-reply\",\n  props: {\n    local: {\n      type: String,\n      default: 'zh'\n    },\n    emojiPickerProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['result', 'cancel'],\n  data: function data() {\n    return {\n      value: '',\n      emojiIconWrapVisible: false\n    };\n  },\n  methods: {\n    $onEmojiSelect: function $onEmojiSelect(_a) {\n      var native = _a.native;\n      // 获取textarea的dom\n      var textareaEl = this.$refs.textAreaRef.querySelector('textarea');\n      // 光标开始索引\n      var selectionStart = textareaEl.selectionStart;\n      // (0) 1 (1) 2 (2) 3 (3)\n      this.value = \"\".concat(this.value.substring(0, selectionStart)).concat(native).concat(this.value.substring(selectionStart));\n      this.$nextTick(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    },\n    $onDocBodyClick: function $onDocBodyClick(e) {\n      var target = e.target;\n      var textareaEl = this.$refs.textAreaRef;\n      if (![textareaEl.querySelector('textarea')].includes(target)) {\n        this.emojiIconWrapVisible = false;\n      }\n    },\n    $onEmojiWrapClick: function $onEmojiWrapClick(e) {\n      e.stopPropagation();\n    }\n  },\n  mounted: function mounted() {\n    var _a, _b;\n    document.body.addEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  beforeDestroy: function beforeDestroy() {\n    var _a, _b;\n    document.body.removeEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  render: function render(h) {\n    var _this = this;\n    return h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix)\n    }, [h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-textarea-wrap\"),\n      \"ref\": \"textAreaRef\"\n    }, [h(TextArea, {\n      \"class\": \"\".concat(selectorPrefix, \"-textarea\"),\n      \"attrs\": {\n        \"placeholder\": Intl.tv('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": this.value,\n        \"maxLength\": 100\n      },\n      \"on\": {\n        \"change\": function change(e) {\n          _this.value = e.target.value;\n        }\n      }\n    })]), h(\"div\", {\n      \"ref\": \"emojiWrapRef\",\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-emoji-wrap\")\n    }), h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar\")\n    }, [h(Popover, {\n      \"attrs\": {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return _this.$refs.emojiWrapRef;\n        },\n        \"content\": h(Emoji, {\n          \"attrs\": {\n            \"set\": \"emojione\",\n            \"i18n\": LOCAL_MAP.get(this.local || 'zh')\n          },\n          \"on\": {\n            \"select\": this.$onEmojiSelect\n          },\n          \"props\": _objectSpread({}, this.emojiPickerProps || {})\n        }),\n        \"visible\": this.emojiIconWrapVisible\n      }\n    }, [h(\"div\", {\n      \"on\": {\n        \"click\": function click(e) {\n          e.stopPropagation();\n          _this.emojiIconWrapVisible = !_this.emojiIconWrapVisible;\n        }\n      }\n    }, [h(EmojiIcon, {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-item-emoji\")\n    })])]), h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-inner\")\n    }, [h(Button, {\n      \"attrs\": {\n        \"type\": \"primary\",\n        \"disabled\": !this.value\n      },\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('result', _this.value.trim());\n        }\n      }\n    }, [Intl.tv('添加')]), h(Button, {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('cancel');\n        }\n      }\n    }, [Intl.tv('取消')])])])]);\n  }\n};\nexport default Reply;"],"names":["_defineProperty","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","Button","Input","Popover","Intl","Emoji","en","zh","EmojiIcon","TextArea","LOCAL_MAP","Map","selectorPrefix","Reply","name","props","local","type","String","default","emojiPickerProps","emits","data","value","emojiIconWrapVisible","methods","$onEmojiSelect","_a","native","textareaEl","this","$refs","textAreaRef","querySelector","selectionStart","concat","substring","$nextTick","focus","setSelectionRange","$onDocBodyClick","e","includes","$onEmojiWrapClick","stopPropagation","mounted","_b","document","body","addEventListener","emojiWrapRef","call","beforeDestroy","removeEventListener","render","h","_this","class","ref","attrs","placeholder","tv","autoFocus","maxLength","on","change","placement","getPopupContainer","content","set","i18n","get","select","visible","click","disabled","$emit","trim"],"mappings":"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"}