import _Button from"ant-design-vue/es/button";import _Popover from"ant-design-vue/es/popover";import _Input from"ant-design-vue/es/input";import{isVNode as _isVNode,mergeProps as _mergeProps,createVNode as _createVNode}from"vue";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.map.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/esnext.map.delete-all.js";import"core-js/modules/esnext.map.every.js";import"core-js/modules/esnext.map.filter.js";import"core-js/modules/esnext.map.find.js";import"core-js/modules/esnext.map.find-key.js";import"core-js/modules/esnext.map.includes.js";import"core-js/modules/esnext.map.key-of.js";import"core-js/modules/esnext.map.map-keys.js";import"core-js/modules/esnext.map.map-values.js";import"core-js/modules/esnext.map.merge.js";import"core-js/modules/esnext.map.reduce.js";import"core-js/modules/esnext.map.some.js";import"core-js/modules/esnext.map.update.js";import"core-js/modules/web.dom-collections.iterator.js";import"core-js/modules/es.array.concat.js";import"core-js/modules/es.array.includes.js";import"core-js/modules/es.string.includes.js";import"core-js/modules/es.string.trim.js";import{defineComponent,nextTick,onBeforeUnmount,onMounted,ref}from"vue";import{object,string}from"vue-types";import Intl from"@baifendian/adherev-util-intl";import ar from"@emoji-mart/data/i18n/ar.json";import de from"@emoji-mart/data/i18n/de.json";import en from"@emoji-mart/data/i18n/en.json";import es from"@emoji-mart/data/i18n/es.json";import fa from"@emoji-mart/data/i18n/fa.json";import fr from"@emoji-mart/data/i18n/fr.json";import it from"@emoji-mart/data/i18n/it.json";import ja from"@emoji-mart/data/i18n/ja.json";import nl from"@emoji-mart/data/i18n/nl.json";import pl from"@emoji-mart/data/i18n/pl.json";import pt from"@emoji-mart/data/i18n/pt.json";import ru from"@emoji-mart/data/i18n/ru.json";import uk from"@emoji-mart/data/i18n/uk.json";import zh from"@emoji-mart/data/i18n/zh.json";import Emoji from"../../Components/Emoji";import EmojiIcon from"./emoji";function _isSlot(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!_isVNode(e)}var TextArea=_Input.TextArea,LOCAL_MAP=new Map([["ar",ar],["de",de],["en",en],["es",es],["fa",fa],["fr",fr],["it",it],["ja",ja],["nl",nl],["pl",pl],["pt",pt],["ru",ru],["uk",uk],["zh",zh]]),selectorPrefix="adherev-ui-comment-reply",submitProps={local:string().def("zh"),emojiPickerProps:object().def({})};export default defineComponent({name:"adv-comment-reply",emits:["result","cancel"],props:submitProps,setup:function(t,e){function r(e){var o=e.native,t=s.value.querySelector("textarea"),r=t.selectionStart;c.value="".concat(c.value.substring(0,r)).concat(o).concat(c.value.substring(r)),nextTick(function(){t.focus(),t.setSelectionRange(r+o.length,r+o.length)})}function n(e){e=e.target,[s.value.querySelector("textarea")].includes(e)||(l.value=!1)}function a(e){e.stopPropagation()}var i=e.emit,s=ref(),m=ref(),c=ref(""),l=ref(!1);return onMounted(function(){var e,o;document.body.addEventListener("click",n),null!=(o=(e=m.value).addEventListener)&&o.call(e,"click",a)}),onBeforeUnmount(function(){var e,o;document.body.removeEventListener("click",n),null!=(o=(e=m.value).removeEventListener)&&o.call(e,"click",a)}),function(){var e,o;return _createVNode("div",{class:"".concat(selectorPrefix)},[_createVNode("div",{class:"".concat(selectorPrefix,"-textarea-wrap"),ref:s},[_createVNode(TextArea,{class:"".concat(selectorPrefix,"-textarea"),placeholder:Intl.tv("请输入回复内容"),autoFocus:!0,value:c.value,onChange:function(e){c.value=e.target.value},maxLength:100},null)]),_createVNode("div",{ref:m,class:"".concat(selectorPrefix,"-toolbar-emoji-wrap")},null),_createVNode("div",{class:"".concat(selectorPrefix,"-toolbar")},[_createVNode(_Popover,{placement:"bottomLeft",getPopupContainer:function(){return m.value},content:_createVNode(Emoji,_mergeProps({i18n:LOCAL_MAP.get(t.local||"zh"),onEmojiSelect:r},t.emojiPickerProps||{}),null),visible:l.value},{default:function(){return[_createVNode("div",{onClick:function(e){e.stopPropagation(),l.value=!l.value}},[_createVNode(EmojiIcon,{class:"".concat(selectorPrefix,"-toolbar-item-emoji")},null)])]}}),_createVNode("div",{class:"".concat(selectorPrefix,"-toolbar-inner")},[_createVNode(_Button,{type:"primary",class:"".concat(selectorPrefix,"-toolbar-item"),disabled:!c,onClick:function(){return i("result",c.value.trim())}},_isSlot(e=Intl.tv("添加"))?e:{default:function(){return[e]}}),_createVNode(_Button,{class:"".concat(selectorPrefix,"-toolbar-item"),onClick:function(){return i("cancel")}},_isSlot(o=Intl.tv("取消"))?o:{default:function(){return[o]}})])])])}}});export{LOCAL_MAP,submitProps};
//# sourceMappingURL=index.js.map
