import"core-js/modules/es.object.keys.js";import"core-js/modules/es.symbol.js";import"core-js/modules/es.array.filter.js";import"core-js/modules/es.object.get-own-property-descriptor.js";import"core-js/modules/web.dom-collections.for-each.js";import"core-js/modules/es.object.get-own-property-descriptors.js";import"core-js/modules/es.object.define-properties.js";import"core-js/modules/es.object.define-property.js";import _Button from"ant-design-vue/es/button";import _Popover from"ant-design-vue/es/popover";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _Input from"ant-design-vue/es/input";function ownKeys(o,e){var t,r=Object.keys(o);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(o),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,t)),r}function _objectSpread(o){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){_defineProperty(o,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(t,e))})}return o}import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.map.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/esnext.map.delete-all.js";import"core-js/modules/esnext.map.every.js";import"core-js/modules/esnext.map.filter.js";import"core-js/modules/esnext.map.find.js";import"core-js/modules/esnext.map.find-key.js";import"core-js/modules/esnext.map.includes.js";import"core-js/modules/esnext.map.key-of.js";import"core-js/modules/esnext.map.map-keys.js";import"core-js/modules/esnext.map.map-values.js";import"core-js/modules/esnext.map.merge.js";import"core-js/modules/esnext.map.reduce.js";import"core-js/modules/esnext.map.some.js";import"core-js/modules/esnext.map.update.js";import"core-js/modules/web.dom-collections.iterator.js";import"core-js/modules/es.array.concat.js";import"core-js/modules/es.array.includes.js";import"core-js/modules/es.string.includes.js";import"core-js/modules/es.string.trim.js";import Intl from"@baifendian/adherev-util-intl";import Emoji from"../../Components/Emoji";import en from"../../Components/Emoji/locales/en";import zh from"../../Components/Emoji/locales/zh";import EmojiIcon from"./emoji";var TextArea=_Input.TextArea,LOCAL_MAP=new Map([["en",en],["zh",zh]]),selectorPrefix="adherev-ui-comment-reply",Reply={name:"adv-comment-reply",props:{local:{type:String,default:"zh"},emojiPickerProps:{type:Object,default:function(){return{}}}},emits:["result","cancel"],data:function(){return{value:"",emojiIconWrapVisible:!1}},methods:{$onEmojiSelect:function(e){var o=e.native,t=this.$refs.textAreaRef.querySelector("textarea"),r=t.selectionStart;this.value="".concat(this.value.substring(0,r)).concat(o).concat(this.value.substring(r)),this.$nextTick(function(){t.focus(),t.setSelectionRange(r+o.length,r+o.length)})},$onDocBodyClick:function(e){e=e.target;[this.$refs.textAreaRef.querySelector("textarea")].includes(e)||(this.emojiIconWrapVisible=!1)},$onEmojiWrapClick:function(e){e.stopPropagation()}},mounted:function(){var e,o;document.body.addEventListener("click",this.$onDocBodyClick),null!=(o=(e=this.$refs.emojiWrapRef).addEventListener)&&o.call(e,"click",this.$onEmojiWrapClick)},beforeDestroy:function(){var e,o;document.body.removeEventListener("click",this.$onDocBodyClick),null!=(o=(e=this.$refs.emojiWrapRef).removeEventListener)&&o.call(e,"click",this.$onEmojiWrapClick)},render:function(e){var o=this;return e("div",{class:"".concat(selectorPrefix)},[e("div",{class:"".concat(selectorPrefix,"-textarea-wrap"),ref:"textAreaRef"},[e(TextArea,{class:"".concat(selectorPrefix,"-textarea"),attrs:{placeholder:Intl.tv("请输入回复内容"),autoFocus:!0,value:this.value,maxLength:100},on:{change:function(e){o.value=e.target.value}}})]),e("div",{ref:"emojiWrapRef",class:"".concat(selectorPrefix,"-toolbar-emoji-wrap")}),e("div",{class:"".concat(selectorPrefix,"-toolbar")},[e(_Popover,{attrs:{placement:"bottomLeft",getPopupContainer:function(){return o.$refs.emojiWrapRef},content:e(Emoji,{attrs:{set:"emojione",i18n:LOCAL_MAP.get(this.local||"zh")},on:{select:this.$onEmojiSelect},props:_objectSpread({},this.emojiPickerProps||{})}),visible:this.emojiIconWrapVisible}},[e("div",{on:{click:function(e){e.stopPropagation(),o.emojiIconWrapVisible=!o.emojiIconWrapVisible}}},[e(EmojiIcon,{class:"".concat(selectorPrefix,"-toolbar-item-emoji")})])]),e("div",{class:"".concat(selectorPrefix,"-toolbar-inner")},[e(_Button,{attrs:{type:"primary",disabled:!this.value},class:"".concat(selectorPrefix,"-toolbar-item"),on:{click:function(){return o.$emit("result",o.value.trim())}}},[Intl.tv("添加")]),e(_Button,{class:"".concat(selectorPrefix,"-toolbar-item"),on:{click:function(){return o.$emit("cancel")}}},[Intl.tv("取消")])])])])}};export default Reply;
//# sourceMappingURL=index.js.map
