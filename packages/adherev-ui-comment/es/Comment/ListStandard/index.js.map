{"version":3,"file":"index.js","sources":["Comment/ListStandard/index.js"],"sourcesContent":["import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport \"core-js/modules/es.number.constructor.js\";\nimport { __assign, __spreadArrays } from \"tslib\";\nimport { Empty } from 'ant-design-vue';\nimport { Fragment } from 'vue-fragment';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adherev-ui-flexlayout';\nimport ScrollLoad from '@baifendian/adherev-ui-scrollload';\nimport CommentList from '../List';\nimport { selectorPrefix } from '../index';\nvar VerticalFlexLayout = FlexLayout.VerticalFlexLayout;\nvar ListStandard = {\n  name: selectorPrefix + \"-list-standard\",\n  slots: ['renderEmpty', 'renderFirstLoading'],\n  scopedSlots: ['renderList'],\n  props: {\n    getScrollWrapContainer: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    },\n    flexLayoutProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    listProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    limit: {\n      type: Number,\n      default: 10\n    },\n    fetchData: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    },\n    dataKeys: {\n      type: Object,\n      default: function _default() {\n        return {\n          current: 'current',\n          totalPage: 'totalPage',\n          list: 'list',\n          totalCount: 'totalCount'\n        };\n      }\n    }\n  },\n  data: function data() {\n    var _a;\n\n    return {\n      loading: true,\n      data: (_a = {}, _a[this.dataKeys.current] = 1, _a[this.dataKeys.totalPage] = 0, _a[this.dataKeys.list] = [], _a[this.dataKeys.totalCount] = 0, _a),\n      $paging: {\n        page: 1,\n        limit: this.limit\n      },\n      $status: ScrollLoad.NORMAL,\n      $callbackHandler: null\n    };\n  },\n  computed: {\n    isEmpty: function isEmpty() {\n      return this.$data.$paging.page === 1 && this.data[this.dataKeys.list].length === 0;\n    }\n  },\n  methods: {\n    $loadMore: function $loadMore(callback) {\n      var _this = this;\n\n      if (this.$data.$status === ScrollLoad.EMPTY) {\n        this.$data.$status = ScrollLoad.EMPTY;\n        callback(ScrollLoad.EMPTY);\n        return;\n      }\n\n      this.$data.$callbackHandler = callback;\n      setTimeout(function () {\n        return _this.$appendData();\n      }, 100);\n    },\n\n    /**\n     * loadData\n     * @description 重新加载数据\n     * @return {*}\n     */\n    $loadData: function $loadData() {\n      var _this = this;\n\n      this.loading = true;\n      this.$data.$paging = {\n        page: 1,\n        limit: this.limit\n      };\n      return this.$fetchData(function (res) {\n        _this.data = res;\n      });\n    },\n\n    /**\n     * appendData\n     * @description 加载更多\n     * @return {*}\n     */\n    $appendData: function $appendData() {\n      var _this = this;\n\n      this.loading = true;\n      this.$data.$paging.page = this.$data.$paging.page + 1;\n      var list = this.dataKeys.list;\n      return this.$fetchData(function (res) {\n        var _a;\n\n        _this.data = __assign(__assign({}, res), (_a = {}, _a[_this.dataKeys.list] = __spreadArrays(_this.data[list], res[list]), _a));\n      });\n    },\n\n    /**\n     * fetchData\n     * @description 调用接口\n     */\n    $fetchData: function $fetchData(callback) {\n      var _this = this;\n\n      var _a;\n\n      return (_a = this === null || this === void 0 ? void 0 : this.fetchData) === null || _a === void 0 ? void 0 : _a.call(this, this.$data.$paging).then(function (data) {\n        callback(data);\n        _this.loading = false;\n        return data;\n      }).catch(function (error) {\n        var _a, _b;\n\n        _this.loading = false;\n\n        if (_this.$data.$callbackHandler) {\n          _this.$data.$status = ScrollLoad.ERROR;\n          (_b = (_a = _this.$data).$callbackHandler) === null || _b === void 0 ? void 0 : _b.call(_a, _this.$data.$status);\n        }\n\n        return error;\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.$loadData();\n  },\n  watch: {\n    data: function data(_data) {\n      this.$nextTick(function () {\n        if (this.$data.$callbackHandler) {\n          this.$data.$status = this.$data.$paging.page < _data[this.dataKeys.totalPage] ? ScrollLoad.NORMAL : ScrollLoad.EMPTY;\n          this.$data.$callbackHandler(this.$data.$status);\n        }\n      });\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var _a, _b; // @ts-ignore\n\n\n    return h(VerticalFlexLayout, {\n      \"class\": \"\" + selectorPrefix,\n      \"props\": _objectSpread({}, this.flexLayoutProps || {})\n    }, [h(\"div\", {\n      \"slot\": \"renderMain\",\n      \"class\": selectorPrefix + \"-auto\",\n      \"ref\": \"mainRef\"\n    }, [h(CommentList, {\n      \"attrs\": {\n        \"getScrollWrapContainer\": this.getScrollWrapContainer,\n        \"isLoading\": this.loading,\n        \"hasMore\": this.data[this.dataKeys.list].length <= this.data[this.dataKeys.totalCount],\n        \"loadMore\": function loadMore() {\n          return _this.$loadMore;\n        }\n      },\n      \"props\": _objectSpread({}, this.listProps || {})\n    }, [h(Fragment, {\n      \"slot\": \"renderFirstLoading\"\n    }, [this.$slots.renderFirstLoading]), h(ConditionalRender, {\n      \"attrs\": {\n        \"conditional\": !this.isEmpty\n      }\n    }, [(_b = (_a = this.$scopedSlots) === null || _a === void 0 ? void 0 : _a.renderList) === null || _b === void 0 ? void 0 : _b.call(_a, this.data), h(Fragment, {\n      \"slot\": \"noMatch\"\n    }, [this.$slots.renderEmpty || h(Empty)])])])])]);\n  }\n};\nexport default ListStandard;"],"names":["_defineProperty","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","__assign","__spreadArrays","Empty","Fragment","ConditionalRender","FlexLayout","ScrollLoad","CommentList","selectorPrefix","VerticalFlexLayout","ListStandard","name","slots","scopedSlots","props","getScrollWrapContainer","type","Function","default","flexLayoutProps","listProps","limit","Number","fetchData","dataKeys","current","totalPage","list","totalCount","data","_a","loading","this","$paging","page","$status","NORMAL","$callbackHandler","computed","isEmpty","$data","methods","$loadMore","callback","_this","EMPTY","setTimeout","$appendData","$loadData","$fetchData","res","call","then","catch","error","_b","ERROR","mounted","watch","_data","$nextTick","render","h","class","slot","ref","attrs","isLoading","hasMore","loadMore","$slots","renderFirstLoading","conditional","$scopedSlots","renderList","renderEmpty"],"mappings":"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"}