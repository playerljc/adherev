{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["import { resolveComponent as _resolveComponent, mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { __assign } from \"tslib\";\nimport { defineComponent, ref } from 'vue';\nimport { bool, func, object } from 'vue-types';\nimport BackTopAnimation from '@baifendian/adherev-ui-backtopanimation';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport ScrollLoad from '@baifendian/adherev-ui-scrollload';\nvar selectorPrefix = 'adherev-ui-comment-inner-list';\nvar props = {\n  isLoading: bool().def(false),\n  hasMore: bool().def(false),\n  scrollLoadProps: object().def({}),\n  getScrollWrapContainer: func(),\n  renderFirstLoading: object()\n};\nexport default defineComponent({\n  name: \"adv-comment-list\",\n  props: props,\n  slots: ['renderFirstLoading', 'default'],\n  emits: ['loadMore'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots,\n      emit = _a.emit;\n    var wrapRef = ref();\n    var isFirst = true;\n    var isFirstLoading = true;\n    var renderDispatch = function renderDispatch() {\n      var loading = props.isLoading;\n      if (isFirst && !isFirstLoading && loading) {\n        isFirstLoading = true;\n      }\n      if (isFirst && isFirstLoading && !loading) {\n        isFirst = false;\n        isFirstLoading = false;\n      }\n      if (isFirst) {\n        return renderFirstLoading();\n      }\n      return renderNormal();\n    };\n    var renderFirstLoading = function renderFirstLoading() {\n      var _a;\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n      }, [slots.renderFirstLoading ? (_a = slots.renderFirstLoading) === null || _a === void 0 ? void 0 : _a.call(slots) : props.renderFirstLoading]);\n    };\n    var renderNormal = function renderNormal() {\n      var defaultScrollLoadProps = {\n        getScrollContainer: function getScrollContainer() {\n          var _a, _b;\n          return (_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild;\n        }\n      };\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": props.hasMore\n        }, {\n          default: function _default() {\n            var _a, _b;\n            return _createVNode(\"div\", {\n              \"class\": \"\".concat(selectorPrefix, \"-normal-wrap\")\n            }, [_createVNode(ScrollLoad, _mergeProps({\n              \"onScrollBottom\": function onScrollBottom(callback) {\n                return emit('loadMore', callback);\n              }\n            }, __assign(__assign(__assign({}, defaultScrollLoadProps), props.scrollLoadProps || {}), {\n              distance: ((_a = props.scrollLoadProps) === null || _a === void 0 ? void 0 : _a.distance) || 50\n            })), {\n              default: function _default() {\n                return [(_b = slots.default) === null || _b === void 0 ? void 0 : _b.call(slots)];\n              }\n            }), _createVNode(ConditionalRender, {\n              \"conditional\": !!(props.getScrollWrapContainer ? props.getScrollWrapContainer() : null)\n            }, {\n              default: function _default() {\n                var _a;\n                return _createVNode(_resolveComponent(\"teleport\"), {\n                  \"to\": (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)\n                }, {\n                  default: function _default() {\n                    return [_createVNode(BackTopAnimation, {\n                      \"onTarget\": function onTarget(callback) {\n                        var _a, _b;\n                        return callback((_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild);\n                      },\n                      \"onTrigger\": function onTrigger(next) {\n                        return next();\n                      }\n                    }, null)];\n                  }\n                });\n              },\n              noMatch: function noMatch() {\n                return (// @ts-ignore\n                  _createVNode(BackTopAnimation, {\n                    \"onTarget\": function onTarget(callback) {\n                      var _a, _b;\n                      return callback((_b = (_a = wrapRef.value) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adherev-ui-scrollload'));\n                    },\n                    \"onTrigger\": function onTrigger(next) {\n                      return next();\n                    }\n                  }, null)\n                );\n              }\n            })]);\n          }\n        })\n      );\n    };\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": selectorPrefix,\n        \"ref\": wrapRef\n      }, [renderDispatch()]);\n    };\n  }\n});"],"names":["_resolveComponent","_mergeProps","_createVNode","__assign","defineComponent","ref","bool","func","object","BackTopAnimation","ConditionalRender","ScrollLoad","selectorPrefix","props","isLoading","def","hasMore","scrollLoadProps","getScrollWrapContainer","renderFirstLoading","name","slots","emits","setup","_a","class","concat","call","renderNormal","defaultScrollLoadProps","getScrollContainer","_b","firstElementChild","conditional","default","onScrollBottom","callback","emit","distance","to","onTarget","onTrigger","next","noMatch","wrapRef","value","querySelector","isFirst","isFirstLoading","loading"],"mappings":"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"}