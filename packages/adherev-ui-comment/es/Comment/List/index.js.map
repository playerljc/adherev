{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { __assign } from \"tslib\";\nimport { Teleport, defineComponent, ref } from 'vue';\nimport { bool, func, object } from 'vue-types';\nimport BackTopAnimation from '@baifendian/adherev-ui-backtopanimation';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport ScrollLoad from '@baifendian/adherev-ui-scrollload';\nvar selectorPrefix = 'adherev-ui-comment-inner-list';\nexport var listProps = {\n  isLoading: bool().def(false),\n  hasMore: bool().def(false),\n  scrollLoadProps: object().def({}),\n  getScrollWrapContainer: func(),\n  renderFirstLoading: object()\n};\nexport default defineComponent({\n  name: \"adv-comment-list\",\n  props: listProps,\n  slots: ['renderFirstLoading', 'default'],\n  emits: ['loadMore'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots,\n      emit = _a.emit;\n    var wrapRef = ref();\n    var isFirst = true;\n    var isFirstLoading = true;\n    var renderDispatch = function renderDispatch() {\n      var loading = props.isLoading;\n      if (isFirst && !isFirstLoading && loading) {\n        isFirstLoading = true;\n      }\n      if (isFirst && isFirstLoading && !loading) {\n        isFirst = false;\n        isFirstLoading = false;\n      }\n      if (isFirst) {\n        return renderFirstLoading();\n      }\n      return renderNormal();\n    };\n    var renderFirstLoading = function renderFirstLoading() {\n      var _a;\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n      }, [slots.renderFirstLoading ? (_a = slots.renderFirstLoading) === null || _a === void 0 ? void 0 : _a.call(slots) : props.renderFirstLoading]);\n    };\n    var renderNormal = function renderNormal() {\n      var defaultScrollLoadProps = {\n        getScrollContainer: function getScrollContainer() {\n          var _a, _b;\n          return (_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild;\n        }\n      };\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": props.hasMore\n        }, {\n          default: function _default() {\n            var _a, _b;\n            return _createVNode(\"div\", {\n              \"class\": \"\".concat(selectorPrefix, \"-normal-wrap\")\n            }, [_createVNode(ScrollLoad, _mergeProps({\n              \"onScrollBottom\": function onScrollBottom(callback) {\n                console.log('onScrollBottom');\n                emit('loadMore', callback);\n              }\n            }, __assign(__assign(__assign({}, defaultScrollLoadProps), props.scrollLoadProps || {}), {\n              distance: ((_a = props.scrollLoadProps) === null || _a === void 0 ? void 0 : _a.distance) || 50\n            })), {\n              default: function _default() {\n                return [(_b = slots.default) === null || _b === void 0 ? void 0 : _b.call(slots)];\n              }\n            }), _createVNode(ConditionalRender, {\n              \"conditional\": !!(props.getScrollWrapContainer ? props.getScrollWrapContainer() : null)\n            }, {\n              default: function _default() {\n                var _a;\n                return _createVNode(Teleport, {\n                  \"to\": (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)\n                }, {\n                  default: function _default() {\n                    return [_createVNode(BackTopAnimation, {\n                      \"onTarget\": function onTarget(callback) {\n                        var _a, _b;\n                        return callback((_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild);\n                      },\n                      \"onTrigger\": function onTrigger(next) {\n                        return next();\n                      }\n                    }, null)];\n                  }\n                });\n              },\n              noMatch: function noMatch() {\n                return (// @ts-ignore\n                  _createVNode(BackTopAnimation, {\n                    \"onTarget\": function onTarget(callback) {\n                      var _a, _b;\n                      return callback((_b = (_a = wrapRef.value) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adherev-ui-scrollload'));\n                    },\n                    \"onTrigger\": function onTrigger(next) {\n                      return next();\n                    }\n                  }, null)\n                );\n              }\n            })]);\n          }\n        })\n      );\n    };\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": selectorPrefix,\n        \"ref\": wrapRef\n      }, [renderDispatch()]);\n    };\n  }\n});"],"names":["_mergeProps","_createVNode","__assign","Teleport","defineComponent","ref","bool","func","object","BackTopAnimation","ConditionalRender","ScrollLoad","selectorPrefix","listProps","isLoading","def","hasMore","scrollLoadProps","getScrollWrapContainer","renderFirstLoading","name","props","slots","emits","setup","_a","class","concat","call","renderNormal","defaultScrollLoadProps","getScrollContainer","_b","firstElementChild","conditional","default","onScrollBottom","callback","console","log","emit","distance","to","onTarget","onTrigger","next","noMatch","wrapRef","value","querySelector","isFirst","isFirstLoading","loading"],"mappings":"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"}