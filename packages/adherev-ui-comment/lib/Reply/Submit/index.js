"use strict";var _vue=require("vue");function _isSlot(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,_vue.isVNode)(e)}require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.string.trim.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),ant_design_vue_1=require("ant-design-vue"),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_util_intl_1=tslib_1.__importDefault(require("@baifendian/adherev-util-intl")),Emoji_1=tslib_1.__importDefault(require("../../Components/Emoji")),en_1=tslib_1.__importDefault(require("../../Components/Emoji/locales/en")),zh_1=tslib_1.__importDefault(require("../../Components/Emoji/locales/zh")),emoji_1=tslib_1.__importDefault(require("./emoji")),TextArea=ant_design_vue_1.Input.TextArea,LOCAL_MAP=new Map([["en",en_1.default],["zh",zh_1.default]]),selectorPrefix="adherev-ui-comment-reply",props={local:(0,vue_types_1.string)().def("zh"),emojiPickerProps:(0,vue_types_1.object)().def({})};exports.default=(0,vue_1.defineComponent)({name:"adv-comment-reply",emits:["result","cancel"],props:props,setup:function(r,e){function o(e){var t=e.native,r=i.value.querySelector("textarea"),o=r.selectionStart;l.value="".concat(l.value.substring(0,o)).concat(t).concat(l.value.substring(o)),(0,vue_1.nextTick)(function(){r.focus(),r.setSelectionRange(o+t.length,o+t.length)})}function u(e){e=e.target,[i.value.querySelector("textarea")].includes(e)||(c.value=!1)}function s(e){e.stopPropagation()}var n=e.emit,i=(0,vue_1.ref)(),a=(0,vue_1.ref)(),l=(0,vue_1.ref)(""),c=(0,vue_1.ref)(!1);return(0,vue_1.onMounted)(function(){var e,t;document.body.addEventListener("click",u),null!=(t=(e=a.value).addEventListener)&&t.call(e,"click",s)}),(0,vue_1.onBeforeUnmount)(function(){var e,t;document.body.removeEventListener("click",u),null!=(t=(e=a.value).removeEventListener)&&t.call(e,"click",s)}),function(){var e,t;return(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix)},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-textarea-wrap"),ref:i},[(0,_vue.createVNode)(TextArea,{class:"".concat(selectorPrefix,"-textarea"),placeholder:adherev_util_intl_1.default.tv("请输入回复内容"),autoFocus:!0,value:l.value,onChange:function(e){l.value=e.target.value},maxLength:100},null)]),(0,_vue.createVNode)("div",{ref:a,class:"".concat(selectorPrefix,"-toolbar-emoji-wrap")},null),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-toolbar")},[(0,_vue.createVNode)(ant_design_vue_1.Popover,{placement:"bottomLeft",getPopupContainer:function(){return a.value},content:(0,_vue.createVNode)(Emoji_1.default,(0,_vue.mergeProps)({set:"emojione",i18n:LOCAL_MAP.get(r.local||"zh"),onSelect:o},r.emojiPickerProps||{}),null),visible:c.value},{default:function(){return[(0,_vue.createVNode)("div",{onClick:function(e){e.stopPropagation(),c.value=!c.value}},[(0,_vue.createVNode)(emoji_1.default,{class:"".concat(selectorPrefix,"-toolbar-item-emoji")},null)])]}}),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-toolbar-inner")},[(0,_vue.createVNode)(ant_design_vue_1.Button,{type:"primary",class:"".concat(selectorPrefix,"-toolbar-item"),disabled:!l,onClick:function(){return n("result",l.value.trim())}},_isSlot(e=adherev_util_intl_1.default.tv("添加"))?e:{default:function(){return[e]}}),(0,_vue.createVNode)(ant_design_vue_1.Button,{class:"".concat(selectorPrefix,"-toolbar-item"),onClick:function(){return n("cancel")}},_isSlot(t=adherev_util_intl_1.default.tv("取消"))?t:{default:function(){return[t]}})])])])}}});
//# sourceMappingURL=index.js.map
