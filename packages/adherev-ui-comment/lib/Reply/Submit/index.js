"use strict";require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.get-own-property-descriptor.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.object.get-own-property-descriptors.js"),require("core-js/modules/es.object.define-properties.js");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));function ownKeys(r,e){var t,o=Object.keys(r);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(r),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),o.push.apply(o,t)),o}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){(0,_defineProperty2.default)(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.string.trim.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),ant_design_vue_1=require("ant-design-vue"),adherev_util_intl_1=tslib_1.__importDefault(require("@baifendian/adherev-util-intl")),Emoji_1=tslib_1.__importDefault(require("../../Components/Emoji")),en_1=tslib_1.__importDefault(require("../../Components/Emoji/locales/en")),zh_1=tslib_1.__importDefault(require("../../Components/Emoji/locales/zh")),emoji_1=tslib_1.__importDefault(require("./emoji")),TextArea=ant_design_vue_1.Input.TextArea,LOCAL_MAP=new Map([["en",en_1.default],["zh",zh_1.default]]),selectorPrefix="adherev-ui-comment-reply",Reply={name:"adv-comment-reply",props:{local:{type:String,default:"zh"},emojiPickerProps:{type:Object,default:function(){return{}}}},emits:["result","cancel"],data:function(){return{value:"",emojiIconWrapVisible:!1}},methods:{$onEmojiSelect:function(e){var r=e.native,t=this.$refs.textAreaRef.querySelector("textarea"),o=t.selectionStart;this.value=""+this.value.substring(0,o)+r+this.value.substring(o),this.$nextTick(function(){t.focus(),t.setSelectionRange(o+r.length,o+r.length)})},$onDocBodyClick:function(e){e=e.target;[this.$refs.textAreaRef.querySelector("textarea")].includes(e)||(this.emojiIconWrapVisible=!1)},$onEmojiWrapClick:function(e){e.stopPropagation()}},mounted:function(){var e,r;document.body.addEventListener("click",this.$onDocBodyClick),null!==(r=(e=this.$refs.emojiWrapRef).addEventListener)&&void 0!==r&&r.call(e,"click",this.$onEmojiWrapClick)},beforeDestroy:function(){var e,r;document.body.removeEventListener("click",this.$onDocBodyClick),null!==(r=(e=this.$refs.emojiWrapRef).removeEventListener)&&void 0!==r&&r.call(e,"click",this.$onEmojiWrapClick)},render:function(e){var r=this;return e("div",{class:""+selectorPrefix},[e("div",{class:selectorPrefix+"-textarea-wrap",ref:"textAreaRef"},[e(TextArea,{class:selectorPrefix+"-textarea",attrs:{placeholder:adherev_util_intl_1.default.v("请输入回复内容"),autoFocus:!0,value:this.value,maxLength:100},on:{change:function(e){r.value=e.target.value}}})]),e("div",{ref:"emojiWrapRef",class:selectorPrefix+"-toolbar-emoji-wrap"}),e("div",{class:selectorPrefix+"-toolbar"},[e(ant_design_vue_1.Popover,{attrs:{placement:"bottomLeft",getPopupContainer:function(){return r.$refs.emojiWrapRef},content:e(Emoji_1.default,{attrs:{set:"emojione",i18n:LOCAL_MAP.get(this.local||"zh")},on:{select:this.$onEmojiSelect},props:_objectSpread({},this.emojiPickerProps||{})}),visible:this.emojiIconWrapVisible}},[e("div",{on:{click:function(e){e.stopPropagation(),r.emojiIconWrapVisible=!r.emojiIconWrapVisible}}},[e(emoji_1.default,{class:selectorPrefix+"-toolbar-item-emoji"})])]),e("div",{class:selectorPrefix+"-toolbar-inner"},[e(ant_design_vue_1.Button,{attrs:{type:"primary",disabled:!this.value},class:selectorPrefix+"-toolbar-item",on:{click:function(){return r.$emit("result",r.value.trim())}}},[adherev_util_intl_1.default.v("添加")]),e(ant_design_vue_1.Button,{class:selectorPrefix+"-toolbar-item",on:{click:function(){return r.$emit("cancel")}}},[adherev_util_intl_1.default.v("取消")])])])])}};exports.default=Reply;
//# sourceMappingURL=index.js.map
