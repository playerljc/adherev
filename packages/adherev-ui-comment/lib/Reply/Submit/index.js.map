{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\nrequire(\"core-js/modules/es.object.define-properties.js\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/es.map.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/esnext.map.delete-all.js\");\nrequire(\"core-js/modules/esnext.map.every.js\");\nrequire(\"core-js/modules/esnext.map.filter.js\");\nrequire(\"core-js/modules/esnext.map.find.js\");\nrequire(\"core-js/modules/esnext.map.find-key.js\");\nrequire(\"core-js/modules/esnext.map.includes.js\");\nrequire(\"core-js/modules/esnext.map.key-of.js\");\nrequire(\"core-js/modules/esnext.map.map-keys.js\");\nrequire(\"core-js/modules/esnext.map.map-values.js\");\nrequire(\"core-js/modules/esnext.map.merge.js\");\nrequire(\"core-js/modules/esnext.map.reduce.js\");\nrequire(\"core-js/modules/esnext.map.some.js\");\nrequire(\"core-js/modules/esnext.map.update.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.string.trim.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\nvar Emoji_1 = tslib_1.__importDefault(require(\"../../Components/Emoji\"));\nvar en_1 = tslib_1.__importDefault(require(\"../../Components/Emoji/locales/en\"));\nvar zh_1 = tslib_1.__importDefault(require(\"../../Components/Emoji/locales/zh\"));\nvar emoji_1 = tslib_1.__importDefault(require(\"./emoji\"));\nvar TextArea = ant_design_vue_1.Input.TextArea;\nvar LOCAL_MAP = new Map([['en', en_1.default], ['zh', zh_1.default]]);\nvar selectorPrefix = 'adherev-ui-comment-reply';\nvar Reply = {\n  name: \"adv-comment-reply\",\n  props: {\n    local: {\n      type: String,\n      default: 'zh'\n    },\n    emojiPickerProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['result', 'cancel'],\n  data: function data() {\n    return {\n      value: '',\n      emojiIconWrapVisible: false\n    };\n  },\n  methods: {\n    $onEmojiSelect: function $onEmojiSelect(_a) {\n      var native = _a.native;\n      // 获取textarea的dom\n      var textareaEl = this.$refs.textAreaRef.querySelector('textarea');\n      // 光标开始索引\n      var selectionStart = textareaEl.selectionStart;\n      // (0) 1 (1) 2 (2) 3 (3)\n      this.value = \"\".concat(this.value.substring(0, selectionStart)).concat(native).concat(this.value.substring(selectionStart));\n      this.$nextTick(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    },\n    $onDocBodyClick: function $onDocBodyClick(e) {\n      var target = e.target;\n      var textareaEl = this.$refs.textAreaRef;\n      if (![textareaEl.querySelector('textarea')].includes(target)) {\n        this.emojiIconWrapVisible = false;\n      }\n    },\n    $onEmojiWrapClick: function $onEmojiWrapClick(e) {\n      e.stopPropagation();\n    }\n  },\n  mounted: function mounted() {\n    var _a, _b;\n    document.body.addEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  beforeDestroy: function beforeDestroy() {\n    var _a, _b;\n    document.body.removeEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  render: function render(h) {\n    var _this = this;\n    return h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix)\n    }, [h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-textarea-wrap\"),\n      \"ref\": \"textAreaRef\"\n    }, [h(TextArea, {\n      \"class\": \"\".concat(selectorPrefix, \"-textarea\"),\n      \"attrs\": {\n        \"placeholder\": adherev_util_intl_1.default.tv('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": this.value,\n        \"maxLength\": 100\n      },\n      \"on\": {\n        \"change\": function change(e) {\n          _this.value = e.target.value;\n        }\n      }\n    })]), h(\"div\", {\n      \"ref\": \"emojiWrapRef\",\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-emoji-wrap\")\n    }), h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar\")\n    }, [h(ant_design_vue_1.Popover, {\n      \"attrs\": {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return _this.$refs.emojiWrapRef;\n        },\n        \"content\": h(Emoji_1.default, {\n          \"attrs\": {\n            \"set\": \"emojione\",\n            \"i18n\": LOCAL_MAP.get(this.local || 'zh')\n          },\n          \"on\": {\n            \"select\": this.$onEmojiSelect\n          },\n          \"props\": _objectSpread({}, this.emojiPickerProps || {})\n        }),\n        \"visible\": this.emojiIconWrapVisible\n      }\n    }, [h(\"div\", {\n      \"on\": {\n        \"click\": function click(e) {\n          e.stopPropagation();\n          _this.emojiIconWrapVisible = !_this.emojiIconWrapVisible;\n        }\n      }\n    }, [h(emoji_1.default, {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-item-emoji\")\n    })])]), h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-inner\")\n    }, [h(ant_design_vue_1.Button, {\n      \"attrs\": {\n        \"type\": \"primary\",\n        \"disabled\": !this.value\n      },\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('result', _this.value.trim());\n        }\n      }\n    }, [adherev_util_intl_1.default.tv('添加')]), h(ant_design_vue_1.Button, {\n      \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('cancel');\n        }\n      }\n    }, [adherev_util_intl_1.default.tv('取消')])])])]);\n  }\n};\nexports.default = Reply;"],"names":["require","_interopRequireDefault","_defineProperty2","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","defineProperty","exports","value","tslib_1","ant_design_vue_1","adherev_util_intl_1","__importDefault","Emoji_1","en_1","zh_1","emoji_1","TextArea","Input","LOCAL_MAP","Map","selectorPrefix","Reply","name","props","local","type","String","emojiPickerProps","emits","data","emojiIconWrapVisible","methods","$onEmojiSelect","_a","native","textareaEl","this","$refs","textAreaRef","querySelector","selectionStart","concat","substring","$nextTick","focus","setSelectionRange","$onDocBodyClick","e","includes","$onEmojiWrapClick","stopPropagation","mounted","_b","document","body","addEventListener","emojiWrapRef","call","beforeDestroy","removeEventListener","render","h","_this","class","ref","attrs","placeholder","tv","autoFocus","maxLength","on","change","Popover","placement","getPopupContainer","content","set","i18n","get","select","visible","click","Button","disabled","$emit","trim"],"mappings":"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"}