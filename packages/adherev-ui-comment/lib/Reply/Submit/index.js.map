{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/es.map.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/esnext.map.delete-all.js\");\nrequire(\"core-js/modules/esnext.map.every.js\");\nrequire(\"core-js/modules/esnext.map.filter.js\");\nrequire(\"core-js/modules/esnext.map.find.js\");\nrequire(\"core-js/modules/esnext.map.find-key.js\");\nrequire(\"core-js/modules/esnext.map.includes.js\");\nrequire(\"core-js/modules/esnext.map.key-of.js\");\nrequire(\"core-js/modules/esnext.map.map-keys.js\");\nrequire(\"core-js/modules/esnext.map.map-values.js\");\nrequire(\"core-js/modules/esnext.map.merge.js\");\nrequire(\"core-js/modules/esnext.map.reduce.js\");\nrequire(\"core-js/modules/esnext.map.some.js\");\nrequire(\"core-js/modules/esnext.map.update.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.string.trim.js\");\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !(0, _vue.isVNode)(s);\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.submitProps = exports.LOCAL_MAP = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\nvar ar_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/ar.json\"));\nvar de_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/de.json\"));\nvar en_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/en.json\"));\nvar es_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/es.json\"));\nvar fa_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/fa.json\"));\nvar fr_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/fr.json\"));\nvar it_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/it.json\"));\nvar ja_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/ja.json\"));\nvar nl_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/nl.json\"));\nvar pl_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/pl.json\"));\nvar pt_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/pt.json\"));\nvar ru_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/ru.json\"));\nvar uk_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/uk.json\"));\nvar zh_json_1 = tslib_1.__importDefault(require(\"@emoji-mart/data/i18n/zh.json\"));\nvar Emoji_1 = tslib_1.__importDefault(require(\"../../Components/Emoji\"));\nvar emoji_1 = tslib_1.__importDefault(require(\"./emoji\"));\nvar TextArea = ant_design_vue_1.Input.TextArea;\nexports.LOCAL_MAP = new Map([['ar', ar_json_1.default], ['de', de_json_1.default], ['en', en_json_1.default], ['es', es_json_1.default], ['fa', fa_json_1.default], ['fr', fr_json_1.default], ['it', it_json_1.default], ['ja', ja_json_1.default], ['nl', nl_json_1.default], ['pl', pl_json_1.default], ['pt', pt_json_1.default], ['ru', ru_json_1.default], ['uk', uk_json_1.default], ['zh', zh_json_1.default]]);\nvar selectorPrefix = 'adherev-ui-comment-reply';\nexports.submitProps = {\n  local: (0, vue_types_1.string)().def('zh'),\n  emojiPickerProps: (0, vue_types_1.object)().def({})\n};\nexports.default = (0, vue_1.defineComponent)({\n  name: \"adv-comment-reply\",\n  emits: ['result', 'cancel'],\n  props: exports.submitProps,\n  setup: function setup(props, _a) {\n    var emit = _a.emit;\n    var textAreaRef = (0, vue_1.ref)();\n    var emojiWrapRef = (0, vue_1.ref)();\n    var value = (0, vue_1.ref)('');\n    var emojiIconWrapVisible = (0, vue_1.ref)(false);\n    var onEmojiSelect = function onEmojiSelect(_a) {\n      var native = _a.native;\n      // 获取textarea的dom\n      var textareaEl = textAreaRef.value.querySelector('textarea');\n      // 光标开始索引\n      var selectionStart = textareaEl.selectionStart;\n      // (0) 1 (1) 2 (2) 3 (3)\n      value.value = \"\".concat(value.value.substring(0, selectionStart)).concat(native).concat(value.value.substring(selectionStart));\n      (0, vue_1.nextTick)(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    };\n    var onDocBodyClick = function onDocBodyClick(e) {\n      var target = e.target;\n      var textareaEl = textAreaRef.value;\n      if (![textareaEl.querySelector('textarea')].includes(target)) {\n        emojiIconWrapVisible.value = false;\n      }\n    };\n    var onEmojiWrapClick = function onEmojiWrapClick(e) {\n      e.stopPropagation();\n    };\n    (0, vue_1.onMounted)(function () {\n      var _a, _b;\n      document.body.addEventListener('click', onDocBodyClick);\n      (_b = (_a = emojiWrapRef.value).addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', onEmojiWrapClick);\n    });\n    (0, vue_1.onBeforeUnmount)(function () {\n      var _a, _b;\n      document.body.removeEventListener('click', onDocBodyClick);\n      (_b = (_a = emojiWrapRef.value).removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', onEmojiWrapClick);\n    });\n    return function () {\n      var _slot, _slot2;\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix)\n      }, [(0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-textarea-wrap\"),\n        \"ref\": textAreaRef\n      }, [(0, _vue.createVNode)(TextArea, {\n        \"class\": \"\".concat(selectorPrefix, \"-textarea\"),\n        \"placeholder\": adherev_util_intl_1.default.tv('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": value.value,\n        \"onChange\": function onChange(e) {\n          value.value = e.target.value;\n        },\n        \"maxLength\": 100\n      }, null)]), (0, _vue.createVNode)(\"div\", {\n        \"ref\": emojiWrapRef,\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-emoji-wrap\")\n      }, null), (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar\")\n      }, [(0, _vue.createVNode)(ant_design_vue_1.Popover, {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return emojiWrapRef.value;\n        },\n        \"content\": (0, _vue.createVNode)(Emoji_1.default, (0, _vue.mergeProps)({\n          \"i18n\": exports.LOCAL_MAP.get(props.local || 'zh'),\n          \"onEmojiSelect\": onEmojiSelect\n        }, props.emojiPickerProps || {}), null),\n        \"visible\": emojiIconWrapVisible.value\n      }, {\n        default: function _default() {\n          return [(0, _vue.createVNode)(\"div\", {\n            \"onClick\": function onClick(e) {\n              e.stopPropagation();\n              emojiIconWrapVisible.value = !emojiIconWrapVisible.value;\n            }\n          }, [(0, _vue.createVNode)(emoji_1.default, {\n            \"class\": \"\".concat(selectorPrefix, \"-toolbar-item-emoji\")\n          }, null)])];\n        }\n      }), (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-inner\")\n      }, [(0, _vue.createVNode)(ant_design_vue_1.Button, {\n        \"type\": \"primary\",\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n        \"disabled\": !value,\n        \"onClick\": function onClick() {\n          return emit('result', value.value.trim());\n        }\n      }, _isSlot(_slot = adherev_util_intl_1.default.tv('添加')) ? _slot : {\n        default: function _default() {\n          return [_slot];\n        }\n      }), (0, _vue.createVNode)(ant_design_vue_1.Button, {\n        \"class\": \"\".concat(selectorPrefix, \"-toolbar-item\"),\n        \"onClick\": function onClick() {\n          return emit('cancel');\n        }\n      }, _isSlot(_slot2 = adherev_util_intl_1.default.tv('取消')) ? _slot2 : {\n        default: function _default() {\n          return [_slot2];\n        }\n      })])])]);\n    };\n  }\n});"],"names":["_vue","require","_isSlot","s","Object","prototype","toString","call","isVNode","defineProperty","exports","value","submitProps","LOCAL_MAP","tslib_1","ant_design_vue_1","vue_1","vue_types_1","adherev_util_intl_1","__importDefault","ar_json_1","de_json_1","en_json_1","es_json_1","fa_json_1","fr_json_1","it_json_1","ja_json_1","nl_json_1","pl_json_1","pt_json_1","ru_json_1","uk_json_1","zh_json_1","Emoji_1","emoji_1","TextArea","Input","selectorPrefix","Map","default","local","string","def","emojiPickerProps","object","defineComponent","name","emits","props","setup","_a","onEmojiSelect","native","textareaEl","textAreaRef","querySelector","selectionStart","concat","substring","nextTick","focus","setSelectionRange","length","onDocBodyClick","e","target","includes","emojiIconWrapVisible","onEmojiWrapClick","stopPropagation","emit","ref","emojiWrapRef","onMounted","_b","document","body","addEventListener","onBeforeUnmount","removeEventListener","_slot","_slot2","createVNode","class","placeholder","tv","autoFocus","onChange","maxLength","Popover","placement","getPopupContainer","content","mergeProps","i18n","get","visible","onClick","Button","type","disabled","trim"],"mappings":"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"}