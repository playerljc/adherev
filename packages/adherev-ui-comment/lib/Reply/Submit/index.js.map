{"version":3,"file":"index.js","sources":["Reply/Submit/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.object.define-properties.js\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.map.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/esnext.map.delete-all.js\");\n\nrequire(\"core-js/modules/esnext.map.every.js\");\n\nrequire(\"core-js/modules/esnext.map.filter.js\");\n\nrequire(\"core-js/modules/esnext.map.find.js\");\n\nrequire(\"core-js/modules/esnext.map.find-key.js\");\n\nrequire(\"core-js/modules/esnext.map.includes.js\");\n\nrequire(\"core-js/modules/esnext.map.key-of.js\");\n\nrequire(\"core-js/modules/esnext.map.map-keys.js\");\n\nrequire(\"core-js/modules/esnext.map.map-values.js\");\n\nrequire(\"core-js/modules/esnext.map.merge.js\");\n\nrequire(\"core-js/modules/esnext.map.reduce.js\");\n\nrequire(\"core-js/modules/esnext.map.some.js\");\n\nrequire(\"core-js/modules/esnext.map.update.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.string.trim.js\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar ant_design_vue_1 = require(\"ant-design-vue\");\n\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\n\nvar Emoji_1 = tslib_1.__importDefault(require(\"../../Components/Emoji\"));\n\nvar en_1 = tslib_1.__importDefault(require(\"../../Components/Emoji/locales/en\"));\n\nvar zh_1 = tslib_1.__importDefault(require(\"../../Components/Emoji/locales/zh\"));\n\nvar emoji_1 = tslib_1.__importDefault(require(\"./emoji\"));\n\nvar TextArea = ant_design_vue_1.Input.TextArea;\nvar LOCAL_MAP = new Map([['en', en_1.default], ['zh', zh_1.default]]);\nvar selectorPrefix = 'adherev-ui-comment-reply';\nvar Reply = {\n  name: \"adv-comment-reply\",\n  props: {\n    local: {\n      type: String,\n      default: 'zh'\n    },\n    emojiPickerProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['result', 'cancel'],\n  data: function data() {\n    return {\n      value: '',\n      emojiIconWrapVisible: false\n    };\n  },\n  methods: {\n    $onEmojiSelect: function $onEmojiSelect(_a) {\n      var native = _a.native; // 获取textarea的dom\n\n      var textareaEl = this.$refs.textAreaRef.querySelector('textarea'); // 光标开始索引\n\n      var selectionStart = textareaEl.selectionStart; // (0) 1 (1) 2 (2) 3 (3)\n\n      this.value = \"\" + this.value.substring(0, selectionStart) + native + this.value.substring(selectionStart);\n      this.$nextTick(function () {\n        textareaEl.focus();\n        textareaEl.setSelectionRange(selectionStart + native.length, selectionStart + native.length);\n      });\n    },\n    $onDocBodyClick: function $onDocBodyClick(e) {\n      var target = e.target;\n      var textareaEl = this.$refs.textAreaRef;\n\n      if (![textareaEl.querySelector('textarea')].includes(target)) {\n        this.emojiIconWrapVisible = false;\n      }\n    },\n    $onEmojiWrapClick: function $onEmojiWrapClick(e) {\n      e.stopPropagation();\n    }\n  },\n  mounted: function mounted() {\n    var _a, _b;\n\n    document.body.addEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  beforeDestroy: function beforeDestroy() {\n    var _a, _b;\n\n    document.body.removeEventListener('click', this.$onDocBodyClick);\n    (_b = (_a = this.$refs.emojiWrapRef).removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', this.$onEmojiWrapClick);\n  },\n  render: function render(h) {\n    var _this = this;\n\n    return h(\"div\", {\n      \"class\": \"\" + selectorPrefix\n    }, [h(\"div\", {\n      \"class\": selectorPrefix + \"-textarea-wrap\",\n      \"ref\": \"textAreaRef\"\n    }, [h(TextArea, {\n      \"class\": selectorPrefix + \"-textarea\",\n      \"attrs\": {\n        \"placeholder\": adherev_util_intl_1.default.v('请输入回复内容'),\n        \"autoFocus\": true,\n        \"value\": this.value,\n        \"maxLength\": 100\n      },\n      \"on\": {\n        \"change\": function change(e) {\n          _this.value = e.target.value;\n        }\n      }\n    })]), h(\"div\", {\n      \"ref\": \"emojiWrapRef\",\n      \"class\": selectorPrefix + \"-toolbar-emoji-wrap\"\n    }), h(\"div\", {\n      \"class\": selectorPrefix + \"-toolbar\"\n    }, [h(ant_design_vue_1.Popover, {\n      \"attrs\": {\n        \"placement\": \"bottomLeft\",\n        \"getPopupContainer\": function getPopupContainer() {\n          return _this.$refs.emojiWrapRef;\n        },\n        \"content\": h(Emoji_1.default, {\n          \"attrs\": {\n            \"set\": \"emojione\",\n            \"i18n\": LOCAL_MAP.get(this.local || 'zh')\n          },\n          \"on\": {\n            \"select\": this.$onEmojiSelect\n          },\n          \"props\": _objectSpread({}, this.emojiPickerProps || {})\n        }),\n        \"visible\": this.emojiIconWrapVisible\n      }\n    }, [h(\"div\", {\n      \"on\": {\n        \"click\": function click(e) {\n          e.stopPropagation();\n          _this.emojiIconWrapVisible = !_this.emojiIconWrapVisible;\n        }\n      }\n    }, [h(emoji_1.default, {\n      \"class\": selectorPrefix + \"-toolbar-item-emoji\"\n    })])]), h(\"div\", {\n      \"class\": selectorPrefix + \"-toolbar-inner\"\n    }, [h(ant_design_vue_1.Button, {\n      \"attrs\": {\n        \"type\": \"primary\",\n        \"disabled\": !this.value\n      },\n      \"class\": selectorPrefix + \"-toolbar-item\",\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('result', _this.value.trim());\n        }\n      }\n    }, [adherev_util_intl_1.default.v('添加')]), h(ant_design_vue_1.Button, {\n      \"class\": selectorPrefix + \"-toolbar-item\",\n      \"on\": {\n        \"click\": function click() {\n          return _this.$emit('cancel');\n        }\n      }\n    }, [adherev_util_intl_1.default.v('取消')])])])]);\n  }\n};\nexports.default = Reply;"],"names":["require","_interopRequireDefault","_defineProperty2","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","defineProperty","exports","value","tslib_1","ant_design_vue_1","adherev_util_intl_1","__importDefault","Emoji_1","en_1","zh_1","emoji_1","TextArea","Input","LOCAL_MAP","Map","selectorPrefix","Reply","name","props","local","type","String","emojiPickerProps","emits","data","emojiIconWrapVisible","methods","$onEmojiSelect","_a","native","textareaEl","this","$refs","textAreaRef","querySelector","selectionStart","substring","$nextTick","focus","setSelectionRange","$onDocBodyClick","e","includes","$onEmojiWrapClick","stopPropagation","mounted","_b","document","body","addEventListener","emojiWrapRef","call","beforeDestroy","removeEventListener","render","h","_this","class","ref","attrs","placeholder","v","autoFocus","maxLength","on","change","Popover","placement","getPopupContainer","content","set","i18n","get","select","visible","click","Button","disabled","$emit","trim"],"mappings":"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"}