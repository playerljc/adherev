{"version":3,"file":"index.js","sources":["Comment/ListStandard/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\nrequire(\"core-js/modules/es.object.define-properties.js\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar vue_fragment_1 = require(\"vue-fragment\");\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar adherev_ui_flexlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-flexlayout\"));\nvar adherev_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-scrollload\"));\nvar List_1 = tslib_1.__importDefault(require(\"../List\"));\nvar selectorPrefix = 'adherev-ui-comment-list-standard';\nvar VerticalFlexLayout = adherev_ui_flexlayout_1.default.VerticalFlexLayout;\nvar ListStandard = {\n  name: \"adv-comment-list-standard\",\n  slots: ['renderEmpty', 'renderFirstLoading'],\n  scopedSlots: ['renderList'],\n  props: {\n    getScrollWrapContainer: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    },\n    flexLayoutProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    listProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    limit: {\n      type: Number,\n      default: 10\n    },\n    fetchData: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    },\n    dataKeys: {\n      type: Object,\n      default: function _default() {\n        return {\n          current: 'current',\n          totalPage: 'totalPage',\n          list: 'list',\n          totalCount: 'totalCount'\n        };\n      }\n    },\n    renderEmpty: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    renderFirstLoading: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    renderList: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  computed: {\n    isEmpty: function isEmpty() {\n      return this.$data.$paging.page === 1 && this.data[this.dataKeys.list].length === 0;\n    }\n  },\n  watch: {\n    data: function data(_data) {\n      this.$nextTick(function () {\n        if (this.$data.$callbackHandler) {\n          this.$data.$status = this.$data.$paging.page < _data[this.dataKeys.totalPage] ? adherev_ui_scrollload_1.default.NORMAL : adherev_ui_scrollload_1.default.EMPTY;\n          this.$data.$callbackHandler(this.$data.$status);\n        }\n      });\n    }\n  },\n  data: function data() {\n    var _a;\n    return {\n      loading: true,\n      data: (_a = {}, _a[this.dataKeys.current] = 1, _a[this.dataKeys.totalPage] = 0, _a[this.dataKeys.list] = [], _a[this.dataKeys.totalCount] = 0, _a),\n      $paging: {\n        page: 1,\n        limit: this.limit\n      },\n      $status: adherev_ui_scrollload_1.default.NORMAL,\n      $callbackHandler: null\n    };\n  },\n  methods: {\n    onLoadMore: function onLoadMore(callback) {\n      var _this = this;\n      if (this.$data.$status === adherev_ui_scrollload_1.default.EMPTY) {\n        this.$data.$status = adherev_ui_scrollload_1.default.EMPTY;\n        callback(adherev_ui_scrollload_1.default.EMPTY);\n        return;\n      }\n      this.$data.$callbackHandler = callback;\n      setTimeout(function () {\n        return _this.$appendData();\n      }, 100);\n    },\n    /**\n     * loadData\n     * @description 重新加载数据\n     * @return {*}\n     */\n    $loadData: function $loadData() {\n      var _this = this;\n      this.loading = true;\n      this.$data.$paging = {\n        page: 1,\n        limit: this.limit\n      };\n      return this.$fetchData(function (res) {\n        _this.data = res;\n      });\n    },\n    /**\n     * appendData\n     * @description 加载更多\n     * @return {*}\n     */\n    $appendData: function $appendData() {\n      var _this = this;\n      this.loading = true;\n      this.$data.$paging.page = this.$data.$paging.page + 1;\n      var list = this.dataKeys.list;\n      return this.$fetchData(function (res) {\n        var _a;\n        _this.data = tslib_1.__assign(tslib_1.__assign({}, res), (_a = {}, _a[_this.dataKeys.list] = tslib_1.__spreadArray(tslib_1.__spreadArray([], _this.data[list], true), res[list], true), _a));\n      });\n    },\n    /**\n     * fetchData\n     * @description 调用接口\n     */\n    $fetchData: function $fetchData(callback) {\n      var _this = this;\n      var _a;\n      return (_a = this === null || this === void 0 ? void 0 : this.fetchData) === null || _a === void 0 ? void 0 : _a.call(this, this.$data.$paging).then(function (data) {\n        callback(data);\n        _this.loading = false;\n        return data;\n      }).catch(function (error) {\n        var _a, _b;\n        _this.loading = false;\n        if (_this.$data.$callbackHandler) {\n          _this.$data.$status = adherev_ui_scrollload_1.default.ERROR;\n          (_b = (_a = _this.$data).$callbackHandler) === null || _b === void 0 ? void 0 : _b.call(_a, _this.$data.$status);\n        }\n        return error;\n      });\n    },\n    /**\n     * $renderFirstLoading\n     * @param h\n     */\n    $renderFirstLoading: function $renderFirstLoading(h) {\n      if (this.$slots.renderFirstLoading) {\n        return this.$slots.renderFirstLoading;\n      }\n      if (this.renderFirstLoading) {\n        return this.renderFirstLoading;\n      }\n      var result = [];\n      for (var i = 0; i < 7; i++) {\n        // @ts-ignore\n        result.push(h(ant_design_vue_1.Skeleton, {\n          \"key\": i + 1,\n          \"attrs\": {\n            \"loading\": true,\n            \"avatar\": true\n          }\n        }));\n      }\n      return result;\n    }\n  },\n  mounted: function mounted() {\n    this.$loadData();\n  },\n  render: function render(h) {\n    var _a, _b, _c;\n    return h(VerticalFlexLayout, {\n      \"class\": \"\".concat(selectorPrefix),\n      \"props\": _objectSpread({}, this.flexLayoutProps || {})\n    }, [h(\"div\", {\n      \"slot\": \"renderMain\",\n      \"class\": \"\".concat(selectorPrefix, \"-auto\"),\n      \"ref\": \"mainRef\"\n    }, [h(List_1.default, {\n      \"attrs\": {\n        \"getScrollWrapContainer\": this.getScrollWrapContainer,\n        \"isLoading\": this.loading,\n        \"hasMore\": this.data[this.dataKeys.list].length <= this.data[this.dataKeys.totalCount]\n      },\n      \"on\": {\n        \"loadMore\": this.onLoadMore\n      },\n      \"props\": _objectSpread({}, this.listProps || {})\n    }, [h(\"div\", {\n      \"slot\": \"renderFirstLoading\"\n    }, [this.$renderFirstLoading(h)]), h(adherev_ui_conditionalrender_1.default, {\n      \"attrs\": {\n        \"conditional\": !this.isEmpty\n      }\n    }, [this.$scopedSlots.renderList ? (_b = (_a = this.$scopedSlots) === null || _a === void 0 ? void 0 : _a.renderList) === null || _b === void 0 ? void 0 : _b.call(_a, this.data) : (_c = this === null || this === void 0 ? void 0 : this.renderList) === null || _c === void 0 ? void 0 : _c.call(this, this.data), h(vue_fragment_1.Fragment, {\n      \"slot\": \"noMatch\"\n    }, [this.$slots.renderEmpty || this.renderEmpty || h(ant_design_vue_1.Empty)])])])])]);\n  }\n};\nexports.default = ListStandard;"],"names":["require","_interopRequireDefault","_defineProperty2","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","defineProperty","exports","value","tslib_1","ant_design_vue_1","vue_fragment_1","adherev_ui_conditionalrender_1","__importDefault","adherev_ui_flexlayout_1","adherev_ui_scrollload_1","List_1","selectorPrefix","VerticalFlexLayout","ListStandard","name","slots","scopedSlots","props","getScrollWrapContainer","type","Function","flexLayoutProps","listProps","limit","Number","fetchData","dataKeys","current","totalPage","list","totalCount","renderEmpty","renderFirstLoading","renderList","computed","isEmpty","this","$data","$paging","page","data","watch","_data","$nextTick","$callbackHandler","$status","NORMAL","EMPTY","_a","loading","methods","onLoadMore","callback","_this","setTimeout","$appendData","$loadData","$fetchData","res","__assign","__spreadArray","call","then","catch","error","_b","ERROR","$renderFirstLoading","h","$slots","result","Skeleton","attrs","avatar","mounted","render","_c","class","concat","slot","ref","isLoading","hasMore","on","loadMore","conditional","$scopedSlots","Fragment","Empty"],"mappings":"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"}