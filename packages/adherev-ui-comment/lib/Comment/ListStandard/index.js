"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),ant_design_vue_1=require("ant-design-vue"),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_ui_conditionalrender_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-conditionalrender")),adherev_ui_flexlayout_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-flexlayout")),adherev_ui_scrollload_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-scrollload")),List_1=tslib_1.__importDefault(require("../List")),selectorPrefix="adherev-ui-comment-list-standard",VerticalFlexLayout=adherev_ui_flexlayout_1.default.VerticalFlexLayout,props={getScrollWrapContainer:(0,vue_types_1.func)(),flexLayoutProps:(0,vue_types_1.object)().def({}),listProps:(0,vue_types_1.object)().def({}),limit:(0,vue_types_1.number)().def(10),fetchData:(0,vue_types_1.func)(),dataKeys:(0,vue_types_1.object)().def({current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}),renderEmpty:(0,vue_types_1.object)(),renderFirstLoading:(0,vue_types_1.object)(),renderList:(0,vue_types_1.func)()};exports.default=(0,vue_1.defineComponent)({name:"adv-comment-list-standard",slots:["renderEmpty","renderFirstLoading"],scopedSlots:["renderList"],props:props,setup:function(a,e){function t(e){d===adherev_ui_scrollload_1.default.EMPTY?(d=adherev_ui_scrollload_1.default.EMPTY,e(adherev_ui_scrollload_1.default.EMPTY)):(s=e,setTimeout(r,100))}function r(){return l.value=!0,o.page=o.page+1,_(function(e){var t;n.value=tslib_1.__assign(tslib_1.__assign({},e),((t={})[a.dataKeys.list]=tslib_1.__spreadArray(tslib_1.__spreadArray([],n.value[a.dataKeys.list],!0),e[a.dataKeys.list],!0),t))})}var u=e.slots,l=(0,vue_1.ref)(!0),n=(0,vue_1.shallowRef)(((e={})[a.dataKeys.current]=1,e[a.dataKeys.totalPage]=0,e[a.dataKeys.list]=[],e[a.dataKeys.totalCount]=0,e)),i=(0,vue_1.ref)(),o={page:1,limit:a.limit},d=adherev_ui_scrollload_1.default.NORMAL,s=null,_=function(t){var e;return null==(e=null==a?void 0:a.fetchData)?void 0:e.call(a,o).then(function(e){return t(e),l.value=!1,e}).catch(function(e){return l.value=!1,s&&(d=adherev_ui_scrollload_1.default.ERROR,null!=s&&s(d)),e})},v=(0,vue_1.computed)(function(){return 1===o.page&&0===n.value[a.dataKeys.list].length});return(0,vue_1.watch)(function(){return n},function(e){return(0,vue_1.nextTick)(function(){s&&(d=o.page<n[a.dataKeys.totalPage]?adherev_ui_scrollload_1.default.NORMAL:adherev_ui_scrollload_1.default.EMPTY,null!=s&&s(d))})}),(0,vue_1.onMounted)(function(){return l.value=!0,o={page:1,limit:a.limit},_(function(e){n.value=e})}),function(){return(0,_vue.createVNode)(VerticalFlexLayout,(0,_vue.mergeProps)({class:"".concat(selectorPrefix)},a.flexLayoutProps||{}),{renderMain:function(){return(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-auto"),ref:i},[(0,_vue.createVNode)(List_1.default,(0,_vue.mergeProps)({getScrollWrapContainer:a.getScrollWrapContainer,isLoading:l.value,hasMore:n.value[a.dataKeys.list].length<=n.value[a.dataKeys.totalCount],onLoadMore:t},a.listProps||{}),{default:function(){return(0,_vue.createVNode)(adherev_ui_conditionalrender_1.default,{conditional:!v.value},{default:function(){var e;return u.renderList?null==(e=null==u?void 0:u.renderList)?void 0:e.call(u,n.value):null==(e=null==a?void 0:a.renderList)?void 0:e.call(a,n.value)},noMatch:function(){var e;return(null==(e=u.renderEmpty)?void 0:e.call(u))||a.renderEmpty||(0,_vue.createVNode)(ant_design_vue_1.Empty,null,null)}})},renderFirstLoading:function(){return(0,_vue.createVNode)("div",null,[function(){var e;if(u.renderFirstLoading)return null==(e=u.renderFirstLoading)?void 0:e.call(u);if(a.renderFirstLoading)return a.renderFirstLoading;for(var t=[],r=0;r<7;r++)t.push((0,_vue.createVNode)(ant_design_vue_1.Skeleton,{key:r+1,loading:!0,avatar:!0},null));return t}()])}})])}})}}});
//# sourceMappingURL=index.js.map
