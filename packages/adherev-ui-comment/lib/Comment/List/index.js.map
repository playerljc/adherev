{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.listProps = void 0;\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_backtopanimation_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-backtopanimation\"));\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar adherev_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-scrollload\"));\nvar selectorPrefix = 'adherev-ui-comment-inner-list';\nexports.listProps = {\n  isLoading: (0, vue_types_1.bool)().def(false),\n  hasMore: (0, vue_types_1.bool)().def(false),\n  scrollLoadProps: (0, vue_types_1.object)().def({}),\n  getScrollWrapContainer: (0, vue_types_1.func)(),\n  renderFirstLoading: (0, vue_types_1.object)()\n};\nexports.default = (0, vue_1.defineComponent)({\n  name: \"adv-comment-list\",\n  props: exports.listProps,\n  slots: ['renderFirstLoading', 'default'],\n  emits: ['loadMore'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots,\n      emit = _a.emit;\n    var wrapRef = (0, vue_1.ref)();\n    var isFirst = true;\n    var isFirstLoading = true;\n    var renderDispatch = function renderDispatch() {\n      var loading = props.isLoading;\n      if (isFirst && !isFirstLoading && loading) {\n        isFirstLoading = true;\n      }\n      if (isFirst && isFirstLoading && !loading) {\n        isFirst = false;\n        isFirstLoading = false;\n      }\n      if (isFirst) {\n        return renderFirstLoading();\n      }\n      return renderNormal();\n    };\n    var renderFirstLoading = function renderFirstLoading() {\n      var _a;\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n      }, [slots.renderFirstLoading ? (_a = slots.renderFirstLoading) === null || _a === void 0 ? void 0 : _a.call(slots) : props.renderFirstLoading]);\n    };\n    var renderNormal = function renderNormal() {\n      var defaultScrollLoadProps = {\n        getScrollContainer: function getScrollContainer() {\n          var _a, _b;\n          return (_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild;\n        }\n      };\n      return (0, _vue.createVNode)(adherev_ui_conditionalrender_1.default, {\n        \"conditional\": props.hasMore\n      }, {\n        default: function _default() {\n          var _a, _b;\n          return (0, _vue.createVNode)(\"div\", {\n            \"class\": \"\".concat(selectorPrefix, \"-normal-wrap\")\n          }, [(0, _vue.createVNode)(adherev_ui_scrollload_1.default, (0, _vue.mergeProps)({\n            \"onScrollBottom\": function onScrollBottom(callback) {\n              emit('loadMore', callback);\n            }\n          }, tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, defaultScrollLoadProps), props.scrollLoadProps || {}), {\n            distance: ((_a = props.scrollLoadProps) === null || _a === void 0 ? void 0 : _a.distance) || 50\n          })), {\n            default: function _default() {\n              return [(_b = slots.default) === null || _b === void 0 ? void 0 : _b.call(slots)];\n            }\n          }), (0, _vue.createVNode)(adherev_ui_conditionalrender_1.default, {\n            \"conditional\": !!(props.getScrollWrapContainer ? props.getScrollWrapContainer() : null)\n          }, {\n            default: function _default() {\n              var _a;\n              return (0, _vue.createVNode)(vue_1.Teleport, {\n                \"to\": (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)\n              }, {\n                default: function _default() {\n                  return [(0, _vue.createVNode)(adherev_ui_backtopanimation_1.default, {\n                    \"onTarget\": function onTarget(callback) {\n                      var _a, _b;\n                      return callback((_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild);\n                    },\n                    \"onTrigger\": function onTrigger(next) {\n                      return next();\n                    }\n                  }, null)];\n                }\n              });\n            },\n            noMatch: function noMatch() {\n              return (0, _vue.createVNode)(adherev_ui_backtopanimation_1.default, {\n                \"onTarget\": function onTarget(callback) {\n                  var _a, _b;\n                  return callback((_b = (_a = wrapRef.value) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adherev-ui-scrollload'));\n                },\n                \"onTrigger\": function onTrigger(next) {\n                  return next();\n                }\n              }, null);\n            }\n          })]);\n        }\n      });\n    };\n    return function () {\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": selectorPrefix,\n        \"ref\": wrapRef\n      }, [renderDispatch()]);\n    };\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","listProps","vue_1","vue_types_1","adherev_ui_backtopanimation_1","__importDefault","adherev_ui_conditionalrender_1","adherev_ui_scrollload_1","selectorPrefix","isLoading","bool","def","hasMore","scrollLoadProps","object","getScrollWrapContainer","func","renderFirstLoading","default","defineComponent","name","props","slots","emits","setup","_a","createVNode","class","concat","call","renderNormal","defaultScrollLoadProps","getScrollContainer","_b","firstElementChild","conditional","mergeProps","onScrollBottom","callback","emit","__assign","distance","Teleport","to","onTarget","onTrigger","next","noMatch","wrapRef","querySelector","ref","isFirst","isFirstLoading","loading"],"mappings":"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"}