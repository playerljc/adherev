{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_backtopanimation_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-backtopanimation\"));\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar adherev_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-scrollload\"));\nvar selectorPrefix = 'adherev-ui-comment-inner-list';\nvar props = {\n  isLoading: (0, vue_types_1.bool)().def(false),\n  hasMore: (0, vue_types_1.bool)().def(false),\n  scrollLoadProps: (0, vue_types_1.object)().def({}),\n  getScrollWrapContainer: (0, vue_types_1.func)(),\n  renderFirstLoading: (0, vue_types_1.object)()\n};\nexports.default = (0, vue_1.defineComponent)({\n  name: \"adv-comment-list\",\n  props: props,\n  slots: ['renderFirstLoading', 'default'],\n  emits: ['loadMore'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots,\n      emit = _a.emit;\n    var wrapRef = (0, vue_1.ref)();\n    var isFirst = true;\n    var isFirstLoading = true;\n    var renderDispatch = function renderDispatch() {\n      var loading = props.isLoading;\n      if (isFirst && !isFirstLoading && loading) {\n        isFirstLoading = true;\n      }\n      if (isFirst && isFirstLoading && !loading) {\n        isFirst = false;\n        isFirstLoading = false;\n      }\n      if (isFirst) {\n        return renderFirstLoading();\n      }\n      return renderNormal();\n    };\n    var renderFirstLoading = function renderFirstLoading() {\n      var _a;\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n      }, [slots.renderFirstLoading ? (_a = slots.renderFirstLoading) === null || _a === void 0 ? void 0 : _a.call(slots) : props.renderFirstLoading]);\n    };\n    var renderNormal = function renderNormal() {\n      var defaultScrollLoadProps = {\n        getScrollContainer: function getScrollContainer() {\n          var _a, _b;\n          return (_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild;\n        }\n      };\n      return (// @ts-ignore\n        (0, _vue.createVNode)(adherev_ui_conditionalrender_1.default, {\n          \"conditional\": props.hasMore\n        }, {\n          default: function _default() {\n            var _a, _b;\n            return (0, _vue.createVNode)(\"div\", {\n              \"class\": \"\".concat(selectorPrefix, \"-normal-wrap\")\n            }, [(0, _vue.createVNode)(adherev_ui_scrollload_1.default, (0, _vue.mergeProps)({\n              \"onScrollBottom\": function onScrollBottom(callback) {\n                console.log('onScrollBottom');\n                emit('loadMore', callback);\n              }\n            }, tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, defaultScrollLoadProps), props.scrollLoadProps || {}), {\n              distance: ((_a = props.scrollLoadProps) === null || _a === void 0 ? void 0 : _a.distance) || 50\n            })), {\n              default: function _default() {\n                return [(_b = slots.default) === null || _b === void 0 ? void 0 : _b.call(slots)];\n              }\n            }), (0, _vue.createVNode)(adherev_ui_conditionalrender_1.default, {\n              \"conditional\": !!(props.getScrollWrapContainer ? props.getScrollWrapContainer() : null)\n            }, {\n              default: function _default() {\n                var _a;\n                return (0, _vue.createVNode)(vue_1.Teleport, {\n                  \"to\": (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)\n                }, {\n                  default: function _default() {\n                    return [(0, _vue.createVNode)(adherev_ui_backtopanimation_1.default, {\n                      \"onTarget\": function onTarget(callback) {\n                        var _a, _b;\n                        return callback((_b = (_a = props.getScrollWrapContainer) === null || _a === void 0 ? void 0 : _a.call(props)) === null || _b === void 0 ? void 0 : _b.firstElementChild);\n                      },\n                      \"onTrigger\": function onTrigger(next) {\n                        return next();\n                      }\n                    }, null)];\n                  }\n                });\n              },\n              noMatch: function noMatch() {\n                return (// @ts-ignore\n                  (0, _vue.createVNode)(adherev_ui_backtopanimation_1.default, {\n                    \"onTarget\": function onTarget(callback) {\n                      var _a, _b;\n                      return callback((_b = (_a = wrapRef.value) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adherev-ui-scrollload'));\n                    },\n                    \"onTrigger\": function onTrigger(next) {\n                      return next();\n                    }\n                  }, null)\n                );\n              }\n            })]);\n          }\n        })\n      );\n    };\n    return function () {\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": selectorPrefix,\n        \"ref\": wrapRef\n      }, [renderDispatch()]);\n    };\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","vue_1","vue_types_1","adherev_ui_backtopanimation_1","__importDefault","adherev_ui_conditionalrender_1","adherev_ui_scrollload_1","selectorPrefix","props","isLoading","bool","def","hasMore","scrollLoadProps","object","getScrollWrapContainer","func","renderFirstLoading","default","defineComponent","name","slots","emits","setup","_a","createVNode","class","concat","call","renderNormal","defaultScrollLoadProps","getScrollContainer","_b","firstElementChild","conditional","mergeProps","onScrollBottom","callback","console","log","emit","__assign","distance","Teleport","to","onTarget","onTrigger","next","noMatch","wrapRef","querySelector","ref","isFirst","isFirstLoading","loading"],"mappings":"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"}