{"version":3,"file":"_util.js","sources":["_util.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.string.starts-with.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.array.reduce.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getComponentPropsOption = exports.HOC = exports.extend = exports.withVue = exports.withInstall = void 0;\nvar tslib_1 = require(\"tslib\");\nvar lodash_merge_1 = tslib_1.__importDefault(require(\"lodash.merge\"));\nvar vue_1 = require(\"vue\");\n/**\n * withInstall\n * @param comp\n */\nvar withInstall = function withInstall(comp) {\n  comp.install = function (app) {\n    app.component(comp.displayName || comp.name, comp);\n  };\n  return comp;\n};\nexports.withInstall = withInstall;\n/**\n * withVue\n * @description - 将属性p混入到Vue实例中，在Vue实例的表达式中可以使用this.$adv[p]来进行访问\n * @param app\n * @param p\n * @param val\n */\nvar withVue = function withVue(app, p, val) {\n  app.config.globalProperties.$adv = app.config.globalProperties.$adv || {};\n  app.config.globalProperties.$adv[p] = val;\n};\nexports.withVue = withVue;\n/**\n * extend\n * @description - 实现Vue的继承使得可以实现调用父类的方法\n * 例如 类名A有一个renderInner方法，则父类的方法是$renderInnerA\n * @param options\n * @return Omit<ExtendFunction<any>, 'className'>\n */\nvar extend = function extend(options) {\n  var className = options.className,\n    vueOptions = tslib_1.__rest(options, [\"className\"]);\n  if (!vueOptions) return {};\n  var methods = vueOptions.methods;\n  if (!methods || !className) return vueOptions;\n  var methodKeys = Object.keys(methods).filter(function (methodKey) {\n    return ['$', '_'].every(function (prefix) {\n      return !methodKey.startsWith(prefix);\n    });\n  });\n  var classNames = !Array.isArray(className) ? [className] : className;\n  for (var i = 0; i < methodKeys.length; i++) {\n    var methodKey = methodKeys[i];\n    var _loop_1 = function _loop_1(j) {\n      var superMethodKey = \"$\".concat(methodKey).concat(classNames[j]);\n      vueOptions.methods[superMethodKey] = vueOptions.methods[methodKey];\n      vueOptions.methods[methodKey] = function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          params[_i] = arguments[_i];\n        }\n        return this[superMethodKey].apply(this, params || []);\n      };\n    };\n    for (var j = 0; j < classNames.length; j++) {\n      _loop_1(j);\n    }\n  }\n  return vueOptions;\n};\nexports.extend = extend;\n/**\n * HOC\n * @description 实现高阶函数\n * @param Component - Vue组件配置对象\n * @param optionsOverwrite - Vue组件的options\n * @param renderOptions - props,attrs和slots\n */\nfunction HOC(Component, optionsOverwrite, renderOptions) {\n  return (0, vue_1.defineComponent)((0, lodash_merge_1.default)(tslib_1.__assign({}, Component || {}), tslib_1.__assign(tslib_1.__assign({}, optionsOverwrite || {}), {\n    setup: function setup(props, _a) {\n      var slots = _a.slots,\n        attrs = _a.attrs,\n        expose = _a.expose;\n      var comRef = (0, vue_1.ref)();\n      if (Component.expose) {\n        var exposeObj_1 = {};\n        Component.expose.forEach(function (methodName) {\n          exposeObj_1[methodName] = function (params) {\n            var _a, _b;\n            return (_b = (_a = comRef.value) === null || _a === void 0 ? void 0 : _a[methodName]) === null || _b === void 0 ? void 0 : _b.call(_a, params);\n          };\n        });\n        expose(exposeObj_1);\n      }\n      return function () {\n        var _a, _b, _c;\n        return (0, vue_1.h)(Component, tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, ((_a = renderOptions === null || renderOptions === void 0 ? void 0 : renderOptions.props) === null || _a === void 0 ? void 0 : _a.call(renderOptions, props)) || props || {}), ((_b = renderOptions === null || renderOptions === void 0 ? void 0 : renderOptions.attrs) === null || _b === void 0 ? void 0 : _b.call(renderOptions, attrs)) || attrs || {}), {\n          ref: comRef\n        }), tslib_1.__assign({}, ((_c = renderOptions === null || renderOptions === void 0 ? void 0 : renderOptions.slots) === null || _c === void 0 ? void 0 : _c.call(renderOptions, slots)) || slots || {}));\n      };\n    }\n  })));\n}\nexports.HOC = HOC;\n/**\n * getComponentPropsOption\n * @description 获取组件的Props定义\n * @param Component\n * @returns {{}}\n */\nvar getComponentPropsOption = function getComponentPropsOption(Component) {\n  return tslib_1.__assign({}, (Component.mixins || []).reduce(function (props, com) {\n    return tslib_1.__assign(tslib_1.__assign({}, com.props || {}), props);\n  }, Component.props));\n};\nexports.getComponentPropsOption = getComponentPropsOption;"],"names":["require","Object","defineProperty","exports","value","getComponentPropsOption","HOC","extend","withVue","withInstall","tslib_1","lodash_merge_1","__importDefault","vue_1","comp","install","app","component","displayName","name","p","val","config","globalProperties","$adv","options","className","vueOptions","__rest","methods","methodKeys","keys","filter","methodKey","every","prefix","startsWith","classNames","Array","isArray","i","length","j","_loop_1","superMethodKey","concat","params","_i","arguments","this","apply","Component","optionsOverwrite","renderOptions","defineComponent","default","__assign","setup","props","_a","exposeObj_1","slots","attrs","expose","comRef","ref","forEach","methodName","_b","call","_c","h","mixins","reduce","com"],"mappings":"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"}