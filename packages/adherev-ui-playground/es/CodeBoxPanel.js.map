{"version":3,"file":"CodeBoxPanel.js","sources":["CodeBoxPanel.js"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __rest } from \"tslib\";\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport { computed, defineComponent, onBeforeMount, onMounted, ref, watch } from 'vue';\nimport { array, bool, number, object, oneOfType, string } from 'vue-types';\nimport Constant from './constant';\nimport PlayGround from './PlayGround';\nimport PlayGroundMulit from './PlayGroundMulit';\nimport PlayGroundTab from './PlayGroundTab';\nvar selectPrefix = 'adherev-ui-playground-code-box';\nvar codeBoxPanelProps = {\n  title: oneOfType([string(), object()]),\n  extra: object(),\n  isShowExpandAllBtn: bool().def(true),\n  columnCount: number().def(1),\n  defaultExpandAll: bool().def(false),\n  config: array().def([])\n};\nexport default defineComponent({\n  name: 'adv-playground-code-box-panel',\n  props: codeBoxPanelProps,\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    var activeAnchor = ref('');\n    var expandAll = ref(props.defaultExpandAll);\n    var expandLock = false;\n    var column = computed(function () {\n      var column = [];\n\n      if (props.columnCount != null) {\n        column.length = props.columnCount;\n      }\n\n      column.fill(0);\n      return column;\n    });\n\n    var onHashChange = function onHashChange() {\n      activeAnchor.value = window.location.hash.substring(1);\n    };\n\n    var renderPlayGround = function renderPlayGround(columnIndex, index) {\n      var _a;\n\n      var _b = props.config[index],\n          type = _b.type,\n          childrenSlot = _b.childrenSlot,\n          wrapSlot = _b.wrapSlot,\n          id = _b.id,\n          playGroundProps = __rest(_b, [\"type\", \"childrenSlot\", \"wrapSlot\", \"id\"]);\n\n      var children = // @ts-ignore\n      _createVNode(PlayGround, _mergeProps(playGroundProps, {\n        \"id\": id,\n        \"isActive\": activeAnchor.value === id,\n        \"defaultExpand\": expandAll.value\n      }), {\n        default: function _default() {\n          return [_createVNode(ConditionalRender, {\n            \"conditional\": !!slots[childrenSlot]\n          }, {\n            default: function _default() {\n              return [(_a = slots[childrenSlot]) === null || _a === void 0 ? void 0 : _a.call(slots, {\n                columnIndex: columnIndex,\n                index: index,\n                config: props.config\n              })];\n            }\n          })];\n        }\n      });\n\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !!slots[wrapSlot]\n        }, {\n          default: function _default() {\n            var _a;\n\n            return (_a = slots[wrapSlot]) === null || _a === void 0 ? void 0 : _a.call(slots, {\n              columnIndex: columnIndex,\n              index: index,\n              config: props.config,\n              children: children\n            });\n          },\n          noMatch: function noMatch() {\n            return children;\n          }\n        })\n      );\n    };\n\n    var renderPlayGroundTab = function renderPlayGroundTab(columnIndex, index) {\n      var _a;\n\n      var _b = props.config[index],\n          type = _b.type,\n          childrenSlot = _b.childrenSlot,\n          wrapSlot = _b.wrapSlot,\n          id = _b.id,\n          playGroundTabProps = __rest(_b, [\"type\", \"childrenSlot\", \"wrapSlot\", \"id\"]);\n\n      var children = // @ts-ignore\n      _createVNode(PlayGroundTab, _mergeProps(playGroundTabProps, {\n        \"id\": id,\n        \"isActive\": activeAnchor.value === id,\n        \"defaultExpand\": expandAll.value\n      }), {\n        default: function _default() {\n          return [_createVNode(ConditionalRender, {\n            \"conditional\": !!slots[childrenSlot]\n          }, {\n            default: function _default() {\n              return [(_a = slots[childrenSlot]) === null || _a === void 0 ? void 0 : _a.call(slots, {\n                columnIndex: columnIndex,\n                index: index,\n                config: props.config\n              })];\n            }\n          })];\n        }\n      });\n\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !!slots[wrapSlot]\n        }, {\n          default: function _default() {\n            var _a;\n\n            return (_a = slots[wrapSlot]) === null || _a === void 0 ? void 0 : _a.call(slots, {\n              columnIndex: columnIndex,\n              index: index,\n              config: props.config,\n              children: children\n            });\n          },\n          noMatch: function noMatch() {\n            return children;\n          }\n        })\n      );\n    };\n\n    var renderPlayGroundMulit = function renderPlayGroundMulit(columnIndex, index) {\n      var _a;\n\n      var _b = props.config[index],\n          type = _b.type,\n          childrenSlot = _b.childrenSlot,\n          wrapSlot = _b.wrapSlot,\n          id = _b.id,\n          playGroundProps = __rest(_b, [\"type\", \"childrenSlot\", \"wrapSlot\", \"id\"]);\n\n      var children = // @ts-ignore\n      _createVNode(PlayGroundMulit, _mergeProps(playGroundProps, {\n        \"id\": id,\n        \"isActive\": activeAnchor.value === id,\n        \"defaultExpand\": expandAll.value\n      }), {\n        default: function _default() {\n          return [_createVNode(ConditionalRender, {\n            \"conditional\": !!slots[childrenSlot]\n          }, {\n            default: function _default() {\n              return [(_a = slots[childrenSlot]) === null || _a === void 0 ? void 0 : _a.call(slots, {\n                columnIndex: columnIndex,\n                index: index,\n                config: props.config\n              })];\n            }\n          })];\n        }\n      });\n\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !!slots[wrapSlot]\n        }, {\n          default: function _default() {\n            var _a;\n\n            return (_a = slots[wrapSlot]) === null || _a === void 0 ? void 0 : _a.call(slots, {\n              columnIndex: columnIndex,\n              index: index,\n              config: props.config,\n              children: children\n            });\n          },\n          noMatch: function noMatch() {\n            return children;\n          }\n        })\n      );\n    };\n\n    var renderMap = new Map([['PlayGround', renderPlayGround], ['PlayGroundMulit', renderPlayGroundMulit], ['PlayGroundTab', renderPlayGroundTab]]);\n    watch(expandAll, function () {\n      expandLock = false;\n    });\n    watch(function () {\n      return props.defaultExpandAll;\n    }, function (newValue) {\n      return expandAll.value = newValue;\n    });\n    onMounted(function () {\n      if (typeof window === 'undefined') return;\n      window.addEventListener('hashchange', onHashChange);\n    });\n    onBeforeMount(function () {\n      if (typeof window === 'undefined') return;\n      window.removeEventListener('hashchange', onHashChange);\n    });\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": selectPrefix\n      }, [_createVNode(\"div\", {\n        \"class\": \"\".concat(selectPrefix, \"-header\")\n      }, [_createVNode(ConditionalRender, {\n        \"conditional\": !!props.title\n      }, {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"class\": \"\".concat(selectPrefix, \"-header-title\")\n          }, [props.title])];\n        }\n      }), _createVNode(\"div\", {\n        \"class\": \"\".concat(selectPrefix, \"-header-extra\")\n      }, [_createVNode(ConditionalRender, {\n        \"conditional\": props.isShowExpandAllBtn\n      }, {\n        default: function _default() {\n          return [_createVNode(ConditionalRender, {\n            \"conditional\": expandAll.value\n          }, {\n            default: function _default() {\n              return _createVNode(\"img\", {\n                \"class\": \"\".concat(selectPrefix, \"-expand-code\"),\n                \"src\": Constant.CloseCodeAll,\n                \"alt\": \"\",\n                \"onClick\": function onClick() {\n                  if (expandLock) return;\n                  expandLock = true;\n                  expandAll.value = false;\n                }\n              }, null);\n            },\n            noMatch: function noMatch() {\n              return _createVNode(\"img\", {\n                \"class\": \"\".concat(selectPrefix, \"-expand-code\"),\n                \"src\": Constant.ExpandCodeAll,\n                \"alt\": \"\",\n                \"onClick\": function onClick() {\n                  if (expandLock) return;\n                  expandLock = true;\n                  expandAll.value = true;\n                }\n              }, null);\n            }\n          })];\n        }\n      }), _createVNode(ConditionalRender, {\n        \"conditional\": !!props.extra\n      }, {\n        default: function _default() {\n          return [props.extra];\n        }\n      })])]), _createVNode(\"div\", {\n        \"class\": \"\".concat(selectPrefix, \"-main\")\n      }, [column.value.map(function (_, columnIndex) {\n        return _createVNode(\"div\", {\n          \"class\": \"\".concat(selectPrefix, \"-column\")\n        }, [props.config.map(function (item, index) {\n          var _a;\n\n          if (index % props.columnCount === columnIndex) {\n            return _createVNode(\"div\", {\n              \"class\": \"\".concat(selectPrefix, \"-item\"),\n              \"key\": item.id\n            }, [(_a = renderMap === null || renderMap === void 0 ? void 0 : renderMap.get(item.type)) === null || _a === void 0 ? void 0 : _a(columnIndex, index)]);\n          }\n\n          return null;\n        })]);\n      })])]);\n    };\n  }\n});"],"names":["_mergeProps","_createVNode","__rest","ConditionalRender","computed","defineComponent","onBeforeMount","onMounted","ref","watch","array","bool","number","object","oneOfType","string","Constant","PlayGround","PlayGroundMulit","PlayGroundTab","selectPrefix","codeBoxPanelProps","title","extra","isShowExpandAllBtn","def","columnCount","defaultExpandAll","config","name","props","setup","_a","onHashChange","activeAnchor","value","window","location","hash","substring","slots","expandAll","expandLock","column","length","fill","renderMap","Map","columnIndex","index","_b","childrenSlot","type","wrapSlot","id","playGroundProps","children","isActive","defaultExpand","default","conditional","call","noMatch","playGroundTabProps","newValue","addEventListener","removeEventListener","class","concat","src","CloseCodeAll","alt","onClick","ExpandCodeAll","map","_","item","key","get"],"mappings":"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"}