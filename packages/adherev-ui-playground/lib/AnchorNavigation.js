"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.array.map.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.anchorNavigationProps=void 0,require("tslib")),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_ui_conditionalrender_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-conditionalrender")),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),selectPrefix="adherev-ui-playground-anchor-navigation";exports.anchorNavigationProps={defaultActiveAnchor:(0,vue_types_1.string)().def(""),anchors:(0,vue_types_1.array)().def([]),anchorPosition:(0,vue_types_1.object)().def({top:77,width:120}),scrollEl:(0,vue_types_1.object)()},exports.default=(0,vue_1.defineComponent)({name:"adv-playground-anchor-navigation",props:exports.anchorNavigationProps,setup:function(r,e){function o(){i.value=window.location.hash.substring(1)}function t(){var e,o;r.scrollEl&&(e=r.scrollEl.scrollTop,(o=l(e))&&(i.value=o.anchor),c.value&&(0===e?null!=(o=null==(e=null==(o=null==c?void 0:c.value)?void 0:o.classList)?void 0:e.remove)&&o.call(e,"".concat(selectPrefix,"-affix")):(null!=(o=null==(e=null==(o=null==c?void 0:c.value)?void 0:o.classList)?void 0:e.add)&&o.call(e,"".concat(selectPrefix,"-affix")),c.value.style.top="".concat(r.anchorPosition.top,"px"))))}function n(){var n;r.scrollEl&&(n=r.scrollEl,u=[],r.anchors.forEach(function(e,o){var r,e=e.anchor,t=document.getElementById(e);t&&(r=null==(r=adherev_util_1.default.getTopUntil)?void 0:r.call(adherev_util_1.default,{el:t,untilEl:n}),u.push(e={anchor:e,range:{top:r,bottom:void 0}}),0!==o&&(u[o-1].range.bottom=r),o===u.length-1&&(e.range.bottom=r+t.offsetHeight))}))}function l(o){return u.find(function(e){return o>=e.range.top&&o<=e.range.bottom})}var a=e.slots,i=(0,vue_1.ref)(r.defaultActiveAnchor),c=(0,vue_1.ref)(),u=[];return(0,vue_1.watch)(function(){return r.defaultActiveAnchor},function(e){return i.value=e}),(0,vue_1.watch)(function(){return r.scrollEl},function(e,o){var r;null!=(r=null==o?void 0:o.removeEventListener)&&r.call(o,"scroll",t),e&&(n(),null!=(r=null==e?void 0:e.addEventListener)&&r.call(e,"scroll",t))}),(0,vue_1.onMounted)(function(){"undefined"!=typeof window&&(window.addEventListener("hashchange",o),r.scrollEl&&(n(),r.scrollEl.addEventListener("scroll",t)))}),(0,vue_1.onBeforeMount)(function(){window.removeEventListener("hashchange",o),r.scrollEl&&r.scrollEl.removeEventListener("scroll",t)}),function(){var e;return(0,_vue.createVNode)("div",{class:selectPrefix},[(0,_vue.createVNode)("div",{class:"".concat(selectPrefix,"-auto")},[(0,_vue.createVNode)("div",{class:"".concat(selectPrefix,"-inner")},[null==(e=null==a?void 0:a.default)?void 0:e.call(a)])]),(0,_vue.createVNode)(adherev_ui_conditionalrender_1.default,{conditional:!!r.anchors.length},{default:function(){return[(0,_vue.createVNode)("div",{class:"".concat(selectPrefix,"-fixed"),style:{width:"".concat(r.anchorPosition.width,"px")}},[(0,_vue.createVNode)("ul",{class:"".concat(selectPrefix,"-anchor"),ref:c},[r.anchors.map(function(e){return(0,_vue.createVNode)("li",{class:e.anchor===i.value?"".concat(selectPrefix,"-active"):"",title:e.name},[(0,_vue.createVNode)("a",{href:"#".concat(e.anchor)},[e.name])])})])])]}})])}}});
//# sourceMappingURL=AnchorNavigation.js.map
