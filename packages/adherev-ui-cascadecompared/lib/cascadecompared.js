"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.array.filter.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),iscroll_probe_1=tslib_1.__importDefault(require("iscroll/build/iscroll-probe")),vue_fragment_1=require("vue-fragment"),adherev_ui_stickuplayout_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-stickuplayout")),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),selectorPrefix="adherev-ui-cascadecompared",defaultCellWidth=120;function initTouch(){document.addEventListener("touchmove",function(e){e.preventDefault()},!!function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()&&{capture:!1,passive:!1})}initTouch();var CascadeCompared={name:"adv-cascadecompared",props:{className:{type:String,default:""},indicatorClassName:{type:String,default:""},indicatorStyle:{type:String,default:""},indicatorFixedWrapClassName:{type:String,default:""},indicatorFixedWrapStyle:{type:String,default:""},indicatorAutoWrapClassName:{type:String,default:""},indicatorAutoWrapStyle:{type:String,default:""},masterClassName:{type:String,default:""},masterStyle:{type:String,default:""},masterInnerClassName:{type:String,default:""},masterInnerStyle:{type:String,default:""},masterStickFixedClassName:{type:String,default:""},masterStickFixedStyle:{type:String,default:""},masterStickInnerClassName:{type:String,default:""},masterStickInnerStyle:{type:String,default:""},indicator:{type:Object,default:function(){return{columns:[],dataSource:[]}}},master:{type:Array,default:function(){return[]},validator:function(e){return Array.isArray(e)}},defaultCellWidth:{type:[Number,String],default:defaultCellWidth}},emits:["stickChange"],scopedSlots:["masterGroupTitle","cell"],data:function(){return{$scrolls:[]}},computed:{getIndicatorClassName:function(){var e=this.indicatorClassName,e=void 0===e?"":e;return(0,classnames_1.default)("".concat(selectorPrefix,"-indicator"),e||"")},getFixedWrapClassName:function(){return function(e){return(0,classnames_1.default)("".concat(selectorPrefix,"-fixedWrap"),e||"")}},getFixedWrapStyle:function(){return function(e,t){return"".concat(e,";width:").concat(t||defaultCellWidth,"px")}},getCellClassName:function(){return function(e){return(0,classnames_1.default)("".concat(selectorPrefix,"-cell"),e.className||"")}},getAutoWrapClassName:function(){return function(e){return(0,classnames_1.default)("".concat(selectorPrefix,"-autoWrap"),e||"")}},getAutoInnerClassName:function(){return function(e){return(0,classnames_1.default)("".concat(selectorPrefix,"-autoInner"),e||"")}},getMasterClassName:function(){var e=this.masterClassName,e=void 0===e?"":e;return(0,classnames_1.default)("".concat(selectorPrefix,"-master"),e||"")},getMasterInnerClassName:function(){var e=this.masterInnerClassName,e=void 0===e?"":e;return(0,classnames_1.default)("".concat(selectorPrefix,"-master-inner"),e||"")},getFixedClassName:function(){var e=this.masterStickFixedClassName;return(0,classnames_1.default)((void 0===e?"":e)||"")},getInnerClassName:function(){var e=this.masterStickInnerClassName;return(0,classnames_1.default)((void 0===e?"":e)||"")}},methods:{initScroll:function(){for(var e=this.$refs.el,r=this.$data,a=e.querySelectorAll(".".concat(selectorPrefix,"-autoWrap")),t=0;t<r.$scrolls.length;t++)r.$scrolls[t].destroy();r.$scrolls=[];for(t=0;t<a.length;t++)!function(e){var t=new iscroll_probe_1.default(a[e],{probeType:3,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1});r.$scrolls.push(t),t.on("scroll",function(){for(var e=0;e<r.$scrolls.length;e++)r.$scrolls[e]!==t&&r.$scrolls[e].scrollTo(t.x,t.y)})}(t)},getFixedColumnConfig:function(e){var t=e.find(function(e){return e.isFixed});return t||(e.length?e[0]:null)},renderCell:function(e,t,r,a,s,i){return this.$scopedSlots.cell?this.$scopedSlots.cell({config:t,dataSource:r,groupIndex:a,rowIndex:s,columnIndex:i}):r[t.dataIndex]},renderMasterGroupTitle:function(e,t,r){var a=t.title;return(!a||!adherev_util_1.default.isString(a))&&this.$scopedSlots.masterGroupTitle?e("div",{slot:"title"},[this.$scopedSlots.masterGroupTitle({config:t,groupIndex:r})]):e("div",{slot:"title"},[a])},renderMasterGroupContent:function(s,e,i){var t=e.dataSource,t=void 0===t?[]:t,r=e.columns,n=void 0===r?[]:r,r=e.fixedWrapClassName,r=void 0===r?"":r,a=e.fixedWrapStyle,a=void 0===a?"":a,l=e.autoWrapClassName,l=void 0===l?"":l,o=e.autoWrapStyle,o=void 0===o?"":o,c=e.autoInnerClassName,c=void 0===c?"":c,e=e.autoInnerStyle,e=void 0===e?"":e,u=this,d=u.getFixedColumnConfig,f=u.getFixedWrapClassName,m=u.getFixedWrapStyle,p=u.getCellClassName,v=u.getAutoWrapClassName,y=u.getAutoInnerClassName,g=u.renderCell,C=d(n);return s(vue_fragment_1.Fragment,[s("div",{class:f(r),style:m(a,null==C?void 0:C.width)},[t.map(function(e,t){return s("div",{key:t,class:"".concat(selectorPrefix,"-item")},[s("div",{class:p(C),style:C.style},[g(s,C,e,i,t,-1)])])})]),s("div",{class:v(l),style:o},[s("div",{class:y(c),style:e},[t.map(function(r,a){return s("div",{key:a,class:"".concat(selectorPrefix,"-item")},[n.filter(function(e){return e!==C}).map(function(e,t){return s("div",{key:e.dataIndex,class:p(e),style:m(e.style,null==e?void 0:e.width)},[g(s,e,r,i,a,t)])})])})])])])},renderMasterGroup:function(e,t,r){var a=t.className,s=t.style,i=this.renderMasterGroupTitle,n=this.renderMasterGroupContent;return e(adherev_ui_stickuplayout_1.default.Item,{key:r,class:(void 0===a?"":a)||"",style:void 0===s?"":s},[i(e,t,r),n(e,t,r)])},renderIndicator:function(r){var e=this,t=e.indicatorAutoWrapClassName,t=void 0===t?"":t,a=e.indicatorFixedWrapClassName,a=void 0===a?"":a,s=e.indicatorFixedWrapStyle,s=void 0===s?"":s,i=e.indicatorStyle,i=void 0===i?"":i,n=e.indicatorAutoWrapStyle,n=void 0===n?"":n,l=e.indicator,o=l.columns,o=void 0===o?[]:o,l=l.dataSource,c=void 0===l?{}:l,l=e.getFixedColumnConfig,u=e.getIndicatorClassName,d=e.getFixedWrapClassName,f=e.getFixedWrapStyle,m=e.getCellClassName,p=e.getAutoWrapClassName,v=e.renderCell,y=l(o);return r("div",{class:u,style:i},[r("div",{class:d(a),style:f(s,null==y?void 0:y.width)},[r("div",{class:"".concat(selectorPrefix,"-item")},[r("div",{class:m(y),style:y.style},[v(r,y,c,-1,-1,-1)])])]),r("div",{class:p(t),style:n},[r("div",{class:"".concat(selectorPrefix,"-item")},[o.filter(function(e){return e!==y}).map(function(e,t){return r("div",{key:e.dataIndex,class:m(e),style:f(e.style,e.width)},[v(r,e,c,-1,-1,t)])})])])])},renderMaster:function(r){var e=this,t=this,a=t.masterStyle,s=t.masterInnerStyle,i=t.masterStickFixedStyle,n=t.masterStickInnerStyle,l=t.master,l=void 0===l?[]:l,o=t.getMasterClassName,c=t.getMasterInnerClassName,u=t.getFixedClassName,d=t.getInnerClassName,f=t.renderMasterGroup;return r("div",{class:o,style:void 0===a?"":a},[r(adherev_ui_stickuplayout_1.default,{ref:"stickup",class:c,style:void 0===s?"":s,attrs:{fixedClassName:u,fixedStyle:void 0===i?"":i,innerClassName:d,innerStyle:void 0===n?"":n},on:{change:function(){return e.$emit("stickChange")}}},[l.map(function(e,t){return f(r,e,t)})])])},scrollToByIndex:function(e,t){this.$refs.stickup.scrollToByIndex(e,t=void 0===t?300:t)},scrollToByHeaderEl:function(e,t){this.$refs.stickup.scrollToByHeaderEl(e,t=void 0===t?300:t)},scrollToByColumn:function(e){var t=this.$data.$scrolls[0],e=t.wrapper.querySelector(".".concat(selectorPrefix,"-item .").concat(selectorPrefix,"-cell:nth-of-type(").concat(e,")"));t.scrollToElement(e)}},mounted:function(){this.$refs.stickup.refresh(),this.initScroll()},updated:function(){this.$refs.stickup.refresh(),this.initScroll()},render:function(e){return e("div",{class:selectorPrefix,ref:"el"},[this.renderIndicator(e),this.renderMaster(e)])}};exports.default=CascadeCompared;
//# sourceMappingURL=cascadecompared.js.map
