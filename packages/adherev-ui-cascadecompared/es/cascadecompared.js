import"core-js/modules/es.object.define-property.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.array.find.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.array.map.js";import"core-js/modules/es.array.filter.js";import classNames from"classnames";import IScroll from"iscroll/build/iscroll-probe";import{Fragment}from"vue-fragment";import StickupLayout from"@baifendian/adherev-ui-stickuplayout";import Util from"@baifendian/adherev-util";var selectorPrefix="adherev-ui-cascadecompared",defaultCellWidth=120;function initTouch(){document.addEventListener("touchmove",function(e){e.preventDefault()},!!function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()&&{capture:!1,passive:!1})}initTouch();var CascadeCompared={name:"adv-cascadecompared",props:{className:{type:String,default:""},indicatorClassName:{type:String,default:""},indicatorStyle:{type:String,default:""},indicatorFixedWrapClassName:{type:String,default:""},indicatorFixedWrapStyle:{type:String,default:""},indicatorAutoWrapClassName:{type:String,default:""},indicatorAutoWrapStyle:{type:String,default:""},masterClassName:{type:String,default:""},masterStyle:{type:String,default:""},masterInnerClassName:{type:String,default:""},masterInnerStyle:{type:String,default:""},masterStickFixedClassName:{type:String,default:""},masterStickFixedStyle:{type:String,default:""},masterStickInnerClassName:{type:String,default:""},masterStickInnerStyle:{type:String,default:""},indicator:{type:Object,default:function(){return{columns:[],dataSource:[]}}},master:{type:Array,default:function(){return[]},validator:function(e){return Array.isArray(e)}},defaultCellWidth:{type:[Number,String],default:defaultCellWidth}},emits:["stickChange"],scopedSlots:["masterGroupTitle","cell"],data:function(){return{$scrolls:[]}},computed:{getIndicatorClassName:function(){var e=this.indicatorClassName,e=void 0===e?"":e;return classNames(selectorPrefix+"-indicator",e||"")},getFixedWrapClassName:function(){return function(e){return classNames(selectorPrefix+"-fixedWrap",e||"")}},getFixedWrapStyle:function(){return function(e,t){return e+";width:"+(t||defaultCellWidth)+"px"}},getCellClassName:function(){return function(e){return classNames(selectorPrefix+"-cell",e.className||"")}},getAutoWrapClassName:function(){return function(e){return classNames(selectorPrefix+"-autoWrap",e||"")}},getAutoInnerClassName:function(){return function(e){return classNames(selectorPrefix+"-autoInner",e||"")}},getMasterClassName:function(){var e=this.masterClassName,e=void 0===e?"":e;return classNames(selectorPrefix+"-master",e||"")},getMasterInnerClassName:function(){var e=this.masterInnerClassName,e=void 0===e?"":e;return classNames(selectorPrefix+"-master-inner",e||"")},getFixedClassName:function(){var e=this.masterStickFixedClassName,e=void 0===e?"":e;return classNames(e||"")},getInnerClassName:function(){var e=this.masterStickInnerClassName,e=void 0===e?"":e;return classNames(e||"")}},methods:{initScroll:function(){for(var e=this.$refs.el,r=this.$data,s=e.querySelectorAll("."+selectorPrefix+"-autoWrap"),t=0;t<r.$scrolls.length;t++)r.$scrolls[t].destroy();r.$scrolls=[];for(t=0;t<s.length;t++)!function(e){var t=new IScroll(s[e],{probeType:3,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1});r.$scrolls.push(t),t.on("scroll",function(){for(var e=0;e<r.$scrolls.length;e++)r.$scrolls[e]!==t&&r.$scrolls[e].scrollTo(t.x,t.y)})}(t)},getFixedColumnConfig:function(e){var t=e.find(function(e){return e.isFixed});return t||(e.length?e[0]:null)},renderCell:function(e,t,r,s,a,i){return console.log("rowIndex",a,t,r,this.$scopedSlots.cell),this.$scopedSlots.cell?(console.log("$scopedSlots渲染",this.$scopedSlots.cell({config:t,dataSource:r,groupIndex:s,rowIndex:a,columnIndex:i})),this.$scopedSlots.cell({config:t,dataSource:r,groupIndex:s,rowIndex:a,columnIndex:i})):(console.log("字符串渲染",r[t.dataIndex]),r[t.dataIndex])},renderMasterGroupTitle:function(e,t,r){var s=t.title;return(!s||!Util.isString(s))&&this.$scopedSlots.masterGroupTitle?e("div",{slot:"title"},[this.$scopedSlots.masterGroupTitle({config:t,groupIndex:r})]):e("div",{slot:"title"},[s])},renderMasterGroupContent:function(a,e,i){var t=e.dataSource,r=void 0===t?[]:t,s=e.columns,l=void 0===s?[]:s,n=e.fixedWrapClassName,o=void 0===n?"":n,c=e.fixedWrapStyle,d=void 0===c?"":c,u=e.autoWrapClassName,m=void 0===u?"":u,f=e.autoWrapStyle,p=void 0===f?"":f,t=e.autoInnerClassName,s=void 0===t?"":t,n=e.autoInnerStyle,c=void 0===n?"":n,u=this,f=u.getFixedColumnConfig,t=u.getFixedWrapClassName,y=u.getFixedWrapStyle,v=u.getCellClassName,e=u.getAutoWrapClassName,n=u.getAutoInnerClassName,S=u.renderCell,g=f(l);return a(Fragment,[a("div",{class:t(o),style:y(d,null==g?void 0:g.width)},[r.map(function(e,t){return a("div",{key:t,class:selectorPrefix+"-item"},[a("div",{class:v(g),style:g.style},[S(a,g,e,i,t,-1)])])})]),a("div",{class:e(m),style:p},[a("div",{class:n(s),style:c},[r.map(function(r,s){return a("div",{key:s,class:selectorPrefix+"-item"},[l.filter(function(e){return e!==g}).map(function(e,t){return a("div",{key:e.dataIndex,class:v(e),style:y(e.style,null==e?void 0:e.width)},[S(a,e,r,i,s,t)])})])})])])])},renderMasterGroup:function(e,t,r){var s=t.className,a=void 0===s?"":s,i=t.style,l=void 0===i?"":i,s=this.renderMasterGroupTitle,i=this.renderMasterGroupContent;return e(StickupLayout.Item,{key:r,class:a||"",style:l},[s(e,t,r),i(e,t,r)])},renderIndicator:function(r){var e=this,t=e.indicatorAutoWrapClassName,s=void 0===t?"":t,a=e.indicatorFixedWrapClassName,i=void 0===a?"":a,l=e.indicatorFixedWrapStyle,n=void 0===l?"":l,o=e.indicatorStyle,c=void 0===o?"":o,d=e.indicatorAutoWrapStyle,u=void 0===d?"":d,t=e.indicator,a=t.columns,l=void 0===a?[]:a,o=t.dataSource,m=void 0===o?{}:o,d=e.getFixedColumnConfig,a=e.getIndicatorClassName,t=e.getFixedWrapClassName,f=e.getFixedWrapStyle,p=e.getCellClassName,o=e.getAutoWrapClassName,y=e.renderCell,v=d(l);return r("div",{class:a,style:c},[r("div",{class:t(i),style:f(n,null==v?void 0:v.width)},[r("div",{class:selectorPrefix+"-item"},[r("div",{class:p(v),style:v.style},[y(r,v,m,-1,-1,-1)])])]),r("div",{class:o(s),style:u},[r("div",{class:selectorPrefix+"-item"},[l.filter(function(e){return e!==v}).map(function(e,t){return r("div",{key:e.dataIndex,class:p(e),style:f(e.style,e.width)},[y(r,e,m,-1,-1,t)])})])])])},renderMaster:function(r){var e=this,t=this,s=t.masterStyle,a=t.masterInnerStyle,i=void 0===a?"":a,l=t.masterStickFixedStyle,n=void 0===l?"":l,o=t.masterStickInnerStyle,c=void 0===o?"":o,d=t.master,u=void 0===d?[]:d,a=t.getMasterClassName,l=t.getMasterInnerClassName,o=t.getFixedClassName,d=t.getInnerClassName,m=t.renderMasterGroup;return r("div",{class:a,style:void 0===s?"":s},[r(StickupLayout,{ref:"stickup",class:l,style:i,attrs:{fixedClassName:o,fixedStyle:n,innerClassName:d,innerStyle:c},on:{change:function(){return e.$emit("stickChange")}}},[u.map(function(e,t){return m(r,e,t)})])])},scrollToByIndex:function(e,t){this.$refs.stickup.scrollToByIndex(e,t=void 0===t?300:t)},scrollToByHeaderEl:function(e,t){this.$refs.stickup.scrollToByHeaderEl(e,t=void 0===t?300:t)},scrollToByColumn:function(e){var t=this.$data.$scrolls[0],e=t.wrapper.querySelector("."+selectorPrefix+"-item ."+selectorPrefix+"-cell:nth-of-type("+e+")");t.scrollToElement(e)}},mounted:function(){this.$refs.stickup.refresh(),this.initScroll()},updated:function(){this.$refs.stickup.refresh(),this.initScroll()},render:function(e){return e("div",{class:selectorPrefix,ref:"el"},[this.renderIndicator(e),this.renderMaster(e)])}};export default CascadeCompared;
//# sourceMappingURL=cascadecompared.js.map
