import{isVNode as _isVNode,Fragment as _Fragment,createVNode as _createVNode}from"vue";import"core-js/modules/es.object.define-property.js";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import"core-js/modules/es.array.find.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.array.map.js";import"core-js/modules/es.array.filter.js";import"core-js/modules/es.array.concat.js";import{__assign}from"tslib";import StickupLayout from"@baifendian/adherev-ui-stickuplayout";import Util from"@baifendian/adherev-util";import classNames from"classnames";import IScroll from"iscroll/build/iscroll-probe";import{computed,defineComponent,h,onMounted,onUpdated,ref}from"vue";import{array,number,object,oneOfType,string}from"vue-types";function _isSlot(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!_isVNode(e)}var selectorPrefix="adherev-ui-cascadecompared",defaultCellWidth=120;function initTouch(){document.addEventListener("touchmove",function(e){e.preventDefault()},!!function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()&&{capture:!1,passive:!1})}initTouch();var props={className:string().def(""),indicatorClassName:string().def(""),indicatorStyle:object().def({}),indicatorFixedWrapClassName:string().def(""),indicatorFixedWrapStyle:object().def({}),indicatorAutoWrapClassName:string().def(""),indicatorAutoWrapStyle:object().def({}),masterClassName:string().def(""),masterStyle:object().def({}),masterInnerClassName:string().def(""),masterInnerStyle:object().def({}),masterStickFixedClassName:string().def(""),masterStickFixedStyle:object().def({}),masterStickInnerClassName:string().def(""),masterStickInnerStyle:object().def({}),indicator:object().def(function(){return{columns:[],dataSource:[]}}),master:array().def(function(){return[]}),defaultCellWidth:oneOfType([number(),string()]).def(defaultCellWidth)};export default defineComponent({name:"adv-cascadecompared",props:props,slots:["title"],emits:["stick-change"],setup:function(r,e){function t(){for(var r=a.value.querySelectorAll(".".concat(selectorPrefix,"-autoWrap")),e=0;e<n.length;e++)n[e].destroy();for(n=[],e=0;e<r.length;e++)!function(e){var t=new IScroll(r[e],{probeType:3,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1});n.push(t),t.on("scroll",function(){for(var e=0;e<n.length;e++)n[e]!==t&&n[e].scrollTo(t.x,t.y)})}(e)}function l(e){var t=e.find(function(e){return e.isFixed});return t||(e.length?e[0]:null)}function u(e,t){return e.render?e.render(t[e.dataIndex],t):t[e.dataIndex]}function s(){var e;return _createVNode("div",{class:y.value,style:r.masterStyle},[_createVNode(StickupLayout,{ref:o,class:N.value,style:r.masterInnerStyle,fixedClassName:x.value,fixedStyle:r.masterStickFixedStyle,innerClassName:S.value,innerStyle:r.masterStickInnerStyle,onChange:function(){i("stick-change")}},_isSlot(e=r.master.map(function(e,t){return a=(r=e).title,e=void 0===(e=r.className)?"":e,o=void 0===(o=r.style)?"":o,_createVNode(StickupLayout.Item,{key:t,class:classNames((e||"").split(/\s+/)),style:o},{default:function(){return j(r)},title:function(){return _(a)}});var r,a,o}))?e:{default:function(){return[e]}})])}var i=e.emit,e=e.expose,a=ref(null),o=ref(null),n=[],c=computed(function(){return classNames("".concat(selectorPrefix,"-indicator"),(r.indicatorClassName||"").split(/\s+/))}),m=computed(function(){return function(e){return classNames("".concat(selectorPrefix,"-fixedWrap"),(e||"").split(/\s+/))}}),d=computed(function(){return function(e,t){return __assign(__assign({},e),{width:"".concat(t||defaultCellWidth,"px")})}}),f=computed(function(){return function(e){return classNames("".concat(selectorPrefix,"-cell"),((null==e?void 0:e.className)||"").split(/\s+/))}}),p=computed(function(){return function(e){return classNames("".concat(selectorPrefix,"-autoWrap"),(e||"").split(/\s+/))}}),v=computed(function(){return function(e){return classNames("".concat(selectorPrefix,"-autoInner"),(e||"").split(/\s+/))}}),y=computed(function(){return classNames("".concat(selectorPrefix,"-master"),(r.masterClassName||"").split(/\s+/))}),N=computed(function(){return classNames("".concat(selectorPrefix,"-master-inner"),(r.masterInnerClassName||"").split(/\s+/))}),x=computed(function(){return classNames((r.masterStickFixedClassName||"").split(/\s+/))}),S=computed(function(){return classNames((r.masterStickInnerClassName||"").split(/\s+/))}),_=function(e){var t;return null!==(t=Util.isObject)&&void 0!==t&&t.call(Util,e)?_createVNode("div",null,[h(e)]):null!==(t=Util.isFunction)&&void 0!==t&&t.call(Util,e)?_createVNode("div",null,[e()]):_createVNode("span",null,[e])},j=function(e){var t=e.dataSource,t=void 0===t?[]:t,r=e.columns,a=void 0===r?[]:r,r=e.fixedWrapClassName,r=void 0===r?"":r,o=e.fixedWrapStyle,o=void 0===o?{}:o,n=e.autoWrapClassName,n=void 0===n?"":n,s=e.autoWrapStyle,s=void 0===s?{}:s,i=e.autoInnerClassName,i=void 0===i?"":i,e=e.autoInnerStyle,e=void 0===e?{}:e,c=l(a);return _createVNode(_Fragment,null,[_createVNode("div",{class:m.value(r),style:d.value(o,c?null==c?void 0:c.width:0)},[t.map(function(e,t){return _createVNode("div",{key:t,class:"".concat(selectorPrefix,"-item")},[_createVNode("div",{class:f.value(c),style:null==c?void 0:c.style},[u(c,e)])])})]),_createVNode("div",{class:p.value(n),style:s},[_createVNode("div",{class:v.value(i),style:e},[t.map(function(t,e){return _createVNode("div",{key:e,class:"".concat(selectorPrefix,"-item")},[a.filter(function(e){return e!==c}).map(function(e){return _createVNode("div",{key:e.dataIndex,class:f.value(e),style:d.value(e.style,null==e?void 0:e.width)},[u(e,t)])})])})])])])};return onMounted(function(){o.value.refresh(),t()}),onUpdated(function(){o.value.refresh(),t()}),e({scrollToByIndex:function(e,t){o.value.scrollToByIndex(e,t=void 0===t?300:t)},scrollToByColumn:function(e){var t=n[0],e=t.wrapper.querySelector(".".concat(selectorPrefix,"-item .").concat(selectorPrefix,"-cell:nth-of-type(").concat(e,")"));t.scrollToElement(e)},scrollToByHeaderEl:function(e,t){o.value.scrollToByHeaderEl(e,t=void 0===t?300:t)}}),function(){return _createVNode("div",{class:selectorPrefix,ref:a},[(t=l(r.indicator.columns),_createVNode("div",{class:c.value,style:r.indicatorStyle},[_createVNode("div",{class:m.value(r.indicatorFixedWrapClassName),style:d.value(r.indicatorFixedWrapStyle,t?null==t?void 0:t.width:0)},[_createVNode("div",{class:"".concat(selectorPrefix,"-item")},[_createVNode("div",{class:f.value(t),style:null==t?void 0:t.style},[u(t,r.indicator.dataSource)])])]),_createVNode("div",{class:p.value(r.indicatorAutoWrapClassName),style:r.indicatorAutoWrapStyle},[_createVNode("div",{class:"".concat(selectorPrefix,"-item")},[r.indicator.columns.filter(function(e){return e!==t}).map(function(e){return _createVNode("div",{key:e.dataIndex,class:f.value(e),style:d.value(e.style,e.width)},[u(e,r.indicator.dataSource)])})])])])),s()]);var t}}});
//# sourceMappingURL=cascadecompared.js.map
