{"version":3,"file":"teleport.js","sources":["teleport.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar debounce_1 = tslib_1.__importDefault(require(\"lodash/debounce\"));\n\nvar vue_1 = tslib_1.__importDefault(require(\"vue\"));\n\nvar adherev_util_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util\"));\n\nvar Teleport = {\n  name: 'adv-teleport',\n  props: {\n    // 传送的元素\n    to: {\n      type: [String, HTMLElement, Function]\n    },\n    // 是否在包裹元素渲染\n    isWrap: {\n      type: Boolean,\n      default: true\n    },\n    // 包裹元素的标签名\n    wrapTag: {\n      type: String,\n      default: 'div'\n    },\n    // 包裹元素的类名\n    wrapClassName: {\n      type: String,\n      default: ''\n    },\n    // 包裹元素的样式\n    wrapStyle: {\n      type: String,\n      default: ''\n    },\n    // 渲染频率\n    rate: {\n      type: Number,\n      default: 100\n    }\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      $mountEl: null,\n      $vm: null,\n      $debounceRender: debounce_1.default(function () {\n        if (!_this.toEl) return;\n\n        if (!_this.$data.$mountEl) {\n          _this.$data.$mountEl = _this.createMountEl();\n        }\n\n        var self = _this;\n\n        if (!_this.$data.$vm) {\n          _this.$data.$vm = new vue_1.default({\n            el: _this.$data.$mountEl,\n            render: function render(_h) {\n              return self.$slots.default;\n            }\n          });\n        } else {\n          try {\n            _this.$data.$vm.$forceUpdate();\n          } catch (e) {}\n        }\n      }, this.rate)\n    };\n  },\n  computed: {\n    toEl: function toEl() {\n      var toEl = this.to;\n\n      if (adherev_util_1.default.isString(this.to)) {\n        toEl = document.querySelector(this.to);\n      }\n\n      if (adherev_util_1.default.isFunction(this.to)) {\n        toEl = this.to();\n      }\n\n      return toEl;\n    }\n  },\n  methods: {\n    createMountEl: function createMountEl() {\n      if (!this.isWrap) {\n        var mountEl_1 = document.createElement('div');\n        this.toEl.appendChild(mountEl_1);\n        return mountEl_1;\n      }\n\n      var wrapTag = this.wrapTag || 'div';\n      var mountWrapEl = document.createElement(wrapTag);\n\n      if (this.wrapClassName) {\n        mountWrapEl.className = this.wrapClassName;\n      }\n\n      if (this.wrapStyle) {\n        mountWrapEl.style.cssText = this.wrapStyle;\n      }\n\n      var mountEl = document.createElement('div');\n      mountWrapEl.appendChild(mountEl);\n      this.toEl.appendChild(mountWrapEl);\n      return mountEl;\n    }\n  },\n  render: function render(h) {\n    this.$data.$debounceRender();\n    return null;\n  }\n};\nexports.default = Teleport;"],"names":["require","Object","defineProperty","exports","value","tslib_1","debounce_1","__importDefault","vue_1","adherev_util_1","Teleport","name","props","to","type","String","HTMLElement","Function","isWrap","Boolean","default","wrapTag","wrapClassName","wrapStyle","rate","Number","data","_this","this","$mountEl","$vm","$debounceRender","toEl","$data","createMountEl","self","$forceUpdate","e","el","render","_h","$slots","computed","isString","document","querySelector","isFunction","methods","mountEl_1","createElement","appendChild","mountWrapEl","className","style","cssText","mountEl","h"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,4CAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,WAAaD,QAAQE,gBAAgBP,QAAQ,oBAE7CQ,MAAQH,QAAQE,gBAAgBP,QAAQ,QAExCS,eAAiBJ,QAAQE,gBAAgBP,QAAQ,6BAEjDU,SAAW,CACbC,KAAM,eACNC,MAAO,CAELC,GAAI,CACFC,KAAM,CAACC,OAAQC,YAAaC,WAG9BC,OAAQ,CACNJ,KAAMK,QACNC,SAAS,GAGXC,QAAS,CACPP,KAAMC,OACNK,QAAS,OAGXE,cAAe,CACbR,KAAMC,OACNK,QAAS,IAGXG,UAAW,CACTT,KAAMC,OACNK,QAAS,IAGXI,KAAM,CACJV,KAAMW,OACNL,QAAS,MAGbM,KAAM,WACJ,IAAIC,EAAQC,KAEZ,MAAO,CACLC,SAAU,KACVC,IAAK,KACLC,gBAAiBzB,WAAWc,QAAQ,WAClC,GAAKO,EAAMK,KAAX,CAEKL,EAAMM,MAAMJ,WACfF,EAAMM,MAAMJ,SAAWF,EAAMO,iBAG/B,IAAIC,EAAOR,EAEX,GAAKA,EAAMM,MAAMH,IAQf,IACEH,EAAMM,MAAMH,IAAIM,eAChB,MAAOC,SATTV,EAAMM,MAAMH,IAAM,IAAItB,MAAMY,QAAQ,CAClCkB,GAAIX,EAAMM,MAAMJ,SAChBU,OAAQ,SAAgBC,GACtB,OAAOL,EAAKM,OAAOrB,aAQxBQ,KAAKJ,QAGZkB,SAAU,CACRV,KAAM,WACJ,IAAIA,EAAOJ,KAAKf,GAUhB,OARIJ,eAAeW,QAAQuB,SAASf,KAAKf,MACvCmB,EAAOY,SAASC,cAAcjB,KAAKf,KAInCmB,EADEvB,eAAeW,QAAQ0B,WAAWlB,KAAKf,IAClCe,KAAKf,KAGPmB,IAGXe,QAAS,CACPb,cAAe,WACb,IAAKN,KAAKV,OAAQ,CAChB,IAAI8B,EAAYJ,SAASK,cAAc,OAEvC,OADArB,KAAKI,KAAKkB,YAAYF,GACfA,EAGT,IAAI3B,EAAUO,KAAKP,SAAW,MAC1B8B,EAAcP,SAASK,cAAc5B,GAErCO,KAAKN,gBACP6B,EAAYC,UAAYxB,KAAKN,eAG3BM,KAAKL,YACP4B,EAAYE,MAAMC,QAAU1B,KAAKL,WAG/BgC,EAAUX,SAASK,cAAc,OAGrC,OAFAE,EAAYD,YAAYK,GACxB3B,KAAKI,KAAKkB,YAAYC,GACfI,IAGXhB,OAAQ,SAAgBiB,GAEtB,OADA5B,KAAKK,MAAMF,kBACJ,OAGX5B,QAAQiB,QAAUV"}