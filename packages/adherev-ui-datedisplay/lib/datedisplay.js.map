{"version":3,"file":"datedisplay.js","sources":["datedisplay.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.string.starts-with.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar dayjs_1 = tslib_1.__importDefault(require(\"dayjs\"));\nrequire(\"dayjs/locale/en\");\nrequire(\"dayjs/locale/pt\");\nrequire(\"dayjs/locale/zh-cn\");\nvar localizedFormat_1 = tslib_1.__importDefault(require(\"dayjs/plugin/localizedFormat\"));\nvar relativeTime_1 = tslib_1.__importDefault(require(\"dayjs/plugin/relativeTime\"));\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\n// import ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\ndayjs_1.default.extend(localizedFormat_1.default);\ndayjs_1.default.extend(relativeTime_1.default);\nvar keys = Object.keys(adherev_util_resource_1.default.Dict.handlers).filter(function (dictName) {\n  return dictName.startsWith('ResourceMomentFormat');\n});\nvar Components = {\n  dayjs: dayjs_1.default\n};\n// 字典的组件\nkeys.forEach(function (key) {\n  var name = key.substring('ResourceMomentFormat'.length);\n  Components[\"DateDisplay\".concat(name)] = (0, vue_1.defineComponent)({\n    name: \"adv-datedisplay-\".concat(name),\n    props: {\n      value: (0, vue_types_1.oneOfType)([(0, vue_types_1.object)(), (0, vue_types_1.number)(), (0, vue_types_1.string)()]) /*{\n                                                                                                                           type: [Object, Number, String, Date],\n                                                                                                                           }*/,\n      split1: (0, vue_types_1.string)().def('-') /*{\n                                                 type: String,\n                                                 default: '-',\n                                                 }*/,\n      split2: (0, vue_types_1.string)().def(':') /*{\n                                                 type: String,\n                                                 default: ':',\n                                                 }*/\n    },\n\n    setup: function setup(props, _a) {\n      var slots = _a.slots;\n      var dict = adherev_util_resource_1.default.Dict.value[key].value;\n      return function () {\n        var _a;\n        return !!props.value ?\n        // @ts-ignore\n        (0, dayjs_1.default)(props === null || props === void 0 ? void 0 : props.value).format(dict instanceof Function ? dict(props.split1, props.split2) : dict) : (_a = slots === null || slots === void 0 ? void 0 : slots.errorUI) === null || _a === void 0 ? void 0 : _a.call(slots);\n      };\n      /*// @ts-ignore\n      <ConditionalRender conditional={!!props.value}>\n        {{\n          default: () => {\n            ;\n          },\n          noMatch: () => ,\n        }}\n      </ConditionalRender>*/\n    }\n  });\n});\n/**\n * DateDisplayFromNow\n * @constructor\n * @classdesc 返回现在到当前实例的相对时间\n */\nComponents[\"DateDisplayFromNow\"] = (0, vue_1.defineComponent)({\n  name: \"adv-datedisplay-fromnow\",\n  props: {\n    value: (0, vue_types_1.oneOfType)([(0, vue_types_1.object)(), (0, vue_types_1.number)(), (0, vue_types_1.string)()]) /*{\n                                                                                                                         type: [Object, Number, String, Date],\n                                                                                                                         }*/,\n    locale: (0, vue_types_1.string)().def('zh-cn') /*{\n                                                   type: String,\n                                                   default: 'zh-cn',\n                                                   }*/,\n    now: (0, vue_types_1.bool)().def(false) /*{\n                                            type: Boolean,\n                                            default: false,\n                                            }*/\n  },\n\n  setup: function setup(props) {\n    return function () {\n      // @ts-ignore\n      return !!props.value ? (0, dayjs_1.default)(props.value).locale(props.locale).fromNow(props.now) : null;\n    };\n    // <ConditionalRender conditional={!!props.value}>\n    //   {{\n    //     default: () => dayjs(props.value).locale(props.locale).fromNow(props.now),\n    //   }}\n    // </ConditionalRender>\n  }\n});\n/**\n * DateDisplayToNow\n * @constructor\n * @classdesc 返回当前实例到现在的相对时间\n */\nComponents[\"DateDisplayToNow\"] = (0, vue_1.defineComponent)({\n  name: \"adv-datedisplay-tonow\",\n  props: {\n    value: (0, vue_types_1.oneOfType)([(0, vue_types_1.object)(), (0, vue_types_1.number)(), (0, vue_types_1.string)()]) /*{\n                                                                                                                         type: [Object, Number, String, Date],\n                                                                                                                         }*/,\n    locale: (0, vue_types_1.string)().def('zh-cn') /*{\n                                                   type: String,\n                                                   default: 'zh-cn',\n                                                   }*/,\n    now: (0, vue_types_1.bool)().def(false) /* {\n                                            type: Boolean,\n                                            default: false,\n                                            }*/\n  },\n\n  setup: function setup(props) {\n    return function () {\n      // @ts-ignore\n      return !!props.value ? (0, dayjs_1.default)(props.value).locale(props.locale).toNow(props.now) : null;\n    };\n    // @ts-ignore\n    // <ConditionalRender conditional={!!props.value}>\n    //   {{\n    //     default: () => dayjs(props.value).locale(props.locale).toNow(props.now),\n    //   }}\n    // </ConditionalRender>\n  }\n});\n/**\n * DateDisplay\n * @constructor\n */\nComponents[\"DateDisplay\"] = (0, vue_1.defineComponent)({\n  name: \"adv-datedisplay\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    format: {\n      type: String\n    }\n  },\n  setup: function setup(props) {\n    return function () {\n      // @ts-ignore\n      return !!props.value ? (0, dayjs_1.default)(props.value).locale(props.locale).format(props.format) : null;\n    };\n    // <ConditionalRender conditional={!!props.value}>\n    //   {{\n    //     default: () => dayjs(props.value).locale(props.locale).format(props.format),\n    //   }}\n    // </ConditionalRender>\n  }\n});\n// 本地\n['LT', 'LTS', 'L', 'LL', 'LLL', 'LLLL', 'l', 'll', 'lll', 'llll'].forEach(function (format) {\n  var options = {\n    name: \"adv-datedisplay-\".concat(format)\n  };\n  var Com = Components['DateDisplay'];\n  Components[\"DateDisplay\".concat(format)] = (0, vue_1.defineComponent)(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, Com), options), {\n    setup: function setup(props) {\n      return function () {\n        return (0, _vue.createVNode)(Com, (0, _vue.mergeProps)(props, {\n          \"format\": format\n        }), null);\n      };\n    }\n  }));\n});\nexports.default = Components;"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","dayjs_1","__importDefault","localizedFormat_1","relativeTime_1","vue_1","vue_types_1","adherev_util_resource_1","keys","default","extend","Dict","handlers","filter","dictName","startsWith","Components","dayjs","forEach","key","name","substring","length","concat","defineComponent","props","oneOfType","object","number","string","split1","def","split2","setup","_a","slots","dict","format","Function","errorUI","call","locale","now","bool","fromNow","toNow","type","Number","String","Date","options","Com","__assign","createVNode","mergeProps"],"mappings":"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"}