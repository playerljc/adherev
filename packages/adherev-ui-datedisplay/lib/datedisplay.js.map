{"version":3,"file":"datedisplay.js","sources":["datedisplay.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.string.starts-with.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar dayjs_1 = tslib_1.__importDefault(require(\"dayjs\"));\nrequire(\"dayjs/locale/en\");\nrequire(\"dayjs/locale/pt\");\nrequire(\"dayjs/locale/zh-cn\");\nvar localizedFormat_1 = tslib_1.__importDefault(require(\"dayjs/plugin/localizedFormat\"));\nvar relativeTime_1 = tslib_1.__importDefault(require(\"dayjs/plugin/relativeTime\"));\nvar vue_hoc_1 = require(\"vue-hoc\");\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\ndayjs_1.default.extend(localizedFormat_1.default);\ndayjs_1.default.extend(relativeTime_1.default);\nvar keys = Object.keys(adherev_util_resource_1.default.Dict.handlers).filter(function (dictName) {\n  return dictName.startsWith('ResourceMomentFormat');\n});\nvar Components = {\n  dayjs: dayjs_1.default\n};\n// 字典的组件\nkeys.forEach(function (key) {\n  var name = key.substring('ResourceMomentFormat'.length);\n  Components[\"DateDisplay\".concat(name)] = {\n    name: \"adv-datedisplay-\".concat(name),\n    props: {\n      value: {\n        type: [Object, Number, String, Date]\n      },\n      split1: {\n        type: String,\n        default: '-'\n      },\n      split2: {\n        type: String,\n        default: ':'\n      }\n    },\n    render: function render(h) {\n      var dict = adherev_util_resource_1.default.Dict.value[key].value;\n      return !!this.value ? h(\"span\", [(0, dayjs_1.default)(this.value).format(dict instanceof Function ? dict(this.split1, this.split2) : dict)]) : this.$slots.errorUI || null;\n    }\n  };\n});\n/**\n * DateDisplayFromNow\n * @constructor\n * @classdesc 返回现在到当前实例的相对时间\n */\nComponents[\"DateDisplayFromNow\"] = {\n  name: \"adv-datedisplay-fromnow\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    now: {\n      type: Boolean,\n      default: false\n    }\n  },\n  render: function render(h) {\n    return !!this.value ? h(\"span\", [(0, dayjs_1.default)(this.value).locale(this.locale).fromNow(this.now)]) : null;\n  }\n};\n/**\n * DateDisplayToNow\n * @constructor\n * @classdesc 返回当前实例到现在的相对时间\n */\nComponents[\"DateDisplayToNow\"] = {\n  name: \"adv-datedisplay-tonow\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    now: {\n      type: Boolean,\n      default: false\n    }\n  },\n  render: function render(h) {\n    return !!this.value ? h(\"span\", [(0, dayjs_1.default)(this.value).locale(this.locale).toNow(this.now)]) : null;\n  }\n};\n/**\n * DateDisplay\n * @constructor\n */\nComponents[\"DateDisplay\"] = {\n  name: \"adv-datedisplay\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    format: {\n      type: String\n    }\n  },\n  render: function render(h) {\n    return !!this.value ? h(\"span\", [(0, dayjs_1.default)(this.value).locale(this.locale).format(this.format)]) : null;\n  }\n};\n// 本地\n['LT', 'LTS', 'L', 'LL', 'LLL', 'LLLL', 'l', 'll', 'lll', 'llll'].forEach(function (format) {\n  var options = {\n    name: \"adv-datedisplay-\".concat(format)\n  };\n  var Com = Components['DateDisplay'];\n  Components[\"DateDisplay\".concat(format)] = (0, vue_hoc_1.createHOC)(Com, options, {\n    props: function props(_props) {\n      return tslib_1.__assign(tslib_1.__assign({}, _props), {\n        format: format\n      });\n    }\n  });\n});\nexports.default = Components;"],"names":["require","Object","defineProperty","exports","value","tslib_1","dayjs_1","__importDefault","localizedFormat_1","relativeTime_1","vue_hoc_1","adherev_util_resource_1","keys","default","extend","Dict","handlers","filter","dictName","startsWith","Components","dayjs","forEach","key","name","substring","length","concat","props","type","Number","String","Date","split1","split2","render","h","dict","this","format","Function","$slots","errorUI","locale","now","Boolean","fromNow","toNow","options","Com","createHOC","_props","__assign"],"mappings":"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"}