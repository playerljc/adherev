{"version":3,"file":"datedisplay.js","sources":["datedisplay.js"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport { __assign } from \"tslib\";\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/en';\nimport 'dayjs/locale/pt';\nimport 'dayjs/locale/zh-cn';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport Resource from '@baifendian/adherev-util-resource';\ndayjs.extend(LocalizedFormat);\ndayjs.extend(relativeTime);\nvar keys = Object.keys(Resource.Dict.handlers).filter(function (dictName) {\n  return dictName.startsWith('ResourceMomentFormat');\n});\nvar Components = {\n  dayjs: dayjs\n};\n// 字典的组件\nkeys.forEach(function (key) {\n  var name = key.substring('ResourceMomentFormat'.length);\n  Components[\"DateDisplay\".concat(name)] = {\n    name: \"adv-datedisplay-\".concat(name),\n    props: {\n      value: {\n        type: [Object, Number, String, Date]\n      },\n      split1: {\n        type: String,\n        default: '-'\n      },\n      split2: {\n        type: String,\n        default: ':'\n      }\n    },\n    setup: function setup(props, _a) {\n      var slots = _a.slots;\n      var dict = Resource.Dict.value[key].value;\n      return function () {\n        return (// @ts-ignore\n          _createVNode(ConditionalRender, {\n            \"conditional\": !!props.value\n          }, {\n            default: function _default() {\n              dayjs(props.value).format(dict instanceof Function ? dict(props.split1, props.split2) : dict);\n            },\n            noMatch: function noMatch() {\n              var _a;\n              return (_a = slots === null || slots === void 0 ? void 0 : slots.errorUI) === null || _a === void 0 ? void 0 : _a.call(slots);\n            }\n          })\n        );\n      };\n    }\n  };\n});\n/**\n * DateDisplayFromNow\n * @constructor\n * @classdesc 返回现在到当前实例的相对时间\n */\nComponents[\"DateDisplayFromNow\"] = {\n  name: \"adv-datedisplay-fromnow\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    now: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup: function setup(props) {\n    return function () {\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !!props.value\n        }, {\n          default: function _default() {\n            return dayjs(props.value).locale(props.locale).fromNow(props.now);\n          }\n        })\n      );\n    };\n  }\n};\n/**\n * DateDisplayToNow\n * @constructor\n * @classdesc 返回当前实例到现在的相对时间\n */\nComponents[\"DateDisplayToNow\"] = {\n  name: \"adv-datedisplay-tonow\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    now: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup: function setup(props) {\n    return function () {\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !!props.value\n        }, {\n          default: function _default() {\n            return dayjs(props.value).locale(props.locale).toNow(props.now);\n          }\n        })\n      );\n    };\n  }\n};\n/**\n * DateDisplay\n * @constructor\n */\nComponents[\"DateDisplay\"] = {\n  name: \"adv-datedisplay\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    format: {\n      type: String\n    }\n  },\n  setup: function setup(props) {\n    return function () {\n      return (// @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": !!props.value\n        }, {\n          default: function _default() {\n            return dayjs(props.value).locale(props.locale).format(props.format);\n          }\n        })\n      );\n    };\n  }\n};\n// 本地\n['LT', 'LTS', 'L', 'LL', 'LLL', 'LLLL', 'l', 'll', 'lll', 'llll'].forEach(function (format) {\n  var options = {\n    name: \"adv-datedisplay-\".concat(format)\n  };\n  var Com = Components['DateDisplay'];\n  Components[\"DateDisplay\".concat(format)] = __assign(__assign(__assign({}, Com), options), {\n    setup: function setup(props) {\n      return function () {\n        return _createVNode(Com, _mergeProps(props, {\n          \"format\": true\n        }), null);\n      };\n    }\n  });\n});\nexport default Components;"],"names":["_mergeProps","_createVNode","__assign","dayjs","LocalizedFormat","relativeTime","ConditionalRender","Resource","extend","keys","Object","Dict","handlers","filter","dictName","startsWith","Components","forEach","key","name","substring","length","concat","props","value","type","Number","String","Date","split1","default","split2","setup","_a","slots","dict","conditional","format","Function","noMatch","errorUI","call","locale","now","Boolean","fromNow","toNow","options","Com"],"mappings":"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"}