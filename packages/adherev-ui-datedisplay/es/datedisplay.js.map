{"version":3,"file":"datedisplay.js","sources":["datedisplay.js"],"sourcesContent":["import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport { __assign } from \"tslib\";\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/en';\nimport 'dayjs/locale/pt';\nimport 'dayjs/locale/zh-cn';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport { defineComponent } from 'vue';\nimport { bool, number, object, oneOfType, string } from \"vue-types\";\n// import ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport Resource from '@baifendian/adherev-util-resource';\ndayjs.extend(LocalizedFormat);\ndayjs.extend(relativeTime);\nvar keys = Object.keys(Resource.Dict.handlers).filter(function (dictName) {\n  return dictName.startsWith('ResourceMomentFormat');\n});\nvar Components = {\n  dayjs: dayjs\n};\n// 字典的组件\nkeys.forEach(function (key) {\n  var name = key.substring('ResourceMomentFormat'.length);\n  Components[\"DateDisplay\".concat(name)] = defineComponent({\n    name: \"adv-datedisplay-\".concat(name),\n    props: {\n      value: oneOfType([object(), number(), string()]) /*{\n                                                       type: [Object, Number, String, Date],\n                                                       }*/,\n      split1: string().def('-') /*{\n                                type: String,\n                                default: '-',\n                                }*/,\n      split2: string().def(':') /*{\n                                type: String,\n                                default: ':',\n                                }*/\n    },\n\n    setup: function setup(props, _a) {\n      var slots = _a.slots;\n      var dict = Resource.Dict.value[key].value;\n      return function () {\n        var _a;\n        return !!props.value ?\n        // @ts-ignore\n        dayjs(props === null || props === void 0 ? void 0 : props.value).format(dict instanceof Function ? dict(props.split1, props.split2) : dict) : (_a = slots === null || slots === void 0 ? void 0 : slots.errorUI) === null || _a === void 0 ? void 0 : _a.call(slots);\n      };\n      /*// @ts-ignore\n      <ConditionalRender conditional={!!props.value}>\n        {{\n          default: () => {\n            ;\n          },\n          noMatch: () => ,\n        }}\n      </ConditionalRender>*/\n    }\n  });\n});\n/**\n * DateDisplayFromNow\n * @constructor\n * @classdesc 返回现在到当前实例的相对时间\n */\nComponents[\"DateDisplayFromNow\"] = defineComponent({\n  name: \"adv-datedisplay-fromnow\",\n  props: {\n    value: oneOfType([object(), number(), string()]) /*{\n                                                     type: [Object, Number, String, Date],\n                                                     }*/,\n    locale: string().def('zh-cn') /*{\n                                  type: String,\n                                  default: 'zh-cn',\n                                  }*/,\n    now: bool().def(false) /*{\n                           type: Boolean,\n                           default: false,\n                           }*/\n  },\n\n  setup: function setup(props) {\n    return function () {\n      // @ts-ignore\n      return !!props.value ? dayjs(props.value).locale(props.locale).fromNow(props.now) : null;\n    };\n    // <ConditionalRender conditional={!!props.value}>\n    //   {{\n    //     default: () => dayjs(props.value).locale(props.locale).fromNow(props.now),\n    //   }}\n    // </ConditionalRender>\n  }\n});\n/**\n * DateDisplayToNow\n * @constructor\n * @classdesc 返回当前实例到现在的相对时间\n */\nComponents[\"DateDisplayToNow\"] = defineComponent({\n  name: \"adv-datedisplay-tonow\",\n  props: {\n    value: oneOfType([object(), number(), string()]) /*{\n                                                     type: [Object, Number, String, Date],\n                                                     }*/,\n    locale: string().def('zh-cn') /*{\n                                  type: String,\n                                  default: 'zh-cn',\n                                  }*/,\n    now: bool().def(false) /* {\n                           type: Boolean,\n                           default: false,\n                           }*/\n  },\n\n  setup: function setup(props) {\n    return function () {\n      // @ts-ignore\n      return !!props.value ? dayjs(props.value).locale(props.locale).toNow(props.now) : null;\n    };\n    // @ts-ignore\n    // <ConditionalRender conditional={!!props.value}>\n    //   {{\n    //     default: () => dayjs(props.value).locale(props.locale).toNow(props.now),\n    //   }}\n    // </ConditionalRender>\n  }\n});\n/**\n * DateDisplay\n * @constructor\n */\nComponents[\"DateDisplay\"] = defineComponent({\n  name: \"adv-datedisplay\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    format: {\n      type: String\n    }\n  },\n  setup: function setup(props) {\n    return function () {\n      // @ts-ignore\n      return !!props.value ? dayjs(props.value).locale(props.locale).format(props.format) : null;\n    };\n    // <ConditionalRender conditional={!!props.value}>\n    //   {{\n    //     default: () => dayjs(props.value).locale(props.locale).format(props.format),\n    //   }}\n    // </ConditionalRender>\n  }\n});\n// 本地\n['LT', 'LTS', 'L', 'LL', 'LLL', 'LLLL', 'l', 'll', 'lll', 'llll'].forEach(function (format) {\n  var options = {\n    name: \"adv-datedisplay-\".concat(format)\n  };\n  var Com = Components['DateDisplay'];\n  Components[\"DateDisplay\".concat(format)] = defineComponent(__assign(__assign(__assign({}, Com), options), {\n    setup: function setup(props) {\n      return function () {\n        return _createVNode(Com, _mergeProps(props, {\n          \"format\": format\n        }), null);\n      };\n    }\n  }));\n});\nexport default Components;"],"names":["_createVNode","_mergeProps","__assign","dayjs","LocalizedFormat","relativeTime","defineComponent","bool","number","object","oneOfType","string","Resource","extend","keys","Object","Dict","handlers","filter","dictName","startsWith","Components","forEach","key","name","substring","length","concat","props","value","split1","def","split2","setup","_a","slots","dict","format","Function","errorUI","call","locale","now","fromNow","toNow","type","Number","String","Date","default","options","Com"],"mappings":"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"}