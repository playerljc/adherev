{"version":3,"file":"datedisplay.js","sources":["datedisplay.js"],"sourcesContent":["import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport { __assign } from \"tslib\";\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/en';\nimport 'dayjs/locale/pt';\nimport 'dayjs/locale/zh-cn';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport { Fragment } from 'vue-fragment';\nimport { createHOC } from 'vue-hoc';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport Resource from '@baifendian/adherev-util-resource';\ndayjs.extend(LocalizedFormat);\ndayjs.extend(relativeTime);\nvar keys = Object.keys(Resource.Dict.handlers).filter(function (dictName) {\n  return dictName.startsWith('ResourceMomentFormat');\n});\nvar Components = {\n  dayjs: dayjs\n};\n// 字典的组件\nkeys.forEach(function (key) {\n  var name = key.substring('ResourceMomentFormat'.length);\n  Components[\"DateDisplay\".concat(name)] = {\n    name: \"adv-datedisplay-\".concat(name),\n    props: {\n      value: {\n        type: [Object, Number, String, Date]\n      },\n      split1: {\n        type: String,\n        default: '-'\n      },\n      split2: {\n        type: String,\n        default: ':'\n      }\n    },\n    render: function render(h) {\n      var dict = Resource.Dict.value[key].value;\n      return h(ConditionalRender, {\n        \"attrs\": {\n          \"conditional\": !!this.value\n        }\n      }, [dayjs(this.value).format(dict instanceof Function ? dict(this.split1, this.split2) : dict), h(Fragment, {\n        \"slot\": \"noMatch\"\n      }, [this.$slots.errorUI])]);\n    }\n  };\n});\n/**\n * DateDisplayFromNow\n * @constructor\n * @classdesc 返回现在到当前实例的相对时间\n */\nComponents[\"DateDisplayFromNow\"] = {\n  name: \"adv-datedisplay-fromnow\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    now: {\n      type: Boolean,\n      default: false\n    }\n  },\n  render: function render(h) {\n    return h(ConditionalRender, {\n      \"attrs\": {\n        \"conditional\": !!this.value\n      }\n    }, [dayjs(this.value).locale(this.locale).fromNow(this.now)]);\n  }\n};\n/**\n * DateDisplayToNow\n * @constructor\n * @classdesc 返回当前实例到现在的相对时间\n */\nComponents[\"DateDisplayToNow\"] = {\n  name: \"adv-datedisplay-tonow\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    now: {\n      type: Boolean,\n      default: false\n    }\n  },\n  render: function render(h) {\n    return h(ConditionalRender, {\n      \"attrs\": {\n        \"conditional\": !!this.value\n      }\n    }, [dayjs(this.value).locale(this.locale).toNow(this.now)]);\n  }\n};\n/**\n * DateDisplay\n * @constructor\n */\nComponents[\"DateDisplay\"] = {\n  name: \"adv-datedisplay\",\n  props: {\n    value: {\n      type: [Object, Number, String, Date]\n    },\n    locale: {\n      type: String,\n      default: 'zh-cn'\n    },\n    format: {\n      type: String\n    }\n  },\n  render: function render(h) {\n    return h(ConditionalRender, {\n      \"attrs\": {\n        \"conditional\": !!this.value\n      }\n    }, [dayjs(this.value).locale(this.locale).format(this.format)]);\n  }\n};\n// 本地\n['LT', 'LTS', 'L', 'LL', 'LLL', 'LLLL', 'l', 'll', 'lll', 'llll'].forEach(function (format) {\n  var options = {\n    name: \"adv-datedisplay-\".concat(format)\n  };\n  var Com = Components['DateDisplay'];\n  Components[\"DateDisplay\".concat(format)] = createHOC(Com, options, {\n    props: function props(_props) {\n      return __assign(__assign({}, _props), {\n        format: format\n      });\n    }\n  });\n});\nexport default Components;"],"names":["__assign","dayjs","LocalizedFormat","relativeTime","Fragment","createHOC","ConditionalRender","Resource","extend","keys","Object","Dict","handlers","filter","dictName","startsWith","Components","forEach","key","name","substring","length","concat","props","value","type","Number","String","Date","split1","default","split2","render","h","dict","attrs","conditional","this","format","Function","slot","$slots","errorUI","locale","now","Boolean","fromNow","toNow","options","Com","_props"],"mappings":"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"}