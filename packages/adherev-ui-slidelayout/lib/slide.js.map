{"version":3,"file":"slide.js","sources":["slide.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.array.index-of.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar slidelayout_1 = require(\"./slidelayout\");\n\nvar Slide = {\n  props: {\n    width: {\n      type: [String, Number],\n      default: '80%'\n    },\n    height: {\n      type: [String, Number],\n      default: '40%'\n    },\n    mask: {\n      type: Boolean,\n      default: true\n    },\n    zIndex: {\n      type: Number,\n      default: 9999\n    },\n    time: {\n      type: Number,\n      default: 300\n    },\n    direction: {\n      type: String,\n      default: 'left',\n      validator: function validator(val) {\n        return ['left', 'right', 'top', 'bottom'].indexOf(val) !== -1;\n      }\n    },\n    defaultCollapse: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['before-show', 'before-close'],\n  data: function data() {\n    return {\n      $positionConfig: {},\n      $maskEl: null,\n      collapse: this.defaultCollapse\n    };\n  },\n  watch: {\n    defaultCollapse: function defaultCollapse(newVal, oldVal) {\n      if (newVal !== oldVal) {\n        this.collapse = newVal;\n\n        var _a = this,\n            $positionConfig = _a.$data.$positionConfig,\n            direction = _a.direction,\n            collapse = _a.collapse;\n\n        if (collapse) {\n          $positionConfig['show'][direction]();\n        } else {\n          $positionConfig['close'][direction]();\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var _a;\n\n    var _b = this,\n        el = _b.$refs.el,\n        zIndex = _b.zIndex,\n        mask = _b.mask;\n\n    if (mask) {\n      this.$data.$maskEl = slidelayout_1.createMask(zIndex, function () {\n        _this.close();\n      });\n      (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(this.$data.$maskEl, el);\n    }\n\n    this.initial();\n  },\n  // updated() {\n  //   const {\n  //\n  //     $data: { _preCollapse, $positionConfig },\n  //\n  //     direction,\n  //\n  //     collapse,\n  //   } = this;\n  //\n  //   if (_preCollapse !== collapse) {\n  //     if (collapse) {\n  //\n  //       $positionConfig['show'][direction]();\n  //     } else {\n  //\n  //       $positionConfig['close'][direction]();\n  //     }\n  //   }\n  // },\n  beforeDestroy: function beforeDestroy() {\n    var $maskEl = this.$data.$maskEl;\n\n    if ($maskEl) {\n      $maskEl.parentElement.removeChild($maskEl);\n    }\n  },\n  methods: {\n    getDuration: function getDuration(time) {\n      return time !== undefined && time !== null ? time : this.time;\n    },\n    initial: function initial() {\n      var _a, _b;\n\n      var _c = this,\n          el = _c.$refs.el,\n          $positionConfig = _c.$data.$positionConfig,\n          direction = _c.direction,\n          width = _c.width,\n          height = _c.height,\n          collapse = _c.collapse;\n\n      if (direction === 'left' || direction === 'right') {\n        // 赋值宽度\n        el.style.height = '100%';\n        width ? el.style.width = width : el.style.width = ((_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.offsetWidth) * 0.9 + \"px\";\n      } else {\n        // 赋值高度\n        el.style.width = '100%';\n        height ? el.style.height = height : el.style.height = ((_b = el === null || el === void 0 ? void 0 : el.parentElement) === null || _b === void 0 ? void 0 : _b.offsetHeight) * 0.3 + \"px\";\n      } // 赋值默认位置\n\n\n      $positionConfig['init'][direction]();\n\n      if (collapse) {\n        $positionConfig['show'][direction](0);\n      }\n    },\n    show: function show() {\n      this.$emit('before-show');\n\n      var _a = this,\n          $positionConfig = _a.$data.$positionConfig,\n          direction = _a.direction;\n\n      this.collapse = true;\n      $positionConfig['show'][direction]();\n    },\n    close: function close() {\n      this.$emit('before-close');\n\n      var _a = this,\n          $positionConfig = _a.$data.$positionConfig,\n          direction = _a.direction;\n\n      this.collapse = false;\n      $positionConfig['close'][direction]();\n    }\n  }\n};\nexports.default = Slide;"],"names":["require","Object","defineProperty","exports","value","slidelayout_1","Slide","props","width","type","String","Number","default","height","mask","Boolean","zIndex","time","direction","validator","val","indexOf","defaultCollapse","emits","data","$positionConfig","$maskEl","collapse","this","watch","newVal","oldVal","_a","$data","mounted","_this","_b","el","$refs","createMask","close","parentElement","insertBefore","initial","beforeDestroy","removeChild","methods","getDuration","_c","style","offsetWidth","offsetHeight","show","$emit"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,4CAERA,QAAQ,wCAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,cAAgBL,QAAQ,iBAExBM,MAAQ,CACVC,MAAO,CACLC,MAAO,CACLC,KAAM,CAACC,OAAQC,QACfC,QAAS,OAEXC,OAAQ,CACNJ,KAAM,CAACC,OAAQC,QACfC,QAAS,OAEXE,KAAM,CACJL,KAAMM,QACNH,SAAS,GAEXI,OAAQ,CACNP,KAAME,OACNC,QAAS,MAEXK,KAAM,CACJR,KAAME,OACNC,QAAS,KAEXM,UAAW,CACTT,KAAMC,OACNE,QAAS,OACTO,UAAW,SAAmBC,GAC5B,OAA4D,IAArD,CAAC,OAAQ,QAAS,MAAO,UAAUC,QAAQD,KAGtDE,gBAAiB,CACfb,KAAMM,QACNH,SAAS,IAGbW,MAAO,CAAC,cAAe,gBACvBC,KAAM,WACJ,MAAO,CACLC,gBAAiB,GACjBC,QAAS,KACTC,SAAUC,KAAKN,kBAGnBO,MAAO,CACLP,gBAAiB,SAAyBQ,EAAQC,GAChD,IAGMC,EAHFF,IAAWC,IACbH,KAAKD,SAAWG,EAGZL,GADAO,EAAKJ,MACgBK,MAAMR,gBAC3BP,EAAYc,EAAGd,WACJc,EAAGL,SAGhBF,EAAsB,KAEtBA,EAAuB,OAFCP,QAOhCgB,QAAS,WACP,IAAIC,EAAQP,KAIRQ,EAAKR,KACLS,EAAKD,EAAGE,MAAMD,GACdrB,EAASoB,EAAGpB,OACLoB,EAAGtB,OAGZc,KAAKK,MAAMP,QAAUrB,cAAckC,WAAWvB,EAAQ,WACpDmB,EAAMK,UAE4D,QAAnER,EAAKK,MAAAA,OAA+B,EAASA,EAAGI,qBAAkC,IAAPT,GAAyBA,EAAGU,aAAad,KAAKK,MAAMP,QAASW,IAG3IT,KAAKe,WAsBPC,cAAe,WACb,IAAIlB,EAAUE,KAAKK,MAAMP,QAErBA,GACFA,EAAQe,cAAcI,YAAYnB,IAGtCoB,QAAS,CACPC,YAAa,SAAqB9B,GAChC,OAAOA,MAAAA,EAAsCA,EAAOW,KAAKX,MAE3D0B,QAAS,WACP,IAEIK,EAAKpB,KACLS,EAAKW,EAAGV,MAAMD,GACdZ,EAAkBuB,EAAGf,MAAMR,gBAC3BP,EAAY8B,EAAG9B,UACfV,EAAQwC,EAAGxC,MACXK,EAASmC,EAAGnC,OACZc,EAAWqB,EAAGrB,SAEA,SAAdT,GAAsC,UAAdA,GAE1BmB,EAAGY,MAAMpC,OAAS,OACVwB,EAAGY,MAAMzC,MAAjBA,GAA0K,IAAnD,QAAnEwB,EAAKK,MAAAA,OAA+B,EAASA,EAAGI,qBAAkC,IAAPT,OAAgB,EAASA,EAAGkB,aAAqB,OAGhLb,EAAGY,MAAMzC,MAAQ,OACR6B,EAAGY,MAAMpC,OAAlBA,GAA+K,IAApD,QAAnEuB,EAAKC,MAAAA,OAA+B,EAASA,EAAGI,qBAAkC,IAAPL,OAAgB,EAASA,EAAGe,cAAsB,MAIvL1B,EAAsB,KAAEP,KAEpBS,GACFF,EAAsB,KAAEP,GAAW,IAGvCkC,KAAM,WACJxB,KAAKyB,MAAM,eAEX,IACI5B,EADKG,KACgBK,MAAMR,gBAC3BP,EAFKU,KAEUV,UAEnBU,KAAKD,UAAW,EAChBF,EAAsB,KAAEP,MAE1BsB,MAAO,WACLZ,KAAKyB,MAAM,gBAEX,IACI5B,EADKG,KACgBK,MAAMR,gBAC3BP,EAFKU,KAEUV,UAEnBU,KAAKD,UAAW,EAChBF,EAAuB,MAAEP,QAI/Bf,QAAQS,QAAUN"}