{"version":3,"file":"slide.js","sources":["slide.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.promise.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.slideProps = exports.direction = void 0;\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar slidelayout_1 = require(\"./slidelayout\");\nvar direction;\n(function (direction) {\n  direction[\"top\"] = \"top\";\n  direction[\"bottom\"] = \"bottom\";\n  direction[\"left\"] = \"left\";\n  direction[\"right\"] = \"right\";\n})(direction = exports.direction || (exports.direction = {}));\nexports.slideProps = {\n  width: (0, vue_types_1.oneOfType)([(0, vue_types_1.string)(), (0, vue_types_1.number)()]).def('80%'),\n  height: (0, vue_types_1.oneOfType)([(0, vue_types_1.string)(), (0, vue_types_1.number)()]).def('40%'),\n  mask: (0, vue_types_1.bool)().def(true),\n  zIndex: (0, vue_types_1.number)().def(9999),\n  time: (0, vue_types_1.number)().def(300),\n  direction: (0, vue_types_1.string)().def(direction.left),\n  defaultCollapse: (0, vue_types_1.bool)().def(false)\n};\nfunction useSlide(props, _a) {\n  var emit = _a.emit;\n  var collapse = (0, vue_1.ref)(props.defaultCollapse);\n  var el = (0, vue_1.ref)();\n  var positionConfig = {};\n  var maskEl = null;\n  var setPositionConfig = function setPositionConfig(callback) {\n    positionConfig = callback({\n      el: el,\n      maskEl: maskEl\n    });\n    return Promise.resolve();\n  };\n  var getDuration = function getDuration(time) {\n    return time !== undefined && time !== null ? time : props.time;\n  };\n  var getElRef = function getElRef() {\n    return el;\n  };\n  var initial = function initial() {\n    var $el = el.value;\n    if (props.direction === 'left' || props.direction === 'right') {\n      // 赋值宽度\n      $el.style.height = '100%';\n      props.width ? $el.style.width = props.width : $el.style.width = \"\".concat($el.parentElement.offsetWidth * 0.9, \"px\");\n    } else {\n      // 赋值高度\n      $el.style.width = '100%';\n      props.height ? $el.style.height = props.height : $el.style.height = \"\".concat($el.parentElement.offsetHeight * 0.3, \"px\");\n    }\n    // 赋值默认位置\n    positionConfig['init'][props.direction]();\n    if (collapse.value) {\n      positionConfig['show'][props.direction](0);\n    }\n  };\n  var show = function show() {\n    emit('before-show');\n    collapse.value = true;\n    positionConfig['show'][props.direction]();\n  };\n  var close = function close() {\n    emit('before-close');\n    collapse.value = false;\n    positionConfig['close'][props.direction]();\n  };\n  (0, vue_1.watch)(function () {\n    return props.defaultCollapse;\n  }, function (newVal, oldVal) {\n    if (newVal !== oldVal) {\n      collapse.value = newVal;\n      if (collapse.value) {\n        positionConfig['show'][props.direction]();\n      } else {\n        positionConfig['close'][props.direction]();\n      }\n    }\n  });\n  (0, vue_1.onMounted)(function () {\n    var _a, _b;\n    if (props.mask) {\n      maskEl = (0, slidelayout_1.createMask)(props.zIndex, function () {\n        return close();\n      });\n      (_b = (_a = el.value) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.insertBefore(maskEl, el.value);\n    }\n  });\n  (0, vue_1.onBeforeUnmount)(function () {\n    var _a;\n    if (maskEl) {\n      (_a = maskEl === null || maskEl === void 0 ? void 0 : maskEl.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(maskEl);\n    }\n  });\n  return {\n    setPositionConfig: setPositionConfig,\n    getDuration: getDuration,\n    getElRef: getElRef,\n    initial: initial\n  };\n}\nexports.default = useSlide;"],"names":["require","Object","defineProperty","exports","value","slideProps","direction","vue_1","vue_types_1","slidelayout_1","useSlide","props","_a","emit","collapse","ref","defaultCollapse","el","positionConfig","maskEl","watch","newVal","oldVal","onMounted","_b","mask","createMask","zIndex","parentElement","insertBefore","onBeforeUnmount","removeChild","setPositionConfig","callback","Promise","resolve","getDuration","time","getElRef","initial","$el","style","height","width","concat","offsetWidth","offsetHeight","oneOfType","string","number","def","bool","left","default"],"mappings":"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"}