{"version":3,"file":"slide.js","sources":["slide.js"],"sourcesContent":["import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport { bool, number, oneOfType, string } from 'vue-types';\nimport { createMask } from './slidelayout';\nexport var direction;\n(function (direction) {\n  direction[\"top\"] = \"top\";\n  direction[\"bottom\"] = \"bottom\";\n  direction[\"left\"] = \"left\";\n  direction[\"right\"] = \"right\";\n})(direction || (direction = {}));\nexport var slideProps = {\n  width: oneOfType([string(), number()]).def('80%'),\n  height: oneOfType([string(), number()]).def('40%'),\n  mask: bool().def(true),\n  zIndex: number().def(9999),\n  time: number().def(300),\n  direction: string().def(direction.left),\n  defaultCollapse: bool().def(false)\n};\nexport default function useSlide(props, _a) {\n  var emit = _a.emit;\n  var collapse = ref(props.defaultCollapse);\n  var el = ref();\n  var positionConfig = {};\n  var maskEl = null;\n  var setPositionConfig = function setPositionConfig(callback) {\n    positionConfig = callback({\n      el: el,\n      maskEl: maskEl\n    });\n    return Promise.resolve();\n  };\n  var getDuration = function getDuration(time) {\n    return time !== undefined && time !== null ? time : props.time;\n  };\n  var getElRef = function getElRef() {\n    return el;\n  };\n  var initial = function initial() {\n    var $el = el.value;\n    if (props.direction === 'left' || props.direction === 'right') {\n      // 赋值宽度\n      $el.style.height = '100%';\n      props.width ? $el.style.width = props.width : $el.style.width = \"\".concat($el.parentElement.offsetWidth * 0.9, \"px\");\n    } else {\n      // 赋值高度\n      $el.style.width = '100%';\n      props.height ? $el.style.height = props.height : $el.style.height = \"\".concat($el.parentElement.offsetHeight * 0.3, \"px\");\n    }\n    // 赋值默认位置\n    positionConfig['init'][props.direction]();\n    if (collapse.value) {\n      positionConfig['show'][props.direction](0);\n    }\n  };\n  var show = function show() {\n    emit('before-show');\n    collapse.value = true;\n    positionConfig['show'][props.direction]();\n  };\n  var close = function close() {\n    emit('before-close');\n    collapse.value = false;\n    positionConfig['close'][props.direction]();\n  };\n  watch(function () {\n    return props.defaultCollapse;\n  }, function (newVal, oldVal) {\n    if (newVal !== oldVal) {\n      collapse.value = newVal;\n      if (collapse.value) {\n        positionConfig['show'][props.direction]();\n      } else {\n        positionConfig['close'][props.direction]();\n      }\n    }\n  });\n  onMounted(function () {\n    var _a, _b;\n    if (props.mask) {\n      maskEl = createMask(props.zIndex, function () {\n        return close();\n      });\n      (_b = (_a = el.value) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.insertBefore(maskEl, el.value);\n    }\n  });\n  onBeforeUnmount(function () {\n    var _a;\n    if (maskEl) {\n      (_a = maskEl === null || maskEl === void 0 ? void 0 : maskEl.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(maskEl);\n    }\n  });\n  return {\n    setPositionConfig: setPositionConfig,\n    getDuration: getDuration,\n    getElRef: getElRef,\n    initial: initial\n  };\n}"],"names":["onBeforeUnmount","onMounted","ref","watch","bool","number","oneOfType","string","createMask","direction","slideProps","width","def","height","mask","zIndex","time","left","defaultCollapse","useSlide","props","_a","emit","collapse","el","positionConfig","maskEl","newVal","oldVal","value","_b","parentElement","insertBefore","removeChild","setPositionConfig","callback","Promise","resolve","getDuration","getElRef","initial","$el","style","concat","offsetWidth","offsetHeight"],"mappings":"MAAO,+CACA,uCACEA,gBAAiBC,UAAWC,IAAKC,KAAkB,KAAL,aAC9CC,KAAMC,OAAQC,UAAWC,MAAyB,KAAX,mBACvCC,UAAiC,KAAf,gBAE3B,CAAA,SAAWC,GACTA,EAAe,IAAI,MACnBA,EAAkB,OAAI,SACtBA,EAAgB,KAAI,OACpBA,EAAiB,MAAI,OACtB,EAAEA,UAAAA,WAA0B,EAAG,EANzB,IAAIA,UAOAC,WAAa,CACtBC,MAAOL,UAAU,CAACC,OAAO,EAAGF,OAAO,EAAE,EAAEO,IAAI,KAAK,EAChDC,OAAQP,UAAU,CAACC,OAAO,EAAGF,OAAO,EAAE,EAAEO,IAAI,KAAK,EACjDE,KAAMV,KAAK,EAAEQ,IAAI,CAAA,CAAI,EACrBG,OAAQV,OAAO,EAAEO,IAAI,IAAI,EACzBI,KAAMX,OAAO,EAAEO,IAAI,GAAG,EACtBH,UAAWF,OAAO,EAAEK,IAAIH,UAAUQ,IAAI,EACtCC,gBAAiBd,KAAK,EAAEQ,IAAI,CAAA,CAAK,CACnC,iBACe,SAASO,SAASC,EAAOC,GACtC,IAAIC,EAAOD,EAAGC,KACVC,EAAWrB,IAAIkB,EAAMF,eAAe,EACpCM,EAAKtB,IAAI,EACTuB,EAAiB,GACjBC,EAAS,KAoEb,OA3BAvB,MAAM,WACJ,OAAOiB,EAAMF,eACf,EAAG,SAAUS,EAAQC,GACfD,IAAWC,IACbL,EAASM,MAAQF,GACbJ,EAASM,MACXJ,EAAqB,KAErBA,EAAsB,OAFCL,EAAMX,WAAW,EAK9C,CAAC,EACDR,UAAU,WACR,IAAQ6B,EACJV,EAAMN,OACRY,EAASlB,WAAWY,EAAML,OAAQ,WAnBpCO,EAAK,cAAc,EACnBC,EAASM,MAAQ,CAAA,EACjBJ,EAAsB,MAAEL,EAAMX,WAAW,CAmBvC,CAAC,EACD,OAACqB,EAAK,OAACT,EAAKG,EAAGK,OAAmC,KAAA,EAASR,EAAGU,gBAAoDD,EAAGE,aAAaN,EAAQF,EAAGK,KAAK,EAEtJ,CAAC,EACD7B,gBAAgB,WACd,IAAIqB,EACAK,GACF,OAACL,EAAKK,MAAAA,EAAuC,KAAA,EAASA,EAAOK,gBAAoDV,EAAGY,YAAYP,CAAM,CAE1I,CAAC,EACM,CACLQ,kBApEsB,SAA2BC,GAKjD,OAJAV,EAAiBU,EAAS,CACxBX,GAAIA,EACJE,OAAQA,CACV,CAAC,EACMU,QAAQC,QAAQ,CACzB,EA+DEC,YA9DgB,SAAqBtB,GACrC,OAAOA,MAAAA,EAAsCA,EAAOI,EAAMJ,IAC5D,EA6DEuB,SA5Da,WACb,OAAOf,CACT,EA2DEgB,QA1DY,WACZ,IAAIC,EAAMjB,EAAGK,MACW,SAApBT,EAAMX,WAA4C,UAApBW,EAAMX,WAEtCgC,EAAIC,MAAM7B,OAAS,OACnBO,EAAMT,MAAQ8B,EAAIC,MAAM/B,MAAQS,EAAMT,MAAQ8B,EAAIC,MAAM/B,MAAQ,GAAGgC,OAAuC,GAAhCF,EAAIV,cAAca,YAAmB,IAAI,IAGnHH,EAAIC,MAAM/B,MAAQ,OAClBS,EAAMP,OAAS4B,EAAIC,MAAM7B,OAASO,EAAMP,OAAS4B,EAAIC,MAAM7B,OAAS,GAAG8B,OAAwC,GAAjCF,EAAIV,cAAcc,aAAoB,IAAI,GAG1HpB,EAAqB,KAAEL,EAAMX,WAAW,EACpCc,EAASM,OACXJ,EAAqB,KAAEL,EAAMX,WAAW,CAAC,CAE7C,CA2CA,CACF,QA/FWA,UAOAC,UAwFX"}