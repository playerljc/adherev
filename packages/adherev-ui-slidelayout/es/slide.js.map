{"version":3,"file":"slide.js","sources":["slide.js"],"sourcesContent":["import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport { createMask } from './slidelayout';\nvar Slide = {\n  props: {\n    width: {\n      type: [String, Number],\n      default: '80%'\n    },\n    height: {\n      type: [String, Number],\n      default: '40%'\n    },\n    mask: {\n      type: Boolean,\n      default: true\n    },\n    zIndex: {\n      type: Number,\n      default: 9999\n    },\n    time: {\n      type: Number,\n      default: 300\n    },\n    direction: {\n      type: String,\n      default: 'left',\n      validator: function validator(val) {\n        return ['left', 'right', 'top', 'bottom'].indexOf(val) !== -1;\n      }\n    },\n    defaultCollapse: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['before-show', 'before-close'],\n  data: function data() {\n    return {\n      $positionConfig: {},\n      $maskEl: null,\n      collapse: this.defaultCollapse\n    };\n  },\n  watch: {\n    defaultCollapse: function defaultCollapse(newVal, oldVal) {\n      if (newVal !== oldVal) {\n        this.collapse = newVal;\n        var _a = this,\n          $positionConfig = _a.$data.$positionConfig,\n          direction = _a.direction,\n          collapse = _a.collapse;\n        if (collapse) {\n          $positionConfig['show'][direction]();\n        } else {\n          $positionConfig['close'][direction]();\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n    var _a;\n    var _b = this,\n      el = _b.$refs.el,\n      zIndex = _b.zIndex,\n      mask = _b.mask;\n    if (mask) {\n      this.$data.$maskEl = createMask(zIndex, function () {\n        _this.close();\n      });\n      (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(this.$data.$maskEl, el);\n    }\n    this.initial();\n  },\n  // updated() {\n  //   const {\n  //\n  //     $data: { _preCollapse, $positionConfig },\n  //\n  //     direction,\n  //\n  //     collapse,\n  //   } = this;\n  //\n  //   if (_preCollapse !== collapse) {\n  //     if (collapse) {\n  //\n  //       $positionConfig['show'][direction]();\n  //     } else {\n  //\n  //       $positionConfig['close'][direction]();\n  //     }\n  //   }\n  // },\n  beforeDestroy: function beforeDestroy() {\n    var $maskEl = this.$data.$maskEl;\n    if ($maskEl) {\n      $maskEl.parentElement.removeChild($maskEl);\n    }\n  },\n  methods: {\n    getDuration: function getDuration(time) {\n      return time !== undefined && time !== null ? time : this.time;\n    },\n    initial: function initial() {\n      var _a, _b;\n      var _c = this,\n        el = _c.$refs.el,\n        $positionConfig = _c.$data.$positionConfig,\n        direction = _c.direction,\n        width = _c.width,\n        height = _c.height,\n        collapse = _c.collapse;\n      if (direction === 'left' || direction === 'right') {\n        // 赋值宽度\n        el.style.height = '100%';\n        width ? el.style.width = width : el.style.width = \"\".concat(((_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.offsetWidth) * 0.9, \"px\");\n      } else {\n        // 赋值高度\n        el.style.width = '100%';\n        height ? el.style.height = height : el.style.height = \"\".concat(((_b = el === null || el === void 0 ? void 0 : el.parentElement) === null || _b === void 0 ? void 0 : _b.offsetHeight) * 0.3, \"px\");\n      }\n      // 赋值默认位置\n      $positionConfig['init'][direction]();\n      if (collapse) {\n        $positionConfig['show'][direction](0);\n      }\n    },\n    show: function show() {\n      this.$emit('before-show');\n      var _a = this,\n        $positionConfig = _a.$data.$positionConfig,\n        direction = _a.direction;\n      this.collapse = true;\n      $positionConfig['show'][direction]();\n    },\n    close: function close() {\n      this.$emit('before-close');\n      var _a = this,\n        $positionConfig = _a.$data.$positionConfig,\n        direction = _a.direction;\n      this.collapse = false;\n      $positionConfig['close'][direction]();\n    }\n  }\n};\nexport default Slide;"],"names":["createMask","Slide","props","width","type","String","Number","default","height","mask","Boolean","zIndex","time","direction","validator","val","indexOf","defaultCollapse","emits","data","$positionConfig","$maskEl","collapse","this","watch","newVal","oldVal","_a","$data","mounted","_this","_b","el","$refs","close","parentElement","insertBefore","initial","beforeDestroy","removeChild","methods","getDuration","_c","style","concat","offsetWidth","offsetHeight","show","$emit"],"mappings":"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"}