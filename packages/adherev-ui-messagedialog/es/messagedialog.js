import{__assign,__rest}from"tslib";import{Button,ConfigProvider}from"ant-design-vue";import Vue from"vue";import Util from"@baifendian/adherev-util";import Intl from"@baifendian/adherev-util-intl";import Resource from"@baifendian/adherev-util-resource";import ModalDialog from"./modal";var selectorPrefix="adherev-ui-messagedialog",DEFAULT_LOCAL="zh_CN",LOCAL=Resource.Dict.value.LocalsAntd.value,Fragment=Util._util.Fragment,globalConfig=null;function renderByIcon(t){var e=t.h,i=t.icon,t=t.text;return e("div",{class:selectorPrefix+"-renderByIcon"},[e("div",{class:selectorPrefix+"-renderByIcon-fixed"},[Util.isFunction(i)?i(e):e(Fragment,[i])]),e("div",{class:selectorPrefix+"-renderByIcon-auto"},[Util.isFunction(t)?t(e):e(Fragment,[t])])])}var MessageDialogFactory={setConfig:function(t){globalConfig=t},Confirm:function(t){var e=t.title,i=t.text,n=void 0===i?null:i,o=t.width,r=t.zIndex,l=t.local,i=t.icon,a=void 0===i?null:i,s=t.onSuccess,c=this.Modal({config:{title:e,centered:!0,width:(void 0===o?300:o)||300,closable:!1,zIndex:void 0===r?1e3:r,footer:function(t){return[t(Button,{key:"submit",attrs:{type:"primary",title:Intl.tv("确定")},on:{click:function(){s?s().then(function(){c()}):c()}}},[Intl.tv("确定")])]}},local:l,children:a?function(t){return renderByIcon({h:t,icon:a,text:n})}:function(t){return Util.isFunction(n)?n(t):t(Fragment,[n])}}).close},Prompt:function(t){var e=t.title,i=t.config,n=t.width,o=void 0===n?300:n,r=t.zIndex,n=void 0===r?1e3:r,r=t.local,l=t.onSuccess;i.option&&(i.option.submitBtn=!1,i.option.resetBtn=!1);var r=this.Modal({config:{title:e,centered:!0,width:o||300,closable:!1,zIndex:n,footer:function(t){return[t(Button,{key:"submit",attrs:{type:"primary",title:Intl.tv("确定")},on:{click:function(){var e;l?(e=s.$refs.rootRef.fApi).validate(function(t){t&&l(e.getValue(i.rule[0].field)).then(function(){a()})}):a()}}},[Intl.tv("确定")])]}},local:r,children:{template:'\n          <form-create\n            v-model="fApi"\n            :rule="rule"\n            :option="option"\n          ></form-create>\n        ',data:function(){return{fApi:{},rule:i.rule||[{type:"input",field:"prompt",title:"输入框",info:"",_fc_drag_tag:"input",hidden:!1,display:!0,value:"",wrap:{labelCol:{span:4},wrapperCol:{span:20}}}],option:i.option||{form:{labelPosition:"right",size:"mini",labelWidth:"125px",hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1,submitBtn:!1,resetBtn:!1}}}}}}),a=r.close,s=r.vm},InputPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},TextAreaPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"textarea"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},PassWordPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"password"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},NumberPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"number"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},Alert:function(t){var e=t.title,i=t.text,n=void 0===i?null:i,o=t.width,r=t.zIndex,i=t.local,l=t.icon;this.Modal({config:{title:e,centered:!0,width:(void 0===o?300:o)||300,closable:!1,zIndex:void 0===r?1e3:r},local:i,children:l?function(t){return renderByIcon({h:t,icon:l,text:n})}:function(t){return Util.isFunction(n)?n(t):t(Fragment,[n])}})},Modal:function(t){var e=t.config,i=void 0===e?{}:e,e=t.children,n=void 0===e?Function:e,e=t.defaultCloneBtn,o=void 0===e||e,t=t.local,r=void 0===t?DEFAULT_LOCAL:t;function l(){var t;u.$destroy(),null!==(t=null==c?void 0:c.parentElement)&&void 0!==t&&t.removeChild(c)}var t=i,a=t.title,t=__rest(t,["title"]),s=__assign({maskClosable:!1},t);Util.isString(a)&&(s.title=a);var c=document.createElement("div"),u=new Vue(__assign(__assign({},(null===(t=null==globalConfig?void 0:globalConfig.getOptions)||void 0===t?void 0:t.call(globalConfig))||{}),{i18n:Intl({I18nOptions:{messages:(globalConfig||{}).messages,locale:r||DEFAULT_LOCAL},prefix:"local"}),render:function(t){var e=function(t){var e=t.config,t=t.h;if(!Util.isEmpty(e.footer)){if(Util.isFunction(e.footer))return e.footer(t);if(Util.isObject(e.footer))return t(e.footer)}return null}({config:i,h:t});return e&&(s.footerJSX=e),t(ConfigProvider,{attrs:{locale:LOCAL[r||DEFAULT_LOCAL]}},[t(ModalDialog,{attrs:{config:s,closeBtn:o},on:{close:function(){l()}}},[function(t){var e=t.h,t=t.children;if(!Util.isEmpty(t)){if(Util.isFunction(t))return t(e);if(Util.isObject(t))return e(t,{ref:"rootRef"})}return null}({h:t,children:n}),function(t){var e=t.title,t=t.h;if(!Util.isEmpty(e)){if(Util.isFunction(e))return t(Fragment,{slot:"title"},[e(t)]);if(Util.isObject(e))return t("div",{slot:"title"},[t(e)])}return null}({title:a,h:t})])])}})).$mount(c);return document.body.appendChild(c),{el:c,vm:u,close:l}},close:function(t){var e=t._vm,t=t.el;e.$destroy(),null!==(e=null==t?void 0:t.parentElement)&&void 0!==e&&e.removeChild(t)}};export default MessageDialogFactory;export{selectorPrefix};
//# sourceMappingURL=messagedialog.js.map
