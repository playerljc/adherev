import{isVNode as _isVNode,createVNode as _createVNode}from"vue";import"core-js/modules/es.object.to-string.js";import{__assign,__rest}from"tslib";import{Button,Col,ConfigProvider,Form,Input,Row,Slider}from"ant-design-vue";import{createApp,h,ref}from"vue";import Util from"@baifendian/adherev-util";import Intl from"@baifendian/adherev-util-intl";import Resource from"@baifendian/adherev-util-resource";import formCreate from"@form-create/ant-design-vue";import ModalDialog from"./modal";function _isSlot(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!_isVNode(t)}var selectorPrefix="adherev-ui-messagedialog",DEFAULT_LOCAL="zh_CN",LOCAL=Resource.Dict.value.LocalsAntd.value,globalConfig=null;function renderByIcon(t){var e,i=t.icon,t=t.text;return _createVNode("div",{class:"".concat(selectorPrefix,"-renderByIcon")},[_createVNode("div",{class:"".concat(selectorPrefix,"-renderByIcon-fixed")},[null!=(e=null==Util?void 0:Util.isFunction)&&e.call(Util,i)?i():i]),_createVNode("div",{class:"".concat(selectorPrefix,"-renderByIcon-auto")},[null!=(e=null==Util?void 0:Util.isFunction)&&e.call(Util,t)?t():t])])}var MessageDialogFactory={Confirm:function(t){var e=t.title,i=t.text,n=void 0===i?null:i,i=t.width,o=t.zIndex,l=t.local,r=t.icon,u=void 0===r?null:r,a=t.onSuccess,c=this.Modal({config:{title:e,centered:!0,width:(void 0===i?300:i)||300,closable:!1,zIndex:void 0===o?1e3:o,footer:function(){var t;return[_createVNode(Button,{key:"submit",type:"primary",title:Intl.tv("确定"),onClick:function(){a?a().then(function(){c()}):c()}},_isSlot(t=Intl.tv("确定"))?t:{default:function(){return[t]}})]}},local:l,children:u?function(){return renderByIcon({icon:u,text:n})}:function(){var t;return null!=(t=null==Util?void 0:Util.isFunction)&&t.call(Util,n)?n():n}}).close},Prompt:function(t){var e=t.title,i=t.config,n=t.width,n=void 0===n?300:n,o=t.zIndex,o=void 0===o?1e3:o,l=t.local,r=t.onSuccess,t=(i.option&&(i.option.submitBtn=!1,i.option.resetBtn=!1),this.Modal({config:{title:e,centered:!0,width:n||300,closable:!1,zIndex:o,footer:function(){var t;return[_createVNode(Button,{key:"submit",type:"primary",title:Intl.tv("确定"),onClick:function(){var e;r?(e=u.value.fApi).validate(function(t){t&&r(e.getValue(i.rule[0].field)).then(function(){a()})}):a()}},_isSlot(t=Intl.tv("确定"))?t:{default:function(){return[t]}})]}},local:l,children:{template:'\n          <form-create\n            v-model:api="fApi"\n            :rule="rule"\n            :option="option"\n          ></form-create>\n        ',data:function(){return{fApi:{},rule:i.rule||[{type:"input",field:"prompt",title:"输入框",info:"",_fc_drag_tag:"input",hidden:!1,display:!0,value:"",wrap:{labelCol:{span:4},wrapperCol:{span:20}}}],option:i.option||{form:{labelPosition:"right",size:"mini",labelWidth:"125px",hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1,submitBtn:!1,resetBtn:!1}}}}}})),u=t.rootRef,a=t.close},InputPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},TextAreaPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"textarea"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},PassWordPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"password"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},NumberPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"number"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},Alert:function(t){var e=t.title,i=t.text,n=void 0===i?null:i,i=t.width,o=t.zIndex,l=t.local,r=t.icon;this.Modal({config:{title:e,centered:!0,width:(void 0===i?300:i)||300,closable:!1,zIndex:void 0===o?1e3:o},local:l,children:r?function(){return renderByIcon({icon:r,text:n})}:function(){var t;return null!=(t=null==Util?void 0:Util.isFunction)&&t.call(Util,n)?n():n}})},Modal:function(t){var e=t.config,i=void 0===e?{}:e,e=t.children,n=void 0===e?Function:e,e=t.defaultCloneBtn,o=void 0===e||e,e=t.local,l=void 0===e?DEFAULT_LOCAL:e;function r(){var e;try{null!=f&&f.unmount()}catch(t){null!=(e=null==s?void 0:s.parentElement)&&e.removeChild(s)}}var u,a=i.title,t=__rest(i,["title"]),c=__assign({maskClosable:!1},t),s=(null!=(e=Util.isString)&&e.call(Util,a)&&(c.title=a),document.createElement("div")),f=createApp({setup:function(){return u=ref(),function(){var t=function(t){var e;if(null==(e=Util.isEmpty)||!e.call(Util,t.footer)){if(null!=(e=Util.isFunction)&&e.call(Util,t.footer))return t.footer();if(null!=(e=Util.isObject)&&e.call(Util,t.footer))return h(t.footer)}return null}(i);return t&&(c.footerJSX=t),_createVNode(ConfigProvider,{locale:LOCAL[l||DEFAULT_LOCAL]},{default:function(){return[_createVNode(ModalDialog,{config:c,closeBtn:o,onClose:function(){r()}},{default:function(){var t,e=n,i=u;if(null==(t=null==Util?void 0:Util.isEmpty)||!t.call(Util,e)){if(null!=(t=null==Util?void 0:Util.isFunction)&&t.call(Util,e))return e();if(null!=(t=null==Util?void 0:Util.isObject)&&t.call(Util,e))return h(e,{ref:i})}return null},title:function(){var t,e=a;if(null==(t=Util.isEmpty)||!t.call(Util,e)){if(null!=(t=Util.isFunction)&&t.call(Util,e))return e();if(null!=(t=Util.isObject)&&t.call(Util,e))return h("div",{},[h(e)])}return e}})]}})}}});return f.use(ConfigProvider).use(Button).use(Form).use(Row).use(Col).use(Slider).use(Col).use(Input).use(formCreate),Intl.use(f),null!=(t=null==globalConfig?void 0:globalConfig.beforeMount)&&t.call(globalConfig,f),f.mount(s),document.body.appendChild(s),{el:s,vm:f,rootRef:u,close:r}},close:function(e){var i=e.app,e=e.el;try{null!=i&&i.unmount()}catch(t){null!=(i=null==e?void 0:e.parentElement)&&i.removeChild(e)}},setConfig:function(t){globalConfig=t}};export default MessageDialogFactory;export{selectorPrefix};
//# sourceMappingURL=messagedialog.js.map
