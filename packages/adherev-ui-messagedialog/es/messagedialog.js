import _ConfigProvider from"ant-design-vue/es/config-provider";import _Button from"ant-design-vue/es/button";import{__assign,__rest}from"tslib";import Vue from"vue";import Util from"@baifendian/adherev-util";import Intl from"@baifendian/adherev-util-intl";import Resource from"@baifendian/adherev-util-resource";import ModalDialog from"./modal";var globalConfig,selectorPrefix="adherev-ui-messagedialog",DEFAULT_LOCAL="zh_CN",LOCAL=Resource.Dict.value.LocalsAntd.value,Fragment=Util._util.Fragment;function renderByIcon(t){var e=t.h,i=t.icon,t=t.text;return e("div",{class:"".concat(selectorPrefix,"-renderByIcon")},[e("div",{class:"".concat(selectorPrefix,"-renderByIcon-fixed")},[Util.isFunction(i)?i(e):e(Fragment,[i])]),e("div",{class:"".concat(selectorPrefix,"-renderByIcon-auto")},[Util.isFunction(t)?t(e):e(Fragment,[t])])])}var MessageDialogFactory={setConfig:function(t){globalConfig=t},Confirm:function(t){var e=t.title,i=t.text,n=void 0===i?null:i,i=t.width,o=t.zIndex,r=t.local,l=t.icon,a=void 0===l?null:l,c=t.onSuccess,s=this.Modal({config:{title:e,centered:!0,width:(void 0===i?300:i)||300,closable:!1,zIndex:void 0===o?1e3:o,footer:function(t){return[t(_Button,{key:"submit",attrs:{type:"primary",title:Intl.tv("确定")},on:{click:function(){c?c().then(function(){s()}):s()}}},[Intl.tv("确定")])]}},local:r,children:a?function(t){return renderByIcon({h:t,icon:a,text:n})}:function(t){return Util.isFunction(n)?n(t):t(Fragment,[n])}}).close},Prompt:function(t){var e=t.title,i=t.config,n=t.width,n=void 0===n?300:n,o=t.zIndex,o=void 0===o?1e3:o,r=t.local,l=t.onSuccess,t=(i.option&&(i.option.submitBtn=!1,i.option.resetBtn=!1),this.Modal({config:{title:e,centered:!0,width:n||300,closable:!1,zIndex:o,footer:function(t){return[t(_Button,{key:"submit",attrs:{type:"primary",title:Intl.tv("确定")},on:{click:function(){var e;l?(e=c.$refs.rootRef.fApi).validate(function(t){t&&l(e.getValue(i.rule[0].field)).then(function(){a()})}):a()}}},[Intl.tv("确定")])]}},local:r,children:{template:'\n          <form-create\n            v-model="fApi"\n            :rule="rule"\n            :option="option"\n          ></form-create>\n        ',data:function(){return{fApi:{},rule:i.rule||[{type:"input",field:"prompt",title:Intl.v("输入框"),info:"",_fc_drag_tag:"input",hidden:!1,display:!0,value:"",wrap:{labelCol:{span:4},wrapperCol:{span:20}}}],option:i.option||{form:{labelPosition:"right",size:"mini",labelWidth:"125px",hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1,submitBtn:!1,resetBtn:!1}}}}}})),a=t.close,c=t.vm},InputPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},TextAreaPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"textarea"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},PassWordPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"password"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},NumberPrompt:function(t){var e=t.config,t=__rest(t,["config"]);e.rule[0].type="input",e.rule[0]._fc_drag_tag="input",e.rule[0].field="prompt",e.rule[0].props={type:"number"},MessageDialogFactory.Prompt(__assign(__assign({},t),{config:__assign({},e)}))},Alert:function(t){var e=t.title,i=t.text,n=void 0===i?null:i,i=t.width,o=t.zIndex,r=t.local,l=t.icon;this.Modal({config:{title:e,centered:!0,width:(void 0===i?300:i)||300,closable:!1,zIndex:void 0===o?1e3:o},local:r,children:l?function(t){return renderByIcon({h:t,icon:l,text:n})}:function(t){return Util.isFunction(n)?n(t):t(Fragment,[n])}})},Modal:function(t){var e=t.config,i=void 0===e?{}:e,e=t.children,n=void 0===e?Function:e,e=t.defaultCloseBtn,o=void 0===e||e,e=t.local,r=void 0===e?DEFAULT_LOCAL:e;function l(){var t;u.$destroy(),null!=(t=null==s?void 0:s.parentElement)&&t.removeChild(s)}var a=i.title,t=__rest(i,["title"]),c=__assign({maskClosable:!1},t),s=(Util.isString(a)&&(c.title=a),document.createElement("div")),u=new Vue(__assign(__assign({},globalConfig||{}),{render:function(t){var e=function(t){var e=t.config,t=t.h;if(!Util.isEmpty(e.footer)){if(Util.isFunction(e.footer))return e.footer(t);if(Util.isObject(e.footer))return t(e.footer)}return null}({config:i,h:t});return e&&(c.footerJSX=e),t(_ConfigProvider,{attrs:{locale:LOCAL[r||DEFAULT_LOCAL]}},[t(ModalDialog,{attrs:{config:c,closeBtn:o},on:{close:function(){l()}}},[function(t){var e=t.h,t=t.children;if(!Util.isEmpty(t)){if(Util.isFunction(t))return t(e);if(Util.isObject(t))return e(t,{ref:"rootRef"})}return null}({h:t,children:n}),function(t){var e=t.title,t=t.h;if(!Util.isEmpty(e)){if(Util.isFunction(e))return t(Fragment,{slot:"title"},[e(t)]);if(Util.isObject(e))return t("div",{slot:"title"},[t(e)])}return null}({title:a,h:t})])])}})).$mount(s);return document.body.appendChild(s),{el:s,vm:u,close:l}},close:function(t){var e=t._vm,t=t.el;e.$destroy(),null!=(e=null==t?void 0:t.parentElement)&&e.removeChild(t)}};export default MessageDialogFactory;export{selectorPrefix};
//# sourceMappingURL=messagedialog.js.map
