{"version":3,"file":"modal.js","sources":["modal.js"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode, isVNode as _isVNode } from \"vue\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { __rest, __spreadArray } from \"tslib\";\nimport Intl from '@baifendian/adherev-util-intl';\nimport { Button, Modal } from 'ant-design-vue';\nimport { defineComponent, onBeforeUnmount, onMounted, toRaw } from 'vue';\nimport { any, bool, func } from 'vue-types';\nimport Actions from './actions';\nimport Emitter from './emitter';\n\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !_isVNode(s);\n}\n\nexport var selectorPrefix = 'adherev-ui-messagedialog';\nvar props = {\n  config: any(),\n  closeBtn: bool().def(true),\n  onClose: func()\n};\nexport default defineComponent({\n  props: props,\n  slots: ['title', 'footer'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n\n    var onEmitterClose = function onEmitterClose() {\n      if (!!props.onClose) {\n        props.onClose();\n      }\n    };\n\n    var renderCloseBtn = function renderCloseBtn() {\n      var _slot;\n\n      return (// @ts-ignore\n        _createVNode(Button, {\n          \"key\": \"close\",\n          \"type\": !props.config.footerJSX ? 'primary' : '',\n          \"title\": Intl.tv('取消'),\n          \"onClick\": function onClick() {\n            if (!!props.onClose) {\n              props.onClose();\n            }\n          }\n        }, _isSlot(_slot = Intl.tv('取消')) ? _slot : {\n          default: function _default() {\n            return [_slot];\n          }\n        })\n      );\n    };\n\n    var renderDefault = function renderDefault() {\n      var _a;\n\n      return (_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots);\n    };\n\n    var renderTitle = function renderTitle() {\n      var _a;\n\n      return (_a = slots.title) === null || _a === void 0 ? void 0 : _a.call(slots);\n    };\n\n    var renderFooter = function renderFooter() {\n      var result = null;\n\n      if (props.config.footerJSX) {\n        if (props.closeBtn) {\n          result = _createVNode(\"div\", null, [__spreadArray(__spreadArray([], props.config.footerJSX, true), [renderCloseBtn()], false)]);\n        } else {\n          result = _createVNode(\"div\", null, [props.config.footerJSX]);\n        }\n      } else {\n        if (props.closeBtn) {\n          result = renderCloseBtn();\n        }\n      }\n\n      return result;\n    };\n\n    onMounted(function () {\n      Emitter.on(Actions.close, onEmitterClose);\n    });\n    onBeforeUnmount(function () {\n      Emitter.remove(Actions.close, onEmitterClose);\n    });\n    return function () {\n      var _a = toRaw(props.config),\n          footer = _a.footer,\n          centered = _a.centered,\n          title = _a.title,\n          other = __rest(_a, [\"footer\", \"centered\", \"title\"]);\n\n      console.log('other', other);\n      return (// @ts-ignore\n        _createVNode(Modal, _mergeProps(other, {\n          \"centered\": centered === undefined || centered === null ? true : centered,\n          \"wrapClassName\": selectorPrefix,\n          \"onCancel\": function onCancel() {\n            if (!!props.onClose) {\n              props.onClose();\n            }\n          },\n          \"visible\": true\n        }), {\n          default: function _default() {\n            return renderDefault();\n          },\n          title: function title() {\n            return renderTitle();\n          },\n          footer: function footer() {\n            return renderFooter();\n          }\n        })\n      );\n    };\n  }\n});"],"names":["_mergeProps","_createVNode","_isVNode","__rest","__spreadArray","Intl","Button","Modal","defineComponent","onBeforeUnmount","onMounted","toRaw","any","bool","func","Actions","Emitter","_isSlot","s","Object","prototype","toString","call","selectorPrefix","props","config","closeBtn","def","onClose","slots","setup","_a","onEmitterClose","renderCloseBtn","_slot","key","type","footerJSX","title","tv","onClick","default","on","close","remove","centered","footer","other","console","log","wrapClassName","onCancel","visible","result"],"mappings":"OAAuBA,0BAA4BC,4BAAyBC,oFAEnEC,OAAQC,iCACVC,gDACEC,OAAQC,kCACRC,gBAAiBC,gBAAiBC,UAAWC,uBAC7CC,IAAKC,KAAMC,4BACbC,+BACAC,wBAEP,SAASC,QAAQC,GACf,MAAoB,mBAANA,GAA0D,oBAAtCC,OAAOC,UAAUC,SAASC,KAAKJ,KAA6BhB,SAASgB,GAGlG,IAAIK,eAAiB,2BACxBC,MAAQ,CACVC,OAAQb,MACRc,SAAUb,OAAOc,KAAI,GACrBC,QAASd,uBAEIN,gBAAgB,CAC7BgB,MAAOA,MACPK,MAAO,CAAC,QAAS,UACjBC,MAAO,SAAeN,EAAOO,GAGN,SAAjBC,IACIR,EAAMI,SACVJ,EAAMI,UAIW,SAAjBK,IACF,IAAIC,EAEJ,OACEjC,aAAaK,OAAQ,CACnB6B,IAAO,QACPC,KAASZ,EAAMC,OAAOY,UAAwB,GAAZ,UAClCC,MAASjC,KAAKkC,GAAG,MACjBC,QAAW,WACHhB,EAAMI,SACVJ,EAAMI,YAGTX,QAAQiB,EAAQ7B,KAAKkC,GAAG,OAASL,EAAQ,CAC1CO,QAAS,WACP,MAAO,CAACP,MAvBhB,IAAIL,EAAQE,EAAGF,MAiEf,OANAnB,UAAU,WACRM,QAAQ0B,GAAG3B,QAAQ4B,MAAOX,KAE5BvB,gBAAgB,WACdO,QAAQ4B,OAAO7B,QAAQ4B,MAAOX,KAEzB,WACL,IAAID,EAAKpB,MAAMa,EAAMC,QAEjBoB,GADSd,EAAGe,OACDf,EAAGc,UAEdE,GADQhB,EAAGO,MACHnC,OAAO4B,EAAI,CAAC,SAAU,WAAY,WAG9C,OADAiB,QAAQC,IAAI,QAASF,GAEnB9C,aAAaM,MAAOP,YAAY+C,EAAO,CACrCF,SAAYA,MAAAA,GAAqDA,EACjEK,cAAiB3B,eACjB4B,SAAY,WACJ3B,EAAMI,SACVJ,EAAMI,WAGVwB,SAAW,IACT,CACFX,QAAS,WACP,OArD0B,QAAxBV,EAAKF,EAAMY,eAA4B,IAAPV,OAAgB,EAASA,EAAGT,KAAKO,GAHvD,IACdE,GAyDAO,MAAO,WACL,OAlDwB,QAAtBP,EAAKF,EAAMS,aAA0B,IAAPP,OAAgB,EAASA,EAAGT,KAAKO,GAHvD,IACZE,GAsDAe,OAAQ,WACN,OAjDFO,EAAS,KAET7B,EAAMC,OAAOY,UAEbgB,EADE7B,EAAME,SACCzB,aAAa,MAAO,KAAM,CAACG,cAAcA,cAAc,GAAIoB,EAAMC,OAAOY,WAAW,GAAO,CAACJ,MAAmB,KAE9GhC,aAAa,MAAO,KAAM,CAACuB,EAAMC,OAAOY,YAG/Cb,EAAME,WACR2B,EAASpB,KAINoB,EAfU,IACbA,gBApDC9B"}