"use strict";require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.object.define-property.js");var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__rest=function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},__importDefault=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectorPrefix=void 0;var vue_1=__importDefault(require("vue")),ant_design_vue_1=require("ant-design-vue"),adherev_util_intl_1=__importDefault(require("@baifendian/adherev-util-intl")),adherev_util_resource_1=__importDefault(require("@baifendian/adherev-util-resource")),adherev_util_1=__importDefault(require("@baifendian/adherev-util")),actions_1=__importDefault(require("./actions")),emitter_1=__importDefault(require("./emitter")),modal_1=__importDefault(require("./modal"));exports.selectorPrefix="adherev-ui-messagedialog";var DEFAULT_LOCAL="zh_CN",LOCAL=adherev_util_resource_1.default.Dict.value.LocalsAntd.value,Fragment=adherev_util_1.default._util.Fragment,globalConfig=null;function renderByIcon(e){var t=e.h,r=e.icon,e=e.text;return t("div",{class:exports.selectorPrefix+"-renderByIcon"},[t("div",{class:exports.selectorPrefix+"-renderByIcon-fixed"},[adherev_util_1.default.isFunction(r)?r(t):t(Fragment,[r])]),t("div",{class:exports.selectorPrefix+"-renderByIcon-auto"},[adherev_util_1.default.isFunction(e)?e(t):t(Fragment,[e])])])}var MessageDialogFactory={Confirm:function(e){var t=e.title,r=e.text,i=void 0===r?null:r,n=e.width,o=e.zIndex,l=e.local,r=e.icon,a=void 0===r?null:r,u=e.onSuccess,s=this.Modal({config:{title:t,centered:!0,width:(void 0===n?300:n)||300,closable:!1,zIndex:void 0===o?1e3:o,footer:function(e){return[e(ant_design_vue_1.Button,{key:"submit",attrs:{type:"primary",title:adherev_util_intl_1.default.tv("确定")},on:{click:function(){u?u().then(function(){emitter_1.default.trigger(actions_1.default.close,s)}):emitter_1.default.trigger(actions_1.default.close,s)}}},[adherev_util_intl_1.default.tv("确定")])]}},local:l,children:a?function(e){return renderByIcon({h:e,icon:a,text:i})}:function(e){return adherev_util_1.default.isFunction(i)?i(e):e(Fragment,[i])}}).el},Prompt:function(e){var t=e.title,r=e.config,i=e.width,n=void 0===i?300:i,o=e.zIndex,i=void 0===o?1e3:o,o=e.local,l=e.onSuccess;r.option&&(r.option.submitBtn=!1,r.option.resetBtn=!1);var o=this.Modal({config:{title:t,centered:!0,width:n||300,closable:!1,zIndex:i,footer:function(e){return[e(ant_design_vue_1.Button,{key:"submit",attrs:{type:"primary",title:adherev_util_intl_1.default.tv("确定")},on:{click:function(){var t;l?(t=u.$refs.formRef.fApi).validate(function(e){e&&l(t.getValue(r.rule[0].field)).then(function(){emitter_1.default.trigger(actions_1.default.close,a)})}):emitter_1.default.trigger(actions_1.default.close,a)}}},[adherev_util_intl_1.default.tv("确定")])]}},local:o,children:{template:'\n          <form-create\n            v-model="fApi"\n            :rule="rule"\n            :option="option"\n          ></form-create>\n        ',data:function(){return{fApi:{},rule:r.rule||[{type:"input",field:"prompt",title:"输入框",info:"",_fc_drag_tag:"input",hidden:!1,display:!0,value:"",wrap:{labelCol:{span:4},wrapperCol:{span:20}}}],option:r.option||{form:{labelPosition:"right",size:"mini",labelWidth:"125px",hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1,submitBtn:!1,resetBtn:!1}}}}}}),a=o.el,u=o.vm},InputPrompt:function(e){var t=e.config,e=__rest(e,["config"]);t.rule[0].type="input",t.rule[0]._fc_drag_tag="input",t.rule[0].field="prompt",MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign({},t)}))},TextAreaPrompt:function(e){var t=e.config,e=__rest(e,["config"]);t.rule[0].type="input",t.rule[0]._fc_drag_tag="input",t.rule[0].field="prompt",t.rule[0].props={type:"textarea"},MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign({},t)}))},PassWordPrompt:function(e){var t=e.config,e=__rest(e,["config"]);t.rule[0].type="input",t.rule[0]._fc_drag_tag="input",t.rule[0].field="prompt",t.rule[0].props={type:"password"},MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign({},t)}))},NumberPrompt:function(e){var t=e.config,e=__rest(e,["config"]);t.rule[0].type="input",t.rule[0]._fc_drag_tag="input",t.rule[0].field="prompt",t.rule[0].props={type:"number"},MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign({},t)}))},Alert:function(e){var t=e.title,r=e.text,i=void 0===r?null:r,n=e.width,o=e.zIndex,r=e.local,l=e.icon;this.Modal({config:{title:t,centered:!0,width:(void 0===n?300:n)||300,closable:!1,zIndex:void 0===o?1e3:o},local:r,children:l?function(e){return renderByIcon({h:e,icon:l,text:i})}:function(e){return adherev_util_1.default.isFunction(i)?i(e):e(Fragment,[i])}})},Modal:function(e){var t=e.config,r=void 0===t?{}:t,t=e.children,i=void 0===t?Function:t,t=e.defaultCloneBtn,n=void 0===t||t,e=e.local,o=void 0===e?DEFAULT_LOCAL:e;var l=r.title,e=__rest(r,["title"]),a=__assign({maskClosable:!1},e);adherev_util_1.default.isString(l)&&(a.title=l);var u=document.createElement("div"),s=new vue_1.default({i18n:adherev_util_intl_1.default({I18nOptions:{messages:(globalConfig||{}).messages,locale:o||DEFAULT_LOCAL},prefix:"local"}),render:function(e){var t=function(e){var t=e.config,e=e.h;if(!adherev_util_1.default.isEmpty(t.footer)){if(adherev_util_1.default.isFunction(t.footer))return t.footer(e);if(adherev_util_1.default.isObject(t.footer))return e(t.footer)}return null}({config:r,h:e});return t&&(a.footerJSX=t),e(ant_design_vue_1.ConfigProvider,{attrs:{locale:LOCAL[o||DEFAULT_LOCAL]}},[e(modal_1.default,{attrs:{config:a,closeBtn:n},on:{close:function(){s.$destroy(),u.parentElement.removeChild(u)}}},[function(e){var t=e.h,e=e.children;if(!adherev_util_1.default.isEmpty(e)){if(adherev_util_1.default.isFunction(e))return e(t);if(adherev_util_1.default.isObject(e))return t(e,{ref:"formRef"})}return null}({h:e,children:i}),function(e){var t=e.title,e=e.h;if(!adherev_util_1.default.isEmpty(t)){if(adherev_util_1.default.isFunction(t))return e(Fragment,{slot:"title"},[t(e)]);if(adherev_util_1.default.isObject(t))return e("div",{slot:"title"},[e(t)])}return null}({title:l,h:e})])])}}).$mount(u);return document.body.appendChild(u),{el:u,vm:s}},close:function(e){emitter_1.default.trigger(actions_1.default.close,e)},setConfig:function(e){globalConfig=e}};exports.default=MessageDialogFactory;
//# sourceMappingURL=messagedialog.js.map
