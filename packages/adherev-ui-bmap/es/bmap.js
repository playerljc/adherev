import{createTextVNode as _createTextVNode,createVNode as _createVNode}from"vue";import{__assign}from"tslib";import{defineComponent,nextTick,onMounted,ref}from"vue";import{bool,number,object,string}from"vue-types";import ConditionalRender from"@baifendian/adherev-ui-conditionalrender";var selectorPrefix="adhere-ui-bmap",loadGridIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAUdJREFUeNrs2sENwyAQRcE4ckf0RBv04Z7ck30wFXBi/4wU5bScXhQk9hhj9B+xzu/7WjijvZ/b/Jbz/e83kE0AAkAACAABIAAEgAAQAAJAAAgAAVDYfA5ui+eY33R+BuA9PXO++QtwB0AACAABIAAEgAAQAAJAAAgAASAAqrIPED5vH8A+AO4ACAABIAAEgAAQAAJAAAgAASAABEBJ9gHC5+0D2AfAHQABIAAEgAAQAAJAAAgAASAABIAAKMk+QPi8fQD7ALgDIAAEgAAQAAJAAAgAASAABIAAEAAl2QcIn7cPYB8AdwAEgAAQAAJAAAgAASAABIAAEAACoCT7AOHz9gHsA+AOgAAQAAJAAAgAASAABIAAEAACQACUZB8gfN4+gH0A3AEQAAJAAAgAASAABIAAEAACQABUNV8D++I5nmM3nX8EGADa0U/2xPbBVwAAAABJRU5ErkJggg==",props={ak:string().def("bxFuXXDt1oKdlgu6mXCCnK51cDgDGBLp"),zoom:number().def(5),center:object().def(function(){return{lon:116.404,lat:39.915}}).isRequired,config:object().def(function(){return{minZoom:2,maxZoom:20,enableHighResolution:!0,enableAutoResize:!0,enableMapClick:!1}}),externalImportBMapScript:bool().def(!1)};export default defineComponent({name:"adv-bmap",props:props,emits:["bMapInitReady"],setup:function(e,A){function n(){t.addControl(new o.NavigationControl),t.enableScrollWheelZoom(!0)}var o,t,r=A.emit,A=A.expose,i=ref(null),a=!1,l=!1;return A({getMap:function(){return t}}),onMounted(function(){o=window.BMap,a=!0,nextTick(function(){var A;t=new o.Map(i.value,__assign(__assign({},e.config),{enableMapClick:!1})),n(),t.centerAndZoom(new o.Point(null==(A=e.center)?void 0:A.lon,null==(A=e.center)?void 0:A.lat),e.zoom),t.addEventListener("tilesloaded",function(){var A,e;l||(l=!0,(e=document.querySelector(".anchorBL"))&&null!=(A=null==e?void 0:e.parentElement)&&A.removeChild(e),setTimeout(function(){i.value.style.background='url("'.concat(loadGridIcon,'") repeat #fff;')},2e3))}),r("bMapInitReady")})}),function(){return _createVNode(ConditionalRender,{conditional:a},{default:function(){return _createVNode("div",{class:selectorPrefix,ref:i},null)},noMatch:function(){return _createVNode("div",null,[_createTextVNode("loading")])}})}}});
//# sourceMappingURL=bmap.js.map
