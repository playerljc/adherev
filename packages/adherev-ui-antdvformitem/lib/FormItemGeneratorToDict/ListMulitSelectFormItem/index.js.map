{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListMulitSelectFormItem/index.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar AntdvFormItemNormalize_1 = require(\"../../AntdvFormItemNormalize\");\nvar ListFormItem_1 = tslib_1.__importDefault(require(\"../ListFormItem\"));\nvar MulitSelectFormItem_1 = tslib_1.__importDefault(require(\"../MulitSelectFormItem\"));\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexports.default = (0, vue_1.defineComponent)({\n  name: 'ListMulitSelectFormItem',\n  props: {\n    selectProps: (0, vue_types_1.object)().def({}),\n    listProps: (0, vue_types_1.object)().def({}),\n    value: (0, vue_types_1.array)().def([]),\n    dataSource: (0, vue_types_1.array)().def([]),\n    rowKey: (0, vue_types_1.string)().def('id'),\n    labelKey: (0, vue_types_1.string)().def('name')\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? this.value : [],\n      selectedRows: this.value ? this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = _value;\n      this.selectedRows = this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      });\n    }\n  },\n  methods: {\n    CheckWrap: function CheckWrap(_a) {\n      var _this = this;\n      var item = _a.item;\n      var rowKey = this.rowKey || 'id';\n      return (0, _vue.createVNode)(AntdvFormItemNormalize_1.Checkbox, {\n        \"onChange\": function onChange(e) {\n          e.stopPropagation();\n          var checked = e.target.checked;\n          if (checked) {\n            _this.selectedRowKeys = tslib_1.__spreadArray(tslib_1.__spreadArray([], _this.selectedRowKeys, true), [item[rowKey]], false);\n            _this.selectedRows = tslib_1.__spreadArray(tslib_1.__spreadArray([], _this.selectedRows, true), [tslib_1.__assign({}, item)], false);\n            _this.$emit('change', tslib_1.__spreadArray([], _this.selectedRowKeys, true));\n          } else {\n            _this.selectedRowKeys = _this.selectedRowKeys.filter(function (key) {\n              return key !== item[rowKey];\n            });\n            _this.selectedRows = _this.selectedRows.filter(function (row) {\n              return row[rowKey] !== item[rowKey];\n            });\n            _this.$emit('change', tslib_1.__spreadArray([], _this.selectedRowKeys, true));\n          }\n        },\n        \"checked\": this.selectedRowKeys.includes(item[rowKey])\n      }, null);\n    },\n    $renderDropdownRender: function $renderDropdownRender() {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (0, _vue.createVNode)(ListFormItem_1.default, {\n        \"listProps\": tslib_1.__assign({\n          dataSource: data,\n          renderItem: function renderItem(item, index) {\n            var _a;\n            return (// @ts-ignore\n              (0, _vue.createVNode)(adherev_ui_conditionalrender_1.default, {\n                \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem\n              }, {\n                default: function _default() {\n                  var _a, _b, _c, _d;\n                  return (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [(0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.CheckWrap(item)]), (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [((_b = (_a = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) === null || _b === void 0 ? void 0 : _b.call(_a, item)) || ((_d = (_c = _this.$slots) === null || _c === void 0 ? void 0 : _c.renderItem) === null || _d === void 0 ? void 0 : _d.call(_c, item, index))])]);\n                },\n                noMatch: function noMatch() {\n                  return (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [(0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.CheckWrap(item)]), (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [item])]);\n                }\n              })\n            );\n          }\n        }, this.listProps),\n        \"rowKey\": this.rowKey\n      }, null);\n    }\n  },\n  render: function render() {\n    var _this = this;\n    return (0, vue_1.h)(MulitSelectFormItem_1.default, tslib_1.__assign(tslib_1.__assign({\n      selectProps: tslib_1.__assign({\n        dropdownRender: function dropdownRender() {\n          return _this.$renderDropdownRender();\n        },\n        filterOption: function filterOption() {\n          return false;\n        }\n      }, this.selectProps),\n      value: this.value,\n      dataSource: this.dataSource.map(function (t) {\n        return {\n          label: t[_this.labelKey || 'name'],\n          value: t[_this.rowKey || 'id']\n        };\n      })\n    }, this.$attrs), {\n      onSearch: function onSearch(inputValue) {\n        _this.inputValue = inputValue;\n      },\n      onChange: function onChange(val) {\n        _this.$emit('change', val);\n        if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n      }\n    }), this.$slots);\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","vue_1","vue_types_1","adherev_ui_conditionalrender_1","__importDefault","AntdvFormItemNormalize_1","ListFormItem_1","MulitSelectFormItem_1","selectorPrefix","default","defineComponent","name","props","selectProps","object","def","listProps","array","dataSource","rowKey","string","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","map","t","find","_item","watch","_value","methods","CheckWrap","_a","item","createVNode","Checkbox","onChange","e","stopPropagation","target","checked","__spreadArray","__assign","filter","key","row","$emit","includes","$renderDropdownRender","_b","indexOf","call","renderItem","index","conditional","$slots","_c","_d","class","concat","noMatch","render","h","dropdownRender","filterOption","label","$attrs","onSearch","val","Array","isArray","length"],"mappings":"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"}