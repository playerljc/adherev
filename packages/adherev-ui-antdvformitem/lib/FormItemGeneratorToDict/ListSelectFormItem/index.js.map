{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListSelectFormItem/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\n// ListSelectFormItem\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar AntdvFormItemNormalize_1 = require(\"../../AntdvFormItemNormalize\");\nvar ListFormItem_1 = tslib_1.__importDefault(require(\"../ListFormItem\"));\nvar SelectFormItem_1 = tslib_1.__importDefault(require(\"../SelectFormItem\"));\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexports.default = {\n  name: 'ListSelectFormItem',\n  props: {\n    selectProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    listProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    dataSource: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    rowKey: {\n      type: String,\n      default: 'id'\n    },\n    labelKey: {\n      type: String,\n      default: 'name'\n    }\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? [this.value] : [],\n      selectedRows: this.value ? this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = [_value];\n      this.selectedRows = [this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      })];\n    }\n  },\n  methods: {\n    RadioWrap: function RadioWrap(h, item) {\n      var _this = this;\n      var rowKey = this.rowKey || 'id';\n      return h(AntdvFormItemNormalize_1.Radio, {\n        \"on\": {\n          \"change\": function change(e) {\n            e.stopPropagation();\n            var checked = e.target.checked;\n            if (checked) {\n              _this.selectedRowKeys = [item[rowKey]];\n              _this.selectedRows = [tslib_1.__assign({}, item)];\n              _this.$emit('change', item[rowKey]);\n            }\n          }\n        },\n        \"attrs\": {\n          \"checked\": this.selectedRowKeys.includes(item[rowKey])\n        }\n      });\n    },\n    $renderDropdownRender: function $renderDropdownRender(h) {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (// @ts-ignore\n        h(ListFormItem_1.default, {\n          \"attrs\": {\n            \"listProps\": tslib_1.__assign(tslib_1.__assign({\n              dataSource: data\n            }, this.listProps), {\n              renderItem: function renderItem(item, index) {\n                var _a, _b, _c;\n                return h(adherev_ui_conditionalrender_1.default, {\n                  \"attrs\": {\n                    \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem || _this.$scopedSlots.renderItem\n                  }\n                }, [h(\"div\", {\n                  \"slot\": \"noMatch\",\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                }, [h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                }, [_this.RadioWrap(h, item)]), h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                }, [item])]), h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                }, [h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                }, [_this.RadioWrap(h, item)]), h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                }, [((_c = (_b = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _b === void 0 ? void 0 : _b.renderItem) === null || _c === void 0 ? void 0 : _c.call(_b, item)) || _this.$slots.renderItem || _this.$scopedSlots.renderItem(item, index)])])]);\n              }\n            }),\n            \"rowKey\": this.rowKey\n          }\n        })\n      );\n    }\n  },\n  render: function render(h) {\n    var _this = this;\n    return h(SelectFormItem_1.default, {\n      props: {\n        selectProps: tslib_1.__assign({\n          dropdownRender: function dropdownRender() {\n            return _this.$renderDropdownRender(h);\n          },\n          filterOption: function filterOption() {\n            return false;\n          }\n        }, this.selectProps),\n        value: this.value,\n        dataSource: this.dataSource.map(function (t) {\n          return {\n            label: t[_this.labelKey || 'name'],\n            value: t[_this.rowKey || 'id']\n          };\n        })\n      },\n      attrs: this.$attrs,\n      scopedSlots: this.$scopedSlots,\n      on: tslib_1.__assign(tslib_1.__assign({}, this.$listeners), {\n        search: function search(inputValue) {\n          _this.inputValue = inputValue;\n        },\n        change: function change(val) {\n          _this.$emit('change', val);\n          if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n        }\n      })\n    }, this.$slots.default);\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","adherev_ui_conditionalrender_1","__importDefault","AntdvFormItemNormalize_1","ListFormItem_1","SelectFormItem_1","selectorPrefix","default","name","props","selectProps","type","listProps","String","dataSource","Array","rowKey","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","find","t","watch","_value","methods","RadioWrap","h","item","Radio","on","change","e","stopPropagation","target","checked","__assign","$emit","attrs","includes","$renderDropdownRender","filter","_b","_a","indexOf","call","renderItem","index","_c","conditional","$slots","$scopedSlots","slot","class","concat","render","dropdownRender","filterOption","map","label","$attrs","scopedSlots","$listeners","search","val","isArray","length"],"mappings":"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"}