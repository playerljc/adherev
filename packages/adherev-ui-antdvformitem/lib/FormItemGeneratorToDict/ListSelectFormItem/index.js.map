{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListSelectFormItem/index.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar AntdvFormItemNormalize_1 = require(\"../../AntdvFormItemNormalize\");\nvar ListFormItem_1 = tslib_1.__importDefault(require(\"../ListFormItem\"));\nvar SelectFormItem_1 = tslib_1.__importDefault(require(\"../SelectFormItem\"));\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexports.default = (0, vue_1.defineComponent)({\n  name: 'ListSelectFormItem',\n  props: {\n    selectProps: (0, vue_types_1.object)().def({}),\n    listProps: (0, vue_types_1.object)().def({}),\n    value: (0, vue_types_1.string)().def(''),\n    dataSource: (0, vue_types_1.array)().def([]),\n    rowKey: (0, vue_types_1.string)().def('id'),\n    labelKey: (0, vue_types_1.string)().def('name')\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? [this.value] : [],\n      selectedRows: this.value ? this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = [_value];\n      this.selectedRows = [this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      })];\n    }\n  },\n  methods: {\n    RadioWrap: function RadioWrap(_a) {\n      var _this = this;\n      var item = _a.item;\n      var rowKey = this.rowKey || 'id';\n      return (0, _vue.createVNode)(AntdvFormItemNormalize_1.Radio, {\n        \"onChange\": function onChange(e) {\n          e.stopPropagation();\n          var checked = e.target.checked;\n          if (checked) {\n            _this.selectedRowKeys = [item[rowKey]];\n            _this.selectedRows = [tslib_1.__assign({}, item)];\n            _this.$emit('change', item[rowKey]);\n          }\n        },\n        \"checked\": this.selectedRowKeys.includes(item[rowKey])\n      }, null);\n    },\n    $renderDropdownRender: function $renderDropdownRender() {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (0, _vue.createVNode)(ListFormItem_1.default, {\n        \"listProps\": tslib_1.__assign({\n          dataSource: data,\n          renderItem: function renderItem(item, index) {\n            var _a;\n            return (// @ts-ignore\n              (0, _vue.createVNode)(adherev_ui_conditionalrender_1.default, {\n                \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem\n              }, {\n                default: function _default() {\n                  var _a, _b, _c, _d;\n                  return (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [(0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.RadioWrap(item)]), (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [((_b = (_a = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) === null || _b === void 0 ? void 0 : _b.call(_a, item)) || ((_d = (_c = _this.$slots) === null || _c === void 0 ? void 0 : _c.renderItem) === null || _d === void 0 ? void 0 : _d.call(_c, item, index))])]);\n                },\n                noMatch: function noMatch() {\n                  return (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [(0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.RadioWrap(item)]), (0, _vue.createVNode)(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [item])]);\n                }\n              })\n            );\n          }\n        }, this.listProps),\n        \"rowKey\": this.rowKey\n      }, null);\n    }\n  },\n  render: function render() {\n    var _this = this;\n    return (0, vue_1.h)(SelectFormItem_1.default, tslib_1.__assign(tslib_1.__assign({}, this.$attrs), {\n      selectProps: tslib_1.__assign({\n        dropdownRender: function dropdownRender() {\n          return _this.$renderDropdownRender();\n        },\n        filterOption: function filterOption() {\n          return false;\n        }\n      }, this.selectProps),\n      value: this.value,\n      dataSource: this.dataSource.map(function (t) {\n        return {\n          label: t[_this.labelKey || 'name'],\n          value: t[_this.rowKey || 'id']\n        };\n      }),\n      onSearch: function onSearch(inputValue) {\n        _this.inputValue = inputValue;\n      },\n      onChange: function onChange(val) {\n        _this.$emit('change', val);\n        if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n      }\n    }), this.$slots);\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","vue_1","vue_types_1","adherev_ui_conditionalrender_1","__importDefault","AntdvFormItemNormalize_1","ListFormItem_1","SelectFormItem_1","selectorPrefix","default","defineComponent","name","props","selectProps","object","def","listProps","string","dataSource","array","rowKey","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","find","t","watch","_value","methods","RadioWrap","_a","item","createVNode","Radio","onChange","e","stopPropagation","target","checked","__assign","$emit","includes","$renderDropdownRender","filter","_b","indexOf","call","renderItem","index","conditional","$slots","_c","_d","class","concat","noMatch","render","h","$attrs","dropdownRender","filterOption","map","label","onSearch","val","Array","isArray","length"],"mappings":"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"}