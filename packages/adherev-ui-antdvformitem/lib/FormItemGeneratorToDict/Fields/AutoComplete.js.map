{"version":3,"file":"AutoComplete.js","sources":["FormItemGeneratorToDict/Fields/AutoComplete.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\nrequire(\"core-js/modules/es.object.define-properties.js\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.string.ends-with.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.array.reduce.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar adherev_util_dict_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-dict\"));\nvar AutoCompleteFormItem_1 = tslib_1.__importDefault(require(\"../AutoCompleteFormItem\"));\nvar FormItemComponents = {};\nexports.default = function () {\n  // 名称以AutoComplete结尾的字典\n  var autoCompleteDictNames = Object.keys(adherev_util_dict_1.default.handlers).filter(function (dictName) {\n    return dictName.endsWith('AutoComplete');\n  });\n  // 名称以DynamicAutoComplete结尾的字典\n  var autoCompleteDynamicDictNames = Object.keys(adherev_util_dict_1.default.handlers).filter(function (dictName) {\n    return dictName.endsWith('DynamicAutoComplete');\n  });\n  // 静态的AutoComplete\n  autoCompleteDictNames.forEach(function (dictName) {\n    // SelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = {\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number],\n          default: ''\n        },\n        autoCompleteProps: {\n          type: Object,\n          default: function _default() {\n            return {};\n          }\n        },\n        value: {\n          type: Object,\n          default: function _default() {\n            return {\n              inputValue: '',\n              selectValue: ''\n            };\n          }\n        }\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = adherev_util_dict_1.default.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render(h) {\n        var _this = this;\n        var _a = this.$props,\n          cascadeParams = _a.cascadeParams,\n          props = tslib_1.__rest(_a, [\"cascadeParams\"]);\n        return (// @ts-ignore\n          h(AutoCompleteFormItem_1.default, {\n            \"attrs\": _objectSpread({\n              \"dataSource\": this.dataSource\n            }, tslib_1.__assign({}, this.$attrs || {})),\n            \"props\": _objectSpread({}, tslib_1.__assign({}, props)),\n            \"on\": _objectSpread({}, tslib_1.__assign({}, this.$listeners || {}))\n          }, [Object.keys(this.$slots).reduce(function (arr, key) {\n            return arr.concat(_this.$slots[key]);\n          }, [])])\n        );\n      }\n    };\n  });\n  // 动态的AutoComplete\n  autoCompleteDynamicDictNames.forEach(function (dictName) {\n    // SelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = {\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number],\n          default: ''\n        },\n        autoCompleteProps: {\n          type: Object,\n          default: function _default() {\n            return {};\n          }\n        },\n        value: {\n          type: Object,\n          default: function _default() {\n            return {\n              inputValue: '',\n              selectValue: ''\n            };\n          }\n        }\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = adherev_util_dict_1.default.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = adherev_util_dict_1.default.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render(h) {\n        var _this = this;\n        var _a = this.$props,\n          cascadeParams = _a.cascadeParams,\n          props = tslib_1.__rest(_a, [\"cascadeParams\"]);\n        return (// @ts-ignore\n          h(AutoCompleteFormItem_1.default, {\n            \"attrs\": _objectSpread({\n              \"dataSource\": this.dataSource\n            }, tslib_1.__assign({}, this.$attrs || {})),\n            \"props\": _objectSpread({}, tslib_1.__assign({}, props)),\n            \"on\": _objectSpread({}, tslib_1.__assign({}, this.$listeners || {}))\n          }, [Object.keys(this.$slots).reduce(function (arr, key) {\n            return arr.concat(_this.$slots[key]);\n          }, [])])\n        );\n      }\n    };\n  });\n  return FormItemComponents;\n};"],"names":["require","_interopRequireDefault","_defineProperty2","ownKeys","object","enumerableOnly","symbols","keys","Object","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","defineProperty","exports","value","tslib_1","adherev_util_dict_1","__importDefault","AutoCompleteFormItem_1","FormItemComponents","autoCompleteDictNames","handlers","dictName","endsWith","autoCompleteDynamicDictNames","concat","name","props","cascadeParams","type","String","Number","autoCompleteProps","inputValue","selectValue","computed","dataSource","handler","Function","this","render","h","_this","_a","$props","__rest","attrs","__assign","$attrs","on","$listeners","$slots","reduce","arr","data","methods","$loadData","params","then","res","watch","val","mounted"],"mappings":"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"}