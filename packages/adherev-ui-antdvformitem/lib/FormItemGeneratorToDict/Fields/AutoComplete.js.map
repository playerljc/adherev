{"version":3,"file":"AutoComplete.js","sources":["FormItemGeneratorToDict/Fields/AutoComplete.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.string.ends-with.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_util_dict_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-dict\"));\nvar AutoCompleteFormItem_1 = tslib_1.__importDefault(require(\"../AutoCompleteFormItem\"));\nvar FormItemComponents = {};\nexports.default = function () {\n  // 名称以AutoComplete结尾的字典\n  var autoCompleteDictNames = Object.keys(adherev_util_dict_1.default.handlers).filter(function (dictName) {\n    return dictName.endsWith('AutoComplete');\n  });\n  // 名称以DynamicAutoComplete结尾的字典\n  var autoCompleteDynamicDictNames = Object.keys(adherev_util_dict_1.default.handlers).filter(function (dictName) {\n    return dictName.endsWith('DynamicAutoComplete');\n  });\n  // 静态的AutoComplete\n  autoCompleteDictNames.forEach(function (dictName) {\n    // SelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = (0, vue_1.defineComponent)({\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: (0, vue_types_1.oneOfType)([(0, vue_types_1.string)(), (0, vue_types_1.number)()]).def(''),\n        autoCompleteProps: (0, vue_types_1.object)().def({}),\n        value: (0, vue_types_1.object)().def({\n          inputValue: '',\n          selectValue: ''\n        })\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = adherev_util_dict_1.default.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render() {\n        var _this = this;\n        var _a = this.$props,\n          cascadeParams = _a.cascadeParams,\n          props = tslib_1.__rest(_a, [\"cascadeParams\"]);\n        return (// @ts-ignore\n          (0, _vue.createVNode)(AutoCompleteFormItem_1.default, (0, _vue.mergeProps)({\n            \"dataSource\": this.dataSource\n          }, tslib_1.__assign(tslib_1.__assign({}, props), this.$attrs)), {\n            default: function _default() {\n              return [_this.$slots];\n            }\n          })\n        );\n      }\n    });\n  });\n  // 动态的AutoComplete\n  autoCompleteDynamicDictNames.forEach(function (dictName) {\n    // SelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = (0, vue_1.defineComponent)({\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: (0, vue_types_1.oneOfType)([(0, vue_types_1.string)(), (0, vue_types_1.number)()]).def(''),\n        autoCompleteProps: (0, vue_types_1.object)().def({}),\n        value: (0, vue_types_1.object)().def({\n          inputValue: '',\n          selectValue: ''\n        })\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = adherev_util_dict_1.default.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = adherev_util_dict_1.default.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render() {\n        var _this2 = this;\n        var _a = this.$props,\n          cascadeParams = _a.cascadeParams,\n          props = tslib_1.__rest(_a, [\"cascadeParams\"]);\n        return (// @ts-ignore\n          (0, _vue.createVNode)(AutoCompleteFormItem_1.default, (0, _vue.mergeProps)({\n            \"dataSource\": this.dataSource\n          }, tslib_1.__assign(tslib_1.__assign({}, props), this.$attrs)), {\n            default: function _default() {\n              return [_this2.$slots];\n            }\n          })\n        );\n      }\n    });\n  });\n  return FormItemComponents;\n};"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","vue_1","vue_types_1","adherev_util_dict_1","__importDefault","AutoCompleteFormItem_1","FormItemComponents","default","autoCompleteDictNames","keys","handlers","filter","dictName","endsWith","autoCompleteDynamicDictNames","forEach","concat","defineComponent","name","props","cascadeParams","oneOfType","string","number","def","autoCompleteProps","object","inputValue","selectValue","computed","dataSource","handler","Function","this","render","_this","_a","$props","__rest","createVNode","mergeProps","__assign","$attrs","$slots","data","methods","$loadData","params","then","res","watch","val","mounted","_this2"],"mappings":"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"}