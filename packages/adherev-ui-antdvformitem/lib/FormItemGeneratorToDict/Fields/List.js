"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.string.ends-with.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.from.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_ui_conditionalrender_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-conditionalrender")),adherev_util_dict_1=tslib_1.__importDefault(require("@baifendian/adherev-util-dict")),AntdvFormItemNormalize_1=require("../../AntdvFormItemNormalize"),ListFormItem_1=tslib_1.__importDefault(require("../ListFormItem")),ListMulitSelectFormItem_1=tslib_1.__importDefault(require("../ListMulitSelectFormItem")),ListSelectFormItem_1=tslib_1.__importDefault(require("../ListSelectFormItem")),MulitSelectFormItem_1=tslib_1.__importDefault(require("../MulitSelectFormItem")),SelectFormItem_1=tslib_1.__importDefault(require("../SelectFormItem")),selectorPrefix="adherev-ui-antdformitem",FormItemComponents={};exports.default=function(){var e=Object.keys(adherev_util_dict_1.default.handlers).filter(function(e){return e.endsWith("List")}),t=Object.keys(adherev_util_dict_1.default.handlers).filter(function(e){return e.endsWith("DynamicList")}),s=Object.keys(adherev_util_dict_1.default.handlers).filter(function(e){return e.endsWith("ListPagination")});return e.forEach(function(t){FormItemComponents["".concat(t,"FormItem")]=(0,vue_1.defineComponent)({name:"".concat(t,"FormItem"),props:{cascadeParams:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]),listProps:ListFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id")},emits:["change"],computed:{dataSource:function(){var e=adherev_util_dict_1.default.value[t].value;return e instanceof Function?e(this.cascadeParams):e}},render:function(){var t=this;return(0,vue_1.h)(ListFormItem_1.default,tslib_1.__assign(tslib_1.__assign({listProps:tslib_1.__assign({dataSource:this.dataSource},this.listProps),rowKey:this.rowKey},this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}}),FormItemComponents["".concat(t,"SelectFormItem")]=(0,vue_1.defineComponent)({name:"".concat(t,"SelectFormItem"),props:{cascadeParams:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]),selectProps:ListSelectFormItem_1.default.props.selectProps,listProps:ListSelectFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id"),labelKey:(0,vue_types_1.string)().def("name"),value:ListSelectFormItem_1.default.props.value},emits:["change"],computed:{dataSource:function(){var e=adherev_util_dict_1.default.value[t].value;return e instanceof Function?e(this.cascadeParams):e}},render:function(){var t=this;return(0,vue_1.h)(ListSelectFormItem_1.default,tslib_1.__assign(tslib_1.__assign({selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}}),FormItemComponents["".concat(t,"MulitSelectFormItem")]=(0,vue_1.defineComponent)({name:"".concat(t,"MulitSelectFormItem"),props:{cascadeParams:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]),selectProps:ListMulitSelectFormItem_1.default.props.selectProps,listProps:ListMulitSelectFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id"),labelKey:(0,vue_types_1.string)().def("name"),value:ListMulitSelectFormItem_1.default.props.value},emits:["change"],computed:{dataSource:function(){var e=adherev_util_dict_1.default.value[t].value;return e instanceof Function?e(this.cascadeParams):e}},render:function(){var t=this;return(0,vue_1.h)(ListMulitSelectFormItem_1.default,tslib_1.__assign(tslib_1.__assign({selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}})}),t.forEach(function(s){FormItemComponents["".concat(s,"FormItem")]=(0,vue_1.defineComponent)({name:"".concat(s,"FormItem"),props:{cascadeParams:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]),listProps:ListFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id")},emits:["change"],data:function(){return{dataSource:[]}},methods:{$loadData:function(e){var t=adherev_util_dict_1.default.value[s].value;t instanceof Function&&t(e).then(function(e){this.dataSource=e})}},watch:{cascadeParams:function(e){this.$loadData(e)}},mounted:function(){var e=adherev_util_dict_1.default.value[s].value;e.then&&e.then(function(e){this.dataSource=e})},render:function(){var t=this;return(0,vue_1.h)(ListFormItem_1.default,tslib_1.__assign(tslib_1.__assign({listProps:tslib_1.__assign({dataSource:this.dataSource},this.listProps),rowKey:this.rowKey},this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}}),FormItemComponents["".concat(s,"SelectFormItem")]=(0,vue_1.defineComponent)({name:"".concat(s,"SelectFormItem"),props:{cascadeParams:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]),selectProps:ListSelectFormItem_1.default.props.selectProps,listProps:ListSelectFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id"),labelKey:(0,vue_types_1.string)().def("name"),value:ListSelectFormItem_1.default.props.value},emits:["change"],data:function(){return{dataSource:[]}},methods:{$loadData:function(e){var t=adherev_util_dict_1.default.value[s].value;t instanceof Function&&t(e).then(function(e){this.dataSource=e})}},watch:{cascadeParams:function(e){this.$loadData(e)}},mounted:function(){var e=adherev_util_dict_1.default.value[s].value;e.then&&e.then(function(e){this.dataSource=e})},render:function(){var t=this;return(0,vue_1.h)(ListSelectFormItem_1.default,tslib_1.__assign(tslib_1.__assign({selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}}),FormItemComponents["".concat(s,"MulitSelectFormItem")]=(0,vue_1.defineComponent)({name:"".concat(s,"MulitSelectFormItem"),props:{cascadeParams:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]),selectProps:ListMulitSelectFormItem_1.default.props.selectProps,listProps:ListMulitSelectFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id"),labelKey:(0,vue_types_1.string)().def("name"),value:ListMulitSelectFormItem_1.default.props.value},emits:["change"],data:function(){return{dataSource:[]}},methods:{$loadData:function(e){var t=adherev_util_dict_1.default.value[s].value;t instanceof Function&&t(e).then(function(e){this.dataSource=e})}},watch:{cascadeParams:function(e){this.$loadData(e)}},mounted:function(){var e=adherev_util_dict_1.default.value[s].value;e.then&&e.then(function(e){this.dataSource=e})},render:function(){var t=this;return(0,vue_1.h)(ListMulitSelectFormItem_1.default,tslib_1.__assign(tslib_1.__assign({selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}})}),s.forEach(function(e){FormItemComponents["".concat(e,"FormItem")]=(0,vue_1.defineComponent)({name:"".concat(e,"FormItem"),props:{listProps:ListFormItem_1.default.props.listProps,rowKey:(0,vue_types_1.string)().def("id"),totalKey:(0,vue_types_1.string)().def("total"),dataKey:(0,vue_types_1.string)().def("records")},emits:["change"],data:function(){return{loading:!1,data:[],pagin:{current:1,pageSize:10,total:0}}},watch:{"pagin.current":function(){this.$loadData()},"pagin.pageSize":function(){this.$loadData()}},methods:{$loadData:function(){var t=this;this.loading=!0,(0,adherev_util_dict_1.default.value[e].value)(tslib_1.__assign({},this.pagin)).then(function(e){t.pagin=tslib_1.__assign(tslib_1.__assign({},t.pagin),{total:e[t.totalKey||"total"]}),t.data=e[t.dataKey||"records"],t.loading=!1}).catch(function(){t.loading=!1})},$getPagination:function(){var s=this;return{onChange:function(e,t){s.pagin=tslib_1.__assign(tslib_1.__assign({},s.pagin),{current:e,pageSize:t})},onShowSizeChange:function(e,t){s.pagin=tslib_1.__assign(tslib_1.__assign({},s.pagin),{current:e,pageSize:t})},total:this.pagin.total,current:this.pagin.current,pageSize:this.pagin.pageSize,showQuickJumper:!0}}},mounted:function(){this.$loadData()},render:function(){var t=this;return(0,vue_1.h)(AntdvFormItemNormalize_1.List,tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({dataSource:this.data,loading:this.loading,pagination:this.$getPagination(),rowKey:this.rowKey||"id"},this.listProps),this.$attrs),{onChange:function(e){return t.$emit("change",e)}}),this.$slots)}}),FormItemComponents["".concat(e,"SelectFormItem")]=(0,vue_1.defineComponent)({name:"".concat(e,"SelectFormItem"),props:{selectProps:SelectFormItem_1.default.props.selectProps,listProps:(0,vue_types_1.object)().def({}),value:SelectFormItem_1.default.props.value,rowKey:(0,vue_types_1.string)().def("id"),totalKey:(0,vue_types_1.string)().def("total"),dataKey:(0,vue_types_1.string)().def("records")},emits:["change"],data:function(){var t=this;return{inputValue:"",loading:!1,data:[],pagin:{current:1,pageSize:10,total:0},selectedRowKeys:this.value?[this.value]:[],selectedRows:this.value?this.data.find(function(e){return e[t.rowKey||"id"]===t.value}):[]}},watch:{"pagin.current":function(){this.$loadData()},"pagin.pageSize":function(){this.$loadData()},value:function(e){var t=this;this.selectedRowKeys=[e],this.selectedRows=[this.data.find(function(e){return e[t.rowKey||"id"]===t.value})]}},methods:{$loadData:function(){var t=this;this.loading=!0,(0,adherev_util_dict_1.default.value[e].value)(tslib_1.__assign({},this.pagin)).then(function(e){t.pagin=tslib_1.__assign(tslib_1.__assign({},t.pagin),{total:e[t.totalKey||"total"]}),t.data=e[t.dataKey||"records"],t.loading=!1}).catch(function(){t.loading=!1})},$getPagination:function(){var s=this;return{onChange:function(e,t){s.pagin=tslib_1.__assign(tslib_1.__assign({},s.pagin),{current:e,pageSize:t})},onShowSizeChange:function(e,t){s.pagin=tslib_1.__assign(tslib_1.__assign({},s.pagin),{current:e,pageSize:t})},total:this.pagin.total,current:this.pagin.current,pageSize:this.pagin.pageSize,showQuickJumper:!0}},$renderDropdownRender:function(){var i=this,e=this.inputValue?this.data.filter(function(e){var t;return-1!==(null==(t=null==(e=e[i.labelKey||"name"])?void 0:e.indexOf)?void 0:t.call(e,i.inputValue))}):this.data;return(0,_vue.createVNode)(AntdvFormItemNormalize_1.List,(0,_vue.mergeProps)({dataSource:e,loading:this.loading,pagination:this.$getPagination(),rowKey:this.rowKey||"id"},this.listProps,{renderItem:function(e,t){var s,r;return(0,_vue.createVNode)(adherev_ui_conditionalrender_1.default,{conditional:!(null==(r=i.listProps)||!r.renderItem)||i.$slots.renderItem},{default:(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[i.RadioWrap(e)]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[(null==(s=null==(r=null==i?void 0:i.listProps)?void 0:r.renderItem)?void 0:s.call(r,e))||(null==(r=null==(s=i.$slots)?void 0:s.renderItem)?void 0:r.call(s,e,t))])]),noMatch:(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[i.RadioWrap(e)]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[e])])})}}),null)},RadioWrap:function(e){var t=this,s=e.item,r=this.rowKey||"id";return(0,_vue.createVNode)(AntdvFormItemNormalize_1.Radio,{onChange:function(e){e.stopPropagation(),e.target.checked&&(t.selectedRowKeys=[s[r]],t.selectedRows=[tslib_1.__assign({},s)],t.$emit("change",s[r]))},checked:this.selectedRowKeys.includes(s[r])},null)}},mounted:function(){this.$loadData()},render:function(){var t=this;return(0,vue_1.h)(SelectFormItem_1.default,tslib_1.__assign(tslib_1.__assign({selectProps:tslib_1.__assign({dropdownRender:function(){return t.$renderDropdownRender()},filterOption:function(){return!1}},this.selectProps),value:this.value,dataSource:this.data.map(function(e){return{label:e[t.labelKey||"name"],value:e[t.rowKey||"id"]}})},this.$attrs),{onSearch:function(e){t.inputValue=e},onChange:function(e){return t.$emit("change",e)}}),this.$slots)}}),FormItemComponents["".concat(e,"MulitSelectFormItem")]=(0,vue_1.defineComponent)({name:"".concat(e,"MulitSelectFormItem"),props:{selectProps:MulitSelectFormItem_1.default.props.selectProps,listProps:(0,vue_types_1.object)().def({}),value:MulitSelectFormItem_1.default.props.value,rowKey:(0,vue_types_1.string)().def("id"),totalKey:(0,vue_types_1.string)().def("total"),dataKey:(0,vue_types_1.string)().def("records")},emits:["change"],data:function(){var s=this;return{inputValue:"",loading:!1,$data:new Map,pagin:{current:1,pageSize:10,total:0},selectedRowKeys:this.value||[],selectedRows:this.value?this.value.map(function(t){return s.$getDataSource().find(function(e){return e[s.rowKey||"id"]===t})}):[]}},watch:{"pagin.current":function(){this.$loadData()},"pagin.pageSize":function(){this.$loadData()},value:function(e){var s=this;this.selectedRowKeys=e,this.selectedRows=e?e.map(function(t){return s.$getDataSource().find(function(e){return e[s.rowKey||"id"]===t})}):[]}},methods:{$loadData:function(){var t=this;this.loading=!0,(0,adherev_util_dict_1.default.value[e].value)(tslib_1.__assign({},this.pagin)).then(function(e){t.pagin=tslib_1.__assign(tslib_1.__assign({},t.pagin),{total:e[t.totalKey||"total"]}),t.$data.$data.set(t.pagin.current,e[t.dataKey||"records"]),t.loading=!1}).catch(function(){t.loading=!1})},$getPagination:function(){var s=this;return{onChange:function(e,t){s.pagin=tslib_1.__assign(tslib_1.__assign({},s.pagin),{current:e,pageSize:t})},onShowSizeChange:function(e,t){s.pagin=tslib_1.__assign(tslib_1.__assign({},s.pagin),{current:e,pageSize:t})},total:this.pagin.total,current:this.pagin.current,pageSize:this.pagin.pageSize,showQuickJumper:!0}},$getDataSource:function(){return this.$data.$data.get(this.pagin.current)||[]},$filter:function(e,s){var t,r=this.rowKey||"id",e=e?(t=tslib_1.__spreadArray(tslib_1.__spreadArray([],this.selectedRowKeys,!0),s.map(function(e){return e[r]}),!0),tslib_1.__spreadArray(tslib_1.__spreadArray([],this.selectedRows,!0),s,!0)):(t=this.selectedRowKeys.filter(function(t){return!s.find(function(e){return e[r]===t})}),this.selectedRows.filter(function(t){return!s.find(function(e){return e[r]===t[r]})}));this.selectedRowKeys=t,this.selectedRows=e,this.$emit("change",t)},$renderDropdownRender:function(){var i=this,e=this.$getDataSource(),e=this.inputValue?e.filter(function(e){var t;return-1!==(null==(t=null==(e=e[i.labelKey||"name"])?void 0:e.indexOf)?void 0:t.call(e,i.inputValue))}):e;return(0,_vue.createVNode)(AntdvFormItemNormalize_1.List,(0,_vue.mergeProps)({dataSource:e,pagination:this.$getPagination(),loading:this.loading,rowKey:this.rowKey||"id"},this.listProps,{renderItem:function(e,t){var s,r;return(0,_vue.createVNode)(adherev_ui_conditionalrender_1.default,{conditional:!(null==(r=i.listProps)||!r.renderItem)||i.$slots.renderItem},{default:(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[i.CheckWrap(e)]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[(null==(s=null==(r=null==i?void 0:i.listProps)?void 0:r.renderItem)?void 0:s.call(r,e))||(null==(r=null==(s=i.$slots)?void 0:s.renderItem)?void 0:r.call(s,e,t))])]),noMatch:(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[i.CheckWrap(e)]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[e])])})}}),null)},CheckWrap:function(e){var t=this,s=e.item,r=this.rowKey||"id";return(0,_vue.createVNode)(AntdvFormItemNormalize_1.Checkbox,{onChange:function(e){e.stopPropagation(),e.target.checked?(t.selectedRowKeys=tslib_1.__spreadArray(tslib_1.__spreadArray([],t.selectedRowKeys,!0),[s[r]],!1),t.selectedRows=tslib_1.__spreadArray(tslib_1.__spreadArray([],t.selectedRows,!0),[tslib_1.__assign({},s)],!1)):(t.selectedRowKeys=t.selectedRowKeys.filter(function(e){return e!==s[r]}),t.selectedRows=t.selectedRows.filter(function(e){return e[r]!==s[r]})),t.$emit("change",tslib_1.__spreadArray([],t.selectedRowKeys,!0))},checked:this.selectedRowKeys.includes(s[r])},null)}},mounted:function(){this.$loadData()},render:function(){var s=this;return(0,vue_1.h)(MulitSelectFormItem_1.default,tslib_1.__assign({selectProps:tslib_1.__assign({dropdownRender:function(){return s.$renderDropdownRender()},filterOption:function(){return!1}},this.selectProps),value:this.value,dataSource:this.$getDataSource().map(function(e){return{label:e[s.labelKey||"name"],value:e[s.rowKey||"id"]}}),onSearch:function(e){s.inputValue=e},onChange:function(e){s.$emit("change",e),s.selectedRowKeys=e,s.selectedRows=e.map(function(t){return Array.from(s.$data.$data.values()).find(function(e){return e[s.rowKey||"id"]===t})})}},this.$attrs),this.$slots)}})}),FormItemComponents};
//# sourceMappingURL=List.js.map
