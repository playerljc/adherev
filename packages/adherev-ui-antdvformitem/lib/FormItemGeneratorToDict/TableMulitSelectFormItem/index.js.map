{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/TableMulitSelectFormItem/index.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar MulitSelectFormItem_1 = tslib_1.__importDefault(require(\"../MulitSelectFormItem\"));\nvar TableFormItem_1 = tslib_1.__importDefault(require(\"../TableFormItem\"));\nexports.default = (0, vue_1.defineComponent)({\n  name: 'TableMulitSelectFormItem',\n  props: {\n    selectProps: (0, vue_types_1.object)().def({}),\n    tableProps: (0, vue_types_1.object)().def({}),\n    value: (0, vue_types_1.array)().def([]),\n    dataSource: (0, vue_types_1.array)().def([]),\n    rowKey: (0, vue_types_1.string)().def('id'),\n    labelKey: (0, vue_types_1.string)().def('name')\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? this.value : [],\n      selectedRows: this.value ? this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = _value;\n      this.selectedRows = this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      });\n    }\n  },\n  methods: {\n    $renderDropdownRender: function $renderDropdownRender() {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (// @ts-ignore\n        (0, _vue.createVNode)(TableFormItem_1.default, {\n          \"tableProps\": tslib_1.__assign({\n            rowSelection: {\n              type: 'checkbox',\n              selectedRowKeys: this.selectedRowKeys,\n              selectedRows: this.selectedRows,\n              onChange: function onChange(selectedRowKeys, selectedRows) {\n                _this.selectedRowKeys = selectedRowKeys;\n                _this.selectedRows = selectedRows;\n                _this.$emit('change', selectedRowKeys.length ? selectedRowKeys : []);\n              }\n            },\n            dataSource: data\n          }, this.tableProps),\n          \"rowKey\": this.rowKey\n        }, null)\n      );\n    }\n  },\n  render: function render() {\n    var _this = this;\n    return (0, vue_1.h)(MulitSelectFormItem_1.default, tslib_1.__assign(tslib_1.__assign({}, this.$attrs), {\n      value: this.value,\n      dataSource: this.dataSource.map(function (t) {\n        return {\n          label: t[_this.labelKey || 'name'],\n          value: t[_this.rowKey || 'id']\n        };\n      }),\n      selectProps: tslib_1.__assign({\n        dropdownRender: function dropdownRender() {\n          return _this.$renderDropdownRender();\n        },\n        filterOption: function filterOption() {\n          return false;\n        }\n      }, this.selectProps),\n      onSearch: function onSearch(inputValue) {\n        _this.inputValue = inputValue;\n      },\n      onChange: function onChange(val) {\n        _this.$emit('change', val);\n        if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n      }\n    }), this.$slots);\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","vue_1","vue_types_1","MulitSelectFormItem_1","__importDefault","TableFormItem_1","default","defineComponent","name","props","selectProps","object","def","tableProps","array","dataSource","rowKey","string","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","map","t","find","_item","watch","_value","methods","$renderDropdownRender","filter","_b","_a","indexOf","call","createVNode","__assign","rowSelection","type","onChange","$emit","length","render","h","$attrs","label","dropdownRender","filterOption","onSearch","val","Array","isArray","$slots"],"mappings":"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"}