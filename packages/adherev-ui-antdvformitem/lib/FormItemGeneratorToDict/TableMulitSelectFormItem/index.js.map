{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/TableMulitSelectFormItem/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\n// TableMulitSelectFormItem\nvar MulitSelectFormItem_1 = tslib_1.__importDefault(require(\"../MulitSelectFormItem\"));\nvar TableFormItem_1 = tslib_1.__importDefault(require(\"../TableFormItem\"));\nexports.default = {\n  name: 'TableMulitSelectFormItem',\n  props: {\n    selectProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    tableProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    value: {\n      type: Array,\n      default: []\n    },\n    dataSource: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    rowKey: {\n      type: String,\n      default: 'id'\n    },\n    labelKey: {\n      type: String,\n      default: 'name'\n    }\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? this.value : [],\n      selectedRows: this.value ? this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = _value;\n      this.selectedRows = this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      });\n    }\n  },\n  methods: {\n    $renderDropdownRender: function $renderDropdownRender(h) {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (// @ts-ignore\n        h(TableFormItem_1.default, {\n          \"attrs\": {\n            \"tableProps\": tslib_1.__assign({\n              rowSelection: {\n                type: 'checkbox',\n                selectedRowKeys: this.selectedRowKeys,\n                selectedRows: this.selectedRows,\n                onChange: function onChange(selectedRowKeys, selectedRows) {\n                  _this.selectedRowKeys = selectedRowKeys;\n                  _this.selectedRows = selectedRows;\n                  _this.$emit('change', selectedRowKeys.length ? selectedRowKeys : []);\n                }\n              },\n              dataSource: data\n            }, this.tableProps),\n            \"rowKey\": this.rowKey\n          }\n        })\n      );\n    }\n  },\n  render: function render(h) {\n    var _this = this;\n    return h(MulitSelectFormItem_1.default, {\n      props: {\n        selectProps: tslib_1.__assign({\n          dropdownRender: function dropdownRender() {\n            return _this.$renderDropdownRender(h);\n          },\n          filterOption: function filterOption() {\n            return false;\n          }\n        }, this.selectProps),\n        value: this.value,\n        dataSource: this.dataSource.map(function (t) {\n          return {\n            label: t[_this.labelKey || 'name'],\n            value: t[_this.rowKey || 'id']\n          };\n        })\n      },\n      attrs: this.$attrs,\n      scopedSlots: this.$scopedSlots,\n      on: tslib_1.__assign(tslib_1.__assign({}, this.$listeners), {\n        search: function search(inputValue) {\n          _this.inputValue = inputValue;\n        },\n        change: function change(val) {\n          _this.$emit('change', val);\n          if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n        }\n      })\n    }, this.$slots.default);\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","MulitSelectFormItem_1","__importDefault","TableFormItem_1","default","name","props","selectProps","type","tableProps","Array","dataSource","rowKey","String","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","map","t","find","_item","watch","_value","methods","$renderDropdownRender","h","filter","_b","_a","indexOf","call","attrs","__assign","rowSelection","onChange","$emit","length","render","dropdownRender","filterOption","label","$attrs","scopedSlots","$scopedSlots","on","$listeners","search","change","val","isArray","$slots"],"mappings":"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"}