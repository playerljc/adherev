{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListSelectFormItem/index.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign } from \"tslib\";\nimport { defineComponent, h } from 'vue';\nimport { array, object, string } from 'vue-types';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport { Radio } from '../../AntdvFormItemNormalize';\nimport ListFormItem from '../ListFormItem';\nimport SelectFormItem from '../SelectFormItem';\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexport default defineComponent({\n  name: 'ListSelectFormItem',\n  props: {\n    selectProps: object().def({}),\n    listProps: object().def({}),\n    value: string().def(''),\n    dataSource: array().def([]),\n    rowKey: string().def('id'),\n    labelKey: string().def('name')\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? [this.value] : [],\n      selectedRows: this.value ? this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = [_value];\n      this.selectedRows = [this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      })];\n    }\n  },\n  methods: {\n    RadioWrap: function RadioWrap(_a) {\n      var _this = this;\n      var item = _a.item;\n      var rowKey = this.rowKey || 'id';\n      return _createVNode(Radio, {\n        \"onChange\": function onChange(e) {\n          e.stopPropagation();\n          var checked = e.target.checked;\n          if (checked) {\n            _this.selectedRowKeys = [item[rowKey]];\n            _this.selectedRows = [__assign({}, item)];\n            _this.$emit('change', item[rowKey]);\n          }\n        },\n        \"checked\": this.selectedRowKeys.includes(item[rowKey])\n      }, null);\n    },\n    $renderDropdownRender: function $renderDropdownRender() {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return _createVNode(ListFormItem, {\n        \"listProps\": __assign({\n          dataSource: data,\n          renderItem: function renderItem(item, index) {\n            var _a;\n            return (// @ts-ignore\n              _createVNode(ConditionalRender, {\n                \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem\n              }, {\n                default: function _default() {\n                  var _a, _b, _c, _d;\n                  return _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [_createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.RadioWrap(item)]), _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [((_b = (_a = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) === null || _b === void 0 ? void 0 : _b.call(_a, item)) || ((_d = (_c = _this.$slots) === null || _c === void 0 ? void 0 : _c.renderItem) === null || _d === void 0 ? void 0 : _d.call(_c, item, index))])]);\n                },\n                noMatch: function noMatch() {\n                  return _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [_createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.RadioWrap(item)]), _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [item])]);\n                }\n              })\n            );\n          }\n        }, this.listProps),\n        \"rowKey\": this.rowKey\n      }, null);\n    }\n  },\n  render: function render() {\n    var _this = this;\n    return h(SelectFormItem, __assign(__assign({}, this.$attrs), {\n      selectProps: __assign({\n        dropdownRender: function dropdownRender() {\n          return _this.$renderDropdownRender();\n        },\n        filterOption: function filterOption() {\n          return false;\n        }\n      }, this.selectProps),\n      value: this.value,\n      dataSource: this.dataSource.map(function (t) {\n        return {\n          label: t[_this.labelKey || 'name'],\n          value: t[_this.rowKey || 'id']\n        };\n      }),\n      onSearch: function onSearch(inputValue) {\n        _this.inputValue = inputValue;\n      },\n      onChange: function onChange(val) {\n        _this.$emit('change', val);\n        if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n      }\n    }), this.$slots);\n  }\n});"],"names":["_createVNode","__assign","defineComponent","h","array","object","string","ConditionalRender","Radio","ListFormItem","SelectFormItem","selectorPrefix","name","props","selectProps","def","listProps","value","dataSource","rowKey","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","find","t","watch","_value","methods","RadioWrap","_a","item","onChange","e","stopPropagation","target","checked","$emit","includes","$renderDropdownRender","filter","_b","indexOf","call","renderItem","index","conditional","$slots","default","_c","_d","class","concat","noMatch","render","$attrs","dropdownRender","filterOption","map","label","onSearch","val","Array","isArray","length"],"mappings":"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"}