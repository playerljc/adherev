{"version":3,"file":"AutoComplete.js","sources":["FormItemGeneratorToDict/Fields/AutoComplete.js"],"sourcesContent":["import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { __assign, __rest } from \"tslib\";\nimport { defineComponent } from 'vue';\nimport { number, object, oneOfType, string } from 'vue-types';\nimport Dict from '@baifendian/adherev-util-dict';\nimport AutoCompleteFormItem from '../AutoCompleteFormItem';\nvar FormItemComponents = {};\nexport default (function () {\n  // 名称以AutoComplete结尾的字典\n  var autoCompleteDictNames = Object.keys(Dict.handlers).filter(function (dictName) {\n    return dictName.endsWith('AutoComplete');\n  });\n  // 名称以DynamicAutoComplete结尾的字典\n  var autoCompleteDynamicDictNames = Object.keys(Dict.handlers).filter(function (dictName) {\n    return dictName.endsWith('DynamicAutoComplete');\n  });\n  // 静态的AutoComplete\n  autoCompleteDictNames.forEach(function (dictName) {\n    // SelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = defineComponent({\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: oneOfType([string(), number()]).def(''),\n        autoCompleteProps: object().def({}),\n        value: object().def({\n          inputValue: '',\n          selectValue: ''\n        })\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render() {\n        var _this = this;\n        var _a = this.$props,\n          cascadeParams = _a.cascadeParams,\n          props = __rest(_a, [\"cascadeParams\"]);\n        return (// @ts-ignore\n          _createVNode(AutoCompleteFormItem, _mergeProps({\n            \"dataSource\": this.dataSource\n          }, __assign(__assign({}, props), this.$attrs)), {\n            default: function _default() {\n              return [_this.$slots];\n            }\n          })\n        );\n      }\n    });\n  });\n  // 动态的AutoComplete\n  autoCompleteDynamicDictNames.forEach(function (dictName) {\n    // SelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = defineComponent({\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: oneOfType([string(), number()]).def(''),\n        autoCompleteProps: object().def({}),\n        value: object().def({\n          inputValue: '',\n          selectValue: ''\n        })\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = Dict.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render() {\n        var _this2 = this;\n        var _a = this.$props,\n          cascadeParams = _a.cascadeParams,\n          props = __rest(_a, [\"cascadeParams\"]);\n        return (// @ts-ignore\n          _createVNode(AutoCompleteFormItem, _mergeProps({\n            \"dataSource\": this.dataSource\n          }, __assign(__assign({}, props), this.$attrs)), {\n            default: function _default() {\n              return [_this2.$slots];\n            }\n          })\n        );\n      }\n    });\n  });\n  return FormItemComponents;\n});"],"names":["_createVNode","_mergeProps","__assign","__rest","defineComponent","number","object","oneOfType","string","Dict","AutoCompleteFormItem","FormItemComponents","autoCompleteDictNames","Object","keys","handlers","filter","dictName","endsWith","autoCompleteDynamicDictNames","forEach","concat","name","props","cascadeParams","def","autoCompleteProps","value","inputValue","selectValue","computed","dataSource","handler","Function","this","render","_this","_a","$props","$attrs","default","$slots","data","methods","$loadData","params","then","res","watch","val","mounted","_this2"],"mappings":"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"}