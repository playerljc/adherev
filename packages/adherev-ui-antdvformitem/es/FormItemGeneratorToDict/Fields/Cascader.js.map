{"version":3,"file":"Cascader.js","sources":["FormItemGeneratorToDict/Fields/Cascader.js"],"sourcesContent":["import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport Dict from '@baifendian/adherev-util-dict';\nimport CascaderFormItem from '../CascaderFormItem';\nimport CascaderLeafFormItem from '../CascaderLeafFormItem';\nvar FormItemComponents = {};\nexport default (function () {\n  // 名称以Cascader结尾的字典\n  var cascaderDictNames = Object.keys(Dict.handlers).filter(function (dictName) {\n    return dictName.endsWith('Cascader');\n  });\n  // 名称以DynamicCascader结尾的字典\n  var cascaderDynamicDictNames = Object.keys(Dict.handlers).filter(function (dictName) {\n    return dictName.endsWith('DynamicCascader');\n  });\n  // 静态的Cascader\n  cascaderDictNames.forEach(function (dictName) {\n    // CascaderFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = {\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        cascaderProps: CascaderFormItem.props.cascaderProps,\n        value: CascaderFormItem.props.value\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render(h) {\n        return h(CascaderFormItem, {\n          props: {\n            cascaderProps: this.cascaderProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n    // treeCascaderLeafFormItem\n    FormItemComponents[\"\".concat(dictName, \"LeafFormItem\")] = {\n      name: \"\".concat(dictName, \"LeafFormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        cascaderProps: CascaderLeafFormItem.props.cascaderProps,\n        value: CascaderLeafFormItem.props.value\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render(h) {\n        return h(CascaderLeafFormItem, {\n          props: {\n            cascaderProps: this.cascaderProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n  });\n  // 动态的Cascader\n  cascaderDynamicDictNames.forEach(function (dictName) {\n    // CascaderFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = {\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        cascaderProps: CascaderFormItem.props.cascaderProps,\n        value: CascaderFormItem.props.value\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = Dict.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render(h) {\n        return h(CascaderFormItem, {\n          props: {\n            cascaderProps: this.cascaderProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n    // treeCascaderLeafFormItem\n    FormItemComponents[\"\".concat(dictName, \"LeafFormItem\")] = {\n      name: \"\".concat(dictName, \"LeafFormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        cascaderProps: CascaderLeafFormItem.props.cascaderProps,\n        value: CascaderLeafFormItem.props.value\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = Dict.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render(h) {\n        return h(CascaderLeafFormItem, {\n          props: {\n            cascaderProps: this.cascaderProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n  });\n  return FormItemComponents;\n});"],"names":["Dict","CascaderFormItem","CascaderLeafFormItem","FormItemComponents","cascaderDictNames","Object","keys","handlers","filter","dictName","endsWith","cascaderDynamicDictNames","forEach","concat","name","props","cascadeParams","type","String","Number","cascaderProps","value","computed","dataSource","handler","Function","this","render","h","attrs","$attrs","scopedSlots","$scopedSlots","on","$listeners","$slots","default","data","methods","$loadData","params","then","res","watch","val","mounted"],"mappings":"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"}