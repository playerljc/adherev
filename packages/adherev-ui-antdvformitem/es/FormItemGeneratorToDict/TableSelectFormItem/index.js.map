{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/TableSelectFormItem/index.js"],"sourcesContent":["import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign } from \"tslib\";\n// TableSelectFormItem\nimport SelectFormItem from '../SelectFormItem';\nimport TableFormItem from '../TableFormItem';\nexport default {\n  name: 'TableSelectFormItem',\n  props: {\n    selectProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    tableProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    dataSource: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    rowKey: {\n      type: String,\n      default: 'id'\n    },\n    labelKey: {\n      type: String,\n      default: 'name'\n    }\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? [this.value] : [],\n      selectedRows: this.value ? this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = [_value];\n      this.selectedRows = [this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      })];\n    }\n  },\n  methods: {\n    $renderDropdownRender: function $renderDropdownRender(h) {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (// @ts-ignore\n        h(TableFormItem, {\n          \"attrs\": {\n            \"tableProps\": __assign({\n              rowSelection: {\n                type: 'radio',\n                selectedRowKeys: this.selectedRowKeys,\n                selectedRows: this.selectedRows,\n                onChange: function onChange(selectedRowKeys, selectedRows) {\n                  _this.selectedRowKeys = selectedRowKeys;\n                  _this.selectedRows = selectedRows;\n                  _this.$emit('change', selectedRowKeys.length ? selectedRowKeys[0] : '');\n                }\n              },\n              dataSource: data\n            }, this.tableProps),\n            \"rowKey\": this.rowKey\n          }\n        })\n      );\n    }\n  },\n  render: function render(h) {\n    var _this = this;\n    return h(SelectFormItem, {\n      props: {\n        selectProps: __assign({\n          dropdownRender: function dropdownRender() {\n            return _this.$renderDropdownRender(h);\n          },\n          filterOption: function filterOption() {\n            return false;\n          }\n        }, this.selectProps),\n        value: this.value,\n        dataSource: this.dataSource.map(function (t) {\n          return {\n            label: t[_this.labelKey || 'name'],\n            value: t[_this.rowKey || 'id']\n          };\n        })\n      },\n      attrs: this.$attrs,\n      scopedSlots: this.$scopedSlots,\n      on: __assign(__assign({}, this.$listeners), {\n        search: function search(inputValue) {\n          _this.inputValue = inputValue;\n        },\n        change: function change(val) {\n          _this.$emit('change', val);\n          if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n        }\n      })\n    }, this.$slots.default);\n  }\n};"],"names":["__assign","SelectFormItem","TableFormItem","name","props","selectProps","type","Object","default","tableProps","value","String","dataSource","Array","rowKey","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","find","t","watch","_value","methods","$renderDropdownRender","h","filter","_b","_a","indexOf","call","attrs","rowSelection","onChange","$emit","length","render","dropdownRender","filterOption","map","label","$attrs","scopedSlots","$scopedSlots","on","$listeners","search","change","val","isArray","$slots"],"mappings":"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"}