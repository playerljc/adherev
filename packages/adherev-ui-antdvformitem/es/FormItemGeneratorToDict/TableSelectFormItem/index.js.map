{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/TableSelectFormItem/index.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign } from \"tslib\";\nimport { defineComponent, h } from 'vue';\nimport { array, object, string } from 'vue-types';\nimport SelectFormItem from '../SelectFormItem';\nimport TableFormItem from '../TableFormItem';\nexport default defineComponent({\n  name: 'TableSelectFormItem',\n  props: {\n    selectProps: object().def({}),\n    tableProps: object().def({}),\n    value: string().def(''),\n    dataSource: array().def([]),\n    rowKey: string().def('id'),\n    labelKey: string().def('name')\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? [this.value] : [],\n      selectedRows: this.value ? this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = [_value];\n      this.selectedRows = [this.dataSource.find(function (t) {\n        return t[_this.rowKey || 'id'] === _this.value;\n      })];\n    }\n  },\n  methods: {\n    $renderDropdownRender: function $renderDropdownRender() {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (// @ts-ignore\n        _createVNode(TableFormItem, {\n          \"tableProps\": __assign({\n            rowSelection: {\n              type: 'radio',\n              selectedRowKeys: this.selectedRowKeys,\n              selectedRows: this.selectedRows,\n              onChange: function onChange(selectedRowKeys, selectedRows) {\n                _this.selectedRowKeys = selectedRowKeys;\n                _this.selectedRows = selectedRows;\n                _this.$emit('change', selectedRowKeys.length ? selectedRowKeys[0] : '');\n              }\n            },\n            dataSource: data\n          }, this.tableProps),\n          \"rowKey\": this.rowKey\n        }, null)\n      );\n    }\n  },\n  render: function render() {\n    var _this = this;\n    return h(SelectFormItem, __assign(__assign({\n      selectProps: __assign({\n        dropdownRender: function dropdownRender() {\n          return _this.$renderDropdownRender();\n        },\n        filterOption: function filterOption() {\n          return false;\n        }\n      }, this.selectProps),\n      value: this.value,\n      dataSource: this.dataSource.map(function (t) {\n        return {\n          label: t[_this.labelKey || 'name'],\n          value: t[_this.rowKey || 'id']\n        };\n      })\n    }, this.$attrs), {\n      onSearch: function onSearch(inputValue) {\n        _this.inputValue = inputValue;\n      },\n      onChange: function onChange(val) {\n        _this.$emit('change', val);\n        if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n      }\n    }), this.$slots);\n  }\n});"],"names":["_createVNode","__assign","defineComponent","h","array","object","string","SelectFormItem","TableFormItem","name","props","selectProps","def","tableProps","value","dataSource","rowKey","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","find","t","watch","_value","methods","$renderDropdownRender","filter","_b","_a","indexOf","call","rowSelection","type","onChange","$emit","length","render","dropdownRender","filterOption","map","label","$attrs","onSearch","val","Array","isArray","$slots"],"mappings":"OAAwBA,2BAAyB,KAAL,YACrC,yCACA,+CACA,2CACA,6CACA,yCACEC,QAAuB,KAAP,eAChBC,gBAAiBC,CAAc,KAAL,aAC1BC,MAAOC,OAAQC,MAAyB,KAAX,mBAC/BC,mBAAoB,2BACpBC,kBAAmB,kCACXN,gBAAgB,CAC7BO,KAAM,sBACNC,MAAO,CACLC,YAAaN,OAAO,EAAEO,IAAI,EAAE,EAC5BC,WAAYR,OAAO,EAAEO,IAAI,EAAE,EAC3BE,MAAOR,OAAO,EAAEM,IAAI,EAAE,EACtBG,WAAYX,MAAM,EAAEQ,IAAI,EAAE,EAC1BI,OAAQV,OAAO,EAAEM,IAAI,IAAI,EACzBK,SAAUX,OAAO,EAAEM,IAAI,MAAM,CAC/B,EACAM,MAAO,CAAC,UACRC,KAAM,WACJ,IAAIC,EAAQC,KACZ,MAAO,CACLC,WAAY,GACZC,gBAAiBF,KAAKP,MAAQ,CAACO,KAAKP,OAAS,GAC7CU,aAAcH,KAAKP,MAAQO,KAAKN,WAAWU,KAAK,SAAUC,GACxD,OAAOA,EAAEN,EAAMJ,QAAU,QAAUI,EAAMN,KAC3C,CAAC,EAAI,EACP,CACF,EACAa,MAAO,CACLb,MAAO,SAAec,GACpB,IAAIR,EAAQC,KACZA,KAAKE,gBAAkB,CAACK,GACxBP,KAAKG,aAAe,CAACH,KAAKN,WAAWU,KAAK,SAAUC,GAClD,OAAOA,EAAEN,EAAMJ,QAAU,QAAUI,EAAMN,KAC3C,CAAC,EACH,CACF,EACAe,QAAS,CACPC,sBAAuB,WACrB,IAAIV,EAAQC,KACRF,EAAOE,KAAKC,WAAaD,KAAKN,WAAWgB,OAAO,SAAUL,GAC5D,IAAQM,EACR,MAA0K,CAAC,KAAnK,OAACA,EAAK,OAACC,EAAKP,EAAEN,EAAMH,UAAY,SAAqC,KAAA,EAASgB,EAAGC,SAAqC,KAAA,EAASF,EAAGG,KAAKF,EAAIb,EAAME,UAAU,EACrK,CAAC,EAAID,KAAKN,WACV,OACEf,aAAaQ,cAAe,CAC1BK,WAAcZ,SAAS,CACrBmC,aAAc,CACZC,KAAM,QACNd,gBAAiBF,KAAKE,gBACtBC,aAAcH,KAAKG,aACnBc,SAAU,SAAkBf,EAAiBC,GAC3CJ,EAAMG,gBAAkBA,EACxBH,EAAMI,aAAeA,EACrBJ,EAAMmB,MAAM,SAAUhB,EAAgBiB,OAASjB,EAAgB,GAAK,EAAE,CACxE,CACF,EACAR,WAAYI,CACd,EAAGE,KAAKR,UAAU,EAClBG,OAAUK,KAAKL,MACjB,EAAG,IACL,CACF,CACF,EACAyB,OAAQ,WACN,IAAIrB,EAAQC,KACZ,OAAOlB,EAAEI,eAAgBN,SAASA,SAAS,CACzCU,YAAaV,SAAS,CACpByC,eAAgB,WACd,OAAOtB,EAAMU,sBAAsB,CACrC,EACAa,aAAc,WACZ,MAAO,CAAA,CACT,CACF,EAAGtB,KAAKV,WAAW,EACnBG,MAAOO,KAAKP,MACZC,WAAYM,KAAKN,WAAW6B,IAAI,SAAUlB,GACxC,MAAO,CACLmB,MAAOnB,EAAEN,EAAMH,UAAY,QAC3BH,MAAOY,EAAEN,EAAMJ,QAAU,KAC3B,CACF,CAAC,CACH,EAAGK,KAAKyB,MAAM,EAAG,CACfC,SAAU,SAAkBzB,GAC1BF,EAAME,WAAaA,CACrB,EACAgB,SAAU,SAAkBU,GAC1B5B,EAAMmB,MAAM,SAAUS,CAAG,EACpBA,IAAOC,CAAAA,MAAMC,QAAQF,CAAG,GAAMA,EAAIR,UAAQpB,EAAME,WAAa,GACpE,CACF,CAAC,EAAGD,KAAK8B,MAAM,CACjB,CACF,CAAC"}