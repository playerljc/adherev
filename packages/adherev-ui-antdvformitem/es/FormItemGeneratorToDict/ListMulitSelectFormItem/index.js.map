{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListMulitSelectFormItem/index.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport { __assign, __spreadArray } from \"tslib\";\nimport { defineComponent, h } from 'vue';\nimport { array, object, string } from 'vue-types';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport { Checkbox } from '../../AntdvFormItemNormalize';\nimport ListFormItem from '../ListFormItem';\nimport MulitSelectFormItem from '../MulitSelectFormItem';\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexport default defineComponent({\n  name: 'ListMulitSelectFormItem',\n  props: {\n    selectProps: object().def({}),\n    listProps: object().def({}),\n    value: array().def([]),\n    dataSource: array().def([]),\n    rowKey: string().def('id'),\n    labelKey: string().def('name')\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? this.value : [],\n      selectedRows: this.value ? this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = _value;\n      this.selectedRows = this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      });\n    }\n  },\n  methods: {\n    CheckWrap: function CheckWrap(_a) {\n      var _this = this;\n      var item = _a.item;\n      var rowKey = this.rowKey || 'id';\n      return _createVNode(Checkbox, {\n        \"onChange\": function onChange(e) {\n          e.stopPropagation();\n          var checked = e.target.checked;\n          if (checked) {\n            _this.selectedRowKeys = __spreadArray(__spreadArray([], _this.selectedRowKeys, true), [item[rowKey]], false);\n            _this.selectedRows = __spreadArray(__spreadArray([], _this.selectedRows, true), [__assign({}, item)], false);\n            _this.$emit('change', __spreadArray([], _this.selectedRowKeys, true));\n          } else {\n            _this.selectedRowKeys = _this.selectedRowKeys.filter(function (key) {\n              return key !== item[rowKey];\n            });\n            _this.selectedRows = _this.selectedRows.filter(function (row) {\n              return row[rowKey] !== item[rowKey];\n            });\n            _this.$emit('change', __spreadArray([], _this.selectedRowKeys, true));\n          }\n        },\n        \"checked\": this.selectedRowKeys.includes(item[rowKey])\n      }, null);\n    },\n    $renderDropdownRender: function $renderDropdownRender() {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return _createVNode(ListFormItem, {\n        \"listProps\": __assign({\n          dataSource: data,\n          renderItem: function renderItem(item, index) {\n            var _a;\n            return (// @ts-ignore\n              _createVNode(ConditionalRender, {\n                \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem\n              }, {\n                default: function _default() {\n                  var _a, _b, _c, _d;\n                  return _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [_createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.CheckWrap(item)]), _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [((_b = (_a = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) === null || _b === void 0 ? void 0 : _b.call(_a, item)) || ((_d = (_c = _this.$slots) === null || _c === void 0 ? void 0 : _c.renderItem) === null || _d === void 0 ? void 0 : _d.call(_c, item, index))])]);\n                },\n                noMatch: function noMatch() {\n                  return _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                  }, [_createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                  }, [_this.CheckWrap(item)]), _createVNode(\"div\", {\n                    \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                  }, [item])]);\n                }\n              })\n            );\n          }\n        }, this.listProps),\n        \"rowKey\": this.rowKey\n      }, null);\n    }\n  },\n  render: function render() {\n    var _this = this;\n    return h(MulitSelectFormItem, __assign(__assign({\n      selectProps: __assign({\n        dropdownRender: function dropdownRender() {\n          return _this.$renderDropdownRender();\n        },\n        filterOption: function filterOption() {\n          return false;\n        }\n      }, this.selectProps),\n      value: this.value,\n      dataSource: this.dataSource.map(function (t) {\n        return {\n          label: t[_this.labelKey || 'name'],\n          value: t[_this.rowKey || 'id']\n        };\n      })\n    }, this.$attrs), {\n      onSearch: function onSearch(inputValue) {\n        _this.inputValue = inputValue;\n      },\n      onChange: function onChange(val) {\n        _this.$emit('change', val);\n        if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n      }\n    }), this.$slots);\n  }\n});"],"names":["_createVNode","__assign","__spreadArray","defineComponent","h","array","object","string","ConditionalRender","Checkbox","ListFormItem","MulitSelectFormItem","selectorPrefix","name","props","selectProps","def","listProps","value","dataSource","rowKey","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","map","t","find","_item","watch","_value","methods","CheckWrap","_a","item","onChange","e","stopPropagation","target","checked","filter","key","row","$emit","includes","$renderDropdownRender","_b","indexOf","call","renderItem","index","conditional","$slots","default","_c","_d","class","concat","noMatch","render","dropdownRender","filterOption","label","$attrs","onSearch","val","Array","isArray","length"],"mappings":"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"}