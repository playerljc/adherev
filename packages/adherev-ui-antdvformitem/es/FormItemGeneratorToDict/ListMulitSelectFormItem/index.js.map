{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListMulitSelectFormItem/index.js"],"sourcesContent":["import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport { __assign, __spreadArray } from \"tslib\";\n// ListMulitSelectFormItem\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport { Checkbox } from '../../AntdvFormItemNormalize';\nimport ListFormItem from '../ListFormItem';\nimport MulitSelectFormItem from '../MulitSelectFormItem';\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexport default {\n  name: 'ListMulitSelectFormItem',\n  props: {\n    selectProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    listProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    value: {\n      type: Array,\n      default: []\n    },\n    dataSource: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    rowKey: {\n      type: String,\n      default: 'id'\n    },\n    labelKey: {\n      type: String,\n      default: 'name'\n    }\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      inputValue: '',\n      selectedRowKeys: this.value ? this.value : [],\n      selectedRows: this.value ? this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = _value;\n      this.selectedRows = this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      });\n    }\n  },\n  methods: {\n    CheckWrap: function CheckWrap(h, item) {\n      var _this = this;\n      var rowKey = this.rowKey || 'id';\n      return h(Checkbox, {\n        \"on\": {\n          \"change\": function change(e) {\n            e.stopPropagation();\n            var checked = e.target.checked;\n            if (checked) {\n              _this.selectedRowKeys = __spreadArray(__spreadArray([], _this.selectedRowKeys, true), [item[rowKey]], false);\n              _this.selectedRows = __spreadArray(__spreadArray([], _this.selectedRows, true), [__assign({}, item)], false);\n              _this.$emit('change', __spreadArray([], _this.selectedRowKeys, true));\n            } else {\n              _this.selectedRowKeys = _this.selectedRowKeys.filter(function (key) {\n                return key !== item[rowKey];\n              });\n              _this.selectedRows = _this.selectedRows.filter(function (row) {\n                return row[rowKey] !== item[rowKey];\n              });\n              _this.$emit('change', __spreadArray([], _this.selectedRowKeys, true));\n            }\n          }\n        },\n        \"attrs\": {\n          \"checked\": this.selectedRowKeys.includes(item[rowKey])\n        }\n      });\n    },\n    $renderDropdownRender: function $renderDropdownRender(h) {\n      var _this = this;\n      var data = this.inputValue ? this.dataSource.filter(function (t) {\n        var _a, _b;\n        return ((_b = (_a = t[_this.labelKey || 'name']) === null || _a === void 0 ? void 0 : _a.indexOf) === null || _b === void 0 ? void 0 : _b.call(_a, _this.inputValue)) !== -1;\n      }) : this.dataSource;\n      return (// @ts-ignore\n        h(ListFormItem, {\n          \"attrs\": {\n            \"listProps\": __assign(__assign({\n              dataSource: data\n            }, this.listProps), {\n              renderItem: function renderItem(item, index) {\n                var _a, _b, _c;\n                return h(ConditionalRender, {\n                  \"attrs\": {\n                    \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem || _this.$scopedSlots.renderItem\n                  }\n                }, [h(\"div\", {\n                  \"slot\": \"noMatch\",\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                }, [h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                }, [_this.CheckWrap(h, item)]), h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                }, [item])]), h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                }, [h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                }, [_this.CheckWrap(h, item)]), h(\"div\", {\n                  \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                }, [((_c = (_b = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _b === void 0 ? void 0 : _b.renderItem) === null || _c === void 0 ? void 0 : _c.call(_b, item)) || _this.$slots.renderItem || _this.$scopedSlots.renderItem(item, index)])])]);\n              }\n            }),\n            \"rowKey\": this.rowKey\n          }\n        })\n      );\n    }\n  },\n  render: function render(h) {\n    var _this = this;\n    return h(MulitSelectFormItem, {\n      props: {\n        selectProps: __assign({\n          dropdownRender: function dropdownRender() {\n            return _this.$renderDropdownRender(h);\n          },\n          filterOption: function filterOption() {\n            return false;\n          }\n        }, this.selectProps),\n        value: this.value,\n        dataSource: this.dataSource.map(function (t) {\n          return {\n            label: t[_this.labelKey || 'name'],\n            value: t[_this.rowKey || 'id']\n          };\n        })\n      },\n      attrs: this.$attrs,\n      scopedSlots: this.$scopedSlots,\n      on: __assign(__assign({}, this.$listeners), {\n        search: function search(inputValue) {\n          _this.inputValue = inputValue;\n        },\n        change: function change(val) {\n          _this.$emit('change', val);\n          if (!val || Array.isArray(val) && !val.length) _this.inputValue = '';\n        }\n      })\n    }, this.$slots.default);\n  }\n};"],"names":["__assign","__spreadArray","ConditionalRender","Checkbox","ListFormItem","MulitSelectFormItem","selectorPrefix","name","props","selectProps","type","Object","default","listProps","value","Array","dataSource","rowKey","String","labelKey","emits","data","_this","this","inputValue","selectedRowKeys","selectedRows","map","t","find","_item","watch","_value","methods","CheckWrap","h","item","on","change","e","stopPropagation","target","checked","filter","key","row","$emit","attrs","includes","$renderDropdownRender","_b","_a","indexOf","call","renderItem","index","_c","conditional","$slots","$scopedSlots","slot","class","concat","render","dropdownRender","filterOption","label","$attrs","scopedSlots","$listeners","search","val","isArray","length"],"mappings":"MAAO,wCACA,yCACA,+CACA,2CACA,6CACA,8CACA,8CACEA,SAAUC,aAA4B,KAAP,eAEjCC,sBAAuB,kDACrBC,QAA8C,KAA9B,sCAClBC,iBAAkB,yBAClBC,wBAAyB,yBAChC,IAAIC,eAAiB,wCACN,CACbC,KAAM,0BACNC,MAAO,CACLC,YAAa,CACXC,KAAMC,OACNC,QAAS,WACP,MAAO,EACT,CACF,EACAC,UAAW,CACTH,KAAMC,OACNC,QAAS,WACP,MAAO,EACT,CACF,EACAE,MAAO,CACLJ,KAAMK,MACNH,QAAS,EACX,EACAI,WAAY,CACVN,KAAMK,MACNH,QAAS,WACP,MAAO,EACT,CACF,EACAK,OAAQ,CACNP,KAAMQ,OACNN,QAAS,IACX,EACAO,SAAU,CACRT,KAAMQ,OACNN,QAAS,MACX,CACF,EACAQ,MAAO,CAAC,UACRC,KAAM,WACJ,IAAIC,EAAQC,KACZ,MAAO,CACLC,WAAY,GACZC,gBAAiBF,KAAKT,OAAqB,GAC3CY,aAAcH,KAAKT,MAAQS,KAAKT,MAAMa,IAAI,SAAUC,GAClD,OAAON,EAAMN,WAAWa,KAAK,SAAUC,GACrC,OAAOA,EAAMR,EAAML,QAAU,QAAUW,CACzC,CAAC,CACH,CAAC,EAAI,EACP,CACF,EACAG,MAAO,CACLjB,MAAO,SAAekB,GACpB,IAAIV,EAAQC,KACZA,KAAKE,gBAAkBO,EACvBT,KAAKG,aAAeH,KAAKT,MAAMa,IAAI,SAAUC,GAC3C,OAAON,EAAMN,WAAWa,KAAK,SAAUC,GACrC,OAAOA,EAAMR,EAAML,QAAU,QAAUW,CACzC,CAAC,CACH,CAAC,CACH,CACF,EACAK,QAAS,CACPC,UAAW,SAAmBC,EAAGC,GAC/B,IAAId,EAAQC,KACRN,EAASM,KAAKN,QAAU,KAC5B,OAAOkB,EAAEhC,SAAU,CACjBkC,GAAM,CACJC,OAAU,SAAgBC,GACxBA,EAAEC,gBAAgB,EACJD,EAAEE,OAAOC,SAErBpB,EAAMG,gBAAkBxB,cAAcA,cAAc,GAAIqB,EAAMG,gBAAiB,CAAA,CAAI,EAAG,CAACW,EAAKnB,IAAU,CAAA,CAAK,EAC3GK,EAAMI,aAAezB,cAAcA,cAAc,GAAIqB,EAAMI,aAAc,CAAA,CAAI,EAAG,CAAC1B,SAAS,GAAIoC,CAAI,GAAI,CAAA,CAAK,IAG3Gd,EAAMG,gBAAkBH,EAAMG,gBAAgBkB,OAAO,SAAUC,GAC7D,OAAOA,IAAQR,EAAKnB,EACtB,CAAC,EACDK,EAAMI,aAAeJ,EAAMI,aAAaiB,OAAO,SAAUE,GACvD,OAAOA,EAAI5B,KAAYmB,EAAKnB,EAC9B,CAAC,GACDK,EAAMwB,MAAM,SAAU7C,cAAc,GAAIqB,EAAMG,gBAAiB,CAAA,CAAI,CAAC,CAExE,CACF,EACAsB,MAAS,CACPL,QAAWnB,KAAKE,gBAAgBuB,SAASZ,EAAKnB,EAAO,CACvD,CACF,CAAC,CACH,EACAgC,sBAAuB,SAA+Bd,GACpD,IAAIb,EAAQC,KACRF,EAAOE,KAAKC,WAAaD,KAAKP,WAAW2B,OAAO,SAAUf,GAC5D,IAAQsB,EACR,MAA0K,CAAC,KAAnK,OAACA,EAAK,OAACC,EAAKvB,EAAEN,EAAMH,UAAY,SAAqC,KAAA,EAASgC,EAAGC,SAAqC,KAAA,EAASF,EAAGG,KAAKF,EAAI7B,EAAME,UAAU,EACrK,CAAC,EAAID,KAAKP,WACV,OACEmB,EAAE/B,aAAc,CACd2C,MAAS,CACPlC,UAAab,SAASA,SAAS,CAC7BgB,WAAYK,CACd,EAAGE,KAAKV,SAAS,EAAG,CAClByC,WAAY,SAAoBlB,EAAMmB,GACpC,IAAQL,EAAIM,EACZ,OAAOrB,EAAEjC,kBAAmB,CAC1B6C,MAAS,CACPU,YAAe,EAAG,OAACN,EAAK7B,EAAMT,YAAgDsC,CAAAA,EAAGG,aAAehC,EAAMoC,OAAOJ,YAAchC,EAAMqC,aAAaL,UAChJ,CACF,EAAG,CAACnB,EAAE,MAAO,CACXyB,KAAQ,UACRC,MAAS,GAAGC,OAAOxD,eAAgB,gBAAgB,CACrD,EAAG,CAAC6B,EAAE,MAAO,CACX0B,MAAS,GAAGC,OAAOxD,eAAgB,sBAAsB,CAC3D,EAAG,CAACgB,EAAMY,UAAUC,EAAGC,CAAI,EAAE,EAAGD,EAAE,MAAO,CACvC0B,MAAS,GAAGC,OAAOxD,eAAgB,qBAAqB,CAC1D,EAAG,CAAC8B,EAAK,EAAE,EAAGD,EAAE,MAAO,CACrB0B,MAAS,GAAGC,OAAOxD,eAAgB,gBAAgB,CACrD,EAAG,CAAC6B,EAAE,MAAO,CACX0B,MAAS,GAAGC,OAAOxD,eAAgB,sBAAsB,CAC3D,EAAG,CAACgB,EAAMY,UAAUC,EAAGC,CAAI,EAAE,EAAGD,EAAE,MAAO,CACvC0B,MAAS,GAAGC,OAAOxD,eAAgB,qBAAqB,CAC1D,EAAG,EAAE,OAACkD,EAAK,OAACN,EAAK5B,MAAAA,EAAqC,KAAA,EAASA,EAAMT,WAAuC,KAAA,EAASqC,EAAGI,YAAwC,KAAA,EAASE,EAAGH,KAAKH,EAAId,CAAI,IAAMd,EAAMoC,OAAOJ,YAAchC,EAAMqC,aAAaL,WAAWlB,EAAMmB,CAAK,EAAE,EAAE,EAAE,CAC3Q,CACF,CAAC,EACDtC,OAAUM,KAAKN,MACjB,CACF,CACF,CACF,CACF,EACA8C,OAAQ,SAAgB5B,GACtB,IAAIb,EAAQC,KACZ,OAAOY,EAAE9B,oBAAqB,CAC5BG,MAAO,CACLC,YAAaT,SAAS,CACpBgE,eAAgB,WACd,OAAO1C,EAAM2B,sBAAsBd,CAAC,CACtC,EACA8B,aAAc,WACZ,MAAO,CAAA,CACT,CACF,EAAG1C,KAAKd,WAAW,EACnBK,MAAOS,KAAKT,MACZE,WAAYO,KAAKP,WAAWW,IAAI,SAAUC,GACxC,MAAO,CACLsC,MAAOtC,EAAEN,EAAMH,UAAY,QAC3BL,MAAOc,EAAEN,EAAML,QAAU,KAC3B,CACF,CAAC,CACH,EACA8B,MAAOxB,KAAK4C,OACZC,YAAa7C,KAAKoC,aAClBtB,GAAIrC,SAASA,SAAS,GAAIuB,KAAK8C,UAAU,EAAG,CAC1CC,OAAQ,SAAgB9C,GACtBF,EAAME,WAAaA,CACrB,EACAc,OAAQ,SAAgBiC,GACtBjD,EAAMwB,MAAM,SAAUyB,CAAG,EACpBA,IAAOxD,CAAAA,MAAMyD,QAAQD,CAAG,GAAMA,EAAIE,UAAQnD,EAAME,WAAa,GACpE,CACF,CAAC,CACH,EAAGD,KAAKmC,OAAO9C,OAAO,CACxB,CACF"}