{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/AutoCompleteFormItem/index.js"],"sourcesContent":["import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport { __assign } from \"tslib\";\nimport { computed, defineComponent } from 'vue';\nimport { array, object } from 'vue-types';\nimport { AutoComplete } from '../../AntdvFormItemNormalize';\nexport default defineComponent({\n  name: 'AutoCompleteFormItem',\n  props: {\n    autoCompleteProps: object().def({}),\n    value: object().def({\n      inputValue: '',\n      selectValue: ''\n    }),\n    dataSource: array().def([])\n  },\n  setup: function setup(props, _a) {\n    var attrs = _a.attrs,\n      slots = _a.slots,\n      emit = _a.emit;\n    // 选择Select的时候调用\n    var onSelect = function onSelect(selectValue) {\n      var _a;\n      if (attrs === null || attrs === void 0 ? void 0 : attrs.onChange) {\n        // @ts-ignore\n        (_a = attrs === null || attrs === void 0 ? void 0 : attrs.onChange) === null || _a === void 0 ? void 0 : _a.call(attrs, {\n          inputValue: '',\n          selectValue: selectValue\n        });\n      }\n    };\n    // 每次输入的时候调用\n    var onSearch = function onSearch(searchText) {\n      var _a;\n      if (attrs === null || attrs === void 0 ? void 0 : attrs.onChange) {\n        // @ts-ignore\n        (_a = attrs === null || attrs === void 0 ? void 0 : attrs.onChange) === null || _a === void 0 ? void 0 : _a.call(attrs, {\n          inputValue: searchText.trim(),\n          selectValue: undefined\n        });\n      }\n    };\n    var options = computed(function () {\n      var _a, _b;\n      if (!props.value.inputValue) return props.dataSource || [];\n      return ((_b = (_a = props === null || props === void 0 ? void 0 : props.dataSource) === null || _a === void 0 ? void 0 : _a.filter) === null || _b === void 0 ? void 0 : _b.call(_a, function (t) {\n        return t.label.includes(props.value.inputValue);\n      })) || [];\n    });\n    var value = computed(function () {\n      var _a, _b;\n      if (props.value.inputValue) return props.value.inputValue;\n      if (props.value.selectValue) return (_b = (_a = props === null || props === void 0 ? void 0 : props.dataSource) === null || _a === void 0 ? void 0 : _a.find(function (t) {\n        return t.value === props.value.selectValue;\n      })) === null || _b === void 0 ? void 0 : _b.label;\n    });\n    return function () {\n      return _createVNode(AutoComplete, _mergeProps({\n        \"options\": options.value,\n        \"filterOption\": false,\n        \"onSelect\": onSelect,\n        \"onSearch\": onSearch\n      }, __assign(__assign({}, props), attrs), {\n        \"value\": value.value\n      }), null);\n    };\n  }\n});"],"names":["_createVNode","_mergeProps","__assign","computed","defineComponent","array","object","AutoComplete","name","props","autoCompleteProps","def","value","inputValue","selectValue","dataSource","setup","_a","onSelect","attrs","onChange","call","onSearch","searchText","trim","undefined","options","slots","emit","_b","filter","t","label","includes","find","filterOption"],"mappings":"OAAwBA,4BAA4BC,yBAAwB,KAAL,YAChE,0CACA,2CACA,+CACA,6CACA,8CACA,0CACEC,QAAuB,KAAP,eAChBC,SAAUC,eAA4B,KAAL,aACjCC,MAAOC,MAAyB,KAAX,mBACrBC,YAAkD,KAA9B,8CACdH,gBAAgB,CAC7BI,KAAM,uBACNC,MAAO,CACLC,kBAAmBJ,OAAO,EAAEK,IAAI,EAAE,EAClCC,MAAON,OAAO,EAAEK,IAAI,CAClBE,WAAY,GACZC,YAAa,EACf,CAAC,EACDC,WAAYV,MAAM,EAAEM,IAAI,EAAE,CAC5B,EACAK,MAAO,SAAeP,EAAOQ,GAKZ,SAAXC,EAA6BJ,GAC/B,IAAIG,EACAE,MAAAA,GAA8CA,EAAMC,UAEtD,OAACH,EAAKE,MAAAA,EAAqC,KAAA,EAASA,EAAMC,WAA+CH,EAAGI,KAAKF,EAAO,CACtHN,WAAY,GACZC,YAAaA,CACf,CAAC,CAEL,CAEe,SAAXQ,EAA6BC,GAC/B,IAAIN,EACAE,MAAAA,GAA8CA,EAAMC,UAEtD,OAACH,EAAKE,MAAAA,EAAqC,KAAA,EAASA,EAAMC,WAA+CH,EAAGI,KAAKF,EAAO,CACtHN,WAAYU,EAAWC,KAAK,EAC5BV,YAAaW,KAAAA,CACf,CAAC,CAEL,CAxBA,IAAIN,EAAQF,EAAGE,MAyBXO,GAxBMT,EAAGU,MACJV,EAAGW,KAuBEzB,SAAS,WACrB,IAAIc,EAAIY,EACR,OAAKpB,EAAMG,MAAMC,YACT,OAACgB,EAAK,OAACZ,EAAKR,MAAAA,EAAqC,KAAA,EAASA,EAAMM,YAAwC,KAAA,EAASE,EAAGa,QAAoC,KAAA,EAASD,EAAGR,KAAKJ,EAAI,SAAUc,GAC7L,OAAOA,EAAEC,MAAMC,SAASxB,EAAMG,MAAMC,UAAU,CAChD,CAAC,IAAM,GAH6BJ,EAAMM,YAAc,EAI1D,CAAC,GACGH,EAAQT,SAAS,WACnB,IAAQ0B,EACR,OAAIpB,EAAMG,MAAMC,aACZJ,CAAAA,EAAMG,MAAME,aAAoB,OAACe,EAAK,OAACZ,EAAKR,MAAAA,EAAqC,KAAA,EAASA,EAAMM,YAAwC,KAAA,EAASE,EAAGiB,KAAK,SAAUH,GACrK,OAAOA,EAAEnB,QAAUH,EAAMG,MAAME,WACjC,CAAC,GAFD,KAAA,EAEyCe,EAAGG,MAC9C,CAAC,EACD,OAAO,WACL,OAAOhC,aAAaO,aAAcN,YAAY,CAC5CyB,QAAWA,EAAQd,MACnBuB,aAAgB,CAAA,EAChBjB,SAAYA,EACZI,SAAYA,CACd,EAAGpB,SAASA,SAAS,GAAIO,CAAK,EAAGU,CAAK,EAAG,CACvCP,MAASA,EAAMA,KACjB,CAAC,EAAG,IAAI,CACV,CACF,CACF,CAAC"}