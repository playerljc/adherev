"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.NORMAL=exports.ERROR=exports.EMPTY=void 0,require("tslib")),adherev_util_intl_1=(0,tslib_1.__importDefault)(require("@baifendian/adherev-util-intl")),classnames_1=(0,tslib_1.__importDefault)(require("classnames")),vue_1=require("vue"),vue_types_1=require("vue-types"),selectorPrefix="adherev-ui-scrollload",scrollLoadProps=(exports.EMPTY="empty",exports.ERROR="error",exports.NORMAL="normal",{loadClassName:(0,vue_types_1.string)().def(""),loadStyle:(0,vue_types_1.object)().def({}),emptyClassName:(0,vue_types_1.string)().def(""),emptyStyle:(0,vue_types_1.object)().def({}),errorClassName:(0,vue_types_1.string)().def(""),errorStyle:(0,vue_types_1.object)().def({}),distance:(0,vue_types_1.number)().def(50)});exports.default=(0,vue_1.defineComponent)({name:"adv-scrollload",props:scrollLoadProps,emits:["scroll-bottom","empty-click","error-click"],setup:function(o,e){var a=e.emit,l=e.slots,e=e.expose,i=(0,vue_1.ref)(),d=(0,vue_1.ref)(),u=(0,vue_1.ref)(),c=(0,vue_1.ref)(),n=!1,s=((0,vue_1.onMounted)(function(){return s()}),function(){var e;null!==(e=null==i?void 0:i.value)&&void 0!==e&&e.addEventListener("scroll",t),null!==(e=null==d?void 0:d.value)&&void 0!==e&&e.addEventListener("click",r),null!==(e=null==u?void 0:u.value)&&void 0!==e&&e.addEventListener("click",v)}),t=function(){var e=i.value,l=c.value,s=d.value,t=u.value,r=e.scrollHeight-e.offsetHeight,e=e.scrollTop;Math.abs(e-r)<=o.distance&&(n||(n=!0,l.style.display="flex",a("scroll-bottom",function(e){l.style.display="none",e===exports.EMPTY?s.style.display="block":e===exports.ERROR&&(t.style.display="block"),n=!1})))},r=function(){a("empty-click")},v=function(){a("error-click")};return e({hideAll:function(){var e=c.value,l=d.value,s=u.value;e.style.display="none",s.style.display="none",l.style.display="none"}}),function(){var e;return(0,_vue.createVNode)("div",{class:selectorPrefix,ref:i},[null===(e=null==l?void 0:l.default)||void 0===e?void 0:e.call(l),l.loading?(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),(o.loadClassName||"").split(/\s+/)),style:o.loadStyle,ref:c},[null===(e=null==l?void 0:l.loading)||void 0===e?void 0:e.call(l)]):(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),"standard",(o.loadClassName||"").split(/\s+/)),style:o.loadStyle,ref:c},[adherev_util_intl_1.default.tv("数据加载中")]),l.empty?(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),(o.emptyClassName||"").split(/\s+/)),style:o.emptyStyle,ref:d},[null===(e=null==l?void 0:l.empty)||void 0===e?void 0:e.call(l)]):(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),(o.emptyClassName||"").split(/\s+/)),style:o.emptyStyle,ref:d},[(0,_vue.createTextVNode)("~"),adherev_util_intl_1.default.tv("没有更多")]),l.error?(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),(o.errorClassName||"").split(/\s+/)),style:o.errorStyle,ref:u},[null===(e=null==l?void 0:l.error)||void 0===e?void 0:e.call(l)]):(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),(o.errorClassName||"").split(/\s+/)),style:o.errorStyle,ref:u},[adherev_util_intl_1.default.tv("出现错误")])])}}});
//# sourceMappingURL=scrollload.js.map
