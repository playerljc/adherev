"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js");var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NORMAL=exports.ERROR=exports.EMPTY=void 0;var classnames_1=__importDefault(require("classnames")),adherev_util_intl_1=__importDefault(require("@baifendian/adherev-util-intl")),selectorPrefix="adherev-ui-scrollload";exports.EMPTY="empty",exports.ERROR="error",exports.NORMAL="normal",exports.default={name:"adv-scrollload",props:{className:{type:String,default:""},loadClassName:{type:String,default:""},emptyClassName:{type:String,default:""},errorClassName:{type:String,default:""},distance:{type:Number,default:50}},data:function(){return{$lock:!1}},mounted:function(){this.initEvents()},methods:{initEvents:function(){var e=this.$refs;e.el.addEventListener("scroll",this.onScroll),e.emptyEl.addEventListener("click",this.onEmptyClick),e.errorEl.addEventListener("click",this.onErrorClick)},onScroll:function(){var e=this,t=e.$refs,r=t.el,s=t.loadEl,l=t.errorEl,i=t.emptyEl,a=e.$data,t=e.distance,e=r.scrollHeight-r.offsetHeight,r=r.scrollTop;console.log("11111111111111",r,e,t,Math.abs(r-e)<=t),Math.abs(r-e)<=t&&(a.$lock||(a.$lock=!0,s.style.display="flex",this.$emit("scroll-bottom",function(e){s.style.display="none",e===exports.EMPTY?i.style.display="block":e===exports.ERROR&&(l.style.display="block"),a.$lock=!1})))},onEmptyClick:function(){this.$emit("empty-click")},onErrorClick:function(){this.$emit("error-click")},renderLoading:function(e){var t=this.$slots,r=this.loadClassName;return t.loading?e("div",{attrs:{className:classnames_1.default(selectorPrefix+"-load",r.split(" "))},ref:"loadEl"},[t.loading]):e("div",{class:classnames_1.default(selectorPrefix+"-load","standard",r.split(" ")),ref:"loadEl"},[adherev_util_intl_1.default.tv("数据加载中")])},renderEmpty:function(e){var t=this.$slots,r=this.emptyClassName;return t.empty?e("div",{class:classnames_1.default(selectorPrefix+"-empty",r.split(" ")),ref:"emptyEl"},[t.empty]):e("div",{class:classnames_1.default(selectorPrefix+"-empty",r.split(" ")),ref:"emptyEl"},["~",adherev_util_intl_1.default.tv("没有更多")])},renderError:function(e){var t=this.$slots,r=this.errorClassName;return t.error?e("div",{class:classnames_1.default(selectorPrefix+"-error",r.split(" ")),ref:"errorEl"},[t.error]):e("div",{class:classnames_1.default(selectorPrefix+"-error",r.split(" ")),ref:"errorEl"},[adherev_util_intl_1.default.tv("出现错误")])},hideAll:function(){var e=this.$refs,t=e.loadEl,r=e.errorEl,e=e.emptyEl;t.style.display="none",r.style.display="none",e.style.display="none"}},render:function(e){var t=this.$slots,r=this.className;return e("div",{class:classnames_1.default(selectorPrefix,r.split(" ")),ref:"el"},[t.default,this.renderLoading(e),this.renderEmpty(e),this.renderError(e)])}};
//# sourceMappingURL=scrollload.js.map
