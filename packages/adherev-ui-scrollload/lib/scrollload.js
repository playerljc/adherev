"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.scrollLoadProps=exports.NORMAL=exports.ERROR=exports.EMPTY=void 0,require("tslib")),classnames_1=tslib_1.__importDefault(require("classnames")),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_util_intl_1=tslib_1.__importDefault(require("@baifendian/adherev-util-intl")),selectorPrefix="adherev-ui-scrollload";exports.EMPTY="empty",exports.ERROR="error",exports.NORMAL="normal",exports.scrollLoadProps={loadClassName:(0,vue_types_1.string)().def(""),loadStyle:(0,vue_types_1.object)().def({}),emptyClassName:(0,vue_types_1.string)().def(""),emptyStyle:(0,vue_types_1.object)().def({}),errorClassName:(0,vue_types_1.string)().def(""),errorStyle:(0,vue_types_1.object)().def({}),distance:(0,vue_types_1.number)().def(50),getScrollContainer:(0,vue_types_1.func)(),renderLoading:(0,vue_types_1.object)(),renderEmpty:(0,vue_types_1.object)(),renderError:(0,vue_types_1.object)()},exports.default=(0,vue_1.defineComponent)({name:"adv-scrollload",props:exports.scrollLoadProps,slots:["loading","empty","error"],emits:["scrollBottom","emptyClick","errorClick"],setup:function(s,e){function l(){var e=v.value,l=d.value,r=u.value,t=i.value,o=e.scrollHeight-e.offsetHeight,e=e.scrollTop;Math.abs(e-o)<=s.distance&&(c||(c=!0,l.style.display="flex",a("scrollBottom",function(e){l.style.display="none",e===exports.EMPTY?r.style.display="block":e===exports.ERROR&&(t.style.display="block"),c=!1})))}function r(){return a("emptyClick")}function t(){return a("errorClick")}var a=e.emit,o=e.slots,e=e.expose,n=(0,vue_1.ref)(),u=(0,vue_1.ref)(),i=(0,vue_1.ref)(),d=(0,vue_1.ref)(),c=!1,v=(0,vue_1.computed)(function(){return s.getScrollContainer&&s.getScrollContainer()||n.value}),_=(0,vue_1.computed)(function(){var e;return"overflow-y: ".concat((null==(e=null==s?void 0:s.getScrollContainer)?void 0:e.call(s))===n.value?"auto":"initial")});return e({hideAll:function(){var e=d.value,l=u.value,r=i.value;e.style.display="none",r.style.display="none",l.style.display="none"}}),(0,vue_1.onBeforeUnmount)(function(){var e;null!=(e=null==v?void 0:v.value)&&e.removeEventListener("scroll",l),null!=(e=null==u?void 0:u.value)&&e.removeEventListener("click",r),null!=(e=null==i?void 0:i.value)&&e.removeEventListener("click",t)}),(0,vue_1.onMounted)(function(){var e;null!=(e=null==v?void 0:v.value)&&e.addEventListener("scroll",l),null!=(e=null==u?void 0:u.value)&&e.addEventListener("click",r),null!=(e=null==i?void 0:i.value)&&e.addEventListener("click",t)}),function(){var e;return(0,_vue.createVNode)("div",{class:selectorPrefix,style:_.value,ref:n},[null==(e=null==o?void 0:o.default)?void 0:e.call(o),o.loading||s.renderLoading?(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),s.loadClassName||""),style:s.loadStyle,ref:d},[(null==(e=null==o?void 0:o.loading)?void 0:e.call(o))||s.renderLoading]):(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),"standard",s.loadClassName||""),style:s.loadStyle,ref:d},[adherev_util_intl_1.default.tv("数据加载中")]),o.empty||s.renderEmpty?(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),s.emptyClassName||""),style:s.emptyStyle,ref:u},[(null==(e=null==o?void 0:o.empty)?void 0:e.call(o))||s.renderEmpty]):(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),s.emptyClassName||""),style:s.emptyStyle,ref:u},[(0,_vue.createTextVNode)("~"),adherev_util_intl_1.default.tv("没有更多")]),o.error||s.renderError?(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),s.errorClassName||""),style:s.errorStyle,ref:i},[(null==(e=null==o?void 0:o.error)?void 0:e.call(o))||s.renderError]):(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),s.errorClassName||""),style:s.errorStyle,ref:i},[adherev_util_intl_1.default.tv("出现错误")])])}}});
//# sourceMappingURL=scrollload.js.map
