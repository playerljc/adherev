import{createTextVNode as _createTextVNode,createVNode as _createVNode}from"vue";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import Intl from"@baifendian/adherev-util-intl";import classNames from"classnames";import{defineComponent,onMounted,ref}from"vue";import{number,object,string}from"vue-types";var selectorPrefix="adherev-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal",scrollLoadProps={loadClassName:string().def(""),loadStyle:object().def({}),emptyClassName:string().def(""),emptyStyle:object().def({}),errorClassName:string().def(""),errorStyle:object().def({}),distance:number().def(50)};export default defineComponent({name:"adv-scrollload",props:scrollLoadProps,emits:["scroll-bottom","empty-click","error-click"],setup:function(r,e){var a=e.emit,l=e.slots,e=e.expose,i=ref(),c=ref(),d=ref(),n=ref(),m=!1,s=(onMounted(function(){return s()}),function(){var e;null!==(e=null==i?void 0:i.value)&&void 0!==e&&e.addEventListener("scroll",t),null!==(e=null==c?void 0:c.value)&&void 0!==e&&e.addEventListener("click",o),null!==(e=null==d?void 0:d.value)&&void 0!==e&&e.addEventListener("click",v)}),t=function(){var e=i.value,l=n.value,s=c.value,t=d.value,o=e.scrollHeight-e.offsetHeight,e=e.scrollTop;Math.abs(e-o)<=r.distance&&(m||(m=!0,l.style.display="flex",a("scroll-bottom",function(e){l.style.display="none",e===EMPTY?s.style.display="block":e===ERROR&&(t.style.display="block"),m=!1})))},o=function(){a("empty-click")},v=function(){a("error-click")};return e({hideAll:function(){var e=n.value,l=c.value,s=d.value;e.style.display="none",s.style.display="none",l.style.display="none"}}),function(){var e;return _createVNode("div",{class:selectorPrefix,ref:i},[null===(e=null==l?void 0:l.default)||void 0===e?void 0:e.call(l),l.loading?_createVNode("div",{class:classNames("".concat(selectorPrefix,"-load"),(r.loadClassName||"").split(/\s+/)),style:r.loadStyle,ref:n},[null===(e=null==l?void 0:l.loading)||void 0===e?void 0:e.call(l)]):_createVNode("div",{class:classNames("".concat(selectorPrefix,"-load"),"standard",(r.loadClassName||"").split(/\s+/)),style:r.loadStyle,ref:n},[Intl.tv("数据加载中")]),l.empty?_createVNode("div",{class:classNames("".concat(selectorPrefix,"-empty"),(r.emptyClassName||"").split(/\s+/)),style:r.emptyStyle,ref:c},[null===(e=null==l?void 0:l.empty)||void 0===e?void 0:e.call(l)]):_createVNode("div",{class:classNames("".concat(selectorPrefix,"-empty"),(r.emptyClassName||"").split(/\s+/)),style:r.emptyStyle,ref:c},[_createTextVNode("~"),Intl.tv("没有更多")]),l.error?_createVNode("div",{class:classNames("".concat(selectorPrefix,"-error"),(r.errorClassName||"").split(/\s+/)),style:r.errorStyle,ref:d},[null===(e=null==l?void 0:l.error)||void 0===e?void 0:e.call(l)]):_createVNode("div",{class:classNames("".concat(selectorPrefix,"-error"),(r.errorClassName||"").split(/\s+/)),style:r.errorStyle,ref:d},[Intl.tv("出现错误")])])}}});export{EMPTY,ERROR,NORMAL};
//# sourceMappingURL=scrollload.js.map
