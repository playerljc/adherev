import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import classNames from"classnames";import Intl from"@baifendian/adherev-util-intl";var selectorPrefix="adherev-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal";export default{name:"adv-scrollload",props:{loadClassName:{type:String,default:""},emptyClassName:{type:String,default:""},errorClassName:{type:String,default:""},distance:{type:Number,default:50}},data:function(){return{$lock:!1}},mounted:function(){this.initEvents()},methods:{initEvents:function(){var e=this.$refs;e.el.addEventListener("scroll",this.onScroll),e.emptyEl.addEventListener("click",this.onEmptyClick),e.errorEl.addEventListener("click",this.onErrorClick)},onScroll:function(){var e=this,s=e.$refs,r=s.el,t=s.loadEl,l=s.errorEl,o=s.emptyEl,i=e.$data,s=e.distance,e=r.scrollHeight-r.offsetHeight,r=r.scrollTop;Math.abs(r-e)<=s&&(i.$lock||(i.$lock=!0,t.style.display="flex",this.$emit("scroll-bottom",function(e){t.style.display="none",e===EMPTY?o.style.display="block":e===ERROR&&(l.style.display="block"),i.$lock=!1})))},onEmptyClick:function(){this.$emit("empty-click")},onErrorClick:function(){this.$emit("error-click")},renderLoading:function(e){var s=this.$slots,r=this.loadClassName;return s.loading?e("div",{class:classNames(selectorPrefix+"-load",r.split(/\s+/)),ref:"loadEl"},[s.loading]):e("div",{class:classNames(selectorPrefix+"-load","standard",r.split(/\s+/)),ref:"loadEl"},[Intl.tv("数据加载中")])},renderEmpty:function(e){var s=this.$slots,r=this.emptyClassName;return s.empty?e("div",{class:classNames(selectorPrefix+"-empty",r.split(/\s+/)),ref:"emptyEl"},[s.empty]):e("div",{class:classNames(selectorPrefix+"-empty",r.split(/\s+/)),ref:"emptyEl"},["~",Intl.tv("没有更多")])},renderError:function(e){var s=this.$slots,r=this.errorClassName;return s.error?e("div",{class:classNames(selectorPrefix+"-error",r.split(/\s+/)),ref:"errorEl"},[s.error]):e("div",{class:classNames(selectorPrefix+"-error",r.split(/\s+/)),ref:"errorEl"},[Intl.tv("出现错误")])},hideAll:function(){var e=this.$refs,s=e.loadEl,r=e.errorEl,e=e.emptyEl;s.style.display="none",r.style.display="none",e.style.display="none"}},render:function(e){var s=this.$slots;return e("div",{class:selectorPrefix,ref:"el"},[s.default,this.renderLoading(e),this.renderEmpty(e),this.renderError(e)])}};export{EMPTY,ERROR,NORMAL};
//# sourceMappingURL=scrollload.js.map
