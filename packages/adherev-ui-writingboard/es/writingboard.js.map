{"version":3,"file":"writingboard.js","sources":["writingboard.js"],"sourcesContent":["import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { __assign } from \"tslib\";\nimport debounce from 'lodash/debounce';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { Mode } from './types';\nvar selectorPrefix = 'adherev-ui-writingboard';\nvar BackTopAnimation = {\n  name: 'adv-writingboard',\n  props: {\n    defaultMode: {\n      type: String,\n      default: Mode.FREE\n    },\n    defaultStrokeStyle: {\n      type: String,\n      default: '#000'\n    },\n    defaultLineWidth: {\n      type: Number,\n      default: 2\n    },\n    resizeTime: {\n      type: Number,\n      default: 300\n    }\n  },\n  data: function data() {\n    return {\n      $stack: [],\n      $ctx: null,\n      $ro: null,\n      $config: null,\n      $curShape: null,\n      $lineWidth: null,\n      $strokeStyle: null,\n      $startPoint: null,\n      $prePoint: null,\n      $stackIndex: 0\n    };\n  },\n  methods: {\n    drawStack: function drawStack() {\n      for (var i = 0; i < this.$data.$stack.current.length; i++) {\n        var item = this.$data.$stack[i];\n        this.$data.$config.current.get(item.shape).drawStack(item);\n      }\n    },\n    style: function style(_a) {\n      var lineWidth = _a.lineWidth,\n          strokeStyle = _a.strokeStyle;\n      this.$data.$ctx.lineWidth = lineWidth;\n      this.$data.$ctx.strokeStyle = strokeStyle;\n      this.$data.$ctx.lineCap = 'round';\n      this.$data.$ctx.lineJoin = 'round';\n    },\n    triangle: function triangle(_a) {\n      var startPoint = _a.startPoint,\n          targetPoint = _a.targetPoint;\n      var s = this.getPoint({\n        startPoint: startPoint,\n        targetPoint: targetPoint\n      });\n      var w = Math.abs(targetPoint.x - startPoint.x);\n      var h = Math.abs(targetPoint.y - startPoint.y);\n      var point1 = {\n        x: s.x,\n        y: s.y + h\n      };\n      var point2 = {\n        x: s.x + w / 2,\n        y: s.y\n      };\n      var point3 = {\n        x: s.x + w,\n        y: s.y + h\n      };\n      return [point1, point2, point3];\n    },\n    devicePointToCanvasPoint: function devicePointToCanvasPoint(_a) {\n      var clientX = _a.clientX,\n          clientY = _a.clientY;\n\n      var _b = this.$refs.canvasRef.getBoundingClientRect(),\n          x = _b.x,\n          y = _b.y;\n\n      return {\n        x: clientX - x,\n        y: clientY - y\n      };\n    },\n    getDistanceByBetweenPoint: function getDistanceByBetweenPoint(_a) {\n      var p1 = _a.p1,\n          p2 = _a.p2;\n      var Ax1 = p1.x,\n          Ay1 = p1.y;\n      var Ax2 = p2.x,\n          Ay2 = p2.y;\n      return Math.sqrt(Math.pow(Ax2 - Ax1, 2) + Math.pow(Ay2 - Ay1, 2)); // 计算A1A2的长度\n    },\n    getPoint: function getPoint(_a) {\n      var startPoint = _a.startPoint,\n          targetPoint = _a.targetPoint;\n\n      if (targetPoint.x <= startPoint.x && targetPoint.y <= startPoint.y) {\n        // leftTop\n        return targetPoint;\n      } else if (targetPoint.x <= startPoint.x && targetPoint.y >= startPoint.y) {\n        // leftBottom\n        return {\n          x: targetPoint.x,\n          y: startPoint.y\n        };\n      } else if (targetPoint.x >= startPoint.x && targetPoint.y <= startPoint.y) {\n        // rightTop\n        return {\n          x: startPoint.x,\n          y: targetPoint.y\n        };\n      } else if (targetPoint.x >= startPoint.x && targetPoint.y >= startPoint.y) {\n        // rightBottom\n        return startPoint;\n      }\n    },\n    draw: function draw(_a) {\n      var sourcePoint = _a.sourcePoint,\n          targetPoint = _a.targetPoint;\n      var entry = this.$data.$config.get(this.$data.$curShape);\n      entry.draw({\n        sourcePoint: sourcePoint,\n        targetPoint: targetPoint\n      });\n    },\n    onMousemove: function onMousemove(e) {\n      this.move(e);\n    },\n    onTouchmove: function onTouchmove(e) {\n      this.move(__assign(__assign({}, e), {\n        clientX: e.targetTouches[0].clientX,\n        clientY: e.targetTouches[0].clientY\n      }));\n    },\n    onMouseup: function onMouseup(e) {\n      this.end(e);\n    },\n    onTouchend: function onTouchend(e) {\n      this.end(__assign(__assign({}, e), {\n        clientX: e.changedTouches[0].clientX,\n        clientY: e.changedTouches[0].clientY\n      }));\n    },\n    start: function start(e) {\n      // 屏幕坐标转换成canvas坐标\n      var clientX = e.clientX,\n          clientY = e.clientY;\n      this.$data.$startPoint = this.$data.$prePoint = this.devicePointToCanvasPoint({\n        clientX: clientX,\n        clientY: clientY\n      });\n      this.$refs.containerRef.addEventListener('mousemove', this.onMousemove);\n      this.$refs.containerRef.addEventListener('mouseup', this.onMouseup);\n      this.$refs.containerRef.addEventListener('touchmove', this.onTouchmove);\n      this.$refs.containerRef.addEventListener('touchend', this.onTouchend);\n    },\n    move: function move(e) {\n      var clientX = e.clientX,\n          clientY = e.clientY;\n      var point = this.devicePointToCanvasPoint({\n        clientX: clientX,\n        clientY: clientY\n      });\n      this.draw({\n        sourcePoint: this.$data.$prePoint.current,\n        targetPoint: point\n      });\n      this.$data.$prePoint = point;\n    },\n    end: function end(e) {\n      var _a;\n\n      var clientX = e.clientX,\n          clientY = e.clientY;\n      var point = this.devicePointToCanvasPoint({\n        clientX: clientX,\n        clientY: clientY\n      });\n      (_a = this.$data.$config.get(this.$data.$curShape)) === null || _a === void 0 ? void 0 : _a.mouseup(point);\n      this.$data.$startPoint = null;\n      this.$data.$prePoint = null;\n      this.$refs.containerRef.removeEventListener('mousemove', this.onMousemove);\n      this.$refs.containerRef.removeEventListener('mouseup', this.onMouseup);\n      this.$refs.containerRef.removeEventListener('touchmove', this.onTouchmove);\n      this.$refs.containerRef.removeEventListener('touchend', this.onTouchend);\n    },\n    clear: function clear() {\n      this.$data.$ctx.clearRect(0, 0, this.$refs.canvasRef.width, this.$refs.canvasRef.height);\n      this.$data.$prePoint = this.$data.$startPoint = null;\n      this.$data.$stack = [];\n      this.$data.$stackIndex = 0;\n    },\n    setMode: function setMode(mode) {\n      this.$data.$curShape = mode;\n    },\n    setStrokeStyle: function setStrokeStyle(style) {\n      this.$data.$strokeStyle = style;\n    },\n    setLineWidth: function setLineWidth(width) {\n      this.$data.$lineWidth = width;\n    },\n    toDataURL: function toDataURL() {\n      this.$refs.canvasRef.toDataURL('image/png', 1.0);\n    }\n  },\n  beforeCreate: function beforeCreate() {\n    this.$data.$curShape = this.defaultMode;\n    this.$data.$lineWidth = this.defaultLineWidth;\n    this.$data.$strokeStyle = this.defaultStrokeStyle;\n    this.$data.$config = new Map([// 自由模式\n    [Mode.FREE, {\n      draw: function draw(_a) {\n        var sourcePoint = _a.sourcePoint,\n            targetPoint = _a.targetPoint;\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.moveTo(sourcePoint.x, sourcePoint.y);\n        ctx.lineTo(targetPoint.x, targetPoint.y);\n        this.$data.$stack.push({\n          shape: this.$data.$curShape,\n          sourcePoint: sourcePoint,\n          targetPoint: targetPoint\n        });\n        this.style({\n          lineWidth: this.$data.$lineWidth,\n          strokeStyle: this.$data.$strokeStyle\n        }); // 描边\n\n        ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n        ctx.lineTo(item.targetPoint.x, item.targetPoint.y);\n        this.style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        this.draw({\n          sourcePoint: this.$data.$prePoint,\n          targetPoint: point\n        });\n      }\n    }], // 直线\n    [Mode.LINE, {\n      draw: function draw(_a) {\n        var targetPoint = _a.targetPoint;\n        var ctx = this.$data.$ctx; // 清除画布\n\n        ctx.clearRect(0, 0, this.$refs.canvasRef.width, this.$refs.canvasRef.height);\n        this.drawStack();\n        ctx.beginPath();\n        ctx.moveTo(this.$data.$startPoint.x, this.$data.$startPoint.y);\n        ctx.lineTo(targetPoint.x, targetPoint.y);\n        this.style({\n          lineWidth: this.$data.$lineWidth,\n          strokeStyle: this.$data.$strokeStyle\n        }); // 描边\n\n        ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n        ctx.lineTo(item.targetPoint.x, item.targetPoint.y);\n        this.style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        this.$data.$stack.push({\n          shape: this.$data.$curShape,\n          lineWidth: this.$data.$ctx.lineWidth,\n          strokeStyle: this.$data.$ctx.strokeStyle,\n          sourcePoint: this.$data.$startPoint,\n          targetPoint: point\n        });\n      }\n    }], // 矩形\n    [Mode.RECTANGLE, {\n      draw: function draw(_a) {\n        var targetPoint = _a.targetPoint;\n        var ctx = this.$data.$ctx; // 清除画布\n\n        ctx.clearRect(0, 0, this.$refs.canvasRef.width, this.$refs.canvasRef.height);\n        this.drawStack();\n        ctx.beginPath(); // 判断target在start的四个方向\n\n        var rectStart = this.getPoint({\n          startPoint: this.$data.$startPoint,\n          targetPoint: targetPoint\n        });\n        ctx.rect(rectStart.x, rectStart.y, Math.abs(targetPoint.x - this.$data.$startPoint.x), Math.abs(targetPoint.y - this.$data.$startPoint.y));\n        this.style({\n          lineWidth: this.$data.$lineWidth,\n          strokeStyle: this.$data.$strokeStyle\n        }); // 描边\n\n        ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.rect(item.x, item.y, item.width, item.height);\n        this.style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        var rectStart = this.getPoint({\n          startPoint: this.$data.$startPoint,\n          targetPoint: point\n        });\n        this.$data.$stack.push({\n          shape: this.$data.$curShape,\n          lineWidth: this.$data.$ctx.lineWidth,\n          strokeStyle: this.$data.$ctx.strokeStyle,\n          x: rectStart.x,\n          y: rectStart.y,\n          width: Math.abs(point.x - this.$data.$startPoint.x),\n          height: Math.abs(point.y - this.$data.$startPoint.y)\n        });\n      }\n    }], // 圆形\n    [Mode.CIRCLE, {\n      draw: function draw(_a) {\n        var targetPoint = _a.targetPoint;\n        var ctx = this.$data.$ctx; // 清除画布\n\n        ctx.clearRect(0, 0, this.$refs.canvasRef.width, this.$refs.canvasRef.height);\n        this.drawStack();\n        ctx.beginPath(); // 判断target在start的四个方向\n\n        var rectStart = this.getPoint({\n          startPoint: this.$data.$startPoint,\n          targetPoint: targetPoint\n        });\n        var radius = this.getDistanceByBetweenPoint({\n          p2: targetPoint,\n          p1: this.$data.$startPoint\n        });\n        ctx.ellipse(rectStart.x, rectStart.y, radius, radius, 45 * Math.PI / 180, 0, 2 * Math.PI);\n        this.style({\n          lineWidth: this.$data.$lineWidth,\n          strokeStyle: this.$data.$strokeStyle\n        }); // 描边\n\n        ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.ellipse(item.x, item.y, item.radiusX, item.radiusY, item.rotation, item.startAngle, item.endAngle);\n        this.style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        var center = this.getPoint({\n          startPoint: this.$data.$startPoint,\n          targetPoint: point\n        });\n        var radius = this.getDistanceByBetweenPoint({\n          p2: point,\n          p1: this.$data.$startPoint\n        });\n        this.$data.$stack.push({\n          shape: this.$data.$curShape,\n          lineWidth: this.$data.$ctx.lineWidth,\n          strokeStyle: this.$data.$ctx.strokeStyle,\n          x: center.x,\n          y: center.y,\n          radiusX: radius,\n          radiusY: radius,\n          rotation: 45 * Math.PI / 180,\n          startAngle: 0,\n          endAngle: 2 * Math.PI\n        });\n      }\n    }], // 三角形(多边形)\n    [Mode.TRIANGLE, {\n      draw: function draw(_a) {\n        var targetPoint = _a.targetPoint;\n        var ctx = this.$data.$ctx; // 清除画布\n\n        ctx.clearRect(0, 0, this.$refs.canvasRef.width, this.$refs.canvasRef.height);\n        this.drawStack();\n        ctx.beginPath();\n        var points = this.triangle({\n          startPoint: this.$data.$startPoint,\n          targetPoint: targetPoint\n        });\n        ctx.moveTo(points[0].x, points[0].y);\n        ctx.lineTo(points[1].x, points[1].y);\n        ctx.lineTo(points[2].x, points[2].y);\n        ctx.closePath();\n        this.style({\n          lineWidth: this.$data.$lineWidth,\n          strokeStyle: this.$data.$strokeStyle\n        }); // 描边\n\n        ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.moveTo(item.points[0].x, item.points[0].y);\n        ctx.lineTo(item.points[1].x, item.points[1].y);\n        ctx.lineTo(item.points[2].x, item.points[2].y);\n        ctx.closePath();\n        this.style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        var points = this.triangle({\n          startPoint: this.$data.$startPoint,\n          targetPoint: point\n        });\n        this.$data.$stack.push({\n          shape: this.$data.$curShape,\n          lineWidth: this.$data.$ctx.lineWidth,\n          strokeStyle: this.$data.$ctx.strokeStyle,\n          points: points\n        });\n      }\n    }], // 橡皮\n    [Mode.RUBBER, {\n      draw: function draw(_a) {\n        var sourcePoint = _a.sourcePoint,\n            targetPoint = _a.targetPoint;\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.moveTo(sourcePoint.x, sourcePoint.y);\n        ctx.lineTo(targetPoint.x, targetPoint.y);\n        this.$data.$stack.push({\n          shape: this.$data.$curShape,\n          sourcePoint: sourcePoint,\n          targetPoint: targetPoint\n        });\n        ctx.lineWidth = 15;\n        ctx.strokeStyle = '#fff';\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        var ctx = this.$data.$ctx;\n        ctx.beginPath();\n        ctx.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n        ctx.lineTo(item.targetPoint.x, item.targetPoint.y);\n        ctx.lineWidth = 15;\n        ctx.strokeStyle = '#fff';\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        this.draw({\n          sourcePoint: this.$data.$prePoint,\n          targetPoint: point\n        });\n      }\n    }]]);\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var _a, _b;\n\n    this.$data.$ctx = this.$refs.canvasRef.getContext('2d');\n    var onResize = debounce(function () {\n      _this.$refs.canvasRef.width = _this.$refs.offsetWidth;\n      _this.$refs.canvasRef.height = _this.$refs.offsetHeight;\n\n      _this.$data.$ctx.clearRect(0, 0, _this.$refs.canvasRef.width, _this.$refs.canvasRef.current.height);\n\n      _this.drawStack();\n    }, this.resizeTime);\n    this.$data.$ro = new ResizeObserver(onResize);\n    (_b = (_a = this.$data.$ro).observe) === null || _b === void 0 ? void 0 : _b.call(_a, document.body);\n    this.$refs.containerRef.addEventListener('mousedown', this.onMousedown);\n    this.$refs.containerRef.addEventListener('touchstart', this.onTouchstart);\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$refs.containerRef.removeEventListener('mousedown', this.onMousedown);\n    this.$refs.containerRef.removeEventListener('touchstart', this.onTouchstart);\n  },\n  render: function render(h) {\n    return h(\"div\", {\n      \"ref\": \"containerRef\",\n      \"class\": selectorPrefix\n    }, [h(\"canvas\", {\n      \"ref\": \"canvasRef\"\n    })]);\n  }\n};\nexport default BackTopAnimation;"],"names":["__assign","debounce","ResizeObserver","Mode","selectorPrefix","BackTopAnimation","name","props","defaultMode","type","String","default","FREE","defaultStrokeStyle","defaultLineWidth","Number","resizeTime","data","$stack","$ctx","$ro","$config","$curShape","$lineWidth","$strokeStyle","$startPoint","$prePoint","$stackIndex","methods","drawStack","i","this","$data","current","length","item","get","shape","style","_a","lineWidth","strokeStyle","lineCap","lineJoin","triangle","startPoint","targetPoint","s","getPoint","w","Math","abs","x","h","y","devicePointToCanvasPoint","clientX","clientY","_b","$refs","canvasRef","getBoundingClientRect","getDistanceByBetweenPoint","p1","p2","Ax1","Ay1","Ax2","Ay2","sqrt","pow","draw","sourcePoint","onMousemove","e","move","onTouchmove","targetTouches","onMouseup","end","onTouchend","changedTouches","start","containerRef","addEventListener","point","mouseup","removeEventListener","clear","clearRect","width","height","setMode","mode","setStrokeStyle","setLineWidth","toDataURL","beforeCreate","Map","ctx","beginPath","moveTo","lineTo","push","stroke","LINE","RECTANGLE","rectStart","rect","CIRCLE","radius","ellipse","PI","radiusX","radiusY","rotation","startAngle","endAngle","center","TRIANGLE","points","closePath","RUBBER","mounted","_this","getContext","onResize","offsetWidth","offsetHeight","observe","call","document","body","onMousedown","onTouchstart","beforeDestroy","render","ref","class"],"mappings":"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"}