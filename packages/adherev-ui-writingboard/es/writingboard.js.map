{"version":3,"file":"writingboard.js","sources":["writingboard.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { __assign } from \"tslib\";\nimport debounce from 'lodash/debounce';\nimport { defineComponent, onBeforeUnmount, onMounted, ref } from 'vue';\nimport { number, string } from 'vue-types';\n// @ts-ignore\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { Mode } from './types';\nvar selectorPrefix = 'adherev-ui-writingboard';\nvar props = {\n  defaultMode: string().def(Mode.FREE),\n  defaultStrokeStyle: string().def('#000'),\n  defaultLineWidth: number().def(2),\n  resizeTime: number().def(300)\n};\nexport default defineComponent({\n  name: 'adv-writingboard',\n  props: props,\n  setup: function setup(props, _a) {\n    var expose = _a.expose;\n    var containerRef = ref();\n    var canvasRef = ref();\n    var ctx = null;\n    var ro = null;\n    var startPoint = null;\n    var prePoint = null;\n    var curShape = props.defaultMode;\n    var lineWidth = props.defaultLineWidth;\n    var strokeStyle = props.defaultStrokeStyle;\n    var stack = [];\n    var stackIndex = 0;\n    var config = new Map([\n    // 自由模式\n    [Mode.FREE, {\n      draw: function draw(_a) {\n        var sourcePoint = _a.sourcePoint,\n          targetPoint = _a.targetPoint;\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(sourcePoint.x, sourcePoint.y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(targetPoint.x, targetPoint.y);\n        stack.push({\n          shape: curShape,\n          sourcePoint: sourcePoint,\n          targetPoint: targetPoint\n        });\n        style({\n          lineWidth: lineWidth,\n          strokeStyle: strokeStyle\n        });\n        // 描边\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(item.targetPoint.x, item.targetPoint.y);\n        style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        draw({\n          sourcePoint: prePoint,\n          targetPoint: point\n        });\n      }\n    }],\n    // 直线\n    [Mode.LINE, {\n      draw: function draw(_a) {\n        var _b, _c;\n        var targetPoint = _a.targetPoint;\n        // 清除画布\n        ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, (_b = canvasRef.value) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef.value) === null || _c === void 0 ? void 0 : _c.height);\n        drawStack();\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(startPoint.x, startPoint.y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(targetPoint.x, targetPoint.y);\n        style({\n          lineWidth: lineWidth,\n          strokeStyle: strokeStyle\n        });\n        // 描边\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(item.targetPoint.x, item.targetPoint.y);\n        style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        stack.push({\n          shape: curShape,\n          lineWidth: ctx === null || ctx === void 0 ? void 0 : ctx.lineWidth,\n          strokeStyle: ctx === null || ctx === void 0 ? void 0 : ctx.strokeStyle,\n          sourcePoint: startPoint,\n          targetPoint: point\n        });\n      }\n    }],\n    // 矩形\n    [Mode.RECTANGLE, {\n      draw: function draw(_a) {\n        var _b, _c;\n        var targetPoint = _a.targetPoint;\n        // 清除画布\n        ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, (_b = canvasRef.value) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef.value) === null || _c === void 0 ? void 0 : _c.height);\n        drawStack();\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        // 判断target在start的四个方向\n        var rectStart = getPoint({\n          startPoint: startPoint,\n          targetPoint: targetPoint\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.rect(rectStart.x, rectStart.y, Math.abs(targetPoint.x - startPoint.x), Math.abs(targetPoint.y - startPoint.y));\n        style({\n          lineWidth: lineWidth,\n          strokeStyle: strokeStyle\n        });\n        // 描边\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.rect(item.x, item.y, item.width, item.height);\n        style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        var rectStart = getPoint({\n          startPoint: startPoint,\n          targetPoint: point\n        });\n        stack.push({\n          shape: curShape,\n          lineWidth: ctx === null || ctx === void 0 ? void 0 : ctx.lineWidth,\n          strokeStyle: ctx === null || ctx === void 0 ? void 0 : ctx.strokeStyle,\n          x: rectStart.x,\n          y: rectStart.y,\n          width: Math.abs(point.x - (startPoint === null || startPoint === void 0 ? void 0 : startPoint.x)),\n          height: Math.abs(point.y - (startPoint === null || startPoint === void 0 ? void 0 : startPoint.y))\n        });\n      }\n    }],\n    // 圆形\n    [Mode.CIRCLE, {\n      draw: function draw(_a) {\n        var _b, _c;\n        var targetPoint = _a.targetPoint;\n        // 清除画布\n        ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, (_b = canvasRef.value) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef.value) === null || _c === void 0 ? void 0 : _c.height);\n        drawStack();\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        // 判断target在start的四个方向\n        var rectStart = getPoint({\n          startPoint: startPoint,\n          targetPoint: targetPoint\n        });\n        var radius = getDistanceByBetweenPoint({\n          p2: targetPoint,\n          p1: startPoint\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.ellipse(rectStart.x, rectStart.y, radius, radius, 45 * Math.PI / 180, 0, 2 * Math.PI);\n        style({\n          lineWidth: lineWidth,\n          strokeStyle: strokeStyle\n        });\n        // 描边\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.ellipse(item.x, item.y, item.radiusX, item.radiusY, item.rotation, item.startAngle, item.endAngle);\n        style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        var center = getPoint({\n          startPoint: startPoint,\n          targetPoint: point\n        });\n        var radius = getDistanceByBetweenPoint({\n          p2: point,\n          p1: startPoint\n        });\n        stack.push({\n          shape: curShape,\n          lineWidth: ctx === null || ctx === void 0 ? void 0 : ctx.lineWidth,\n          strokeStyle: ctx === null || ctx === void 0 ? void 0 : ctx.strokeStyle,\n          x: center.x,\n          y: center.y,\n          radiusX: radius,\n          radiusY: radius,\n          rotation: 45 * Math.PI / 180,\n          startAngle: 0,\n          endAngle: 2 * Math.PI\n        });\n      }\n    }],\n    // 三角形(多边形)\n    [Mode.TRIANGLE, {\n      draw: function draw(_a) {\n        var _b, _c;\n        var targetPoint = _a.targetPoint;\n        // 清除画布\n        ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, (_b = canvasRef.value) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef.value) === null || _c === void 0 ? void 0 : _c.height);\n        drawStack();\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        var points = triangle({\n          startPoint: startPoint,\n          targetPoint: targetPoint\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(points[0].x, points[0].y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(points[1].x, points[1].y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(points[2].x, points[2].y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.closePath();\n        style({\n          lineWidth: lineWidth,\n          strokeStyle: strokeStyle\n        });\n        // 描边\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(item.points[0].x, item.points[0].y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(item.points[1].x, item.points[1].y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(item.points[2].x, item.points[2].y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.closePath();\n        style({\n          lineWidth: item.lineWidth,\n          strokeStyle: item.strokeStyle\n        });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        var points = triangle({\n          startPoint: startPoint,\n          targetPoint: point\n        });\n        stack.push({\n          shape: curShape,\n          lineWidth: ctx === null || ctx === void 0 ? void 0 : ctx.lineWidth,\n          strokeStyle: ctx === null || ctx === void 0 ? void 0 : ctx.strokeStyle,\n          points: points\n        });\n      }\n    }],\n    // 橡皮\n    [Mode.RUBBER, {\n      draw: function draw(_a) {\n        var sourcePoint = _a.sourcePoint,\n          targetPoint = _a.targetPoint;\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(sourcePoint.x, sourcePoint.y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(targetPoint.x, targetPoint.y);\n        stack.push({\n          shape: curShape,\n          sourcePoint: sourcePoint,\n          targetPoint: targetPoint\n        });\n        ctx.lineWidth = 15;\n        ctx.strokeStyle = '#fff';\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      drawStack: function drawStack(item) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.beginPath();\n        ctx === null || ctx === void 0 ? void 0 : ctx.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n        ctx === null || ctx === void 0 ? void 0 : ctx.lineTo(item.targetPoint.x, item.targetPoint.y);\n        ctx.lineWidth = 15;\n        ctx.strokeStyle = '#fff';\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx === null || ctx === void 0 ? void 0 : ctx.stroke();\n      },\n      mouseup: function mouseup(point) {\n        draw({\n          sourcePoint: prePoint,\n          targetPoint: point\n        });\n      }\n    }]]);\n    /**\n     * style\n     * @param lineWidth\n     * @param strokeStyle\n     */\n    function style(_a) {\n      var lineWidth = _a.lineWidth,\n        strokeStyle = _a.strokeStyle;\n      ctx.lineWidth = lineWidth;\n      ctx.strokeStyle = strokeStyle;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    }\n    /**\n     * triangle - 获取三角形的三个点坐标\n     * @param startPoint\n     * @param targetPoint\n     */\n    function triangle(_a) {\n      var startPoint = _a.startPoint,\n        targetPoint = _a.targetPoint;\n      var s = getPoint({\n        startPoint: startPoint,\n        targetPoint: targetPoint\n      });\n      var w = Math.abs(targetPoint.x - startPoint.x);\n      var h = Math.abs(targetPoint.y - startPoint.y);\n      var point1 = {\n        x: s.x,\n        y: s.y + h\n      };\n      var point2 = {\n        x: s.x + w / 2,\n        y: s.y\n      };\n      var point3 = {\n        x: s.x + w,\n        y: s.y + h\n      };\n      return [point1, point2, point3];\n    }\n    /**\n     * devicePointToCanvasPoint\n     * @param clientX\n     * @param clientY\n     */\n    function devicePointToCanvasPoint(_a) {\n      var _b;\n      var clientX = _a.clientX,\n        clientY = _a.clientY;\n      var _c = (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect(),\n        x = _c.x,\n        y = _c.y;\n      return {\n        x: clientX - x,\n        y: clientY - y\n      };\n    }\n    /**\n     * getDistanceByBetweenPoint\n     * @description 获取p1,p2两点间的距离\n     * @param p1\n     * @param p2\n     */\n    function getDistanceByBetweenPoint(_a) {\n      var p1 = _a.p1,\n        p2 = _a.p2;\n      var Ax1 = p1.x,\n        Ay1 = p1.y;\n      var Ax2 = p2.x,\n        Ay2 = p2.y;\n      return Math.sqrt(Math.pow(Ax2 - Ax1, 2) + Math.pow(Ay2 - Ay1, 2)); // 计算A1A2的长度\n    }\n    /**\n     * drawStack\n     */\n    function drawStack() {\n      for (var i = 0; i < stack.length; i++) {\n        var item = stack[i];\n        config.get(item.shape).drawStack(item);\n      }\n    }\n    /**\n     * getPoint\n     * @param startPoint\n     * @param targetPoint\n     */\n    function getPoint(_a) {\n      var startPoint = _a.startPoint,\n        targetPoint = _a.targetPoint;\n      if (targetPoint.x <= startPoint.x && targetPoint.y <= startPoint.y) {\n        // leftTop\n        return targetPoint;\n      } else if (targetPoint.x <= startPoint.x && targetPoint.y >= startPoint.y) {\n        // leftBottom\n        return {\n          x: targetPoint.x,\n          y: startPoint.y\n        };\n      } else if (targetPoint.x >= startPoint.x && targetPoint.y <= startPoint.y) {\n        // rightTop\n        return {\n          x: startPoint.x,\n          y: targetPoint.y\n        };\n      } else if (targetPoint.x >= startPoint.x && targetPoint.y >= startPoint.y) {\n        // rightBottom\n        return startPoint;\n      }\n    }\n    /**\n     * draw\n     * @param sourcePoint\n     * @param targetPoint\n     */\n    function draw(_a) {\n      var sourcePoint = _a.sourcePoint,\n        targetPoint = _a.targetPoint;\n      var entry = config === null || config === void 0 ? void 0 : config.get(curShape);\n      entry.draw({\n        sourcePoint: sourcePoint,\n        targetPoint: targetPoint\n      });\n    }\n    // 注册事件\n    function onMousemove(e) {\n      move(e);\n    }\n    function onTouchmove(e) {\n      move(__assign(__assign({}, e), {\n        clientX: e.targetTouches[0].clientX,\n        clientY: e.targetTouches[0].clientY\n      }));\n    }\n    function onMouseup(e) {\n      end(e);\n    }\n    function onTouchend(e) {\n      end(__assign(__assign({}, e), {\n        clientX: e.changedTouches[0].clientX,\n        clientY: e.changedTouches[0].clientY\n      }));\n    }\n    function onMousedown(e) {\n      start(e);\n    }\n    function onTouchstart(e) {\n      start(__assign(__assign({}, e), {\n        clientX: e.targetTouches[0].clientX,\n        clientY: e.targetTouches[0].clientY\n      }));\n    }\n    /**\n     * start\n     * @param e\n     */\n    function start(e) {\n      var _a, _b, _c, _d;\n      // 屏幕坐标转换成canvas坐标\n      var clientX = e.clientX,\n        clientY = e.clientY;\n      startPoint = prePoint = devicePointToCanvasPoint({\n        clientX: clientX,\n        clientY: clientY\n      });\n      (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _a === void 0 ? void 0 : _a.addEventListener('mousemove', onMousemove);\n      (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseup', onMouseup);\n      (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _c === void 0 ? void 0 : _c.addEventListener('touchmove', onTouchmove);\n      (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _d === void 0 ? void 0 : _d.addEventListener('touchend', onTouchend);\n    }\n    /**\n     * move\n     * @param e\n     */\n    function move(e) {\n      var clientX = e.clientX,\n        clientY = e.clientY;\n      var point = devicePointToCanvasPoint({\n        clientX: clientX,\n        clientY: clientY\n      });\n      draw({\n        sourcePoint: prePoint,\n        targetPoint: point\n      });\n      prePoint = point;\n    }\n    /**\n     * end\n     * @param e\n     */\n    function end(e) {\n      var _a, _b, _c, _d, _e;\n      var clientX = e.clientX,\n        clientY = e.clientY;\n      var point = devicePointToCanvasPoint({\n        clientX: clientX,\n        clientY: clientY\n      });\n      (_a = config.get(curShape)) === null || _a === void 0 ? void 0 : _a.mouseup(point);\n      startPoint = null;\n      prePoint = null;\n      (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _b === void 0 ? void 0 : _b.removeEventListener('mousemove', onMousemove);\n      (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _c === void 0 ? void 0 : _c.removeEventListener('mouseup', onMouseup);\n      (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchmove', onTouchmove);\n      (_e = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _e === void 0 ? void 0 : _e.removeEventListener('touchend', onTouchend);\n    }\n    /**\n     * clear\n     */\n    function clear() {\n      var _a, _b;\n      ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _a === void 0 ? void 0 : _a.width, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _b === void 0 ? void 0 : _b.height);\n      prePoint = startPoint = null;\n      stack = [];\n      stackIndex = 0;\n    }\n    expose({\n      setMode: function setMode(mode) {\n        curShape = mode;\n      },\n      setStrokeStyle: function setStrokeStyle(style) {\n        strokeStyle = style;\n      },\n      setLineWidth: function setLineWidth(width) {\n        lineWidth = width;\n      },\n      /**\n       * clear\n       * @description 清除画布\n       */\n      clear: clear,\n      /**\n       * toDataURL\n       * @description 获取base64\n       */\n      toDataURL: function toDataURL() {\n        var _a;\n        return (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _a === void 0 ? void 0 : _a.toDataURL('image/png', 1.0);\n      }\n    });\n    onMounted(function () {\n      var _a, _b;\n      ctx = (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _a === void 0 ? void 0 : _a.getContext('2d');\n      var onResize = debounce(function () {\n        var _a, _b, _c, _d;\n        canvasRef.value.width = (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n        canvasRef.value.height = (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _b === void 0 ? void 0 : _b.offsetHeight;\n        ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.value) === null || _d === void 0 ? void 0 : _d.height);\n        drawStack();\n      }, props.resizeTime);\n      ro = new ResizeObserver(onResize);\n      (_b = ro === null || ro === void 0 ? void 0 : ro.observe) === null || _b === void 0 ? void 0 : _b.call(ro, document.body);\n    });\n    onMounted(function () {\n      var _a, _b;\n      (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _a === void 0 ? void 0 : _a.addEventListener('mousedown', onMousedown);\n      (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _b === void 0 ? void 0 : _b.addEventListener('touchstart', onTouchstart);\n    });\n    onBeforeUnmount(function () {\n      var _a, _b;\n      ro === null || ro === void 0 ? void 0 : ro.disconnect();\n      (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousedown', onMousedown);\n      (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.value) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchstart', onTouchstart);\n    });\n    return function () {\n      return _createVNode(\"div\", {\n        \"ref\": containerRef,\n        \"class\": selectorPrefix\n      }, [_createVNode(\"canvas\", {\n        \"ref\": canvasRef\n      }, null)]);\n    };\n  }\n});"],"names":["_createVNode","__assign","debounce","defineComponent","onBeforeUnmount","onMounted","ref","number","string","ResizeObserver","Mode","selectorPrefix","props","defaultMode","def","FREE","defaultStrokeStyle","defaultLineWidth","resizeTime","name","setup","_a","expose","containerRef","canvasRef","ctx","ro","startPoint","prePoint","curShape","lineWidth","strokeStyle","stack","config","Map","draw","sourcePoint","targetPoint","beginPath","moveTo","x","y","lineTo","push","shape","style","stroke","drawStack","item","mouseup","point","LINE","_c","clearRect","_b","value","width","height","RECTANGLE","rectStart","getPoint","rect","Math","abs","CIRCLE","radius","getDistanceByBetweenPoint","p2","p1","ellipse","PI","radiusX","radiusY","rotation","startAngle","endAngle","center","TRIANGLE","points","triangle","closePath","RUBBER","lineCap","lineJoin","s","w","h","devicePointToCanvasPoint","clientX","clientY","getBoundingClientRect","Ax1","Ay1","Ax2","Ay2","sqrt","pow","i","length","get","onMousemove","e","move","onTouchmove","targetTouches","onMouseup","end","onTouchend","changedTouches","onMousedown","start","onTouchstart","addEventListener","_d","removeEventListener","_e","setMode","mode","setStrokeStyle","setLineWidth","clear","toDataURL","getContext","onResize","offsetWidth","offsetHeight","observe","call","document","body","disconnect","class"],"mappings":"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"}