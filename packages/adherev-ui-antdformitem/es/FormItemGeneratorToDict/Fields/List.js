import"core-js/modules/es.symbol.js";import"core-js/modules/es.object.get-own-property-descriptor.js";import"core-js/modules/es.object.get-own-property-descriptors.js";import"core-js/modules/es.object.define-properties.js";import"core-js/modules/es.object.define-property.js";import _defineProperty from"@babel/runtime/helpers/defineProperty";function ownKeys(e,t){var s,o=Object.keys(e);return Object.getOwnPropertySymbols&&(s=Object.getOwnPropertySymbols(e),t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,s)),o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach(function(t){_defineProperty(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}import"core-js/modules/es.array.filter.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.object.keys.js";import"core-js/modules/es.string.ends-with.js";import"core-js/modules/web.dom-collections.for-each.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.array.find.js";import"core-js/modules/es.array.includes.js";import"core-js/modules/es.string.includes.js";import"core-js/modules/es.array.map.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.map.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/esnext.map.delete-all.js";import"core-js/modules/esnext.map.every.js";import"core-js/modules/esnext.map.filter.js";import"core-js/modules/esnext.map.find.js";import"core-js/modules/esnext.map.find-key.js";import"core-js/modules/esnext.map.includes.js";import"core-js/modules/esnext.map.key-of.js";import"core-js/modules/esnext.map.map-keys.js";import"core-js/modules/esnext.map.map-values.js";import"core-js/modules/esnext.map.merge.js";import"core-js/modules/esnext.map.reduce.js";import"core-js/modules/esnext.map.some.js";import"core-js/modules/esnext.map.update.js";import"core-js/modules/web.dom-collections.iterator.js";import"core-js/modules/es.array.from.js";import{__assign,__spreadArray}from"tslib";import{Checkbox,List,Radio}from"ant-design-vue";import ConditionalRender from"@baifendian/adherev-ui-conditionalrender";import Dict from"@baifendian/adherev-util-dict";import ListFormItem from"../ListFormItem";import ListMulitSelectFormItem from"../ListMulitSelectFormItem";import ListSelectFormItem from"../ListSelectFormItem";import MulitSelectFormItem from"../MulitSelectFormItem";import SelectFormItem from"../SelectFormItem";var selectorPrefix="adherev-ui-antdformitem",FormItemComponents={};export default function(){var t=Object.keys(Dict.handlers).filter(function(t){return t.endsWith("List")}),e=Object.keys(Dict.handlers).filter(function(t){return t.endsWith("DynamicList")}),s=Object.keys(Dict.handlers).filter(function(t){return t.endsWith("ListPagination")});return t.forEach(function(e){FormItemComponents["".concat(e,"FormItem")]={name:"".concat(e,"FormItem"),props:{cascadeParams:{type:[String,Number]},listProps:ListFormItem.props.listProps,rowKey:{type:String,default:"id"}},computed:{dataSource:function(){var t=Dict.value[e].value;return t instanceof Function?t(this.cascadeParams):t}},render:function(t){return t(ListFormItem,{props:{listProps:__assign({dataSource:this.dataSource},this.listProps),rowKey:this.rowKey},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}},FormItemComponents["".concat(e,"SelectFormItem")]={name:"".concat(e,"SelectFormItem"),props:{cascadeParams:{type:[String,Number]},selectProps:ListSelectFormItem.props.selectProps,listProps:ListSelectFormItem.props.listProps,rowKey:{type:String,default:"id"},labelKey:{type:String,default:"name"},value:ListSelectFormItem.props.value},computed:{dataSource:function(){var t=Dict.value[e].value;return t instanceof Function?t(this.cascadeParams):t}},render:function(t){return t(ListSelectFormItem,{props:{selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}},FormItemComponents["".concat(e,"MulitSelectFormItem")]={name:"".concat(e,"MulitSelectFormItem"),props:{cascadeParams:{type:[String,Number]},selectProps:ListMulitSelectFormItem.props.selectProps,listProps:ListMulitSelectFormItem.props.listProps,rowKey:{type:String,default:"id"},labelKey:{type:String,default:"name"},value:ListMulitSelectFormItem.props.value},computed:{dataSource:function(){var t=Dict.value[e].value;return t instanceof Function?t(this.cascadeParams):t}},render:function(t){return t(ListMulitSelectFormItem,{props:{selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}}}),e.forEach(function(s){FormItemComponents["".concat(s,"FormItem")]={name:"".concat(s,"FormItem"),props:{cascadeParams:{type:[String,Number]},listProps:ListFormItem.props.listProps,rowKey:{type:String,default:"id"}},data:function(){return{dataSource:[]}},methods:{$loadData:function(t){var e=Dict.value[s].value;e instanceof Function&&e(t).then(function(t){this.dataSource=t})}},watch:{cascadeParams:function(t){this.$loadData(t)}},mounted:function(){var t=Dict.value[s].value;t.then&&t.then(function(t){this.dataSource=t})},render:function(t){return t(ListFormItem,{props:{listProps:__assign({dataSource:this.dataSource},this.listProps),rowKey:this.rowKey},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}},FormItemComponents["".concat(s,"SelectFormItem")]={name:"".concat(s,"SelectFormItem"),props:{cascadeParams:{type:[String,Number]},selectProps:ListSelectFormItem.props.selectProps,listProps:ListSelectFormItem.props.listProps,rowKey:{type:String,default:"id"},labelKey:{type:String,default:"name"},value:ListSelectFormItem.props.value},data:function(){return{dataSource:[]}},methods:{$loadData:function(t){var e=Dict.value[s].value;e instanceof Function&&e(t).then(function(t){this.dataSource=t})}},watch:{cascadeParams:function(t){this.$loadData(t)}},mounted:function(){var t=Dict.value[s].value;t.then&&t.then(function(t){this.dataSource=t})},render:function(t){return t(ListSelectFormItem,{props:{selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}},FormItemComponents["".concat(s,"MulitSelectFormItem")]={name:"".concat(s,"MulitSelectFormItem"),props:{cascadeParams:{type:[String,Number]},selectProps:ListMulitSelectFormItem.props.selectProps,listProps:ListMulitSelectFormItem.props.listProps,rowKey:{type:String,default:"id"},labelKey:{type:String,default:"name"},value:ListMulitSelectFormItem.props.value},data:function(){return{dataSource:[]}},methods:{$loadData:function(t){var e=Dict.value[s].value;e instanceof Function&&e(t).then(function(t){this.dataSource=t})}},watch:{cascadeParams:function(t){this.$loadData(t)}},mounted:function(){var t=Dict.value[s].value;t.then&&t.then(function(t){this.dataSource=t})},render:function(t){return t(ListMulitSelectFormItem,{props:{selectProps:this.selectProps,listProps:this.listProps,rowKey:this.rowKey,labelKey:this.labelKey,value:this.value,dataSource:this.dataSource},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}}}),s.forEach(function(t){FormItemComponents["".concat(t,"FormItem")]={name:"".concat(t,"FormItem"),props:{listProps:ListFormItem.props.listProps,rowKey:{type:String,default:"id"},totalKey:{type:String,default:"total"},dataKey:{type:String,default:"records"}},data:function(){return{loading:!1,data:[],pagin:{current:1,pageSize:10,total:0}}},watch:{"pagin.current":function(){this.$loadData()},"pagin.pageSize":function(){this.$loadData()}},methods:{$loadData:function(){var e=this;this.loading=!0,(0,Dict.value[t].value)(__assign({},this.pagin)).then(function(t){e.pagin=__assign(__assign({},e.pagin),{total:t[e.totalKey||"total"]}),e.data=t[e.dataKey||"records"],e.loading=!1}).catch(function(){e.loading=!1})},$getPagination:function(){var s=this;return{onChange:function(t,e){s.pagin=__assign(__assign({},s.pagin),{current:t,pageSize:e})},onShowSizeChange:function(t,e){s.pagin=__assign(__assign({},s.pagin),{current:t,pageSize:e})},total:this.pagin.total,current:this.pagin.current,pageSize:this.pagin.pageSize,showQuickJumper:!0}}},mounted:function(){this.$loadData()},render:function(t){return t(List,{props:__assign({dataSource:this.data,loading:this.loading,pagination:this.$getPagination(),rowKey:this.rowKey||"id"},this.listProps),attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}},FormItemComponents["".concat(t,"SelectFormItem")]={name:"".concat(t,"SelectFormItem"),props:{selectProps:SelectFormItem.props.selectProps,listProps:{type:Object,default:function(){return{}}},value:SelectFormItem.props.value,rowKey:{type:String,default:"id"},totalKey:{type:String,default:"total"},dataKey:{type:String,default:"records"}},emits:["change"],data:function(){var e=this;return{loading:!1,data:[],pagin:{current:1,pageSize:10,total:0},selectedRowKeys:this.value?[this.value]:[],selectedRows:this.value?this.data.find(function(t){return t[e.rowKey||"id"]===e.value}):[]}},watch:{"pagin.current":function(){this.$loadData()},"pagin.pageSize":function(){this.$loadData()},value:function(t){var e=this;this.selectedRowKeys=[t],this.selectedRows=[this.data.find(function(t){return t[e.rowKey||"id"]===e.value})]}},methods:{$loadData:function(){var e=this;this.loading=!0,(0,Dict.value[t].value)(__assign({},this.pagin)).then(function(t){e.pagin=__assign(__assign({},e.pagin),{total:t[e.totalKey||"total"]}),e.data=t[e.dataKey||"records"],e.loading=!1}).catch(function(){e.loading=!1})},$getPagination:function(){var s=this;return{onChange:function(t,e){s.pagin=__assign(__assign({},s.pagin),{current:t,pageSize:e})},onShowSizeChange:function(t,e){s.pagin=__assign(__assign({},s.pagin),{current:t,pageSize:e})},total:this.pagin.total,current:this.pagin.current,pageSize:this.pagin.pageSize,showQuickJumper:!0}},RadioWrap:function(t,e){var s=this,o=this.rowKey||"id";return t(Radio,{on:{change:function(t){t.stopPropagation(),t.target.checked&&(s.selectedRowKeys=[e[o]],s.selectedRows=[__assign({},e)],s.$emit("change",e[o]))}},attrs:{checked:this.selectedRowKeys.includes(e[o])}})}},mounted:function(){this.$loadData()},render:function(r){var a=this;return r(SelectFormItem,{props:{selectProps:__assign({dropdownRender:function(){return r(List,{attrs:{dataSource:a.data,loading:a.loading,pagination:a.$getPagination(),rowKey:a.rowKey||"id",renderItem:function(t,e){var s,o;return r(ConditionalRender,{attrs:{conditional:!(null==(s=a.listProps)||!s.renderItem)||a.$slots.renderItem||a.$scopedSlots.renderItem}},[r("div",{slot:"noMatch",class:"".concat(selectorPrefix,"-rowselectwrap")},[r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[a.RadioWrap(r,t)]),r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[t])]),r("div",{class:"".concat(selectorPrefix,"-rowselectwrap")},[r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[a.RadioWrap(r,t)]),r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[(null==(o=null==(s=null==a?void 0:a.listProps)?void 0:s.renderItem)?void 0:o.call(s,t))||a.$slots.renderItem||a.$scopedSlots.renderItem(t,e)])])])}},props:_objectSpread({},a.listProps)})}},this.selectProps),value:this.value,dataSource:this.data.map(function(t){return{label:t[a.labelKey||"name"],value:t[a.rowKey||"id"]}})},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:this.$listeners},this.$slots.default)}},FormItemComponents["".concat(t,"MulitSelectFormItem")]={name:"".concat(t,"MulitSelectFormItem"),props:{selectProps:MulitSelectFormItem.props.selectProps,listProps:{type:Object,default:function(){return{}}},value:MulitSelectFormItem.props.value,rowKey:{type:String,default:"id"},totalKey:{type:String,default:"total"},dataKey:{type:String,default:"records"}},emits:["change"],data:function(){var s=this;return{loading:!1,$data:new Map,pagin:{current:1,pageSize:10,total:0},selectedRowKeys:this.value||[],selectedRows:this.value?this.value.map(function(e){return s.$getDataSource().find(function(t){return t[s.rowKey||"id"]===e})}):[]}},watch:{"pagin.current":function(){this.$loadData()},"pagin.pageSize":function(){this.$loadData()},value:function(t){var s=this;this.selectedRowKeys=t,this.selectedRows=t.map(function(e){return s.data.find(function(t){return t[s.rowKey||"id"]===e})})}},methods:{$loadData:function(){var e=this;this.loading=!0,(0,Dict.value[t].value)(__assign({},this.pagin)).then(function(t){e.pagin=__assign(__assign({},e.pagin),{total:t[e.totalKey||"total"]}),e.$data.$data.set(e.pagin.current,t[e.dataKey||"records"]),e.loading=!1}).catch(function(){e.loading=!1})},$getPagination:function(){var s=this;return{onChange:function(t,e){s.pagin=__assign(__assign({},s.pagin),{current:t,pageSize:e})},onShowSizeChange:function(t,e){s.pagin=__assign(__assign({},s.pagin),{current:t,pageSize:e})},total:this.pagin.total,current:this.pagin.current,pageSize:this.pagin.pageSize,showQuickJumper:!0}},$getDataSource:function(){return this.$data.$data.get(this.pagin.current)||[]},$filter:function(t,s){var e,o=this.rowKey||"id",t=t?(e=__spreadArray(__spreadArray([],this.selectedRowKeys,!0),s.map(function(t){return t[o]}),!0),__spreadArray(__spreadArray([],this.selectedRows,!0),s,!0)):(e=this.selectedRowKeys.filter(function(e){return!s.find(function(t){return t[o]===e})}),this.selectedRows.filter(function(e){return!s.find(function(t){return t[o]===e[o]})}));this.selectedRowKeys=e,this.selectedRows=t,this.$emit("change",e)},CheckWrap:function(t,e){var s=this,o=this.rowKey||"id";return t(Checkbox,{on:{change:function(t){t.stopPropagation(),t.target.checked?(s.selectedRowKeys=__spreadArray(__spreadArray([],s.selectedRowKeys,!0),[e[o]],!1),s.selectedRows=__spreadArray(__spreadArray([],s.selectedRows,!0),[__assign({},e)],!1)):(s.selectedRowKeys=s.selectedRowKeys.filter(function(t){return t!==e[o]}),s.selectedRows=s.selectedRows.filter(function(t){return t[o]!==e[o]})),s.$emit("change",__spreadArray([],s.selectedRowKeys,!0))}},attrs:{checked:this.selectedRowKeys.includes(e[o])}})}},mounted:function(){this.$loadData()},render:function(r){var a=this;return r(MulitSelectFormItem,{props:{selectProps:__assign({dropdownRender:function(){return r(List,{attrs:{dataSource:a.$getDataSource(),pagination:a.$getPagination(),loading:a.loading,rowKey:a.rowKey||"id",renderItem:function(t,e){var s,o;return r(ConditionalRender,{attrs:{conditional:!(null==(s=a.listProps)||!s.renderItem)||a.$slots.renderItem||a.$scopedSlots.renderItem}},[r("div",{slot:"noMatch",class:"".concat(selectorPrefix,"-rowselectwrap")},[r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[a.CheckWrap(r,t)]),r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[t])]),r("div",{class:"".concat(selectorPrefix,"-rowselectwrap")},[r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-fixed")},[a.CheckWrap(r,t)]),r("div",{class:"".concat(selectorPrefix,"-rowselectwrap-auto")},[(null==(o=null==(s=null==a?void 0:a.listProps)?void 0:s.renderItem)?void 0:o.call(s,t))||a.$slots.renderItem||a.$scopedSlots.renderItem(t,e)])])])}},props:_objectSpread({},a.listProps)})}},this.selectProps),value:this.value,dataSource:this.$getDataSource().map(function(t){return{label:t[a.labelKey||"name"],value:t[a.rowKey||"id"]}})},attrs:this.$attrs,scopedSlots:this.$scopedSlots,on:__assign(__assign({},this.$listeners),{change:function(t){a.$emit("change",t),a.selectedRowKeys=t,a.selectedRows=t.map(function(e){return Array.from(a.$data.$data.values()).find(function(t){return t[a.rowKey||"id"]===e})})}})},this.$slots.default)}}}),FormItemComponents}
//# sourceMappingURL=List.js.map
