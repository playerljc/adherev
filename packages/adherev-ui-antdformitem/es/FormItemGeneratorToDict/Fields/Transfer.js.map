{"version":3,"file":"Transfer.js","sources":["FormItemGeneratorToDict/Fields/Transfer.js"],"sourcesContent":["import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport { __assign } from \"tslib\";\nimport { Transfer } from 'ant-design-vue';\nimport Dict from '@baifendian/adherev-util-dict';\nimport TransferSelectFormItem from '../TransferSelectFormItem/TransferSelectFormItem';\nvar FormItemComponents = {};\nexport default (function () {\n  // 名称以Transfer结尾的字典\n  var transferDictNames = Object.keys(Dict.handlers).filter(function (dictName) {\n    return dictName.endsWith('Transfer');\n  });\n  // 名称以DynamicTransfer结尾的字典\n  var transferDynamicDictNames = Object.keys(Dict.handlers).filter(function (dictName) {\n    return dictName.endsWith('DynamicTransfer');\n  });\n  // transferFormItem\n  FormItemComponents.TransferFormItem = {\n    name: 'TransferFormItem',\n    props: {\n      transferProps: {\n        type: Object,\n        default: function _default() {\n          return {};\n        }\n      },\n      dataSource: {\n        type: Array,\n        default: function _default() {\n          return [];\n        }\n      },\n      value: {\n        type: Array,\n        default: function _default() {\n          return [];\n        }\n      }\n    },\n    render: function render(h) {\n      return h(Transfer, {\n        props: __assign({\n          dataSource: this.dataSource.map(function (t) {\n            return {\n              key: \"\".concat(t.value),\n              title: t.label,\n              description: t.label,\n              disabled: 'disabled' in t ? t.disabled : false\n            };\n          }),\n          render: function render(item) {\n            return item.title;\n          },\n          targetKeys: this.value\n        }, this.transferProps),\n        attrs: this.$attrs,\n        on: this.$listeners,\n        scopedSlots: this.$scopedSlots\n      }, this.$slots.default);\n    }\n  };\n  // 静态的Transfer\n  transferDictNames.forEach(function (dictName) {\n    // transferFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = {\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        transferProps: FormItemComponents.TransferFormItem.props.transferProps,\n        value: FormItemComponents.TransferFormItem.props.value\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render(h) {\n        return h(FormItemComponents.TransferFormItem, {\n          props: {\n            transferProps: this.transferProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n    // transferSelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"SelectFormItem\")] = {\n      name: \"\".concat(dictName, \"SelectFormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        selectProps: TransferSelectFormItem.props.selectProps,\n        transferProps: TransferSelectFormItem.props.transferProps,\n        value: TransferSelectFormItem.props.value\n      },\n      computed: {\n        dataSource: function dataSource() {\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) return handler(this.cascadeParams);\n          return handler;\n        }\n      },\n      render: function render(h) {\n        return h(TransferSelectFormItem, {\n          props: {\n            selectProps: this.selectProps,\n            transferProps: this.transferProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n  });\n  // 动态的transferFormItem\n  transferDynamicDictNames.forEach(function (dictName) {\n    // transferFormItem\n    FormItemComponents[\"\".concat(dictName, \"FormItem\")] = {\n      name: \"\".concat(dictName, \"FormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        transferProps: FormItemComponents.TransferFormItem.props.transferProps,\n        value: FormItemComponents.TransferFormItem.props.value\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = Dict.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render(h) {\n        return h(FormItemComponents.TransferFormItem, {\n          props: {\n            transferProps: this.transferProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n    // transferSelectFormItem\n    FormItemComponents[\"\".concat(dictName, \"SelectFormItem\")] = {\n      name: \"\".concat(dictName, \"SelectFormItem\"),\n      props: {\n        cascadeParams: {\n          type: [String, Number]\n        },\n        selectProps: TransferSelectFormItem.props.selectProps,\n        transferProps: TransferSelectFormItem.props.transferProps,\n        value: TransferSelectFormItem.props.value\n      },\n      data: function data() {\n        return {\n          dataSource: []\n        };\n      },\n      methods: {\n        $loadData: function $loadData(params) {\n          // 存放字典的返回值(可能是promise也可能是Function)\n          var handler = Dict.value[dictName].value;\n          // 如果是函数(一般是级联)\n          if (handler instanceof Function) {\n            handler(params).then(function (res) {\n              this.dataSource = res;\n            });\n          }\n        }\n      },\n      watch: {\n        cascadeParams: function cascadeParams(val) {\n          this.$loadData(val);\n        }\n      },\n      mounted: function mounted() {\n        // 存放字典的返回值(可能是promise也可能是Function)\n        var handler = Dict.value[dictName].value;\n        // 如果是Promise直接返回\n        if (handler.then) {\n          handler.then(function (res) {\n            this.dataSource = res;\n          });\n        }\n      },\n      render: function render(h) {\n        return h(TransferSelectFormItem, {\n          props: {\n            selectProps: this.selectProps,\n            transferProps: this.transferProps,\n            value: this.value,\n            dataSource: this.dataSource\n          },\n          attrs: this.$attrs,\n          scopedSlots: this.$scopedSlots,\n          on: this.$listeners\n        }, this.$slots.default);\n      }\n    };\n  });\n  return FormItemComponents;\n});"],"names":["__assign","Transfer","Dict","TransferSelectFormItem","FormItemComponents","transferDictNames","Object","keys","handlers","filter","dictName","endsWith","transferDynamicDictNames","TransferFormItem","name","props","transferProps","type","default","dataSource","Array","value","render","h","this","map","t","key","concat","title","label","description","disabled","item","targetKeys","attrs","$attrs","on","$listeners","scopedSlots","$scopedSlots","$slots","forEach","cascadeParams","String","Number","computed","handler","Function","selectProps","data","methods","$loadData","params","then","res","watch","val","mounted"],"mappings":"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"}