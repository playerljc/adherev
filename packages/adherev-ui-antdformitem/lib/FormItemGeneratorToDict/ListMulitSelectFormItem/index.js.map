{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/ListMulitSelectFormItem/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\n// ListMulitSelectFormItem\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar adherev_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-conditionalrender\"));\nvar ListFormItem_1 = tslib_1.__importDefault(require(\"../ListFormItem\"));\nvar MulitSelectFormItem_1 = tslib_1.__importDefault(require(\"../MulitSelectFormItem\"));\nvar selectorPrefix = 'adherev-ui-antdformitem';\nexports.default = {\n  name: 'ListMulitSelectFormItem',\n  props: {\n    selectProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    listProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    value: {\n      type: Array,\n      default: []\n    },\n    dataSource: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    rowKey: {\n      type: String,\n      default: 'id'\n    },\n    labelKey: {\n      type: String,\n      default: 'name'\n    }\n  },\n  emits: ['change'],\n  data: function data() {\n    var _this = this;\n    return {\n      selectedRowKeys: this.value ? this.value : [],\n      selectedRows: this.value ? this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      }) : []\n    };\n  },\n  watch: {\n    value: function value(_value) {\n      var _this = this;\n      this.selectedRowKeys = _value;\n      this.selectedRows = this.value.map(function (t) {\n        return _this.dataSource.find(function (_item) {\n          return _item[_this.rowKey || 'id'] === t;\n        });\n      });\n    }\n  },\n  methods: {\n    CheckWrap: function CheckWrap(h, item) {\n      var _this = this;\n      var rowKey = this.rowKey || 'id';\n      return h(ant_design_vue_1.Checkbox, {\n        \"on\": {\n          \"change\": function change(e) {\n            e.stopPropagation();\n            var checked = e.target.checked;\n            if (checked) {\n              _this.selectedRowKeys = tslib_1.__spreadArray(tslib_1.__spreadArray([], _this.selectedRowKeys, true), [item[rowKey]], false);\n              _this.selectedRows = tslib_1.__spreadArray(tslib_1.__spreadArray([], _this.selectedRows, true), [tslib_1.__assign({}, item)], false);\n              _this.$emit('change', tslib_1.__spreadArray([], _this.selectedRowKeys, true));\n            } else {\n              _this.selectedRowKeys = _this.selectedRowKeys.filter(function (key) {\n                return key !== item[rowKey];\n              });\n              _this.selectedRows = _this.selectedRows.filter(function (row) {\n                return row[rowKey] !== item[rowKey];\n              });\n              _this.$emit('change', tslib_1.__spreadArray([], _this.selectedRowKeys, true));\n            }\n          }\n        },\n        \"attrs\": {\n          \"checked\": this.selectedRowKeys.includes(item[rowKey])\n        }\n      });\n    }\n  },\n  render: function render(h) {\n    var _this = this;\n    var Component = ListFormItem_1.default;\n    return h(MulitSelectFormItem_1.default, {\n      props: {\n        selectProps: tslib_1.__assign({\n          dropdownRender: function dropdownRender() {\n            return (// @ts-ignore\n              h(Component, {\n                \"attrs\": {\n                  \"listProps\": tslib_1.__assign(tslib_1.__assign({\n                    dataSource: _this.dataSource\n                  }, _this.listProps), {\n                    renderItem: function renderItem(item, index) {\n                      var _a, _b, _c;\n                      return h(adherev_ui_conditionalrender_1.default, {\n                        \"attrs\": {\n                          \"conditional\": !!((_a = _this.listProps) === null || _a === void 0 ? void 0 : _a.renderItem) || _this.$slots.renderItem || _this.$scopedSlots.renderItem\n                        }\n                      }, [h(\"div\", {\n                        \"slot\": \"noMatch\",\n                        \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                      }, [h(\"div\", {\n                        \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                      }, [_this.CheckWrap(h, item)]), h(\"div\", {\n                        \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                      }, [item])]), h(\"div\", {\n                        \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap\")\n                      }, [h(\"div\", {\n                        \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-fixed\")\n                      }, [_this.CheckWrap(h, item)]), h(\"div\", {\n                        \"class\": \"\".concat(selectorPrefix, \"-rowselectwrap-auto\")\n                      }, [((_c = (_b = _this === null || _this === void 0 ? void 0 : _this.listProps) === null || _b === void 0 ? void 0 : _b.renderItem) === null || _c === void 0 ? void 0 : _c.call(_b, item)) || _this.$slots.renderItem || _this.$scopedSlots.renderItem(item, index)])])]);\n                    }\n                  }),\n                  \"rowKey\": _this.rowKey\n                }\n              })\n            );\n          }\n        }, this.selectProps),\n        value: this.value,\n        dataSource: this.dataSource.map(function (t) {\n          return {\n            label: t[_this.labelKey || 'name'],\n            value: t[_this.rowKey || 'id']\n          };\n        })\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n      scopedSlots: this.$scopedSlots\n    }, this.$slots.default);\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","ant_design_vue_1","adherev_ui_conditionalrender_1","__importDefault","ListFormItem_1","MulitSelectFormItem_1","selectorPrefix","default","name","props","selectProps","type","listProps","Array","dataSource","rowKey","String","labelKey","emits","data","_this","this","selectedRowKeys","selectedRows","map","t","find","_item","watch","_value","methods","CheckWrap","h","item","Checkbox","on","change","e","stopPropagation","target","checked","__spreadArray","__assign","filter","key","row","$emit","attrs","includes","render","Component","dropdownRender","renderItem","index","_b","_c","conditional","_a","$slots","$scopedSlots","slot","class","concat","call","label","$attrs","$listeners","scopedSlots"],"mappings":"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"}