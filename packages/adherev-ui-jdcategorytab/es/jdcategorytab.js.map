{"version":3,"file":"jdcategorytab.js","sources":["jdcategorytab.js"],"sourcesContent":["import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport classNames from 'classnames';\nimport IScroll from 'iscroll/build/iscroll';\nvar selectorPrefix = 'adherev-ui-jdcategorytab';\nvar JdCategoryTab = {\n  name: 'adv-jdcategorytab',\n  props: {\n    className: {\n      type: String,\n      default: ''\n    },\n    menuClassName: {\n      type: String,\n      default: ''\n    },\n    menuStyle: {\n      type: String,\n      default: ''\n    },\n    menuInnerClassName: {\n      type: String,\n      default: ''\n    },\n    menuInnerStyle: {\n      type: String,\n      default: ''\n    },\n    tabClassName: {\n      type: String,\n      default: ''\n    },\n    tabStyle: {\n      type: String,\n      default: ''\n    },\n    menuItemClassName: {\n      type: String,\n      default: ''\n    },\n    menuItemStyle: {\n      type: String,\n      default: ''\n    },\n    menuData: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    defaultActiveKey: {\n      type: [String, Number],\n      default: ''\n    },\n    onBeforeChange: {\n      type: Function\n    }\n  },\n  slots: ['menuItem'],\n  emits: ['change'],\n  data: function data() {\n    return {\n      activeKey: this.defaultActiveKey,\n      $scroll: null,\n      $ease: IScroll.utils.ease\n    };\n  },\n  computed: {\n    getMenuClassName: function getMenuClassName() {\n      var menuClassName = this.menuClassName;\n      return classNames(\"\".concat(selectorPrefix, \"-menu\"), menuClassName || '');\n    },\n    getMenuInnerClassName: function getMenuInnerClassName() {\n      var menuInnerClassName = this.menuInnerClassName;\n      return classNames(\"\".concat(selectorPrefix, \"-menu-inner\"), menuInnerClassName || '');\n    },\n    getTabClassName: function getTabClassName() {\n      var tabClassName = this.tabClassName;\n      return classNames(\"\".concat(selectorPrefix, \"-tab\"), tabClassName || '');\n    },\n    getMenuItemClassName: function getMenuItemClassName() {\n      var _this = this;\n      return function (curKey) {\n        var _a = _this,\n          menuItemClassName = _a.menuItemClassName,\n          activeKey = _a.activeKey;\n        return classNames(\"\".concat(selectorPrefix, \"-menu-item\"), activeKey === curKey ? 'active' : null, menuItemClassName || '');\n      };\n    }\n  },\n  watch: {\n    defaultActiveKey: function defaultActiveKey(_defaultActiveKey) {\n      this.activeKey = _defaultActiveKey;\n    }\n  },\n  mounted: function mounted() {\n    this.initMenuScroll();\n  },\n  provide: function provide() {\n    return {\n      getActiveKey: this.getActiveKey\n    };\n  },\n  methods: {\n    initMenuScroll: function initMenuScroll() {\n      var _a = this,\n        menuEl = _a.$refs.menuEl,\n        $data = _a.$data;\n      $data.$scroll = new IScroll(menuEl, {\n        mouseWheel: true,\n        click: true\n      });\n      menuEl.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n      });\n    },\n    findElByKey: function findElByKey(key) {\n      var _a = this,\n        menuInnerEl = _a.$refs.menuInnerEl,\n        menuData = _a.menuData;\n      var index = menuData.findIndex(function (t) {\n        return t.key === key;\n      });\n      var arr = Array.from(menuInnerEl === null || menuInnerEl === void 0 ? void 0 : menuInnerEl.querySelectorAll(\".\".concat(selectorPrefix, \"-menu-item\")));\n      if (arr.length) {\n        return arr[index];\n      }\n      return null;\n    },\n    getActiveKey: function getActiveKey() {\n      return this.activeKey;\n    },\n    scrollTo: function scrollTo(key, time, easing) {\n      var _this = this;\n      if (time === void 0) {\n        time = 250;\n      }\n      var _a = this,\n        _b = _a.$data,\n        circular = _b.$ease.circular,\n        $scroll = _b.$scroll,\n        onBeforeChange = _a.onBeforeChange,\n        activeKey = _a.activeKey;\n      easing = easing || circular;\n      var isCan = true;\n      if (onBeforeChange) {\n        isCan = onBeforeChange(activeKey, key);\n      }\n      if (!isCan) return;\n      $scroll.scrollToElement(this.findElByKey(key), time, null, null, easing);\n      setTimeout(function () {\n        _this.activeKey = key;\n        _this.$nextTick(function () {\n          this.$emit('change', key);\n        });\n      }, time);\n    },\n    renderMenu: function renderMenu(h) {\n      var _this = this;\n      var _a = this,\n        $scopedSlots = _a.$scopedSlots,\n        menuData = _a.menuData,\n        getMenuItemClassName = _a.getMenuItemClassName,\n        menuItemStyle = _a.menuItemStyle;\n      return menuData.map(function (data) {\n        return h(\"li\", {\n          \"key\": data.key,\n          \"class\": getMenuItemClassName(data.key),\n          \"style\": menuItemStyle\n        }, [h(\"a\", {\n          \"on\": {\n            \"click\": function click() {\n              _this.scrollTo(data.key);\n            }\n          }\n        }, [$scopedSlots.menuItem ? $scopedSlots.menuItem(data) : data.name])]);\n      });\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n      $slots = _a.$slots,\n      getMenuClassName = _a.getMenuClassName,\n      getMenuInnerClassName = _a.getMenuInnerClassName,\n      getTabClassName = _a.getTabClassName,\n      menuStyle = _a.menuStyle,\n      menuInnerStyle = _a.menuInnerStyle,\n      tabStyle = _a.tabStyle;\n    return h(\"div\", {\n      \"class\": selectorPrefix,\n      \"ref\": \"el\"\n    }, [h(\"div\", {\n      \"class\": getMenuClassName,\n      \"style\": menuStyle,\n      \"ref\": \"menuEl\"\n    }, [h(\"ul\", {\n      \"class\": getMenuInnerClassName,\n      \"style\": menuInnerStyle,\n      \"ref\": \"menuInnerEl\"\n    }, [this.renderMenu(h)])]), h(\"ul\", {\n      \"class\": getTabClassName,\n      \"style\": tabStyle\n    }, [$slots.default])]);\n  }\n};\nexport default JdCategoryTab;"],"names":["classNames","IScroll","selectorPrefix","JdCategoryTab","name","props","className","type","String","default","menuClassName","menuStyle","menuInnerClassName","menuInnerStyle","tabClassName","tabStyle","menuItemClassName","menuItemStyle","menuData","Array","defaultActiveKey","Number","onBeforeChange","Function","slots","emits","data","activeKey","this","$scroll","$ease","utils","ease","computed","getMenuClassName","concat","getMenuInnerClassName","getTabClassName","getMenuItemClassName","_this","curKey","watch","_defaultActiveKey","mounted","initMenuScroll","provide","getActiveKey","methods","menuEl","$refs","$data","mouseWheel","click","addEventListener","e","preventDefault","findElByKey","key","menuInnerEl","index","findIndex","t","arr","from","querySelectorAll","length","scrollTo","time","easing","_a","_b","circular","isCan","scrollToElement","setTimeout","$nextTick","$emit","renderMenu","h","$scopedSlots","map","class","style","on","menuItem","render","$slots","ref"],"mappings":"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"}