{"version":3,"file":"jdcategorytab.js","sources":["jdcategorytab.js"],"sourcesContent":["import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport classNames from 'classnames';\nimport IScroll from 'iscroll/build/iscroll';\nvar selectorPrefix = 'adherev-ui-jdcategorytab';\nvar JdCategoryTab = {\n  name: 'adv-jdcategorytab',\n  props: {\n    className: {\n      type: String,\n      default: ''\n    },\n    menuClassName: {\n      type: String,\n      default: ''\n    },\n    menuStyle: {\n      type: String,\n      default: ''\n    },\n    menuInnerClassName: {\n      type: String,\n      default: ''\n    },\n    menuInnerStyle: {\n      type: String,\n      default: ''\n    },\n    tabClassName: {\n      type: String,\n      default: ''\n    },\n    tabStyle: {\n      type: String,\n      default: ''\n    },\n    menuItemClassName: {\n      type: String,\n      default: ''\n    },\n    menuItemStyle: {\n      type: String,\n      default: ''\n    },\n    menuData: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    defaultActiveKey: {\n      type: [String, Number],\n      default: ''\n    },\n    onBeforeChange: {\n      type: Function\n    }\n  },\n  emits: ['change'],\n  data: function data() {\n    return {\n      activeKey: this.defaultActiveKey,\n      $scroll: null,\n      $ease: IScroll.utils.ease\n    };\n  },\n  computed: {\n    getMenuClassName: function getMenuClassName() {\n      var menuClassName = this.menuClassName;\n      return classNames(selectorPrefix + \"-menu\", menuClassName || '');\n    },\n    getMenuInnerClassName: function getMenuInnerClassName() {\n      var menuInnerClassName = this.menuInnerClassName;\n      return classNames(selectorPrefix + \"-menu-inner\", menuInnerClassName || '');\n    },\n    getTabClassName: function getTabClassName() {\n      var tabClassName = this.tabClassName;\n      return classNames(selectorPrefix + \"-tab\", tabClassName || '');\n    },\n    getMenuItemClassName: function getMenuItemClassName() {\n      var _this = this;\n\n      return function (curKey) {\n        var _a = _this,\n            menuItemClassName = _a.menuItemClassName,\n            activeKey = _a.activeKey;\n        return classNames(selectorPrefix + \"-menu-item\", activeKey === curKey ? 'active' : null, menuItemClassName || '');\n      };\n    }\n  },\n  watch: {\n    defaultActiveKey: function defaultActiveKey(_defaultActiveKey) {\n      this.activeKey = _defaultActiveKey;\n    }\n  },\n  mounted: function mounted() {\n    this.initMenuScroll();\n  },\n  provide: function provide() {\n    return {\n      getActiveKey: this.getActiveKey\n    };\n  },\n  methods: {\n    initMenuScroll: function initMenuScroll() {\n      var _a = this,\n          menuEl = _a.$refs.menuEl,\n          $data = _a.$data;\n\n      $data.$scroll = new IScroll(menuEl, {\n        mouseWheel: true,\n        click: true\n      });\n      menuEl.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n      });\n    },\n    findElByKey: function findElByKey(key) {\n      var _a = this,\n          menuInnerEl = _a.$refs.menuInnerEl,\n          menuData = _a.menuData;\n\n      var index = menuData.findIndex(function (t) {\n        return t.key === key;\n      });\n      var arr = Array.from(menuInnerEl === null || menuInnerEl === void 0 ? void 0 : menuInnerEl.querySelectorAll(\".\" + selectorPrefix + \"-menu-item\"));\n\n      if (arr.length) {\n        return arr[index];\n      }\n\n      return null;\n    },\n    getActiveKey: function getActiveKey() {\n      return this.activeKey;\n    },\n    scrollTo: function scrollTo(key, time, easing) {\n      var _this = this;\n\n      if (time === void 0) {\n        time = 250;\n      }\n\n      var _a = this,\n          _b = _a.$data,\n          circular = _b.$ease.circular,\n          $scroll = _b.$scroll,\n          onBeforeChange = _a.onBeforeChange,\n          activeKey = _a.activeKey;\n\n      easing = easing || circular;\n      var isCan = true;\n\n      if (onBeforeChange) {\n        isCan = onBeforeChange(activeKey, key);\n      }\n\n      if (!isCan) return;\n      $scroll.scrollToElement(this.findElByKey(key), time, null, null, easing);\n      setTimeout(function () {\n        _this.activeKey = key;\n\n        _this.$nextTick(function () {\n          this.$emit('change', key);\n        });\n      }, time);\n    },\n    renderMenu: function renderMenu(h) {\n      var _this = this;\n\n      var _a = this,\n          $scopedSlots = _a.$scopedSlots,\n          menuData = _a.menuData,\n          getMenuItemClassName = _a.getMenuItemClassName,\n          menuItemStyle = _a.menuItemStyle;\n\n      return menuData.map(function (data) {\n        return h(\"li\", {\n          \"key\": data.key,\n          \"class\": getMenuItemClassName(data.key),\n          \"style\": menuItemStyle\n        }, [h(\"a\", {\n          \"on\": {\n            \"click\": function click() {\n              _this.scrollTo(data.key);\n            }\n          }\n        }, [$scopedSlots.menuItem ? $scopedSlots.menuItem(data) : data.name])]);\n      });\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n        $slots = _a.$slots,\n        getMenuClassName = _a.getMenuClassName,\n        getMenuInnerClassName = _a.getMenuInnerClassName,\n        getTabClassName = _a.getTabClassName,\n        menuStyle = _a.menuStyle,\n        menuInnerStyle = _a.menuInnerStyle,\n        tabStyle = _a.tabStyle;\n\n    return h(\"div\", {\n      \"class\": selectorPrefix,\n      \"ref\": \"el\"\n    }, [h(\"div\", {\n      \"class\": getMenuClassName,\n      \"style\": menuStyle,\n      \"ref\": \"menuEl\"\n    }, [h(\"ul\", {\n      \"class\": getMenuInnerClassName,\n      \"style\": menuInnerStyle,\n      \"ref\": \"menuInnerEl\"\n    }, [this.renderMenu(h)])]), h(\"ul\", {\n      \"class\": getTabClassName,\n      \"style\": tabStyle\n    }, [$slots.default])]);\n  }\n};\nexport default JdCategoryTab;"],"names":["classNames","IScroll","selectorPrefix","JdCategoryTab","name","props","className","type","String","default","menuClassName","menuStyle","menuInnerClassName","menuInnerStyle","tabClassName","tabStyle","menuItemClassName","menuItemStyle","menuData","Array","defaultActiveKey","Number","onBeforeChange","Function","emits","data","activeKey","this","$scroll","$ease","utils","ease","computed","getMenuClassName","getMenuInnerClassName","getTabClassName","getMenuItemClassName","_this","curKey","watch","_defaultActiveKey","mounted","initMenuScroll","provide","getActiveKey","methods","menuEl","$refs","$data","mouseWheel","click","addEventListener","e","preventDefault","findElByKey","key","menuInnerEl","index","findIndex","t","arr","from","querySelectorAll","length","scrollTo","time","easing","_a","_b","circular","isCan","scrollToElement","setTimeout","$nextTick","$emit","renderMenu","h","$scopedSlots","map","class","style","on","menuItem","render","$slots","ref"],"mappings":"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"}