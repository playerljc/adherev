import{createVNode as _createVNode}from"vue";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import"core-js/modules/es.array.find-index.js";import"core-js/modules/es.array.from.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/es.array.map.js";import"core-js/modules/es.function.name.js";import classNames from"classnames";import IScroll from"iscroll/build/iscroll";import{computed,defineComponent,nextTick,onMounted,provide,ref,watch}from"vue";import{array,func,object,string}from"vue-types";var selectorPrefix="adherev-ui-jdcategorytab",props={className:string().def(""),menuClassName:string().def(""),menuStyle:object().def({}),menuInnerClassName:string().def(""),menuInnerStyle:object().def({}),tabClassName:string().def(""),tabStyle:object().def({}),menuItemClassName:string().def(""),menuItemStyle:object().def({}),menuData:array().def([]),defaultActiveKey:string().def(""),onBeforeChange:func()};export default defineComponent({name:"adv-jdcategorytab",props:props,slots:["menuItem"],emits:["change"],setup:function(a,e){function t(e,t,n){n=n||i.circular;var r,o,s=!0;(s=a.onBeforeChange?a.onBeforeChange(u.value,e):s)&&(m.scrollToElement((r=e,s=a.menuData.findIndex(function(e){return e.key===r}),(o=Array.from(null===(o=c.value)||void 0===o?void 0:o.querySelectorAll(".".concat(selectorPrefix,"-menu-item")))).length?o[s]:null),t,null,null,n),setTimeout(function(){u.value=e,nextTick(function(){l("change",e)})},t))}var n=e.slots,l=e.emit,e=e.expose,u=ref(a.defaultActiveKey),r=ref(null),c=ref(null),m=null,i=IScroll.utils.ease,o=computed(function(){return classNames("".concat(selectorPrefix,"-menu"),a.menuClassName.split(/\s+/))}),s=computed(function(){return classNames("".concat(selectorPrefix,"-menu-inner"),a.menuInnerClassName.split(/\s+/))}),f=computed(function(){return classNames("".concat(selectorPrefix,"-tab"),a.tabClassName.split(/\s+/))}),d=computed(function(){return function(e){return classNames("".concat(selectorPrefix,"-menu-item"),u.value===e?"active":null,a.menuItemClassName.split(/\s+/))}});return watch(function(){return a.defaultActiveKey},function(e){u.value=e}),onMounted(function(){m=new IScroll(r.value,{mouseWheel:!0,click:!0}),r.value.addEventListener("touchmove",function(e){e.preventDefault()})}),provide("activeKey",u),e({scrollTo:t}),function(){return _createVNode("div",{class:selectorPrefix},[_createVNode("div",{class:o.value,style:a.menuStyle,ref:r},[_createVNode("ul",{class:s.value,style:a.menuInnerStyle,ref:c},[a.menuData.map(function(e){return _createVNode("li",{key:e.key,class:d.value(e.key),style:a.menuItemStyle},[_createVNode("a",{onClick:function(){t(e.key)}},[n.menuItem?n.menuItem(e):e.name])])})])]),_createVNode("ul",{class:f.value,style:a.tabStyle},[n.default?n.default():null])])}}});
//# sourceMappingURL=jdcategorytab.js.map
