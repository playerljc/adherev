import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.array.find-index.js";import"core-js/modules/es.array.from.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/es.array.map.js";import classNames from"classnames";import IScroll from"iscroll/build/iscroll";var selectorPrefix="adherev-ui-jdcategorytab",JdCategoryTab={name:"adv-jdcategorytab",props:{className:{type:String,default:""},menuClassName:{type:String,default:""},menuStyle:{type:String,default:""},menuInnerClassName:{type:String,default:""},menuInnerStyle:{type:String,default:""},tabClassName:{type:String,default:""},tabStyle:{type:String,default:""},menuItemClassName:{type:String,default:""},menuItemStyle:{type:String,default:""},menuData:{type:Array,default:function(){return[]}},defaultActiveKey:{type:[String,Number],default:""},onBeforeChange:{type:Function}},slots:["menuItem"],emits:["change"],data:function(){return{activeKey:this.defaultActiveKey,$scroll:null,$ease:IScroll.utils.ease}},computed:{getMenuClassName:function(){var e=this.menuClassName;return classNames("".concat(selectorPrefix,"-menu"),e||"")},getMenuInnerClassName:function(){var e=this.menuInnerClassName;return classNames("".concat(selectorPrefix,"-menu-inner"),e||"")},getTabClassName:function(){var e=this.tabClassName;return classNames("".concat(selectorPrefix,"-tab"),e||"")},getMenuItemClassName:function(){var r=this;return function(e){var t=r.menuItemClassName,n=r.activeKey;return classNames("".concat(selectorPrefix,"-menu-item"),n===e?"active":null,t||"")}}},watch:{defaultActiveKey:function(e){this.activeKey=e}},mounted:function(){this.initMenuScroll()},provide:function(){return{getActiveKey:this.getActiveKey}},methods:{initMenuScroll:function(){var e=this.$refs.menuEl;this.$data.$scroll=new IScroll(e,{mouseWheel:!0,click:!0}),e.addEventListener("touchmove",function(e){e.preventDefault()})},findElByKey:function(t){var e=this.$refs.menuInnerEl,n=this.menuData.findIndex(function(e){return e.key===t}),e=Array.from(null==e?void 0:e.querySelectorAll(".".concat(selectorPrefix,"-menu-item")));return e.length?e[n]:null},getActiveKey:function(){return this.activeKey},scrollTo:function(e,t,n){var r=this,a=(void 0===t&&(t=250),this),s=a.$data,l=s.$ease.circular,s=s.$scroll,u=a.onBeforeChange,a=a.activeKey,l=(n=n||l,!0);(l=u?u(a,e):l)&&(s.scrollToElement(this.findElByKey(e),t,null,null,n),setTimeout(function(){r.activeKey=e,r.$nextTick(function(){this.$emit("change",e)})},t))},renderMenu:function(t){var n=this,e=this,r=e.$scopedSlots,a=e.menuData,s=e.getMenuItemClassName,l=e.menuItemStyle;return a.map(function(e){return t("li",{key:e.key,class:s(e.key),style:l},[t("a",{on:{click:function(){n.scrollTo(e.key)}}},[r.menuItem?r.menuItem(e):e.name])])})}},render:function(e){var t=this,n=t.$slots,r=t.getMenuClassName,a=t.getMenuInnerClassName,s=t.getTabClassName,l=t.menuStyle,u=t.menuInnerStyle,t=t.tabStyle;return e("div",{class:selectorPrefix,ref:"el"},[e("div",{class:r,style:l,ref:"menuEl"},[e("ul",{class:a,style:u,ref:"menuInnerEl"},[this.renderMenu(e)])]),e("ul",{class:s,style:t},[n.default])])}};export default JdCategoryTab;
//# sourceMappingURL=jdcategorytab.js.map
