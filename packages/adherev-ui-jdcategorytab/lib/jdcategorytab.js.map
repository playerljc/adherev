{"version":3,"file":"jdcategorytab.js","sources":["jdcategorytab.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.find-index.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\nvar iscroll_1 = tslib_1.__importDefault(require(\"iscroll/build/iscroll\"));\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar selectorPrefix = 'adherev-ui-jdcategorytab';\nvar props = {\n  className: (0, vue_types_1.string)().def(''),\n  menuClassName: (0, vue_types_1.string)().def(''),\n  menuStyle: (0, vue_types_1.object)().def({}),\n  menuInnerClassName: (0, vue_types_1.string)().def(''),\n  menuInnerStyle: (0, vue_types_1.object)().def({}),\n  tabClassName: (0, vue_types_1.string)().def(''),\n  tabStyle: (0, vue_types_1.object)().def({}),\n  menuItemClassName: (0, vue_types_1.string)().def(''),\n  menuItemStyle: (0, vue_types_1.object)().def({}),\n  menuData: (0, vue_types_1.array)().def([]),\n  defaultActiveKey: (0, vue_types_1.string)().def(''),\n  onBeforeChange: (0, vue_types_1.func)()\n};\nexports.default = (0, vue_1.defineComponent)({\n  name: 'adv-jdcategorytab',\n  props: props,\n  slots: ['menuItem'],\n  emits: ['change'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots,\n      emit = _a.emit,\n      expose = _a.expose;\n    var activeKey = (0, vue_1.ref)(props.defaultActiveKey);\n    var menuEl = (0, vue_1.ref)(null);\n    var menuInnerEl = (0, vue_1.ref)(null);\n    var scroll = null;\n    var ease = iscroll_1.default.utils.ease;\n    var getMenuClassName = (0, vue_1.computed)(function () {\n      return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-menu\"), props.menuClassName || '');\n    });\n    var getMenuInnerClassName = (0, vue_1.computed)(function () {\n      return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-menu-inner\"), props.menuInnerClassName || '');\n    });\n    var getTabClassName = (0, vue_1.computed)(function () {\n      return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-tab\"), props.tabClassName || '');\n    });\n    var getMenuItemClassName = (0, vue_1.computed)(function () {\n      return function (curKey) {\n        return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-menu-item\"), activeKey.value === curKey ? 'active' : null, props.menuItemClassName || '');\n      };\n    });\n    var initMenuScroll = function initMenuScroll() {\n      scroll = new iscroll_1.default(menuEl.value, {\n        mouseWheel: true,\n        click: true\n      });\n      menuEl.value.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n      });\n    };\n    var findElByKey = function findElByKey(key) {\n      var _a;\n      var index = props.menuData.findIndex(function (t) {\n        return t.key === key;\n      });\n      var arr = Array.from((_a = menuInnerEl.value) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".\".concat(selectorPrefix, \"-menu-item\")));\n      if (arr.length) {\n        return arr[index];\n      }\n      return null;\n    };\n    var scrollTo = function scrollTo(key, time, easing) {\n      easing = easing || ease.circular;\n      var isCan = true;\n      if (props.onBeforeChange) {\n        isCan = props.onBeforeChange(activeKey.value, key);\n      }\n      if (!isCan) return;\n      scroll.scrollToElement(findElByKey(key), time, null, null, easing);\n      setTimeout(function () {\n        activeKey.value = key;\n        (0, vue_1.nextTick)(function () {\n          emit('change', key);\n        });\n      }, time);\n    };\n    var renderMenu = function renderMenu() {\n      return props.menuData.map(function (data) {\n        return (0, _vue.createVNode)(\"li\", {\n          \"key\": data.key,\n          \"class\": getMenuItemClassName.value(data.key),\n          \"style\": props.menuItemStyle\n        }, [(0, _vue.createVNode)(\"a\", {\n          \"onClick\": function onClick() {\n            return scrollTo(data.key);\n          }\n        }, [slots.menuItem ? slots.menuItem(data) : data.name])]);\n      });\n    };\n    (0, vue_1.watch)(function () {\n      return props.defaultActiveKey;\n    }, function (newActiveKey) {\n      activeKey.value = newActiveKey;\n    });\n    (0, vue_1.onMounted)(function () {\n      initMenuScroll();\n    });\n    (0, vue_1.provide)('activeKey', activeKey);\n    expose({\n      scrollTo: scrollTo\n    });\n    return function () {\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": selectorPrefix\n      }, [(0, _vue.createVNode)(\"div\", {\n        \"class\": getMenuClassName.value,\n        \"style\": props.menuStyle,\n        \"ref\": menuEl\n      }, [(0, _vue.createVNode)(\"ul\", {\n        \"class\": getMenuInnerClassName.value,\n        \"style\": props.menuInnerStyle,\n        \"ref\": menuInnerEl\n      }, [renderMenu()])]), (0, _vue.createVNode)(\"ul\", {\n        \"class\": getTabClassName.value,\n        \"style\": props.tabStyle\n      }, [slots.default ? slots.default() : null])]);\n    };\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","classnames_1","__importDefault","iscroll_1","vue_1","vue_types_1","selectorPrefix","props","className","string","def","menuClassName","menuStyle","object","menuInnerClassName","menuInnerStyle","tabClassName","tabStyle","menuItemClassName","menuItemStyle","menuData","array","defaultActiveKey","onBeforeChange","func","default","defineComponent","name","slots","emits","setup","_a","scrollTo","key","time","easing","ease","circular","arr","isCan","activeKey","scroll","scrollToElement","index","findIndex","t","Array","from","menuInnerEl","querySelectorAll","concat","length","setTimeout","nextTick","emit","expose","ref","menuEl","utils","getMenuClassName","computed","getMenuInnerClassName","getTabClassName","getMenuItemClassName","curKey","watch","newActiveKey","onMounted","mouseWheel","click","addEventListener","e","preventDefault","provide","createVNode","class","style","map","data","onClick","menuItem"],"mappings":"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"}