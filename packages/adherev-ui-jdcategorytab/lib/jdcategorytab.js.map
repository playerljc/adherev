{"version":3,"file":"jdcategorytab.js","sources":["jdcategorytab.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.find-index.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar classnames_1 = (0, tslib_1.__importDefault)(require(\"classnames\")); // @ts-ignore\n\nvar iscroll_1 = (0, tslib_1.__importDefault)(require(\"iscroll/build/iscroll\"));\n\nvar vue_1 = require(\"vue\");\n\nvar vue_types_1 = require(\"vue-types\");\n\nvar selectorPrefix = 'adherev-ui-jdcategorytab';\nvar props = {\n  className: (0, vue_types_1.string)().def(''),\n  menuClassName: (0, vue_types_1.string)().def(''),\n  menuStyle: (0, vue_types_1.object)().def({}),\n  menuInnerClassName: (0, vue_types_1.string)().def(''),\n  menuInnerStyle: (0, vue_types_1.object)().def({}),\n  tabClassName: (0, vue_types_1.string)().def(''),\n  tabStyle: (0, vue_types_1.object)().def({}),\n  menuItemClassName: (0, vue_types_1.string)().def(''),\n  menuItemStyle: (0, vue_types_1.object)().def({}),\n  menuData: (0, vue_types_1.array)().def([]),\n  defaultActiveKey: (0, vue_types_1.string)().def(''),\n  onBeforeChange: (0, vue_types_1.func)()\n};\nexports.default = (0, vue_1.defineComponent)({\n  name: 'adv-jdcategorytab',\n  props: props,\n  slots: ['menuItem'],\n  emits: ['change'],\n  setup: function setup(props, _a) {\n    var slots = _a.slots,\n        emit = _a.emit,\n        expose = _a.expose;\n    var activeKey = (0, vue_1.ref)(props.defaultActiveKey);\n    var menuEl = (0, vue_1.ref)(null);\n    var menuInnerEl = (0, vue_1.ref)(null);\n    var scroll = null;\n    var ease = iscroll_1.default.utils.ease;\n    var getMenuClassName = (0, vue_1.computed)(function () {\n      return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-menu\"), props.menuClassName.split(/\\s+/));\n    });\n    var getMenuInnerClassName = (0, vue_1.computed)(function () {\n      return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-menu-inner\"), props.menuInnerClassName.split(/\\s+/));\n    });\n    var getTabClassName = (0, vue_1.computed)(function () {\n      return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-tab\"), props.tabClassName.split(/\\s+/));\n    });\n    var getMenuItemClassName = (0, vue_1.computed)(function () {\n      return function (curKey) {\n        return (0, classnames_1.default)(\"\".concat(selectorPrefix, \"-menu-item\"), activeKey.value === curKey ? 'active' : null, props.menuItemClassName.split(/\\s+/));\n      };\n    });\n\n    var initMenuScroll = function initMenuScroll() {\n      scroll = new iscroll_1.default(menuEl.value, {\n        mouseWheel: true,\n        click: true\n      });\n      menuEl.value.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n      });\n    };\n\n    var findElByKey = function findElByKey(key) {\n      var _a;\n\n      var index = props.menuData.findIndex(function (t) {\n        return t.key === key;\n      });\n      var arr = Array.from((_a = menuInnerEl.value) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".\".concat(selectorPrefix, \"-menu-item\")));\n\n      if (arr.length) {\n        return arr[index];\n      }\n\n      return null;\n    };\n\n    var scrollTo = function scrollTo(key, time, easing) {\n      easing = easing || ease.circular;\n      var isCan = true;\n\n      if (props.onBeforeChange) {\n        isCan = props.onBeforeChange(activeKey.value, key);\n      }\n\n      if (!isCan) return;\n      scroll.scrollToElement(findElByKey(key), time, null, null, easing);\n      setTimeout(function () {\n        activeKey.value = key;\n        (0, vue_1.nextTick)(function () {\n          emit('change', key);\n        });\n      }, time);\n    };\n\n    var renderMenu = function renderMenu() {\n      return props.menuData.map(function (data) {\n        return (// @ts-ignore\n          (0, _vue.createVNode)(\"li\", {\n            \"key\": data.key,\n            \"class\": getMenuItemClassName.value(data.key),\n            \"style\": props.menuItemStyle\n          }, [(0, _vue.createVNode)(\"a\", {\n            \"onClick\": function onClick() {\n              scrollTo(data.key);\n            }\n          }, [slots.menuItem ? slots.menuItem(data) : data.name])])\n        );\n      });\n    };\n\n    (0, vue_1.watch)(function () {\n      return props.defaultActiveKey;\n    }, function (newActiveKey) {\n      activeKey.value = newActiveKey;\n    });\n    (0, vue_1.onMounted)(function () {\n      initMenuScroll();\n    });\n    (0, vue_1.provide)('activeKey', activeKey);\n    expose({\n      scrollTo: scrollTo\n    });\n    return function () {\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": selectorPrefix\n      }, [(0, _vue.createVNode)(\"div\", {\n        \"class\": getMenuClassName.value,\n        \"style\": props.menuStyle,\n        \"ref\": menuEl\n      }, [(0, _vue.createVNode)(\"ul\", {\n        \"class\": getMenuInnerClassName.value,\n        \"style\": props.menuInnerStyle,\n        \"ref\": menuInnerEl\n      }, [renderMenu()])]), (0, _vue.createVNode)(\"ul\", {\n        \"class\": getTabClassName.value,\n        \"style\": props.tabStyle\n      }, [slots.default ? slots.default() : null])]);\n    };\n  }\n});"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","classnames_1","__importDefault","iscroll_1","vue_1","vue_types_1","selectorPrefix","props","className","string","def","menuClassName","menuStyle","object","menuInnerClassName","menuInnerStyle","tabClassName","tabStyle","menuItemClassName","menuItemStyle","menuData","array","defaultActiveKey","onBeforeChange","func","default","defineComponent","name","slots","emits","setup","_a","scrollTo","key","time","easing","ease","circular","arr","isCan","activeKey","scroll","scrollToElement","index","findIndex","t","Array","from","menuInnerEl","querySelectorAll","concat","length","setTimeout","nextTick","emit","expose","ref","menuEl","utils","getMenuClassName","computed","split","getMenuInnerClassName","getTabClassName","getMenuItemClassName","curKey","watch","newActiveKey","onMounted","mouseWheel","click","addEventListener","e","preventDefault","provide","createVNode","class","style","map","data","onClick","menuItem"],"mappings":"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"}