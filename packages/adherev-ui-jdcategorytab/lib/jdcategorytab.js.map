{"version":3,"file":"jdcategorytab.js","sources":["jdcategorytab.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.find-index.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar classnames_1 = __importDefault(require(\"classnames\"));\n\nvar iscroll_1 = __importDefault(require(\"iscroll/build/iscroll\"));\n\nvar selectorPrefix = 'adherev-ui-jdcategorytab';\nexports.default = {\n  name: 'adv-jdcategorytab',\n  props: {\n    className: {\n      type: String,\n      default: ''\n    },\n    menuClassName: {\n      type: String,\n      default: ''\n    },\n    menuStyle: {\n      type: String,\n      default: ''\n    },\n    menuInnerClassName: {\n      type: String,\n      default: ''\n    },\n    menuInnerStyle: {\n      type: String,\n      default: ''\n    },\n    tabClassName: {\n      type: String,\n      default: ''\n    },\n    tabStyle: {\n      type: String,\n      default: ''\n    },\n    menuItemClassName: {\n      type: String,\n      default: ''\n    },\n    menuItemStyle: {\n      type: String,\n      default: ''\n    },\n    menuData: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    defaultActiveKey: {\n      type: [String, Number],\n      default: ''\n    },\n    onBeforeChange: {\n      type: Function\n    }\n  },\n  data: function data() {\n    return {\n      activeKey: this.defaultActiveKey,\n      $scroll: null,\n      $ease: iscroll_1.default.utils.ease\n    };\n  },\n  computed: {\n    getMenuClassName: function getMenuClassName() {\n      var menuClassName = this.menuClassName;\n      return classnames_1.default(selectorPrefix + \"-menu\", menuClassName.split(/\\s+/));\n    },\n    getMenuInnerClassName: function getMenuInnerClassName() {\n      var menuInnerClassName = this.menuInnerClassName;\n      return classnames_1.default(selectorPrefix + \"-menu-inner\", menuInnerClassName.split(/\\s+/));\n    },\n    getTabClassName: function getTabClassName() {\n      var tabClassName = this.tabClassName;\n      return classnames_1.default(selectorPrefix + \"-tab\", tabClassName.split(/\\s+/));\n    },\n    getMenuItemClassName: function getMenuItemClassName() {\n      var _this = this;\n\n      return function (curKey) {\n        var _a = _this,\n            menuItemClassName = _a.menuItemClassName,\n            activeKey = _a.activeKey;\n        return classnames_1.default(selectorPrefix + \"-menu-item\", activeKey === curKey ? 'active' : null, menuItemClassName.split(/\\s+/));\n      };\n    }\n  },\n  watch: {\n    defaultActiveKey: function defaultActiveKey(_defaultActiveKey) {\n      this.activeKey = _defaultActiveKey;\n    }\n  },\n  mounted: function mounted() {\n    this.initMenuScroll();\n  },\n  provide: function provide() {\n    return {\n      getActiveKey: this.getActiveKey\n    };\n  },\n  methods: {\n    initMenuScroll: function initMenuScroll() {\n      var _a = this,\n          menuEl = _a.$refs.menuEl,\n          $data = _a.$data;\n\n      $data.$scroll = new iscroll_1.default(menuEl, {\n        mouseWheel: true,\n        click: true\n      });\n      menuEl.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n      });\n    },\n    findElByKey: function findElByKey(key) {\n      var _a = this,\n          menuInnerEl = _a.$refs.menuInnerEl,\n          menuData = _a.menuData;\n\n      var index = menuData.findIndex(function (t) {\n        return t.key === key;\n      });\n      var arr = Array.from(menuInnerEl === null || menuInnerEl === void 0 ? void 0 : menuInnerEl.querySelectorAll(\".\" + selectorPrefix + \"-menu-item\"));\n\n      if (arr.length) {\n        return arr[index];\n      }\n\n      return null;\n    },\n    getActiveKey: function getActiveKey() {\n      return this.activeKey;\n    },\n    scrollTo: function scrollTo(key, time, easing) {\n      var _this = this;\n\n      if (time === void 0) {\n        time = 250;\n      }\n\n      var _a = this,\n          _b = _a.$data,\n          circular = _b.$ease.circular,\n          $scroll = _b.$scroll,\n          onBeforeChange = _a.onBeforeChange,\n          activeKey = _a.activeKey;\n\n      easing = easing || circular;\n      var isCan = true;\n\n      if (onBeforeChange) {\n        isCan = onBeforeChange(activeKey, key);\n      }\n\n      if (!isCan) return;\n      $scroll.scrollToElement(this.findElByKey(key), time, null, null, easing);\n      setTimeout(function () {\n        _this.activeKey = key;\n\n        _this.$nextTick(function () {\n          this.$emit('change', key);\n        });\n      }, time);\n    },\n    renderMenu: function renderMenu(h) {\n      var _this = this;\n\n      var _a = this,\n          $scopedSlots = _a.$scopedSlots,\n          menuData = _a.menuData,\n          getMenuItemClassName = _a.getMenuItemClassName,\n          menuItemStyle = _a.menuItemStyle;\n\n      return menuData.map(function (data) {\n        return h(\"li\", {\n          \"key\": data.key,\n          \"class\": getMenuItemClassName(data.key),\n          \"style\": menuItemStyle\n        }, [h(\"a\", {\n          \"on\": {\n            \"click\": function click() {\n              _this.scrollTo(data.key);\n            }\n          }\n        }, [$scopedSlots.menuItem ? $scopedSlots.menuItem(data) : data.name])]);\n      });\n    }\n  },\n  render: function render(h) {\n    var _a = this,\n        $slots = _a.$slots,\n        getMenuClassName = _a.getMenuClassName,\n        getMenuInnerClassName = _a.getMenuInnerClassName,\n        getTabClassName = _a.getTabClassName,\n        menuStyle = _a.menuStyle,\n        menuInnerStyle = _a.menuInnerStyle,\n        tabStyle = _a.tabStyle; // @ts-ignore\n\n\n    return h(\"div\", {\n      \"class\": selectorPrefix,\n      \"ref\": \"el\"\n    }, [h(\"div\", {\n      \"class\": getMenuClassName,\n      \"style\": menuStyle,\n      \"ref\": \"menuEl\"\n    }, [h(\"ul\", {\n      \"class\": getMenuInnerClassName,\n      \"style\": menuInnerStyle,\n      \"ref\": \"menuInnerEl\"\n    }, [this.renderMenu(h)])]), h(\"ul\", {\n      \"class\": getTabClassName,\n      \"style\": tabStyle\n    }, [$slots.default])]);\n  }\n};"],"names":["require","__importDefault","mod","__esModule","default","Object","defineProperty","exports","value","classnames_1","iscroll_1","selectorPrefix","name","props","className","type","String","menuClassName","menuStyle","menuInnerClassName","menuInnerStyle","tabClassName","tabStyle","menuItemClassName","menuItemStyle","menuData","Array","defaultActiveKey","Number","onBeforeChange","Function","data","activeKey","this","$scroll","$ease","utils","ease","computed","getMenuClassName","split","getMenuInnerClassName","getTabClassName","getMenuItemClassName","_this","curKey","watch","_defaultActiveKey","mounted","initMenuScroll","provide","getActiveKey","methods","menuEl","$refs","$data","mouseWheel","click","addEventListener","e","preventDefault","findElByKey","key","menuInnerEl","index","findIndex","t","arr","from","querySelectorAll","length","scrollTo","time","easing","_a","_b","circular","isCan","scrollToElement","setTimeout","$nextTick","$emit","renderMenu","h","$scopedSlots","map","class","style","on","menuItem","render","$slots","ref"],"mappings":"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"}