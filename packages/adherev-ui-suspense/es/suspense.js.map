{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["import _Spin from \"ant-design-vue/es/spin\";\nimport _Skeleton from \"ant-design-vue/es/skeleton\";\nimport Vue from 'vue';\nvar selectorPrefix = 'adherev-ui-suspense';\nvar Suspense = Vue.extend({\n  props: {\n    reset: {\n      type: Boolean,\n      default: false\n    },\n    renderFirstLoading: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  // @ts-ignore\n  slots: ['firstLoading'],\n  data: function data() {\n    return {\n      // 第一次\n      isFirst: true,\n      // 第一次加载\n      isFirstLoading: false\n    };\n  },\n  watch: {\n    reset: function reset(newVal) {\n      if (newVal) {\n        // 第一次\n        this.isFirst = true;\n        // 第一次加载\n        this.isFirstLoading = false;\n        this.$forceUpdate();\n      }\n    }\n  },\n  mounted: function mounted() {\n    if (this.fetchData) {\n      this.fetchData();\n    }\n  },\n  methods: {\n    /**\n     * renderNormalFirstLoading\n     */\n    $renderNormalFirstLoading: function $renderNormalFirstLoading(h) {\n      var result = [];\n      for (var i = 0; i < 7; i++) {\n        // @ts-ignore\n        result.push(h(_Skeleton, {\n          \"key\": i + 1,\n          \"attrs\": {\n            \"loading\": true,\n            \"active\": true,\n            \"avatar\": true\n          }\n        }));\n      }\n      return h(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-loading\")\n      }, [result]);\n    },\n    /**\n     * renderFirstLoading\n     * @param h\n     */\n    $renderFirstLoading: function $renderFirstLoading(h) {\n      var $slots = this.$slots;\n      if ($slots.firstLoading || this.renderFirstLoading) {\n        return $slots.firstLoading || this.renderFirstLoading;\n      }\n      return this.$renderNormalFirstLoading(h);\n    },\n    /**\n     * renderNormal\n     * @param h\n     */\n    $renderNormal: function $renderNormal(h) {\n      return (// @ts-ignore\n        h(_Spin, {\n          \"attrs\": {\n            \"size\": \"large\",\n            \"spinning\": this.showLoading()\n          }\n        }, [this.renderInner(h)])\n      );\n    },\n    /**\n     * renderDispatch\n     * @param h\n     */\n    $renderDispatch: function $renderDispatch(h) {\n      var loading = this.showLoading();\n      if (this.isFirst && !this.isFirstLoading && loading) {\n        this.isFirstLoading = true;\n      }\n      if (this.isFirst && this.isFirstLoading && !loading) {\n        this.isFirst = false;\n        this.isFirstLoading = false;\n      }\n      if (this.isFirst) {\n        return this.$renderFirstLoading(h);\n      }\n      return this.$renderNormal(h);\n    },\n    /**\n     * renderSuspense\n     * @description - renderSuspense\n     * @param h\n     */\n    $renderSuspense: function $renderSuspense(h) {\n      return h(\"div\", {\n        \"class\": selectorPrefix\n      }, [this.$renderDispatch(h)]);\n    }\n  },\n  /**\n   * render\n   * @param h\n   */\n  render: function render(h) {\n    return this.$renderSuspense(h);\n  }\n});\n/**\n * Suspense\n * @overview showLoading: boolean\n * @overview renderInner: VNode | null\n * @overview fetchData(): void\n */\nexport default Suspense;"],"names":["_Spin","_Skeleton","Vue","selectorPrefix","Suspense","extend","props","reset","type","Boolean","default","renderFirstLoading","Object","slots","data","isFirst","isFirstLoading","watch","newVal","this","$forceUpdate","mounted","fetchData","methods","$renderNormalFirstLoading","h","result","i","push","key","attrs","loading","active","avatar","class","concat","$renderFirstLoading","$slots","firstLoading","$renderNormal","size","spinning","showLoading","renderInner","$renderDispatch","$renderSuspense","render"],"mappings":"OAAOA,UAAW,gCACXC,cAAe,oCACfC,QAAS,MAChB,IAAIC,eAAiB,sBACjBC,SAAWF,IAAIG,OAAO,CACxBC,MAAO,CACLC,MAAO,CACLC,KAAMC,QACNC,QAAS,CAAA,CACX,EACAC,mBAAoB,CAClBH,KAAMI,OACNF,QAAS,WACP,OAAO,IACT,CACF,CACF,EAEAG,MAAO,CAAC,gBACRC,KAAM,WACJ,MAAO,CAELC,QAAS,CAAA,EAETC,eAAgB,CAAA,CAClB,CACF,EACAC,MAAO,CACLV,MAAO,SAAeW,GAChBA,IAEFC,KAAKJ,QAAU,CAAA,EAEfI,KAAKH,eAAiB,CAAA,EACtBG,KAAKC,aAAa,EAEtB,CACF,EACAC,QAAS,WACHF,KAAKG,WACPH,KAAKG,UAAU,CAEnB,EACAC,QAAS,CAIPC,0BAA2B,SAAmCC,GAE5D,IADA,IAAIC,EAAS,GACJC,EAAI,EAAGA,EAAI,EAAGA,CAAC,GAEtBD,EAAOE,KAAKH,EAAExB,UAAW,CACvB4B,IAAOF,EAAI,EACXG,MAAS,CACPC,QAAW,CAAA,EACXC,OAAU,CAAA,EACVC,OAAU,CAAA,CACZ,CACF,CAAC,CAAC,EAEJ,OAAOR,EAAE,MAAO,CACdS,MAAS,GAAGC,OAAOhC,eAAgB,UAAU,CAC/C,EAAG,CAACuB,EAAO,CACb,EAKAU,oBAAqB,SAA6BX,GAChD,IAAIY,EAASlB,KAAKkB,OAClB,OAAIA,EAAOC,cAAgBnB,KAAKR,mBACvB0B,EAAOC,cAAgBnB,KAAKR,mBAE9BQ,KAAKK,0BAA0BC,CAAC,CACzC,EAKAc,cAAe,SAAuBd,GACpC,OACEA,EAAEzB,MAAO,CACP8B,MAAS,CACPU,KAAQ,QACRC,SAAYtB,KAAKuB,YAAY,CAC/B,CACF,EAAG,CAACvB,KAAKwB,YAAYlB,CAAC,EACxB,CACF,EAKAmB,gBAAiB,SAAyBnB,GACxC,IAAIM,EAAUZ,KAAKuB,YAAY,EAQ/B,OAPIvB,KAAKJ,SAAW,CAACI,KAAKH,gBAAkBe,IAC1CZ,KAAKH,eAAiB,CAAA,GAEpBG,KAAKJ,SAAWI,KAAKH,gBAAkB,CAACe,IAC1CZ,KAAKJ,QAAU,CAAA,EACfI,KAAKH,eAAiB,CAAA,GAEpBG,KAAKJ,QACAI,KAAKiB,oBAAoBX,CAAC,EAE5BN,KAAKoB,cAAcd,CAAC,CAC7B,EAMAoB,gBAAiB,SAAyBpB,GACxC,OAAOA,EAAE,MAAO,CACdS,MAAS/B,cACX,EAAG,CAACgB,KAAKyB,gBAAgBnB,CAAC,EAAE,CAC9B,CACF,EAKAqB,OAAQ,SAAgBrB,GACtB,OAAON,KAAK0B,gBAAgBpB,CAAC,CAC/B,CACF,CAAC,iBAOcrB"}