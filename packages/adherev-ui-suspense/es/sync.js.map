{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { Empty } from 'ant-design-vue';\nimport { defineComponent } from 'vue';\nimport { func, object } from 'vue-types';\nimport Suspense from './suspense';\nvar suspenseSyncProps = {\n  data: object(),\n  isEmpty: func(),\n  renderEmpty: func()\n};\n/**\n * SuspenseSync\n * @description 传数据\n */\nvar SuspenseSync = defineComponent({\n  name: 'adv-suspense-sync',\n  mixins: [Suspense],\n  props: suspenseSyncProps,\n  slots: ['empty'],\n  watch: {\n    data: function data(newData, oldData) {\n      if (this.$data.$isLoading && JSON.stringify(newData || []) !== JSON.stringify(oldData || [])) {\n        this.loading = false;\n        this.$nextTick(function () {\n          this.$data.$isLoading = false;\n        });\n      }\n    }\n  },\n  data: function data() {\n    return {\n      loading: true,\n      $isLoading: true\n    };\n  },\n  methods: {\n    showLoading: function showLoading() {\n      return this.loading;\n    },\n    renderInner: function renderInner() {\n      if (!this.isEmpty()) return this.$slots.default;\n      return this.$slots.empty || this.renderEmpty || _createVNode(Empty, null, null);\n    },\n    resetSync: function resetSync() {\n      var _this = this;\n      return new Promise(function (resolve) {\n        // 第一次\n        _this.isFirst = true;\n        // 第一次加载\n        _this.isFirstLoading = false;\n        _this.$data.$isLoading = true;\n        _this.loading = true;\n        _this.$nextTick(function () {\n          resolve();\n        });\n      });\n    }\n  }\n});\nexport default SuspenseSync;"],"names":["_createVNode","Empty","defineComponent","func","object","Suspense","suspenseSyncProps","data","isEmpty","renderEmpty","SuspenseSync","name","mixins","props","slots","watch","newData","oldData","this","$data","$isLoading","JSON","stringify","loading","$nextTick","methods","showLoading","renderInner","$slots","empty","default","resetSync","_this","Promise","resolve","isFirst","isFirstLoading"],"mappings":"OAAwBA,2BAAyB,KAAL,YACrC,+CACA,uCACEC,KAA6B,KAAhB,wBACbC,eAA4B,KAAL,aACvBC,KAAMC,MAAyB,KAAX,mBACtBC,aAAc,aACrB,IAAIC,kBAAoB,CACtBC,KAAMH,OAAO,EACbI,QAASL,KAAK,EACdM,YAAaN,KAAK,CACpB,EAKIO,aAAeR,gBAAgB,CACjCS,KAAM,oBACNC,OAAQ,CAACP,UACTQ,MAAOP,kBACPQ,MAAO,CAAC,SACRC,MAAO,CACLR,KAAM,SAAcS,EAASC,GACvBC,KAAKC,MAAMC,YAAcC,KAAKC,UAAUN,GAAW,EAAE,IAAMK,KAAKC,UAAUL,GAAW,EAAE,IACzFC,KAAKK,QAAU,CAAA,EACfL,KAAKM,UAAU,WACbN,KAAKC,MAAMC,WAAa,CAAA,CAC1B,CAAC,EAEL,CACF,EACAb,KAAM,WACJ,MAAO,CACLgB,QAAS,CAAA,EACTH,WAAY,CAAA,CACd,CACF,EACAK,QAAS,CACPC,YAAa,WACX,OAAOR,KAAKK,OACd,EACAI,YAAa,WACX,OAAKT,KAAKV,QAAQ,EACXU,KAAKU,OAAOC,OAASX,KAAKT,aAAeT,aAAaC,MAAO,KAAM,IAAI,EADlDiB,KAAKU,OAAOE,OAE1C,EACAC,UAAW,WACT,IAAIC,EAAQd,KACZ,OAAO,IAAIe,QAAQ,SAAUC,GAE3BF,EAAMG,QAAU,CAAA,EAEhBH,EAAMI,eAAiB,CAAA,EACvBJ,EAAMb,MAAMC,WAAa,CAAA,EACzBY,EAAMT,QAAU,CAAA,EAChBS,EAAMR,UAAU,WACdU,EAAQ,CACV,CAAC,CACH,CAAC,CACH,CACF,CACF,CAAC,iBACcxB"}