{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar ant_design_vue_1 = require(\"ant-design-vue\");\n\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\n/**\n * SuspenseSync\n * @description 传数据\n */\n\n\nvar SuspenseSync = {\n  name: 'adv-suspense-sync',\n  mixins: [suspense_1.default],\n  props: {\n    isEmpty: {\n      type: Boolean,\n      default: false\n    },\n    renderEmpty: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    },\n    data: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  slots: ['empty'],\n  watch: {\n    data: function data(newData, oldData) {\n      if (this.$data.$isLoading && JSON.stringify(newData || []) !== JSON.stringify(oldData || [])) {\n        this.loading = false;\n        this.$nextTick(function () {\n          this.$data.$isLoading = false;\n        });\n      }\n    }\n  },\n  data: function data() {\n    return {\n      loading: true,\n      $isLoading: true\n    };\n  },\n  methods: {\n    showLoading: function showLoading() {\n      return this.loading;\n    },\n    renderInner: function renderInner(h) {\n      if (!this.isEmpty()) return this.$slots.default;\n      return this.$slots.empty || this.renderEmpty || h(ant_design_vue_1.Empty);\n    },\n    resetSync: function resetSync() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        // 第一次\n        _this.isFirst = true; // 第一次加载\n\n        _this.isFirstLoading = false;\n        _this.$data.$isLoading = true;\n        _this.loading = true;\n\n        _this.$nextTick(function () {\n          resolve();\n        });\n      });\n    }\n  }\n};\nexports.default = SuspenseSync;"],"names":["require","Object","defineProperty","exports","value","tslib_1","ant_design_vue_1","suspense_1","__importDefault","SuspenseSync","name","mixins","default","props","isEmpty","type","Boolean","renderEmpty","Function","data","slots","watch","newData","oldData","this","$data","$isLoading","JSON","stringify","loading","$nextTick","methods","showLoading","renderInner","h","$slots","empty","Empty","resetSync","_this","Promise","resolve","isFirst","isFirstLoading"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,0CAERA,QAAQ,iCAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,iBAAmBN,QAAQ,kBAE3BO,WAAaF,QAAQG,gBAAgBR,QAAQ,eAO7CS,aAAe,CACjBC,KAAM,oBACNC,OAAQ,CAACJ,WAAWK,SACpBC,MAAO,CACLC,QAAS,CACPC,KAAMC,QACNJ,SAAS,GAEXK,YAAa,CACXF,KAAMG,SACNN,QAAS,WACP,OAAO,OAGXO,KAAM,CACJJ,KAAMd,OACNW,QAAS,WACP,OAAO,QAIbQ,MAAO,CAAC,SACRC,MAAO,CACLF,KAAM,SAAcG,EAASC,GACvBC,KAAKC,MAAMC,YAAcC,KAAKC,UAAUN,GAAW,MAAQK,KAAKC,UAAUL,GAAW,MACvFC,KAAKK,SAAU,EACfL,KAAKM,UAAU,WACbN,KAAKC,MAAMC,YAAa,OAKhCP,KAAM,WACJ,MAAO,CACLU,SAAS,EACTH,YAAY,IAGhBK,QAAS,CACPC,YAAa,WACX,OAAOR,KAAKK,SAEdI,YAAa,SAAqBC,GAChC,OAAKV,KAAKV,UACHU,KAAKW,OAAOC,OAASZ,KAAKP,aAAeiB,EAAE5B,iBAAiB+B,OADvCb,KAAKW,OAAOvB,SAG1C0B,UAAW,WACT,IAAIC,EAAQf,KAEZ,OAAO,IAAIgB,QAAQ,SAAUC,GAE3BF,EAAMG,SAAU,EAEhBH,EAAMI,gBAAiB,EACvBJ,EAAMd,MAAMC,YAAa,EACzBa,EAAMV,SAAU,EAEhBU,EAAMT,UAAU,WACdW,WAMVtC,QAAQS,QAAUH"}