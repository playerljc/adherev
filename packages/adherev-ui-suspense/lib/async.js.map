{"version":3,"file":"async.js","sources":["async.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar ant_design_vue_1 = require(\"ant-design-vue\");\n\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\n/**\n * SuspenseAsync\n * @description 调用接口\n */\n\n\nvar SuspenseAsync = {\n  name: 'adv-suspense-async',\n  mixins: [suspense_1.default],\n  props: {\n    isEmpty: {\n      type: Function,\n      default: function _default() {\n        return true;\n      }\n    },\n    renderEmpty: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    },\n    fetchAsyncData: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  slots: ['empty'],\n  data: function data() {\n    return {\n      loading: false\n    };\n  },\n  methods: {\n    showLoading: function showLoading() {\n      return this.loading;\n    },\n    renderInner: function renderInner(h) {\n      if (!this.isEmpty()) return this.$slots.default;\n      return this.$slots.empty || this.renderEmpty || h(ant_design_vue_1.Empty);\n    },\n    resetAsync: function resetAsync() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        // 第一次\n        _this.isFirst = true; // 第一次加载\n\n        _this.isFirstLoading = false;\n\n        _this.fetchData().then(function () {\n          return resolve();\n        }).catch(function () {\n          return resolve();\n        });\n      });\n    },\n    fetchData: function fetchData() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        var _a, _b, _c;\n\n        console.log('async', _this.fetchAsyncData);\n\n        if (!_this.fetchAsyncData) {\n          _this.loading = false;\n          resolve();\n          return;\n        }\n\n        _this.loading = true;\n        return (_c = (_b = (_a = _this === null || _this === void 0 ? void 0 : _this.fetchAsyncData) === null || _a === void 0 ? void 0 : _a.call(_this)) === null || _b === void 0 ? void 0 : _b.then(function () {\n          _this.loading = false;\n\n          _this.$nextTick(function () {\n            resolve();\n          });\n        })) === null || _c === void 0 ? void 0 : _c.catch(function () {\n          _this.loading = false;\n\n          _this.$nextTick(function () {\n            resolve();\n          });\n        });\n      });\n    }\n  }\n};\nexports.default = SuspenseAsync;"],"names":["require","Object","defineProperty","exports","value","tslib_1","ant_design_vue_1","suspense_1","__importDefault","SuspenseAsync","name","mixins","default","props","isEmpty","type","Function","renderEmpty","fetchAsyncData","slots","data","loading","methods","showLoading","this","renderInner","h","$slots","empty","Empty","resetAsync","_this","Promise","resolve","isFirst","isFirstLoading","fetchData","then","catch","_c","console","log","_b","_a","call","$nextTick"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,0CAERA,QAAQ,iCAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,iBAAmBN,QAAQ,kBAE3BO,WAAaF,QAAQG,gBAAgBR,QAAQ,eAO7CS,cAAgB,CAClBC,KAAM,qBACNC,OAAQ,CAACJ,WAAWK,SACpBC,MAAO,CACLC,QAAS,CACPC,KAAMC,SACNJ,QAAS,WACP,OAAO,IAGXK,YAAa,CACXF,KAAMC,SACNJ,QAAS,WACP,OAAO,OAGXM,eAAgB,CACdH,KAAMC,SACNJ,QAAS,WACP,OAAO,QAIbO,MAAO,CAAC,SACRC,KAAM,WACJ,MAAO,CACLC,SAAS,IAGbC,QAAS,CACPC,YAAa,WACX,OAAOC,KAAKH,SAEdI,YAAa,SAAqBC,GAChC,OAAKF,KAAKV,UACHU,KAAKG,OAAOC,OAASJ,KAAKP,aAAeS,EAAEpB,iBAAiBuB,OADvCL,KAAKG,OAAOf,SAG1CkB,WAAY,WACV,IAAIC,EAAQP,KAEZ,OAAO,IAAIQ,QAAQ,SAAUC,GAE3BF,EAAMG,SAAU,EAEhBH,EAAMI,gBAAiB,EAEvBJ,EAAMK,YAAYC,KAAK,WACrB,OAAOJ,MACNK,MAAM,WACP,OAAOL,SAIbG,UAAW,WACT,IAAIL,EAAQP,KAEZ,OAAO,IAAIQ,QAAQ,SAAUC,GAC3B,IAAYM,EAIZ,OAFAC,QAAQC,IAAI,QAASV,EAAMb,gBAEtBa,EAAMb,gBAMXa,EAAMV,SAAU,EAOR,QANAkB,EAA8I,QAAxIG,EAAmF,QAA7EC,EAAKZ,MAAAA,OAAqC,EAASA,EAAMb,sBAAmC,IAAPyB,OAAgB,EAASA,EAAGC,KAAKb,UAA2B,IAAPW,OAAgB,EAASA,EAAGL,KAAK,WAC7LN,EAAMV,SAAU,EAEhBU,EAAMc,UAAU,WACdZ,eAEmB,IAAPM,OAAgB,EAASA,EAAGD,MAAM,WAChDP,EAAMV,SAAU,EAEhBU,EAAMc,UAAU,WACdZ,UAhBFF,EAAMV,SAAU,OAChBY,UAsBV9B,QAAQS,QAAUH"}