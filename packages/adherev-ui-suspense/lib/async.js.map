{"version":3,"file":"async.js","sources":["async.js"],"sourcesContent":["\"use strict\";\n\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.promise.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\nvar suspenseAsyncProps = {\n  isEmpty: (0, vue_types_1.func)(),\n  renderEmpty: (0, vue_types_1.func)(),\n  fetchAsyncData: (0, vue_types_1.func)()\n};\n/**\n * SuspenseAsync\n * @description 调用接口\n */\nvar SuspenseAsync = (0, vue_1.defineComponent)({\n  name: 'adv-suspense-async',\n  mixins: [suspense_1.default],\n  props: suspenseAsyncProps,\n  slots: ['empty'],\n  data: function data() {\n    return {\n      loading: false\n    };\n  },\n  methods: {\n    showLoading: function showLoading() {\n      return this.loading;\n    },\n    renderInner: function renderInner() {\n      if (!this.isEmpty()) return this.$slots.default;\n      return this.$slots.empty || this.renderEmpty || (0, _vue.createVNode)(ant_design_vue_1.Empty, null, null);\n    },\n    resetAsync: function resetAsync() {\n      var _this = this;\n      return new Promise(function (resolve) {\n        // 第一次\n        _this.isFirst = true;\n        // 第一次加载\n        _this.isFirstLoading = false;\n        _this.fetchData().then(function () {\n          return resolve();\n        }).catch(function () {\n          return resolve();\n        });\n      });\n    },\n    fetchData: function fetchData() {\n      var _this = this;\n      return new Promise(function (resolve) {\n        var _a, _b, _c;\n        if (!_this.fetchAsyncData) {\n          _this.loading = false;\n          resolve();\n          return;\n        }\n        _this.loading = true;\n        return (_c = (_b = (_a = _this === null || _this === void 0 ? void 0 : _this.fetchAsyncData) === null || _a === void 0 ? void 0 : _a.call(_this)) === null || _b === void 0 ? void 0 : _b.then(function () {\n          _this.loading = false;\n          _this.$nextTick(function () {\n            resolve();\n          });\n        })) === null || _c === void 0 ? void 0 : _c.catch(function () {\n          _this.loading = false;\n          _this.$nextTick(function () {\n            resolve();\n          });\n        });\n      });\n    }\n  }\n});\nexports.default = SuspenseAsync;"],"names":["_vue","require","tslib_1","Object","defineProperty","exports","value","ant_design_vue_1","vue_1","vue_types_1","suspense_1","__importDefault","suspenseAsyncProps","isEmpty","func","renderEmpty","fetchAsyncData","SuspenseAsync","defineComponent","name","mixins","default","props","slots","data","loading","methods","showLoading","this","renderInner","$slots","empty","createVNode","Empty","resetAsync","_this","Promise","resolve","isFirst","isFirstLoading","fetchData","then","catch","_c","_b","_a","call","$nextTick"],"mappings":"AAAA,aAEA,IAAIA,KAAOC,QAAQ,KAAK,EAOpBC,SANJD,QAAQ,8CAA8C,EACtDA,QAAQ,wCAAwC,EAChDA,QAAQ,+BAA+B,EACvCE,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACaL,QAAQ,OAAO,GACzBM,iBAAmBN,QAAQ,gBAAgB,EAC3CO,MAAQP,QAAQ,KAAK,EACrBQ,YAAcR,QAAQ,WAAW,EACjCS,WAAaR,QAAQS,gBAAgBV,QAAQ,YAAY,CAAC,EAC1DW,mBAAqB,CACvBC,SAAS,EAAIJ,YAAYK,MAAM,EAC/BC,aAAa,EAAIN,YAAYK,MAAM,EACnCE,gBAAgB,EAAIP,YAAYK,MAAM,CACxC,EAKIG,eAAgB,EAAIT,MAAMU,iBAAiB,CAC7CC,KAAM,qBACNC,OAAQ,CAACV,WAAWW,SACpBC,MAAOV,mBACPW,MAAO,CAAC,SACRC,KAAM,WACJ,MAAO,CACLC,QAAS,CAAA,CACX,CACF,EACAC,QAAS,CACPC,YAAa,WACX,OAAOC,KAAKH,OACd,EACAI,YAAa,WACX,OAAKD,KAAKf,QAAQ,EACXe,KAAKE,OAAOC,OAASH,KAAKb,cAAe,EAAIf,KAAKgC,aAAazB,iBAAiB0B,MAAO,KAAM,IAAI,EAD5EL,KAAKE,OAAOT,OAE1C,EACAa,WAAY,WACV,IAAIC,EAAQP,KACZ,OAAO,IAAIQ,QAAQ,SAAUC,GAE3BF,EAAMG,QAAU,CAAA,EAEhBH,EAAMI,eAAiB,CAAA,EACvBJ,EAAMK,UAAU,EAAEC,KAAK,WACrB,OAAOJ,EAAQ,CACjB,CAAC,EAAEK,MAAM,WACP,OAAOL,EAAQ,CACjB,CAAC,CACH,CAAC,CACH,EACAG,UAAW,WACT,IAAIL,EAAQP,KACZ,OAAO,IAAIQ,QAAQ,SAAUC,GAC3B,IAAYM,EACZ,GAAKR,EAAMnB,eAMX,OADAmB,EAAMV,QAAU,CAAA,EACT,OAACkB,EAAK,OAACC,EAAK,OAACC,EAAKV,MAAAA,EAAqC,KAAA,EAASA,EAAMnB,gBAA4C,KAAA,EAAS6B,EAAGC,KAAKX,CAAK,GAA+B,KAAA,EAASS,EAAGH,KAAK,WAC7LN,EAAMV,QAAU,CAAA,EAChBU,EAAMY,UAAU,WACdV,EAAQ,CACV,CAAC,CACH,CAAC,GAA+B,KAAA,EAASM,EAAGD,MAAM,WAChDP,EAAMV,QAAU,CAAA,EAChBU,EAAMY,UAAU,WACdV,EAAQ,CACV,CAAC,CACH,CAAC,EAfCF,EAAMV,QAAU,CAAA,EAChBY,EAAQ,CAeZ,CAAC,CACH,CACF,CACF,CAAC,EACDhC,QAAQgB,QAAUJ"}