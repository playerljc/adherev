{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nvar _vue = require(\"vue\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !(0, _vue.isVNode)(s);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ant_design_vue_1 = require(\"ant-design-vue\");\n\nvar vue_1 = require(\"vue\");\n\nvar vue_types_1 = require(\"vue-types\");\n\nvar selectorPrefix = 'adherev-ui-suspense';\nvar suspenseProps = {\n  reset: (0, vue_types_1.bool)().def(false)\n};\n/**\n * Suspense\n * @overview showLoading: boolean\n * @overview renderInner: VNode | null\n * @overview fetchData(): void\n */\n\nexports.default = (0, vue_1.defineComponent)({\n  props: suspenseProps,\n  slots: ['firstLoading'],\n  data: function data() {\n    return {\n      // 第一次\n      isFirst: true,\n      // 第一次加载\n      isFirstLoading: false\n    };\n  },\n  watch: {\n    reset: function reset(newVal) {\n      if (newVal) {\n        // 第一次\n        this.isFirst = true; // 第一次加载\n\n        this.isFirstLoading = false;\n        this.$forceUpdate();\n      }\n    }\n  },\n  mounted: function mounted() {\n    // @ts-ignore\n    this.fetchData();\n  },\n  methods: {\n    /**\n     * renderNormalFirstLoading\n     */\n    renderNormalFirstLoading: function renderNormalFirstLoading() {\n      var result = [];\n\n      for (var i = 0; i < 7; i++) {\n        // @ts-ignore\n        result.push((0, _vue.createVNode)(ant_design_vue_1.Skeleton, {\n          \"key\": i + 1,\n          \"loading\": true,\n          \"active\": true,\n          \"avatar\": true\n        }, null));\n      }\n\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-loading\")\n      }, [result]);\n    },\n\n    /**\n     * renderFirstLoading\n     * @param h\n     */\n    renderFirstLoading: function renderFirstLoading() {\n      var $slots = this.$slots;\n\n      if ($slots.firstLoading) {\n        // @ts-ignore\n        return $slots.firstLoading();\n      }\n\n      return this.renderNormalFirstLoading();\n    },\n\n    /**\n     * renderNormal\n     * @param h\n     */\n    renderNormal: function renderNormal() {\n      var _slot;\n\n      return (// @ts-ignore\n        (0, _vue.createVNode)(ant_design_vue_1.Spin, {\n          \"size\": \"large\",\n          \"spinning\": this.showLoading()\n        }, _isSlot(_slot = // @ts-ignore\n        this.renderInner()) ? _slot : {\n          default: function _default() {\n            return [_slot];\n          }\n        })\n      );\n    },\n\n    /**\n     * renderDispatch\n     * @param h\n     */\n    renderDispatch: function renderDispatch() {\n      // @ts-ignore\n      var loading = this.showLoading();\n\n      if (this.isFirst && !this.isFirstLoading && loading) {\n        this.isFirstLoading = true;\n      }\n\n      if (this.isFirst && this.isFirstLoading && !loading) {\n        this.isFirst = false;\n        this.isFirstLoading = false;\n      }\n\n      if (this.isFirst) {\n        return this.renderFirstLoading();\n      }\n\n      return this.renderNormal();\n    },\n\n    /**\n     * renderSuspense\n     * @description - renderSuspense\n     * @param h\n     */\n    renderSuspense: function renderSuspense() {\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": selectorPrefix\n      }, [this.renderDispatch()]);\n    }\n  },\n\n  /**\n   * render\n   */\n  render: function render() {\n    return this.renderSuspense();\n  }\n});"],"names":["require","_vue","_isSlot","s","Object","prototype","toString","call","isVNode","defineProperty","exports","value","ant_design_vue_1","vue_1","vue_types_1","selectorPrefix","suspenseProps","reset","bool","def","default","defineComponent","props","slots","data","isFirst","isFirstLoading","watch","newVal","this","$forceUpdate","mounted","fetchData","methods","renderNormalFirstLoading","result","i","push","createVNode","Skeleton","key","loading","active","avatar","class","concat","renderFirstLoading","$slots","firstLoading","renderNormal","_slot","Spin","size","spinning","showLoading","renderInner","renderDispatch","renderSuspense","render"],"mappings":"aAEAA,QAAQ,0CAER,IAAIC,KAAOD,QAAQ,OAInB,SAASE,QAAQC,GACf,MAAoB,mBAANA,GAA0D,oBAAtCC,OAAOC,UAAUC,SAASC,KAAKJ,MAA6B,EAAIF,KAAKO,SAASL,GAHlHH,QAAQ,gDAMRI,OAAOK,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,iBAAmBZ,QAAQ,kBAE3Ba,MAAQb,QAAQ,OAEhBc,YAAcd,QAAQ,aAEtBe,eAAiB,sBACjBC,cAAgB,CAClBC,OAAO,EAAIH,YAAYI,QAAQC,KAAI,IASrCT,QAAQU,SAAU,EAAIP,MAAMQ,iBAAiB,CAC3CC,MAAON,cACPO,MAAO,CAAC,gBACRC,KAAM,WACJ,MAAO,CAELC,SAAS,EAETC,gBAAgB,IAGpBC,MAAO,CACLV,MAAO,SAAeW,GAChBA,IAEFC,KAAKJ,SAAU,EAEfI,KAAKH,gBAAiB,EACtBG,KAAKC,kBAIXC,QAAS,WAEPF,KAAKG,aAEPC,QAAS,CAIPC,yBAA0B,WAGxB,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IAErBD,EAAOE,MAAK,EAAIpC,KAAKqC,aAAa1B,iBAAiB2B,SAAU,CAC3DC,IAAOJ,EAAI,EACXK,SAAW,EACXC,QAAU,EACVC,QAAU,GACT,OAGL,OAAO,EAAI1C,KAAKqC,aAAa,MAAO,CAClCM,MAAS,GAAGC,OAAO9B,eAAgB,aAClC,CAACoB,KAONW,mBAAoB,WAClB,IAAIC,EAASlB,KAAKkB,OAElB,OAAIA,EAAOC,aAEFD,EAAOC,eAGTnB,KAAKK,4BAOde,aAAc,WACZ,IAAIC,EAEJ,OACE,EAAIjD,KAAKqC,aAAa1B,iBAAiBuC,KAAM,CAC3CC,KAAQ,QACRC,SAAYxB,KAAKyB,eAChBpD,QAAQgD,EACXrB,KAAK0B,eAAiBL,EAAQ,CAC5B9B,QAAS,WACP,MAAO,CAAC8B,OAUhBM,eAAgB,WAEd,IAAIf,EAAUZ,KAAKyB,cAWnB,OATIzB,KAAKJ,UAAYI,KAAKH,gBAAkBe,IAC1CZ,KAAKH,gBAAiB,GAGpBG,KAAKJ,SAAWI,KAAKH,iBAAmBe,IAC1CZ,KAAKJ,SAAU,EACfI,KAAKH,gBAAiB,GAGpBG,KAAKJ,QACAI,KAAKiB,qBAGPjB,KAAKoB,gBAQdQ,eAAgB,WACd,OAAO,EAAIxD,KAAKqC,aAAa,MAAO,CAClCM,MAAS7B,gBACR,CAACc,KAAK2B,qBAObE,OAAQ,WACN,OAAO7B,KAAK4B"}