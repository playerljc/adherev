{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.to-string.js\");\nvar _vue = require(\"vue\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !(0, _vue.isVNode)(s);\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.suspenseProps = void 0;\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar selectorPrefix = 'adherev-ui-suspense';\nexports.suspenseProps = {\n  reset: (0, vue_types_1.bool)().def(false),\n  renderFirstLoading: (0, vue_types_1.object)()\n};\n/**\n * Suspense\n * @overview showLoading: boolean\n * @overview renderInner: VNode | null\n * @overview fetchData(): void\n */\nexports.default = (0, vue_1.defineComponent)({\n  props: exports.suspenseProps,\n  slots: ['firstLoading'],\n  data: function data() {\n    return {\n      // 第一次\n      isFirst: true,\n      // 第一次加载\n      isFirstLoading: false\n    };\n  },\n  watch: {\n    reset: function reset(newVal) {\n      if (newVal) {\n        // 第一次\n        this.isFirst = true;\n        // 第一次加载\n        this.isFirstLoading = false;\n        this.$forceUpdate();\n      }\n    }\n  },\n  mounted: function mounted() {\n    if (this.fetchData) {\n      this.fetchData();\n    }\n  },\n  methods: {\n    /**\n     * renderNormalFirstLoading\n     */\n    $renderNormalFirstLoading: function $renderNormalFirstLoading() {\n      var result = [];\n      for (var i = 0; i < 7; i++) {\n        // @ts-ignore\n        result.push((0, _vue.createVNode)(ant_design_vue_1.Skeleton, {\n          \"key\": i + 1,\n          \"loading\": true,\n          \"active\": true,\n          \"avatar\": true\n        }, null));\n      }\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-loading\")\n      }, [result]);\n    },\n    /**\n     * renderFirstLoading\n     * @param h\n     */\n    $renderFirstLoading: function $renderFirstLoading() {\n      var $slots = this.$slots;\n      if ($slots.firstLoading || this.renderFirstLoading) {\n        return $slots.firstLoading || this.renderFirstLoading;\n      }\n      return this.$renderNormalFirstLoading();\n    },\n    /**\n     * renderNormal\n     * @param h\n     */\n    $renderNormal: function $renderNormal() {\n      var _slot;\n      return (0, _vue.createVNode)(ant_design_vue_1.Spin, {\n        \"size\": \"large\",\n        \"spinning\": this.showLoading()\n      }, _isSlot(_slot = this.renderInner()) ? _slot : {\n        default: function _default() {\n          return [_slot];\n        }\n      });\n    },\n    /**\n     * renderDispatch\n     * @param h\n     */\n    $renderDispatch: function $renderDispatch() {\n      var loading = this.showLoading();\n      if (this.isFirst && !this.isFirstLoading && loading) {\n        this.isFirstLoading = true;\n      }\n      if (this.isFirst && this.isFirstLoading && !loading) {\n        this.isFirst = false;\n        this.isFirstLoading = false;\n      }\n      if (this.isFirst) {\n        return this.$renderFirstLoading();\n      }\n      return this.$renderNormal();\n    },\n    /**\n     * renderSuspense\n     * @description - renderSuspense\n     * @param h\n     */\n    $renderSuspense: function $renderSuspense() {\n      return (0, _vue.createVNode)(\"div\", {\n        \"class\": selectorPrefix\n      }, [this.$renderDispatch()]);\n    }\n  },\n  /**\n   * render\n   */\n  render: function render() {\n    return this.$renderSuspense();\n  }\n});"],"names":["require","_vue","_isSlot","s","Object","prototype","toString","call","isVNode","defineProperty","exports","value","suspenseProps","ant_design_vue_1","vue_1","vue_types_1","selectorPrefix","reset","bool","def","renderFirstLoading","object","default","defineComponent","props","slots","data","isFirst","isFirstLoading","watch","newVal","this","$forceUpdate","mounted","fetchData","methods","$renderNormalFirstLoading","result","i","push","createVNode","Skeleton","key","loading","active","avatar","class","concat","$renderFirstLoading","$slots","firstLoading","$renderNormal","_slot","Spin","size","spinning","showLoading","renderInner","$renderDispatch","$renderSuspense","render"],"mappings":"AAAA,aAEAA,QAAQ,wCAAwC,EAChD,IAAIC,KAAOD,QAAQ,KAAK,EAExB,SAASE,QAAQC,GACf,MAAoB,YAAb,OAAOA,GAA0D,oBAAtCC,OAAOC,UAAUC,SAASC,KAAKJ,CAAC,GAA2B,EAAC,EAAIF,KAAKO,SAASL,CAAC,CACnH,CAHAH,QAAQ,8CAA8C,EAItDI,OAAOK,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACDD,QAAQE,cAAgB,KAAA,EACxB,IAAIC,iBAAmBb,QAAQ,gBAAgB,EAC3Cc,MAAQd,QAAQ,KAAK,EACrBe,YAAcf,QAAQ,WAAW,EACjCgB,eAAiB,sBACrBN,QAAQE,cAAgB,CACtBK,OAAO,EAAIF,YAAYG,MAAM,EAAEC,IAAI,CAAA,CAAK,EACxCC,oBAAoB,EAAIL,YAAYM,QAAQ,CAC9C,EAOAX,QAAQY,SAAU,EAAIR,MAAMS,iBAAiB,CAC3CC,MAAOd,QAAQE,cACfa,MAAO,CAAC,gBACRC,KAAM,WACJ,MAAO,CAELC,QAAS,CAAA,EAETC,eAAgB,CAAA,CAClB,CACF,EACAC,MAAO,CACLZ,MAAO,SAAea,GAChBA,IAEFC,KAAKJ,QAAU,CAAA,EAEfI,KAAKH,eAAiB,CAAA,EACtBG,KAAKC,aAAa,EAEtB,CACF,EACAC,QAAS,WACHF,KAAKG,WACPH,KAAKG,UAAU,CAEnB,EACAC,QAAS,CAIPC,0BAA2B,WAEzB,IADA,IAAIC,EAAS,GACJC,EAAI,EAAGA,EAAI,EAAGA,CAAC,GAEtBD,EAAOE,MAAK,EAAItC,KAAKuC,aAAa3B,iBAAiB4B,SAAU,CAC3DC,IAAOJ,EAAI,EACXK,QAAW,CAAA,EACXC,OAAU,CAAA,EACVC,OAAU,CAAA,CACZ,EAAG,IAAI,CAAC,EAEV,OAAO,EAAI5C,KAAKuC,aAAa,MAAO,CAClCM,MAAS,GAAGC,OAAO/B,eAAgB,UAAU,CAC/C,EAAG,CAACqB,EAAO,CACb,EAKAW,oBAAqB,WACnB,IAAIC,EAASlB,KAAKkB,OAClB,OAAIA,EAAOC,cAAgBnB,KAAKX,mBACvB6B,EAAOC,cAAgBnB,KAAKX,mBAE9BW,KAAKK,0BAA0B,CACxC,EAKAe,cAAe,WACb,IAAIC,EACJ,OAAO,EAAInD,KAAKuC,aAAa3B,iBAAiBwC,KAAM,CAClDC,KAAQ,QACRC,SAAYxB,KAAKyB,YAAY,CAC/B,EAAGtD,QAAQkD,EAAQrB,KAAK0B,YAAY,CAAC,EAAIL,EAAQ,CAC/C9B,QAAS,WACP,MAAO,CAAC8B,EACV,CACF,CAAC,CACH,EAKAM,gBAAiB,WACf,IAAIf,EAAUZ,KAAKyB,YAAY,EAQ/B,OAPIzB,KAAKJ,SAAW,CAACI,KAAKH,gBAAkBe,IAC1CZ,KAAKH,eAAiB,CAAA,GAEpBG,KAAKJ,SAAWI,KAAKH,gBAAkB,CAACe,IAC1CZ,KAAKJ,QAAU,CAAA,EACfI,KAAKH,eAAiB,CAAA,GAEpBG,KAAKJ,QACAI,KAAKiB,oBAAoB,EAE3BjB,KAAKoB,cAAc,CAC5B,EAMAQ,gBAAiB,WACf,OAAO,EAAI1D,KAAKuC,aAAa,MAAO,CAClCM,MAAS9B,cACX,EAAG,CAACe,KAAK2B,gBAAgB,EAAE,CAC7B,CACF,EAIAE,OAAQ,WACN,OAAO7B,KAAK4B,gBAAgB,CAC9B,CACF,CAAC"}