{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar vue_1 = tslib_1.__importDefault(require(\"vue\"));\n\nvar ant_design_vue_1 = require(\"ant-design-vue\");\n\nvar selectorPrefix = 'adherev-ui-suspense';\n/**\n * Suspense\n * @overview showLoading: boolean\n * @overview renderInner: VNode | null\n * @overview fetchData(): void\n */\n\nexports.default = vue_1.default.extend({\n  props: {\n    reset: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      // 第一次\n      isFirst: true,\n      // 第一次加载\n      isFirstLoading: false\n    };\n  },\n  watch: {\n    reset: function reset(newVal) {\n      if (newVal) {\n        // 第一次\n        this.isFirst = true; // 第一次加载\n\n        this.isFirstLoading = false;\n        this.$forceUpdate();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.fetchData();\n  },\n  methods: {\n    /**\n     * renderNormalFirstLoading\n     */\n    renderNormalFirstLoading: function renderNormalFirstLoading(h) {\n      var result = [];\n\n      for (var i = 0; i < 7; i++) {\n        // @ts-ignore\n        result.push(h(ant_design_vue_1.Skeleton, {\n          \"key\": i + 1,\n          \"attrs\": {\n            \"loading\": true,\n            \"active\": true,\n            \"avatar\": true\n          }\n        }));\n      }\n\n      return h(\"div\", {\n        \"class\": selectorPrefix + \"-loading\"\n      }, [result]);\n    },\n\n    /**\n     * renderFirstLoading\n     * @param h\n     */\n    renderFirstLoading: function renderFirstLoading(h) {\n      var $slots = this.$slots;\n\n      if ($slots.firstLoading) {\n        return $slots.firstLoading;\n      }\n\n      return this.renderNormalFirstLoading(h);\n    },\n\n    /**\n     * renderNormal\n     * @param h\n     */\n    renderNormal: function renderNormal(h) {\n      return (// @ts-ignore\n        h(ant_design_vue_1.Spin, {\n          \"attrs\": {\n            \"size\": \"large\",\n            \"spinning\": this.showLoading()\n          }\n        }, [this.renderInner(h)])\n      );\n    },\n\n    /**\n     * renderDispatch\n     * @param h\n     */\n    renderDispatch: function renderDispatch(h) {\n      var loading = this.showLoading();\n\n      if (this.isFirst && !this.isFirstLoading && loading) {\n        this.isFirstLoading = true;\n      }\n\n      if (this.isFirst && this.isFirstLoading && !loading) {\n        this.isFirst = false;\n        this.isFirstLoading = false;\n      }\n\n      if (this.isFirst) {\n        return this.renderFirstLoading(h);\n      }\n\n      return this.renderNormal(h);\n    },\n\n    /**\n     * renderSuspense\n     * @description - renderSuspense\n     * @param h\n     */\n    renderSuspense: function renderSuspense(h) {\n      return h(\"div\", {\n        \"class\": selectorPrefix\n      }, [this.renderDispatch(h)]);\n    }\n  },\n\n  /**\n   * render\n   * @param h\n   */\n  render: function render(h) {\n    return this.renderSuspense(h);\n  }\n});"],"names":["require","Object","defineProperty","exports","value","tslib_1","vue_1","__importDefault","ant_design_vue_1","selectorPrefix","default","extend","props","reset","type","Boolean","data","isFirst","isFirstLoading","watch","newVal","this","$forceUpdate","mounted","fetchData","methods","renderNormalFirstLoading","h","result","i","push","Skeleton","key","attrs","loading","active","avatar","class","renderFirstLoading","$slots","firstLoading","renderNormal","Spin","size","spinning","showLoading","renderInner","renderDispatch","renderSuspense","render"],"mappings":"aAEAA,QAAQ,gDAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,MAAQD,QAAQE,gBAAgBP,QAAQ,QAExCQ,iBAAmBR,QAAQ,kBAE3BS,eAAiB,sBAQrBN,QAAQO,QAAUJ,MAAMI,QAAQC,OAAO,CACrCC,MAAO,CACLC,MAAO,CACLC,KAAMC,QACNL,SAAS,IAGbM,KAAM,WACJ,MAAO,CAELC,SAAS,EAETC,gBAAgB,IAGpBC,MAAO,CACLN,MAAO,SAAeO,GAChBA,IAEFC,KAAKJ,SAAU,EAEfI,KAAKH,gBAAiB,EACtBG,KAAKC,kBAIXC,QAAS,WACPF,KAAKG,aAEPC,QAAS,CAIPC,yBAA0B,SAAkCC,GAG1D,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IAErBD,EAAOE,KAAKH,EAAEnB,iBAAiBuB,SAAU,CACvCC,IAAOH,EAAI,EACXI,MAAS,CACPC,SAAW,EACXC,QAAU,EACVC,QAAU,MAKhB,OAAOT,EAAE,MAAO,CACdU,MAAS5B,eAAiB,YACzB,CAACmB,KAONU,mBAAoB,SAA4BX,GAC9C,IAAIY,EAASlB,KAAKkB,OAElB,OAAIA,EAAOC,cAIJnB,KAAKK,yBAAyBC,IAOvCc,aAAc,SAAsBd,GAClC,OACEA,EAAEnB,iBAAiBkC,KAAM,CACvBT,MAAS,CACPU,KAAQ,QACRC,SAAYvB,KAAKwB,gBAElB,CAACxB,KAAKyB,YAAYnB,MAQzBoB,eAAgB,SAAwBpB,GACtC,IAAIO,EAAUb,KAAKwB,cAWnB,OATIxB,KAAKJ,UAAYI,KAAKH,gBAAkBgB,IAC1Cb,KAAKH,gBAAiB,GAGpBG,KAAKJ,SAAWI,KAAKH,iBAAmBgB,IAC1Cb,KAAKJ,SAAU,EACfI,KAAKH,gBAAiB,GAGpBG,KAAKJ,QACAI,KAAKiB,mBAAmBX,GAG1BN,KAAKoB,aAAad,IAQ3BqB,eAAgB,SAAwBrB,GACtC,OAAOA,EAAE,MAAO,CACdU,MAAS5B,gBACR,CAACY,KAAK0B,eAAepB,OAQ5BsB,OAAQ,SAAgBtB,GACtB,OAAON,KAAK2B,eAAerB"}