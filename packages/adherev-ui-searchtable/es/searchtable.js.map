{"version":3,"file":"searchtable.js","sources":["searchtable.js"],"sourcesContent":["import _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { __assign, __spreadArrays } from \"tslib\";\nimport { Button, Table } from 'ant-design-vue';\nimport classNames from 'classnames';\nimport Vue from 'vue';\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adherev-ui-flexlayout';\nimport Suspense from '@baifendian/adherev-ui-suspense';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Mixins from '@baifendian/adherev-util-mixins';\nimport ColumnResizable, { SearchTableResizableObserver, SearchTableResizableTitle } from './Extension/ColumnResizable';\nimport { TableDensity } from './types';\nexport var selectorPrefix = 'adherev-ui-searchtable';\nvar updatedEx = Mixins.updatedEx;\nvar Fixed = FlexLayout.Fixed,\n    Auto = FlexLayout.Auto; // 单独模式\n\nexport var NUMBER_GENERATOR_RULE_ALONE = Symbol(); // 连续模式\n\nexport var NUMBER_GENERATOR_RULE_CONTINUITY = Symbol(); // 全选的规则 - 标准模式(不能跨页)\n\nexport var ROW_SELECTION_NORMAL_MODE = Symbol(); // 全选的规则 - 可以跨页\n\nexport var ROW_SELECTION_CONTINUOUS_MODE = Symbol();\nvar SearchTable = Vue.extend({\n  // @overview\n  mixins: [Suspense, updatedEx],\n  props: {\n    wrapStyle: {\n      type: String,\n      default: ''\n    },\n    className: {\n      type: String,\n      default: ''\n    },\n    tableClassName: {\n      type: String,\n      default: ''\n    },\n    tableStyle: {\n      type: String,\n      default: ''\n    },\n    searchClassName: {\n      type: String,\n      default: ''\n    },\n    searchStyle: {\n      type: String,\n      default: ''\n    },\n    reset: {\n      type: Boolean,\n      default: true\n    },\n    antdTableProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    // 是否有展开和收缩的功能\n    isShowExpandSearch: {\n      type: Boolean,\n      default: true\n    },\n    // 展开和收缩的默认状态\n    defaultExpandSearchCollapse: {\n      type: Boolean,\n      default: true\n    },\n    // 撑开search\n    fitSearch: {\n      type: Boolean,\n      default: true\n    },\n    // 撑开表格\n    fitTable: {\n      type: Boolean,\n      default: true\n    },\n    // 是否是查询固定，表格自适应\n    autoFixed: {\n      type: Boolean,\n      default: true\n    },\n    // 锁定列头，表格滚动\n    fixedHeaderAutoTable: {\n      type: Boolean,\n      default: false\n    },\n    // 两端固定(表格的头始终在上方，分页始终在下方)\n    fixedTableSpaceBetween: {\n      type: Boolean,\n      default: false\n    },\n    renderTableHeader: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    renderTableFooter: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  // @ts-ignore\n  slots: ['tableHeader', 'tableFooter'],\n  data: function data() {\n    return {\n      page: 1,\n      limit: 10,\n      expand: this.defaultExpandSearchCollapse,\n      scrollY: 0,\n      // 列设置\n      columnSetting: [],\n      // 表格密度\n      // 表格密度设置\n      tableDensity: TableDensity.DEFAULT,\n      // 列拖动对象\n      $columnResizable: new ColumnResizable(),\n      // 列属性监控对象\n      $columnObserver: null\n    };\n  },\n  computed: {\n    // 自定义表格部分\n    components: function components() {\n      return {\n        header: {\n          cell: SearchTableResizableTitle(this.getSearchTableTableColumns())\n        }\n      };\n    }\n  },\n  provide: function provide() {\n    return {\n      getContext: this.getContext\n    };\n  },\n  // @ts-ignore\n  updatedEx: function updatedEx(prevState) {\n    var _a, _b;\n\n    if (!this.$refs.tableWrapRef) return; // 监控header的属性变化(colgroup)\n\n    if (!this.$data.$columnObserver) {\n      this.$data.$columnObserver = SearchTableResizableObserver(this);\n    }\n\n    if (this.fixedHeaderAutoTable) {\n      var dataSource = this.getData();\n\n      if (dataSource && dataSource.length && (prevState.scrollY === 0 && this.scrollY === 0 || prevState.scrollY !== this.scrollY || prevState.expand !== this.expand)) {\n        var tableWrapRef = this.$refs.tableWrapRef;\n        var scrollBodyEl = this.getScrollBodyEl();\n\n        if (scrollBodyEl) {\n          scrollBodyEl.removeEventListener('scroll', this.onScrollBodyScroll);\n          scrollBodyEl.addEventListener('scroll', this.onScrollBodyScroll);\n        }\n\n        var tableHeaderHeight = ((_a = tableWrapRef.querySelector('.ant-table-thead')) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\n        var tablePaginationHeight = ((_b = tableWrapRef.querySelector('.ant-table-pagination')) === null || _b === void 0 ? void 0 : _b.offsetHeight) || 0;\n        this.scrollY = tableWrapRef.clientHeight - (tableHeaderHeight + (tablePaginationHeight ? tablePaginationHeight + 16 * 2 : 0));\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var _a;\n\n    var fixedHeaderAutoTable = this.fixedHeaderAutoTable;\n\n    if (fixedHeaderAutoTable) {\n      (_a = this.getScrollBodyEl()) === null || _a === void 0 ? void 0 : _a.removeEventListener('scroll', this.onScrollBodyScroll);\n    }\n  },\n  created: function created() {\n    this.columnSetting = this.getTableColumns().map(function (column, index) {\n      return __assign(__assign({}, column), {\n        sort: index,\n        display: true\n      });\n    });\n    this.tableDensity = this.getTableDensity();\n  },\n  methods: {\n    getContext: function getContext() {\n      return this;\n    },\n    getTableDensity: function getTableDensity() {\n      return TableDensity.DEFAULT;\n    },\n    getSortColumnSetting: function getSortColumnSetting() {\n      var columns = __spreadArrays(this.columnSetting);\n\n      columns.sort(function (c1, c2) {\n        if (c1.sort > c2.sort) return 1;\n        if (c1.sort < c2.sort) return -1;\n        return 0;\n      });\n      return columns;\n    },\n    onScrollBodyScroll: function onScrollBodyScroll() {\n      var scrollBodyEl = this.getScrollBodyEl();\n      var scrollHeaderEl = this.getScrollHeaderEl();\n      scrollHeaderEl.scrollLeft = scrollBodyEl === null || scrollBodyEl === void 0 ? void 0 : scrollBodyEl.scrollLeft;\n    },\n    getScrollHeaderEl: function getScrollHeaderEl() {\n      var tableWrapRef = this.$refs.tableWrapRef;\n      return tableWrapRef === null || tableWrapRef === void 0 ? void 0 : tableWrapRef.querySelector('.ant-table-wrapper > .ant-spin-nested-loading > .ant-spin-container > .ant-table > .ant-table-content > .ant-table-scroll > .ant-table-header');\n    },\n    getScrollBodyEl: function getScrollBodyEl() {\n      var tableWrapRef = this.$refs.tableWrapRef;\n      return tableWrapRef === null || tableWrapRef === void 0 ? void 0 : tableWrapRef.querySelector('.ant-table-wrapper > .ant-spin-nested-loading > .ant-spin-container > .ant-table > .ant-table-content > .ant-table-scroll > .ant-table-body');\n    },\n\n    /**\n     * renderTableNumberColumn\n     * @description - 渲染序号列\n     * @param h\n     * @param number\n     * @param params\n     */\n    renderTableNumberColumn: function renderTableNumberColumn(h, number, params) {\n      if (number === void 0) {\n        number = '';\n      }\n\n      return h(\"span\", [number]);\n    },\n    renderSearchTableInner: function renderSearchTableInner(h) {\n      var _a = this,\n          wrapStyle = _a.wrapStyle,\n          className = _a.className,\n          tableClassName = _a.tableClassName,\n          tableStyle = _a.tableStyle,\n          searchStyle = _a.searchStyle,\n          searchClassName = _a.searchClassName,\n          fitSearch = _a.fitSearch,\n          fitTable = _a.fitTable,\n          autoFixed = _a.autoFixed,\n          fixedTableSpaceBetween = _a.fixedTableSpaceBetween;\n\n      return h(FlexLayout, {\n        \"attrs\": {\n          \"direction\": \"vertical\"\n        },\n        \"style\": wrapStyle || '',\n        \"class\": classNames(selectorPrefix, fixedTableSpaceBetween ? 'fixedtablespacebetween' : '', className || '')\n      }, [h(Fixed, {\n        \"style\": searchStyle || '',\n        \"class\": classNames(selectorPrefix + \"-searchwrapper\", searchClassName || ''),\n        \"attrs\": {\n          \"fit\": fitSearch\n        }\n      }, [h(FlexLayout, {\n        \"attrs\": {\n          \"direction\": \"vertical\"\n        }\n      }, [h(Fixed, [h(ConditionalRender, {\n        \"attrs\": {\n          \"conditional\": this.expand\n        }\n      }, [this.renderSearchForm(h)])]), h(Fixed, [this.renderSearchFooter(h)])])]), h(ConditionalRender, {\n        \"attrs\": {\n          \"conditional\": !!this.$slots.tableHeader || !!this.renderTableHeader\n        }\n      }, [h(Fixed, [this.$slots.tableHeader || this.renderTableHeader])]), h(Auto, {\n        \"style\": tableStyle || '',\n        \"class\": classNames(selectorPrefix + \"-autowrapper\", tableClassName || '', autoFixed ? 'autofixed' : ''),\n        \"attrs\": {\n          \"fit\": fitTable,\n          \"autoFixed\": autoFixed\n        }\n      }, [h(\"div\", {\n        \"ref\": \"tableWrapRef\",\n        \"class\": selectorPrefix + \"-tablewrapper\"\n      }, [this.renderTable(h)])]), h(ConditionalRender, {\n        \"attrs\": {\n          \"conditional\": !!this.$slots.tableFooter || !!this.renderTableFooter\n        }\n      }, [h(Fixed, [this.$slots.tableFooter || this.renderTableFooter])])]);\n    },\n\n    /**\n     * renderInner\n     * @param h\n     */\n    renderInner: function renderInner(h) {\n      return this.renderSearchTableInner(h);\n    },\n    renderSearchTableSearchFooter: function renderSearchTableSearchFooter(h) {\n      var _this = this;\n\n      var isShowExpandSearch = this.isShowExpandSearch;\n      var defaultItems = [h(Button, {\n        \"class\": selectorPrefix + \"-searchfooteritem\",\n        \"attrs\": {\n          \"type\": \"primary\"\n        },\n        \"on\": {\n          \"click\": function click() {\n            _this.page = 1;\n\n            _this.onSearch();\n          }\n        }\n      }, [h(\"i\", {\n        \"class\": \"iconfont iconsousuo\"\n      }), Intl.tv('查询')]), h(Button, {\n        \"class\": selectorPrefix + \"-searchfooteritem\",\n        \"on\": {\n          \"click\": this.onClear\n        }\n      }, [Intl.tv('重置')])];\n\n      if (isShowExpandSearch) {\n        defaultItems.push(h(ConditionalRender, {\n          \"attrs\": {\n            \"conditional\": this.expand\n          }\n        }, [h(\"a\", {\n          \"slot\": \"noMatch\",\n          \"style\": \"display: flex; align-items: center\",\n          \"on\": {\n            \"click\": function click() {\n              _this.expand = true;\n            }\n          }\n        }, [h(\"span\", {\n          \"style\": \"margin-right: 5px;\"\n        }, [Intl.tv('展开')]), h(\"img\", {\n          \"style\": \"width: 16px;\",\n          \"attrs\": {\n            \"src\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjMzODYzMjYyMTM1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE1MjQ0IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik0xOTkuMzYgNTcyLjc2OGEzMS45MDQgMzEuOTA0IDAgMCAwIDIyLjYyNC05LjM3NmwyOTQuMTQ0LTI5NC4xNDQgMjg1LjcyOCAyODUuNzI4YTMxLjk2OCAzMS45NjggMCAxIDAgNDUuMjQ4LTQ1LjI0OEw1MzguNzUyIDIwMS4zNzZhMzIgMzIgMCAwIDAtNDUuMjggMEwxNzYuNzA0IDUxOC4xNDRhMzEuOTY4IDMxLjk2OCAwIDAgMCAyMi42NTYgNTQuNjI0eiBtMzM5LjQyNC0xMTUuMzkyYTMyIDMyIDAgMCAwLTQ1LjI4IDBMMTc2LjczNiA3NzQuMTQ0YTMxLjk2OCAzMS45NjggMCAxIDAgNDUuMjQ4IDQ1LjI0OGwyOTQuMTQ0LTI5NC4xNDQgMjg1LjcyOCAyODUuNzI4YTMxLjk2OCAzMS45NjggMCAxIDAgNDUuMjQ4LTQ1LjI0OGwtMzA4LjMyLTMwOC4zNTJ6IiBwLWlkPSIxNTI0NSIgZmlsbD0iIzE4OTBmZiI+PC9wYXRoPjwvc3ZnPg==\",\n            \"alt\": \"up\"\n          }\n        })]), h(\"a\", {\n          \"style\": \"display: flex; align-items: center\",\n          \"on\": {\n            \"click\": function click() {\n              _this.expand = false;\n            }\n          }\n        }, [h(\"span\", {\n          \"style\": \"margin-right: 5px;\"\n        }, [Intl.tv('关闭')]), h(\"img\", {\n          \"style\": \"width: 16px;\",\n          \"attrs\": {\n            \"src\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjMzODYzMTc4MzI5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE0ODY3IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik00OTMuNTA0IDU1OC4xNDRhMzEuOTA0IDMxLjkwNCAwIDAgMCA0NS4yOCAwbDMwOC4zNTItMzA4LjM1MmEzMS45NjggMzEuOTY4IDAgMSAwLTQ1LjI0OC00NS4yNDhMNTE2LjE2IDQ5MC4yNzIgMjIxLjk4NCAxOTYuMTI4YTMxLjk2OCAzMS45NjggMCAxIDAtNDUuMjQ4IDQ1LjI0OGwzMTYuNzY4IDMxNi43Njh6IiBwLWlkPSIxNDg2OCIgZmlsbD0iIzE4OTBmZiI+PC9wYXRoPjxwYXRoIGQ9Ik04MDEuODg4IDQ2MC41NzZMNTE2LjE2IDc0Ni4zMDQgMjIyLjAxNiA0NTIuMTZhMzEuOTY4IDMxLjk2OCAwIDEgMC00NS4yNDggNDUuMjQ4bDMxNi43NjggMzE2Ljc2OGEzMS45MDQgMzEuOTA0IDAgMCAwIDQ1LjI4IDBsMzA4LjM1Mi0zMDguMzUyYTMyIDMyIDAgMSAwLTQ1LjI4LTQ1LjI0OHoiIHAtaWQ9IjE0ODY5IiBmaWxsPSIjMTg5MGZmIj48L3BhdGg+PC9zdmc+\",\n            \"alt\": \"down\"\n          }\n        })])]));\n      } // 返回的是VNodes数组\n\n\n      var items = this.renderSearchFooterItems(h, defaultItems) || __spreadArrays(defaultItems);\n\n      return h(\"div\", {\n        \"class\": selectorPrefix + \"-searchfooterwrapper\"\n      }, [items.map(function (t) {\n        return h(\"div\", {\n          \"class\": selectorPrefix + \"-searchfooteritem\"\n        }, [t]);\n      })]);\n    },\n\n    /**\n     * renderSearchFooter\n     * @param h\n     */\n    renderSearchFooter: function renderSearchFooter(h) {\n      return this.renderSearchTableSearchFooter(h);\n    },\n    renderSearchTableTable: function renderSearchTableTable(h) {\n      var _a = this,\n          antdTableProps = _a.antdTableProps,\n          fixedHeaderAutoTable = _a.fixedHeaderAutoTable; // 作用域插槽\n\n\n      var scopedSlots = __assign({}, this.getScopedSlots(h) || {});\n\n      var tablePropsAttr = {};\n      var tableOnAttr = {};\n      var mergeProps = antdTableProps || {};\n\n      for (var p in mergeProps) {\n        if (p.startsWith('on')) {\n          tableOnAttr[p.substring(2).toLowerCase()] = mergeProps[p];\n        } else {\n          tablePropsAttr[p] = mergeProps[p];\n        }\n      }\n\n      var columnSetting = this.columnSetting;\n      var columns = this.getTableColumns(h).map(function (column, index) {\n        return __assign(__assign({}, columnSetting[index]), column);\n      }).filter(function (column) {\n        return column.display;\n      });\n      columns.sort(function (c1, c2) {\n        if (c1.sort > c2.sort) return 1;\n        if (c1.sort < c2.sort) return -1;\n        return 0;\n      }); // Table的antdProps配置\n\n      var tableProps = {\n        scopedSlots: scopedSlots,\n        props: __assign({\n          rowKey: this.getRowKey(),\n          dataSource: this.getData(),\n          columns: columns,\n          size: this.tableDensity,\n          pagination: this.getPagination(),\n          rowSelection: this.getRowSelection(),\n          components: this.components\n        }, tablePropsAttr || {}),\n        on: __assign({\n          change: this.onTableChange\n        }, tableOnAttr || {})\n      }; // 是否支持锁定列头，表格体滚动\n\n      if (fixedHeaderAutoTable) {\n        var scrollY_1 = this.scrollY;\n\n        if (tablePropsAttr) {\n          // @ts-ignore\n          if (tablePropsAttr.scroll) {\n            // @ts-ignore\n            tableProps.props.scroll.y = scrollY_1;\n          } else {\n            // @ts-ignore\n            tableProps.props.scroll = {\n              y: scrollY_1\n            };\n          }\n        } else {\n          // @ts-ignore\n          tableProps.props.scroll = {\n            y: scrollY_1\n          };\n        }\n      }\n\n      return h(Table, _mergeJSXProps([{}, tableProps]));\n    },\n\n    /**\n     * renderTable\n     * @description - 认选表格体\n     * @protected\n     */\n    renderTable: function renderTable(h) {\n      return this.renderSearchTableTable(h);\n    },\n    getSearchTableTableColumns: function getSearchTableTableColumns(h) {\n      var _this = this;\n\n      var isShowNumber = this.isShowNumber();\n      var getTableNumberColumnWidth = this.getTableNumberColumnWidth(); // 对权限进行过滤\n\n      var columns = this.getColumns().filter(function (column) {\n        if ('authorized' in column) {\n          return column.authorized();\n        }\n\n        return true;\n      }).map(function (column, index) {\n        if ('resizable' in column && !!column.resizable) {\n          return _this.$data.$columnResizable.searchTableResizableColumnItem(_this, index, column);\n        }\n\n        return column;\n      });\n\n      if (isShowNumber) {\n        return [{\n          title: Intl.tv('序号'),\n          // dataIndex: 'number',\n          key: '_number',\n          align: 'center',\n          width: getTableNumberColumnWidth || 80,\n          customRender: function customRender(text, row, index) {\n            var numberGeneratorRule = _this.getNumberGeneratorRule() || NUMBER_GENERATOR_RULE_ALONE;\n            var _a = _this,\n                page = _a.page,\n                limit = _a.limit;\n            return h(ConditionalRender, {\n              \"attrs\": {\n                \"conditional\": numberGeneratorRule === NUMBER_GENERATOR_RULE_ALONE\n              }\n            }, [h(\"span\", [_this.renderTableNumberColumn(h, index + 1, {\n              value: text,\n              record: row,\n              index: index\n            })]), h(\"span\", {\n              \"slot\": \"noMatch\"\n            }, [_this.renderTableNumberColumn(h, (page - 1) * limit + (index + 1), {\n              value: text,\n              record: row,\n              index: index\n            })])]);\n          }\n        }].concat(columns);\n      }\n\n      return columns;\n    },\n\n    /**\n     * onTableChange - 表格change\n     */\n    getTableColumns: function getTableColumns(h) {\n      return this.getSearchTableTableColumns(h);\n    },\n\n    /**\n     * onTableChange\n     * @param pagination\n     * @param filters\n     * @param sorter\n     */\n    onTableChange: function onTableChange(pagination, filters, sorter) {\n      var _a;\n\n      this[this.getOrderFieldProp()] = sorter.field;\n      this[this.getOrderProp()] = sorter.order;\n      var order = sorter.order;\n      if (!order) return;\n      this.fetchData();\n      (_a = this.onSubTableChange) === null || _a === void 0 ? void 0 : _a.call(this, pagination, filters, sorter);\n    },\n\n    /**\n     * onClear - 清除操作\n     */\n    onClear: function onClear() {\n      var _this = this;\n\n      this.page = 1;\n      this.limit = 10;\n      this.clear().then(function () {\n        _this.fetchData();\n      });\n    },\n\n    /**\n     * sortOrder\n     * @param columnName\n     */\n    sortOrder: function sortOrder(columnName) {\n      return this[this.getOrderFieldProp()] === columnName ? this[this.getOrderProp()] : '';\n    },\n\n    /**\n     * getSearchTablePagination\n     */\n    getSearchTablePagination: function getSearchTablePagination() {\n      var _this = this;\n\n      return {\n        onChange: function onChange(page, limit) {\n          _this.page = page;\n          _this.limit = limit;\n\n          _this.fetchData();\n        },\n        onShowSizeChange: function onShowSizeChange(page, limit) {\n          _this.page = page;\n          _this.limit = limit;\n\n          _this.fetchData();\n        },\n        showTotal: function showTotal(total) {\n          // @ts-ignore\n          return Intl.tv(\"\\u5F53\\u524D {page}-{pageSize}/\\u5171 {total}\\u6761\", {\n            page: _this.page,\n            pageSize: _this.limit,\n            total: total\n          });\n        },\n        total: this.getTotal(),\n        current: this.page,\n        pageSize: this.limit,\n        showQuickJumper: true\n      };\n    },\n\n    /**\n     * getPagination - 获取分页信息\n     */\n    getPagination: function getPagination() {\n      return this.getSearchTablePagination();\n    },\n\n    /**\n     * renderSearchTable\n     * @description - renderSearchTable\n     * @param h\n     */\n    renderSearchTable: function renderSearchTable(h) {\n      return h(\"div\", {\n        \"class\": selectorPrefix + \"-wrap\"\n      }, [this.renderSuspense(h)]);\n    }\n  },\n  render: function render(h) {\n    return this.renderSearchTable(h);\n  }\n});\nexport default SearchTable;"],"names":["_mergeJSXProps","__assign","__spreadArrays","Button","Table","classNames","Vue","ConditionalRender","FlexLayout","Suspense","Intl","Mixins","ColumnResizable","SearchTableResizableObserver","SearchTableResizableTitle","TableDensity","selectorPrefix","updatedEx","Fixed","Auto","NUMBER_GENERATOR_RULE_ALONE","Symbol","NUMBER_GENERATOR_RULE_CONTINUITY","ROW_SELECTION_NORMAL_MODE","ROW_SELECTION_CONTINUOUS_MODE","SearchTable","extend","mixins","props","wrapStyle","type","String","default","className","tableClassName","tableStyle","searchClassName","searchStyle","reset","Boolean","antdTableProps","Object","isShowExpandSearch","defaultExpandSearchCollapse","fitSearch","fitTable","autoFixed","fixedHeaderAutoTable","fixedTableSpaceBetween","renderTableHeader","renderTableFooter","slots","data","page","limit","expand","this","scrollY","columnSetting","tableDensity","DEFAULT","$columnResizable","$columnObserver","computed","components","header","cell","getSearchTableTableColumns","provide","getContext","prevState","tableWrapRef","tableHeaderHeight","$refs","$data","dataSource","getData","length","scrollBodyEl","getScrollBodyEl","removeEventListener","onScrollBodyScroll","addEventListener","_a","querySelector","offsetHeight","tablePaginationHeight","_b","clientHeight","beforeDestroy","created","getTableColumns","map","column","index","sort","display","getTableDensity","methods","getSortColumnSetting","columns","c1","c2","getScrollHeaderEl","scrollLeft","renderTableNumberColumn","h","number","params","renderSearchTableInner","attrs","direction","style","class","fit","conditional","renderSearchForm","renderSearchFooter","$slots","tableHeader","ref","renderTable","tableFooter","renderInner","renderSearchTableSearchFooter","_this","defaultItems","on","click","onSearch","tv","onClear","push","slot","src","alt","items","renderSearchFooterItems","t","renderSearchTableTable","p","scopedSlots","getScopedSlots","tablePropsAttr","tableOnAttr","mergeProps","startsWith","substring","toLowerCase","filter","tableProps","rowKey","getRowKey","size","pagination","getPagination","rowSelection","getRowSelection","change","onTableChange","scrollY_1","scroll","y","isShowNumber","getTableNumberColumnWidth","getColumns","authorized","resizable","searchTableResizableColumnItem","title","key","align","width","customRender","text","row","numberGeneratorRule","getNumberGeneratorRule","value","record","concat","filters","sorter","getOrderFieldProp","field","getOrderProp","order","fetchData","onSubTableChange","call","clear","then","sortOrder","columnName","getSearchTablePagination","onChange","onShowSizeChange","showTotal","total","pageSize","getTotal","current","showQuickJumper","renderSearchTable","renderSuspense","render"],"mappings":"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"}