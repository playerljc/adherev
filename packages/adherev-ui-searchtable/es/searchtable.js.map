{"version":3,"file":"searchtable.js","sources":["searchtable.js"],"sourcesContent":["import { resolveDirective as _resolveDirective, isVNode as _isVNode, createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { __assign, __spreadArray } from \"tslib\";\nimport ConditionalRender from '@baifendian/adherev-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adherev-ui-flexlayout';\nimport Suspense from '@baifendian/adherev-ui-suspense';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Mixins from '@baifendian/adherev-util-mixins';\nimport { Button, Table } from 'ant-design-vue';\nimport classNames from 'classnames';\nimport { defineComponent } from 'vue';\n\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !_isVNode(s);\n}\n\nvar selectorPrefix = 'adherev-ui-searchtable';\nvar updatedEx = Mixins.updatedEx;\nvar Fixed = FlexLayout.Fixed,\n    Auto = FlexLayout.Auto; // 单独模式\n\nexport var NUMBER_GENERATOR_RULE_ALONE = Symbol(); // 连续模式\n\nexport var NUMBER_GENERATOR_RULE_CONTINUITY = Symbol(); // 全选的规则 - 标准模式(不能跨页)\n\nexport var ROW_SELECTION_NORMAL_MODE = Symbol(); // 全选的规则 - 可以跨页\n\nexport var ROW_SELECTION_CONTINUOUS_MODE = Symbol();\nexport default defineComponent({\n  // @overview\n  mixins: [Suspense, updatedEx],\n  props: {\n    wrapStyle: {\n      type: String,\n      default: ''\n    },\n    className: {\n      type: String,\n      default: ''\n    },\n    tableClassName: {\n      type: String,\n      default: ''\n    },\n    tableStyle: {\n      type: String,\n      default: ''\n    },\n    searchClassName: {\n      type: String,\n      default: ''\n    },\n    searchStyle: {\n      type: String,\n      default: ''\n    },\n    reset: {\n      type: Boolean,\n      default: true\n    },\n    antdTableProps: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    // 是否有展开和收缩的功能\n    isShowExpandSearch: {\n      type: Boolean,\n      default: true\n    },\n    // 展开和收缩的默认状态\n    defaultExpandSearchCollapse: {\n      type: Boolean,\n      default: true\n    },\n    // 撑开search\n    fitSearch: {\n      type: Boolean,\n      default: true\n    },\n    // 撑开表格\n    fitTable: {\n      type: Boolean,\n      default: true\n    },\n    // 是否是查询固定，表格自适应\n    autoFixed: {\n      type: Boolean,\n      default: true\n    },\n    // 锁定列头，表格滚动\n    fixedHeaderAutoTable: {\n      type: Boolean,\n      default: false\n    },\n    // 两端固定(表格的头始终在上方，分页始终在下方)\n    fixedTableSpaceBetween: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      page: 1,\n      limit: 10,\n      expand: this.defaultExpandSearchCollapse,\n      scrollY: 0\n    };\n  },\n  updatedEx: function updatedEx(prevState) {\n    var _a, _b;\n\n    var _c = this,\n        $refs = _c.$refs,\n        scrollY = _c.scrollY,\n        expand = _c.expand,\n        fixedHeaderAutoTable = _c.fixedHeaderAutoTable;\n\n    if (!$refs.tableWrapRef) return;\n\n    if (fixedHeaderAutoTable) {\n      // @ts-ignore\n      var dataSource = this.getData();\n\n      if (dataSource && dataSource.length && (prevState.scrollY === 0 && scrollY === 0 || prevState.scrollY !== scrollY || prevState.expand !== expand)) {\n        var tableWrapRef = $refs.tableWrapRef;\n        var scrollBodyEl = this.getScrollBodyEl();\n\n        if (scrollBodyEl) {\n          scrollBodyEl.removeEventListener('scroll', this.onScrollBodyScroll);\n          scrollBodyEl.addEventListener('scroll', this.onScrollBodyScroll);\n        }\n\n        var tableHeaderHeight = ((_a = tableWrapRef.querySelector('.ant-table-thead')) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\n        var tablePaginationHeight = ((_b = tableWrapRef.querySelector('.ant-table-pagination')) === null || _b === void 0 ? void 0 : _b.offsetHeight) || 0;\n        this.scrollY = tableWrapRef.clientHeight - (tableHeaderHeight + (tablePaginationHeight ? tablePaginationHeight + 16 * 2 : 0));\n      }\n    }\n  },\n  beforeUnmount: function beforeUnmount() {\n    var _a;\n\n    var fixedHeaderAutoTable = this.fixedHeaderAutoTable;\n\n    if (fixedHeaderAutoTable) {\n      (_a = this.getScrollBodyEl()) === null || _a === void 0 ? void 0 : _a.removeEventListener('scroll', this.onScrollBodyScroll);\n    }\n  },\n  methods: {\n    onScrollBodyScroll: function onScrollBodyScroll() {\n      var _a;\n\n      var scrollBodyEl = this.getScrollBodyEl();\n      var scrollHeaderEl = this.getScrollHeaderEl(); // @ts-ignore\n\n      (_a = scrollHeaderEl) === null || _a === void 0 ? void 0 : _a.scrollLeft = scrollBodyEl === null || scrollBodyEl === void 0 ? void 0 : scrollBodyEl.scrollLeft;\n    },\n    getScrollHeaderEl: function getScrollHeaderEl() {\n      var tableWrapRef = this.$refs.tableWrapRef;\n      return tableWrapRef === null || tableWrapRef === void 0 ? void 0 : tableWrapRef.querySelector('.ant-table-wrapper > .ant-spin-nested-loading > .ant-spin-container > .ant-table > .ant-table-content > .ant-table-scroll > .ant-table-header');\n    },\n    getScrollBodyEl: function getScrollBodyEl() {\n      var tableWrapRef = this.$refs.tableWrapRef;\n      return tableWrapRef === null || tableWrapRef === void 0 ? void 0 : tableWrapRef.querySelector('.ant-table-wrapper > .ant-spin-nested-loading > .ant-spin-container > .ant-table > .ant-table-content > .ant-table-scroll > .ant-table-body');\n    },\n\n    /**\n     * renderTableNumberColumn\n     * @description - 渲染序号列\n     * @param number\n     * @param params\n     */\n    renderTableNumberColumn: function renderTableNumberColumn(number, params) {\n      if (number === void 0) {\n        number = '';\n      }\n\n      return _createVNode(\"span\", null, [number]);\n    },\n    renderSearchTableInner: function renderSearchTableInner() {\n      var _this2 = this;\n\n      var _slot, _slot2, _slot3, _slot4;\n\n      var _a = this,\n          wrapStyle = _a.wrapStyle,\n          className = _a.className,\n          tableClassName = _a.tableClassName,\n          tableStyle = _a.tableStyle,\n          searchStyle = _a.searchStyle,\n          searchClassName = _a.searchClassName,\n          fitSearch = _a.fitSearch,\n          fitTable = _a.fitTable,\n          autoFixed = _a.autoFixed,\n          fixedTableSpaceBetween = _a.fixedTableSpaceBetween,\n          $slots = _a.$slots;\n\n      return (// @ts-ignore\n        _createVNode(FlexLayout, {\n          \"direction\": \"vertical\",\n          \"style\": wrapStyle || '',\n          \"class\": classNames.apply(void 0, __spreadArray([selectorPrefix, fixedTableSpaceBetween ? 'fixedtablespacebetween' : ''], (className || '').split(/\\s+/), false))\n        }, {\n          default: function _default() {\n            return [_createVNode(Fixed, {\n              \"style\": searchStyle || '',\n              \"class\": classNames.apply(void 0, __spreadArray([\"\".concat(selectorPrefix, \"-searchwrapper\")], (searchClassName || '').split(/\\s+/), false)),\n              \"fit\": fitSearch\n            }, {\n              default: function _default() {\n                return [_createVNode(FlexLayout, {\n                  \"direction\": \"vertical\"\n                }, {\n                  default: function _default() {\n                    return [_createVNode(Fixed, null, {\n                      default: function _default() {\n                        return [_createVNode(ConditionalRender, {\n                          \"conditional\": _this2.expand\n                        }, _isSlot(_slot = // @ts-ignore\n                        _this2.renderSearchForm()) ? _slot : {\n                          default: function _default() {\n                            return [_slot];\n                          }\n                        })];\n                      }\n                    }), _createVNode(Fixed, null, _isSlot(_slot2 = _this2.renderSearchFooter()) ? _slot2 : {\n                      default: function _default() {\n                        return [_slot2];\n                      }\n                    })];\n                  }\n                })];\n              }\n            }), _createVNode(ConditionalRender, {\n              \"conditional\": !!$slots.tableHeader\n            }, {\n              default: function _default() {\n                return [_createVNode(Fixed, null, _isSlot(_slot3 = $slots.tableHeader()) ? _slot3 : {\n                  default: function _default() {\n                    return [_slot3];\n                  }\n                })];\n              }\n            }), _createVNode(Auto, {\n              \"style\": tableStyle || '',\n              \"class\": classNames.apply(void 0, __spreadArray(__spreadArray([\"\".concat(selectorPrefix, \"-autowrapper\")], (tableClassName || '').split(/\\s+/), false), [autoFixed ? 'autofixed' : ''], false)),\n              \"fit\": fitTable,\n              \"autoFixed\": autoFixed\n            }, {\n              default: function _default() {\n                return [_createVNode(\"div\", {\n                  \"ref\": \"tableWrapRef\",\n                  \"class\": \"\".concat(selectorPrefix, \"-tablewrapper\")\n                }, [_this2.renderTable()])];\n              }\n            }), _createVNode(ConditionalRender, {\n              \"conditional\": !!$slots.tableFooter\n            }, {\n              default: function _default() {\n                return [_createVNode(Fixed, null, _isSlot(_slot4 = $slots.tableFooter()) ? _slot4 : {\n                  default: function _default() {\n                    return [_slot4];\n                  }\n                })];\n              }\n            })];\n          }\n        })\n      );\n    },\n\n    /**\n     * renderInner\n     */\n    renderInner: function renderInner() {\n      return this.renderSearchTableInner();\n    },\n    renderSearchTableSearchFooter: function renderSearchTableSearchFooter() {\n      var _slot5;\n\n      var _this = this;\n\n      var isShowExpandSearch = this.isShowExpandSearch;\n      var defaultItems = [// @ts-ignore\n      _createVNode(Button, {\n        \"class\": \"\".concat(selectorPrefix, \"-searchfooteritem\"),\n        \"type\": \"primary\",\n        \"onClick\": function onClick() {\n          _this.page = 1; // @ts-ignore\n\n          _this.onSearch();\n        }\n      }, {\n        default: function _default() {\n          return [_createVNode(\"i\", {\n            \"class\": \"iconfont iconsousuo\"\n          }, null), Intl.tv('查询')];\n        }\n      }), // @ts-ignore\n      _createVNode(Button, {\n        \"class\": \"\".concat(selectorPrefix, \"-searchfooteritem\"),\n        \"onClick\": this.onClear\n      }, _isSlot(_slot5 = Intl.tv('重置')) ? _slot5 : {\n        default: function _default() {\n          return [_slot5];\n        }\n      })];\n\n      if (isShowExpandSearch) {\n        defaultItems.push( // @ts-ignore\n        _createVNode(ConditionalRender, {\n          \"conditional\": this.expand\n        }, {\n          default: function _default() {\n            return _createVNode(\"a\", {\n              \"style\": \"display: flex; align-items: center\",\n              \"onClick\": function onClick() {\n                _this.expand = false;\n              }\n            }, [_createVNode(\"span\", {\n              \"style\": \"margin-right: 5px;\"\n            }, [Intl.tv('关闭')]), _createVNode(\"img\", {\n              \"style\": \"width: 16px;\",\n              \"src\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjMzODYzMTc4MzI5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE0ODY3IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik00OTMuNTA0IDU1OC4xNDRhMzEuOTA0IDMxLjkwNCAwIDAgMCA0NS4yOCAwbDMwOC4zNTItMzA4LjM1MmEzMS45NjggMzEuOTY4IDAgMSAwLTQ1LjI0OC00NS4yNDhMNTE2LjE2IDQ5MC4yNzIgMjIxLjk4NCAxOTYuMTI4YTMxLjk2OCAzMS45NjggMCAxIDAtNDUuMjQ4IDQ1LjI0OGwzMTYuNzY4IDMxNi43Njh6IiBwLWlkPSIxNDg2OCIgZmlsbD0iIzE4OTBmZiI+PC9wYXRoPjxwYXRoIGQ9Ik04MDEuODg4IDQ2MC41NzZMNTE2LjE2IDc0Ni4zMDQgMjIyLjAxNiA0NTIuMTZhMzEuOTY4IDMxLjk2OCAwIDEgMC00NS4yNDggNDUuMjQ4bDMxNi43NjggMzE2Ljc2OGEzMS45MDQgMzEuOTA0IDAgMCAwIDQ1LjI4IDBsMzA4LjM1Mi0zMDguMzUyYTMyIDMyIDAgMSAwLTQ1LjI4LTQ1LjI0OHoiIHAtaWQ9IjE0ODY5IiBmaWxsPSIjMTg5MGZmIj48L3BhdGg+PC9zdmc+\",\n              \"alt\": \"down\"\n            }, null)]);\n          },\n          noMatch: function noMatch() {\n            return _createVNode(\"a\", {\n              \"style\": \"display: flex; align-items: center\",\n              \"onClick\": function onClick() {\n                _this.expand = true;\n              }\n            }, [_createVNode(\"span\", {\n              \"style\": \"margin-right: 5px;\"\n            }, [Intl.tv('展开')]), _createVNode(\"img\", {\n              \"style\": \"width: 16px;\",\n              \"src\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjMzODYzMjYyMTM1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE1MjQ0IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik0xOTkuMzYgNTcyLjc2OGEzMS45MDQgMzEuOTA0IDAgMCAwIDIyLjYyNC05LjM3NmwyOTQuMTQ0LTI5NC4xNDQgMjg1LjcyOCAyODUuNzI4YTMxLjk2OCAzMS45NjggMCAxIDAgNDUuMjQ4LTQ1LjI0OEw1MzguNzUyIDIwMS4zNzZhMzIgMzIgMCAwIDAtNDUuMjggMEwxNzYuNzA0IDUxOC4xNDRhMzEuOTY4IDMxLjk2OCAwIDAgMCAyMi42NTYgNTQuNjI0eiBtMzM5LjQyNC0xMTUuMzkyYTMyIDMyIDAgMCAwLTQ1LjI4IDBMMTc2LjczNiA3NzQuMTQ0YTMxLjk2OCAzMS45NjggMCAxIDAgNDUuMjQ4IDQ1LjI0OGwyOTQuMTQ0LTI5NC4xNDQgMjg1LjcyOCAyODUuNzI4YTMxLjk2OCAzMS45NjggMCAxIDAgNDUuMjQ4LTQ1LjI0OGwtMzA4LjMyLTMwOC4zNTJ6IiBwLWlkPSIxNTI0NSIgZmlsbD0iIzE4OTBmZiI+PC9wYXRoPjwvc3ZnPg==\",\n              \"alt\": \"up\"\n            }, null)]);\n          }\n        }));\n      } // 返回的是VNodes数组\n      // @ts-ignore\n\n\n      var items = this.renderSearchFooterItems(defaultItems) || __spreadArray([], defaultItems, true);\n\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-searchfooterwrapper\")\n      }, [items.map(function (t) {\n        return _createVNode(\"div\", {\n          \"class\": \"\".concat(selectorPrefix, \"-searchfooteritem\")\n        }, [t]);\n      })]);\n    },\n\n    /**\n     * renderSearchFooter\n     */\n    renderSearchFooter: function renderSearchFooter() {\n      return this.renderSearchTableSearchFooter();\n    },\n    renderSearchTableTable: function renderSearchTableTable() {\n      var _a = this,\n          getScopedSlotsInner = _a.getScopedSlotsInner,\n          antdTableProps = _a.antdTableProps,\n          fixedHeaderAutoTable = _a.fixedHeaderAutoTable,\n          getRowKey = _a.getRowKey,\n          getData = _a.getData,\n          getRowSelection = _a.getRowSelection; // 作用域插槽\n      // const scopedSlots = {\n      //   // @ts-ignore\n      //   ...(getScopedSlots() || {}),\n      // };\n\n\n      var tablePropsAttr = {};\n      var tableOnAttr = {};\n      var mergeProps = antdTableProps || {};\n\n      for (var p in mergeProps) {\n        if (p.startsWith('on')) {\n          // @ts-ignore\n          tableOnAttr[p.substring(2).toLowerCase()] = mergeProps[p];\n        } else {\n          tablePropsAttr[p] = mergeProps[p];\n        }\n      } // Table的antdProps配置\n      // const tableProps = {\n      //   scopedSlots,\n      //   props: {\n      //     // @ts-ignore\n      //     rowKey: getRowKey(),\n      //     // @ts-ignore\n      //     dataSource: getData(),\n      //     columns: this.getTableColumns(),\n      //     pagination: this.getPagination(),\n      //     // @ts-ignore\n      //     rowSelection: getRowSelection(),\n      //     ...(tablePropsAttr || {}),\n      //   },\n      //   on: {\n      //     change: this.onTableChange,\n      //     ...(tableOnAttr || {}),\n      //   },\n      // };\n\n\n      var tableProps = __assign(__assign(__assign({\n        // @ts-ignore\n        rowKey: getRowKey(),\n        // @ts-ignore\n        dataSource: getData(),\n        columns: this.getTableColumns(),\n        pagination: this.getPagination(),\n        // @ts-ignore\n        rowSelection: getRowSelection()\n      }, tablePropsAttr || {}), {\n        onChange: this.onTableChange\n      }), tableOnAttr || {}); // 是否支持锁定列头，表格体滚动\n\n\n      if (fixedHeaderAutoTable) {\n        var scrollY_1 = this.scrollY; // if (tablePropsAttr) {\n        //   if (tablePropsAttr.scroll) {\n        //     tableProps.props.scroll.y = scrollY;\n        //   } else {\n        //     tableProps.props.scroll = { y: scrollY };\n        //   }\n        // } else {\n        //   tableProps.props.scroll = { y: scrollY };\n        // }\n\n        if (tablePropsAttr) {\n          if (tablePropsAttr.scroll) {\n            tableProps.scroll.y = scrollY_1;\n          } else {\n            tableProps.scroll = {\n              y: scrollY_1\n            };\n          }\n        } else {\n          tableProps.scroll = {\n            y: scrollY_1\n          };\n        }\n      }\n\n      return (// @ts-ignore\n        _createVNode(Table, tableProps, {\n          // @ts-ignore\n          bodyCell: function bodyCell(row) {\n            return getScopedSlotsInner(row);\n          }\n        })\n      );\n    },\n\n    /**\n     * renderTable\n     * @description - 认选表格体\n     * @protected\n     */\n    renderTable: function renderTable() {\n      return this.renderSearchTableTable();\n    },\n    getScopedSlotsInner: function getScopedSlotsInner(row) {\n      var _this = this;\n\n      var record = row.record,\n          index = row.index,\n          column = row.column;\n\n      if (column.key === 'number') {\n        var getNumberGeneratorRule = this.getNumberGeneratorRule; // @ts-ignore\n\n        var numberGeneratorRule = getNumberGeneratorRule() || NUMBER_GENERATOR_RULE_ALONE;\n\n        var _a = this,\n            page_1 = _a.page,\n            limit_1 = _a.limit;\n\n        return (// @ts-ignore\n          _createVNode(ConditionalRender, {\n            \"conditional\": numberGeneratorRule === NUMBER_GENERATOR_RULE_ALONE\n          }, {\n            default: function _default() {\n              return (// @ts-ignore\n                _createVNode(\"span\", null, [_this.renderTableNumberColumn(index + 1, {\n                  record: row,\n                  index: index\n                })])\n              );\n            },\n            noMatch: function noMatch() {\n              return _createVNode(\"span\", null, [// @ts-ignore\n              _this.renderTableNumberColumn((page_1 - 1) * limit_1 + (index + 1), {\n                record: record,\n                index: index\n              })]);\n            }\n          })\n        );\n      }\n\n      return this.getScopedSlots(row);\n    },\n    getSearchTableTableColumns: function getSearchTableTableColumns() {\n      var\n      /*getNumberGeneratorRule, */\n      getColumns = this.getColumns; // @ts-ignore\n\n      var isShowNumber = this.isShowNumber(); // @ts-ignore\n\n      var getTableNumberColumnWidth = this.getTableNumberColumnWidth(); // 对权限进行过滤\n      // @ts-ignore\n\n      var columns = getColumns().filter(function (column) {\n        if ('authorized' in column) {\n          return column.authorized();\n        }\n\n        return true;\n      });\n\n      if (isShowNumber) {\n        return [{\n          title: Intl.tv('序号'),\n          // dataIndex: 'number',\n          key: 'number',\n          align: 'center',\n          width: getTableNumberColumnWidth || 80\n        }].concat(columns);\n      }\n\n      return columns;\n    },\n\n    /**\n     * onTableChange - 表格change\n     */\n    getTableColumns: function getTableColumns() {\n      return this.getSearchTableTableColumns();\n    },\n\n    /**\n     * onTableChange\n     * @param pagination\n     * @param filters\n     * @param sorter\n     */\n    onTableChange: function onTableChange(pagination, filters, sorter) {\n      // console.log('onTableChange', pagination, filters, sorter);\n      var _a; // @ts-ignore\n\n\n      this[this.getOrderFieldProp()] = sorter.field; // @ts-ignore\n\n      this[this.getOrderProp()] = sorter.order;\n      var order = sorter.order;\n      if (!order) return; // @ts-ignore\n\n      this.fetchData(); // @ts-ignore\n\n      (_a = this.onSubTableChange) === null || _a === void 0 ? void 0 : _a.call(this, pagination, filters, sorter);\n    },\n\n    /**\n     * onClear - 清除操作\n     */\n    onClear: function onClear() {\n      var _this = this;\n\n      this.page = 1;\n      this.limit = 10; // @ts-ignore\n\n      this.clear().then(function () {\n        // @ts-ignore\n        _this.fetchData();\n      });\n    },\n\n    /**\n     * sortOrder\n     * @param columnName\n     */\n    sortOrder: function sortOrder(columnName) {\n      // @ts-ignore\n      return this[this.getOrderFieldProp()] === columnName ? this[this.getOrderProp()] : '';\n    },\n\n    /**\n     * getSearchTablePagination\n     */\n    getSearchTablePagination: function getSearchTablePagination() {\n      var _this = this;\n\n      return {\n        onChange: function onChange(page, limit) {\n          _this.page = page;\n          _this.limit = limit; // @ts-ignore\n\n          _this.fetchData();\n        },\n        onShowSizeChange: function onShowSizeChange(page, limit) {\n          _this.page = page;\n          _this.limit = limit; // @ts-ignore\n\n          _this.fetchData();\n        },\n        showTotal: function showTotal(total) {\n          // @ts-ignore\n          return Intl.tv(\"\\u5F53\\u524D {page}-{pageSize}/\\u5171 {total}\\u6761\", {\n            page: _this.page,\n            pageSize: _this.limit,\n            total: total\n          });\n        },\n        // @ts-ignore\n        total: this.getTotal(),\n        current: this.page,\n        pageSize: this.limit,\n        showQuickJumper: true\n      };\n    },\n\n    /**\n     * getPagination - 获取分页信息\n     */\n    getPagination: function getPagination() {\n      return this.getSearchTablePagination();\n    },\n\n    /**\n     * renderSearchTable\n     * @description - renderSearchTable\n     */\n    renderSearchTable: function renderSearchTable() {\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(selectorPrefix, \"-wrap\")\n      }, [// @ts-ignore\n      this.renderSuspense()]);\n    }\n  },\n  render: function render() {\n    return this.renderSearchTable();\n  }\n});"],"names":["_resolveDirective","_isVNode","_createVNode","__assign","__spreadArray","ConditionalRender","FlexLayout","Suspense","Intl","Mixins","Button","Table","classNames","defineComponent","_isSlot","s","Object","prototype","toString","call","selectorPrefix","updatedEx","Fixed","Auto","NUMBER_GENERATOR_RULE_ALONE","Symbol","NUMBER_GENERATOR_RULE_CONTINUITY","ROW_SELECTION_NORMAL_MODE","ROW_SELECTION_CONTINUOUS_MODE","mixins","props","wrapStyle","type","String","default","className","tableClassName","tableStyle","searchClassName","searchStyle","reset","Boolean","antdTableProps","isShowExpandSearch","defaultExpandSearchCollapse","fitSearch","fitTable","autoFixed","fixedHeaderAutoTable","fixedTableSpaceBetween","data","page","limit","expand","this","scrollY","prevState","_c","$refs","tableWrapRef","dataSource","getData","length","scrollBodyEl","getScrollBodyEl","removeEventListener","onScrollBodyScroll","addEventListener","tableHeaderHeight","_a","querySelector","offsetHeight","tablePaginationHeight","_b","clientHeight","beforeUnmount","methods","scrollHeaderEl","getScrollHeaderEl","scrollLeft","renderTableNumberColumn","number","params","renderSearchTableInner","_slot","_slot2","_slot3","_slot4","_this2","$slots","direction","style","class","apply","split","concat","fit","conditional","renderSearchForm","renderSearchFooter","tableHeader","ref","renderTable","tableFooter","renderInner","renderSearchTableSearchFooter","_slot5","_this","defaultItems","onClick","onSearch","tv","onClear","items","push","src","alt","noMatch","renderSearchFooterItems","map","t","renderSearchTableTable","p","getScopedSlotsInner","getRowKey","getRowSelection","tablePropsAttr","tableOnAttr","mergeProps","startsWith","substring","toLowerCase","tableProps","rowKey","columns","getTableColumns","pagination","getPagination","rowSelection","onChange","onTableChange","scrollY_1","scroll","y","bodyCell","row","numberGeneratorRule","page_1","limit_1","record","index","column","key","getNumberGeneratorRule","getScopedSlots","getSearchTableTableColumns","getColumns","isShowNumber","getTableNumberColumnWidth","filter","authorized","title","align","width","filters","sorter","getOrderFieldProp","field","getOrderProp","order","fetchData","onSubTableChange","clear","then","sortOrder","columnName","getSearchTablePagination","onShowSizeChange","showTotal","total","pageSize","getTotal","current","showQuickJumper","renderSearchTable","renderSuspense","render"],"mappings":"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"}