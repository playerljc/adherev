{"version":3,"file":"VueDraggableResizable.js","sources":["Extension/ColumnResizable/drag/VueDraggableResizable.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.set.add-all.js\";\nimport \"core-js/modules/esnext.set.delete-all.js\";\nimport \"core-js/modules/esnext.set.difference.js\";\nimport \"core-js/modules/esnext.set.every.js\";\nimport \"core-js/modules/esnext.set.filter.js\";\nimport \"core-js/modules/esnext.set.find.js\";\nimport \"core-js/modules/esnext.set.intersection.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.js\";\nimport \"core-js/modules/esnext.set.join.js\";\nimport \"core-js/modules/esnext.set.map.js\";\nimport \"core-js/modules/esnext.set.reduce.js\";\nimport \"core-js/modules/esnext.set.some.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.js\";\nimport \"core-js/modules/esnext.set.union.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign } from \"tslib\";\nimport { defineComponent } from 'vue';\nimport { matchesSelectorToParentElements, getComputedSize, addEvent, removeEvent } from './utils/dom';\nimport { computeWidth, computeHeight, restrictToBounds, snapToGrid } from './utils/fns';\nvar events = {\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  },\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  }\n};\nvar userSelectNone = {\n  userSelect: 'none',\n  MozUserSelect: 'none',\n  WebkitUserSelect: 'none',\n  MsUserSelect: 'none'\n};\nvar userSelectAuto = {\n  userSelect: 'auto',\n  MozUserSelect: 'auto',\n  WebkitUserSelect: 'auto',\n  MsUserSelect: 'auto'\n};\nvar eventsFor = events.mouse;\nexport default defineComponent({\n  replace: true,\n  name: 'vue-draggable-resizable',\n  props: {\n    className: {\n      type: String,\n      default: 'vdr'\n    },\n    classNameDraggable: {\n      type: String,\n      default: 'draggable'\n    },\n    classNameResizable: {\n      type: String,\n      default: 'resizable'\n    },\n    classNameDragging: {\n      type: String,\n      default: 'dragging'\n    },\n    classNameResizing: {\n      type: String,\n      default: 'resizing'\n    },\n    classNameActive: {\n      type: String,\n      default: 'active'\n    },\n    classNameHandle: {\n      type: String,\n      default: 'handle'\n    },\n    disableUserSelect: {\n      type: Boolean,\n      default: true\n    },\n    enableNativeDrag: {\n      type: Boolean,\n      default: false\n    },\n    preventDeactivation: {\n      type: Boolean,\n      default: false\n    },\n    active: {\n      type: Boolean,\n      default: false\n    },\n    draggable: {\n      type: Boolean,\n      default: true\n    },\n    resizable: {\n      type: Boolean,\n      default: true\n    },\n    lockAspectRatio: {\n      type: Boolean,\n      default: false\n    },\n    w: {\n      type: [Number, String],\n      default: 200,\n      validator: function validator(val) {\n        if (typeof val === 'number') {\n          return val > 0;\n        }\n\n        return val === 'auto';\n      }\n    },\n    h: {\n      type: [Number, String],\n      default: 200,\n      validator: function validator(val) {\n        if (typeof val === 'number') {\n          return val > 0;\n        }\n\n        return val === 'auto';\n      }\n    },\n    minWidth: {\n      type: Number,\n      default: 0,\n      validator: function validator(val) {\n        return val >= 0;\n      }\n    },\n    minHeight: {\n      type: Number,\n      default: 0,\n      validator: function validator(val) {\n        return val >= 0;\n      }\n    },\n    maxWidth: {\n      type: Number,\n      default: null,\n      validator: function validator(val) {\n        return val >= 0;\n      }\n    },\n    maxHeight: {\n      type: Number,\n      default: null,\n      validator: function validator(val) {\n        return val >= 0;\n      }\n    },\n    x: {\n      type: Number,\n      default: 0\n    },\n    y: {\n      type: Number,\n      default: 0\n    },\n    z: {\n      type: [String, Number],\n      default: 'auto',\n      validator: function validator(val) {\n        return typeof val === 'string' ? val === 'auto' : val >= 0;\n      }\n    },\n    handles: {\n      type: Array,\n      default: function _default() {\n        return ['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml'];\n      },\n      validator: function validator(val) {\n        var s = new Set(['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml']);\n        return new Set(val.filter(function (h) {\n          return s.has(h);\n        })).size === val.length;\n      }\n    },\n    dragHandle: {\n      type: String,\n      default: null\n    },\n    dragCancel: {\n      type: String,\n      default: null\n    },\n    axis: {\n      type: String,\n      default: 'both',\n      validator: function validator(val) {\n        return ['x', 'y', 'both'].includes(val);\n      }\n    },\n    grid: {\n      type: Array,\n      default: function _default() {\n        return [1, 1];\n      }\n    },\n    parent: {\n      type: Boolean,\n      default: false\n    },\n    scale: {\n      type: [Number, Array],\n      default: 1,\n      validator: function validator(val) {\n        if (typeof val === 'number') {\n          return val > 0;\n        }\n\n        return val.length === 2 && val[0] > 0 && val[1] > 0;\n      }\n    },\n    onDragStart: {\n      type: Function,\n      default: function _default() {\n        return true;\n      }\n    },\n    onDrag: {\n      type: Function,\n      default: function _default() {\n        return true;\n      }\n    },\n    onResizeStart: {\n      type: Function,\n      default: function _default() {\n        return true;\n      }\n    },\n    onResize: {\n      type: Function,\n      default: function _default() {\n        return true;\n      }\n    }\n  },\n  data: function data() {\n    return {\n      left: this.x,\n      top: this.y,\n      right: null,\n      bottom: null,\n      width: null,\n      height: null,\n      widthTouched: false,\n      heightTouched: false,\n      aspectFactor: null,\n      parentWidth: null,\n      parentHeight: null,\n      minW: this.minWidth,\n      minH: this.minHeight,\n      maxW: this.maxWidth,\n      maxH: this.maxHeight,\n      handle: null,\n      enabled: this.active,\n      resizing: false,\n      dragging: false,\n      dragEnable: false,\n      resizeEnable: false,\n      zIndex: this.z\n    };\n  },\n  created: function created() {\n    // eslint-disable-next-line\n    if (this.maxWidth && this.minWidth > this.maxWidth) console.warn('[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth'); // eslint-disable-next-line\n\n    if (this.maxWidth && this.minHeight > this.maxHeight) console.warn('[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight');\n    this.resetBoundsAndMouseState();\n  },\n  mounted: function mounted() {\n    if (!this.enableNativeDrag) {\n      this.$el.ondragstart = function () {\n        return false;\n      };\n    }\n\n    var _a = this.getParentSize(),\n        parentWidth = _a[0],\n        parentHeight = _a[1];\n\n    this.parentWidth = parentWidth;\n    this.parentHeight = parentHeight;\n\n    var _b = getComputedSize(this.$el),\n        width = _b[0],\n        height = _b[1];\n\n    this.aspectFactor = (this.w !== 'auto' ? this.w : width) / (this.h !== 'auto' ? this.h : height);\n    this.width = this.w !== 'auto' ? this.w : width;\n    this.height = this.h !== 'auto' ? this.h : height;\n    this.right = this.parentWidth - this.width - this.left;\n    this.bottom = this.parentHeight - this.height - this.top;\n\n    if (this.active) {\n      this.$emit('activated');\n    }\n\n    addEvent(document.documentElement, 'mousedown', this.deselect);\n    addEvent(document.documentElement, 'touchend touchcancel', this.deselect);\n    addEvent(window, 'resize', this.checkParentSize);\n  },\n  beforeDestroy: function beforeDestroy() {\n    removeEvent(document.documentElement, 'mousedown', this.deselect);\n    removeEvent(document.documentElement, 'touchstart', this.handleUp);\n    removeEvent(document.documentElement, 'mousemove', this.move);\n    removeEvent(document.documentElement, 'touchmove', this.move);\n    removeEvent(document.documentElement, 'mouseup', this.handleUp);\n    removeEvent(document.documentElement, 'touchend touchcancel', this.deselect);\n    removeEvent(window, 'resize', this.checkParentSize);\n  },\n  methods: {\n    resetBoundsAndMouseState: function resetBoundsAndMouseState() {\n      this.mouseClickPosition = {\n        mouseX: 0,\n        mouseY: 0,\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0\n      };\n      this.bounds = {\n        minLeft: null,\n        maxLeft: null,\n        minRight: null,\n        maxRight: null,\n        minTop: null,\n        maxTop: null,\n        minBottom: null,\n        maxBottom: null\n      };\n    },\n    checkParentSize: function checkParentSize() {\n      if (this.parent) {\n        var _a = this.getParentSize(),\n            newParentWidth = _a[0],\n            newParentHeight = _a[1];\n\n        this.parentWidth = newParentWidth;\n        this.parentHeight = newParentHeight;\n        this.right = this.parentWidth - this.width - this.left;\n        this.bottom = this.parentHeight - this.height - this.top;\n      }\n    },\n    getParentSize: function getParentSize() {\n      if (this.parent) {\n        var style = window.getComputedStyle(this.$el.parentNode, null);\n        return [parseInt(style.getPropertyValue('width'), 10), parseInt(style.getPropertyValue('height'), 10)];\n      }\n\n      return [null, null];\n    },\n    elementTouchDown: function elementTouchDown(e) {\n      eventsFor = events.touch;\n      this.elementDown(e);\n    },\n    elementMouseDown: function elementMouseDown(e) {\n      eventsFor = events.mouse;\n      this.elementDown(e);\n    },\n    elementDown: function elementDown(e) {\n      if (e instanceof MouseEvent && e.which !== 1) {\n        return;\n      }\n\n      var target = e.target || e.srcElement;\n\n      if (this.$el.contains(target)) {\n        if (this.onDragStart(e) === false) {\n          return;\n        }\n\n        if (this.dragHandle && !matchesSelectorToParentElements(target, this.dragHandle, this.$el) || this.dragCancel && matchesSelectorToParentElements(target, this.dragCancel, this.$el)) {\n          this.dragging = false;\n          return;\n        }\n\n        if (!this.enabled) {\n          this.enabled = true;\n          this.$emit('activated');\n          this.$emit('update:active', true);\n        }\n\n        if (this.draggable) {\n          this.dragEnable = true;\n        }\n\n        this.mouseClickPosition.mouseX = e.touches ? e.touches[0].pageX : e.pageX;\n        this.mouseClickPosition.mouseY = e.touches ? e.touches[0].pageY : e.pageY;\n        this.mouseClickPosition.left = this.left;\n        this.mouseClickPosition.right = this.right;\n        this.mouseClickPosition.top = this.top;\n        this.mouseClickPosition.bottom = this.bottom;\n\n        if (this.parent) {\n          this.bounds = this.calcDragLimits();\n        }\n\n        addEvent(document.documentElement, eventsFor.move, this.move);\n        addEvent(document.documentElement, eventsFor.stop, this.handleUp);\n      }\n    },\n    calcDragLimits: function calcDragLimits() {\n      return {\n        minLeft: this.left % this.grid[0],\n        maxLeft: Math.floor((this.parentWidth - this.width - this.left) / this.grid[0]) * this.grid[0] + this.left,\n        minRight: this.right % this.grid[0],\n        maxRight: Math.floor((this.parentWidth - this.width - this.right) / this.grid[0]) * this.grid[0] + this.right,\n        minTop: this.top % this.grid[1],\n        maxTop: Math.floor((this.parentHeight - this.height - this.top) / this.grid[1]) * this.grid[1] + this.top,\n        minBottom: this.bottom % this.grid[1],\n        maxBottom: Math.floor((this.parentHeight - this.height - this.bottom) / this.grid[1]) * this.grid[1] + this.bottom\n      };\n    },\n    deselect: function deselect(e) {\n      var target = e.target || e.srcElement;\n      var regex = new RegExp(this.className + '-([trmbl]{2})', '');\n\n      if (!this.$el.contains(target) && !regex.test(target.className)) {\n        if (this.enabled && !this.preventDeactivation) {\n          this.enabled = false;\n          this.$emit('deactivated');\n          this.$emit('update:active', false);\n        }\n\n        removeEvent(document.documentElement, eventsFor.move, this.handleResize);\n      }\n\n      this.resetBoundsAndMouseState();\n    },\n    handleTouchDown: function handleTouchDown(handle, e) {\n      eventsFor = events.touch;\n      this.handleDown(handle, e);\n    },\n    handleDown: function handleDown(handle, e) {\n      if (e instanceof MouseEvent && e.which !== 1) {\n        return;\n      }\n\n      if (this.onResizeStart(handle, e) === false) {\n        return;\n      }\n\n      if (e.stopPropagation) e.stopPropagation(); // Here we avoid a dangerous recursion by faking\n      // corner handles as middle handles\n\n      if (this.lockAspectRatio && !handle.includes('m')) {\n        this.handle = 'm' + handle.substring(1);\n      } else {\n        this.handle = handle;\n      }\n\n      this.resizeEnable = true;\n      this.mouseClickPosition.mouseX = e.touches ? e.touches[0].pageX : e.pageX;\n      this.mouseClickPosition.mouseY = e.touches ? e.touches[0].pageY : e.pageY;\n      this.mouseClickPosition.left = this.left;\n      this.mouseClickPosition.right = this.right;\n      this.mouseClickPosition.top = this.top;\n      this.mouseClickPosition.bottom = this.bottom;\n      this.bounds = this.calcResizeLimits();\n      addEvent(document.documentElement, eventsFor.move, this.handleResize);\n      addEvent(document.documentElement, eventsFor.stop, this.handleUp);\n    },\n    calcResizeLimits: function calcResizeLimits() {\n      var minW = this.minW;\n      var minH = this.minH;\n      var maxW = this.maxW;\n      var maxH = this.maxH;\n      var aspectFactor = this.aspectFactor;\n      var _a = this.grid,\n          gridX = _a[0],\n          gridY = _a[1];\n      var width = this.width;\n      var height = this.height;\n      var left = this.left;\n      var top = this.top;\n      var right = this.right;\n      var bottom = this.bottom;\n\n      if (this.lockAspectRatio) {\n        if (minW / minH > aspectFactor) {\n          minH = minW / aspectFactor;\n        } else {\n          minW = aspectFactor * minH;\n        }\n\n        if (maxW && maxH) {\n          maxW = Math.min(maxW, aspectFactor * maxH);\n          maxH = Math.min(maxH, maxW / aspectFactor);\n        } else if (maxW) {\n          maxH = maxW / aspectFactor;\n        } else if (maxH) {\n          maxW = aspectFactor * maxH;\n        }\n      }\n\n      maxW = maxW - maxW % gridX;\n      maxH = maxH - maxH % gridY;\n      var limits = {\n        minLeft: null,\n        maxLeft: null,\n        minTop: null,\n        maxTop: null,\n        minRight: null,\n        maxRight: null,\n        minBottom: null,\n        maxBottom: null\n      };\n\n      if (this.parent) {\n        limits.minLeft = left % gridX;\n        limits.maxLeft = left + Math.floor((width - minW) / gridX) * gridX;\n        limits.minTop = top % gridY;\n        limits.maxTop = top + Math.floor((height - minH) / gridY) * gridY;\n        limits.minRight = right % gridX;\n        limits.maxRight = right + Math.floor((width - minW) / gridX) * gridX;\n        limits.minBottom = bottom % gridY;\n        limits.maxBottom = bottom + Math.floor((height - minH) / gridY) * gridY;\n\n        if (maxW) {\n          limits.minLeft = Math.max(limits.minLeft, this.parentWidth - right - maxW);\n          limits.minRight = Math.max(limits.minRight, this.parentWidth - left - maxW);\n        }\n\n        if (maxH) {\n          limits.minTop = Math.max(limits.minTop, this.parentHeight - bottom - maxH);\n          limits.minBottom = Math.max(limits.minBottom, this.parentHeight - top - maxH);\n        }\n\n        if (this.lockAspectRatio) {\n          limits.minLeft = Math.max(limits.minLeft, left - top * aspectFactor);\n          limits.minTop = Math.max(limits.minTop, top - left / aspectFactor);\n          limits.minRight = Math.max(limits.minRight, right - bottom * aspectFactor);\n          limits.minBottom = Math.max(limits.minBottom, bottom - right / aspectFactor);\n        }\n      } else {\n        limits.minLeft = null;\n        limits.maxLeft = left + Math.floor((width - minW) / gridX) * gridX;\n        limits.minTop = null;\n        limits.maxTop = top + Math.floor((height - minH) / gridY) * gridY;\n        limits.minRight = null;\n        limits.maxRight = right + Math.floor((width - minW) / gridX) * gridX;\n        limits.minBottom = null;\n        limits.maxBottom = bottom + Math.floor((height - minH) / gridY) * gridY;\n\n        if (maxW) {\n          limits.minLeft = -(right + maxW);\n          limits.minRight = -(left + maxW);\n        }\n\n        if (maxH) {\n          limits.minTop = -(bottom + maxH);\n          limits.minBottom = -(top + maxH);\n        }\n\n        if (this.lockAspectRatio && maxW && maxH) {\n          if (typeof limits.minLeft === 'number') {\n            limits.minLeft = Math.min(limits.minLeft, -(right + maxW));\n          }\n\n          if (typeof limits.minTop === 'number') {\n            limits.minTop = Math.min(limits.minTop, -(maxH + bottom));\n          }\n\n          if (typeof limits.minRight === 'number') {\n            limits.minRight = Math.min(limits.minRight, -left - maxW);\n          }\n\n          if (typeof limits.minBottom === 'number') {\n            limits.minBottom = Math.min(limits.minBottom, -top - maxH);\n          }\n        }\n      }\n\n      return limits;\n    },\n    move: function move(e) {\n      if (this.resizing) {\n        this.handleResize(e);\n      } else if (this.dragEnable) {\n        this.handleDrag(e);\n      }\n    },\n    handleDrag: function handleDrag(e) {\n      var axis = this.axis;\n      var grid = this.grid;\n      var bounds = this.bounds;\n      var mouseClickPosition = this.mouseClickPosition;\n      var tmpDeltaX = axis && axis !== 'y' ? mouseClickPosition.mouseX - (e.touches ? e.touches[0].pageX : e.pageX) : 0;\n      var tmpDeltaY = axis && axis !== 'x' ? mouseClickPosition.mouseY - (e.touches ? e.touches[0].pageY : e.pageY) : 0;\n\n      var _a = snapToGrid(grid, tmpDeltaX, tmpDeltaY, this.scale),\n          deltaX = _a[0],\n          deltaY = _a[1];\n\n      var left = restrictToBounds(mouseClickPosition.left - deltaX, bounds.minLeft, bounds.maxLeft);\n      var top = restrictToBounds(mouseClickPosition.top - deltaY, bounds.minTop, bounds.maxTop);\n\n      if (this.onDrag(left, top) === false) {\n        return;\n      }\n\n      var right = restrictToBounds(mouseClickPosition.right + deltaX, bounds.minRight, bounds.maxRight);\n      var bottom = restrictToBounds(mouseClickPosition.bottom + deltaY, bounds.minBottom, bounds.maxBottom);\n      this.left = left;\n      this.top = top;\n      this.right = right;\n      this.bottom = bottom;\n      console.log('draggingInner', this.left);\n      this.$emit('dragging', this.left, this.top);\n      this.dragging = true;\n    },\n    moveHorizontally: function moveHorizontally(val) {\n      // should calculate with scale 1.\n      var _a = snapToGrid(this.grid, val, this.top, 1),\n          deltaX = _a[0],\n          _ = _a[1];\n\n      var left = restrictToBounds(deltaX, this.bounds.minLeft, this.bounds.maxLeft);\n      this.left = left;\n      this.right = this.parentWidth - this.width - left;\n    },\n    moveVertically: function moveVertically(val) {\n      // should calculate with scale 1.\n      var _a = snapToGrid(this.grid, this.left, val, 1),\n          _ = _a[0],\n          deltaY = _a[1];\n\n      var top = restrictToBounds(deltaY, this.bounds.minTop, this.bounds.maxTop);\n      this.top = top;\n      this.bottom = this.parentHeight - this.height - top;\n    },\n    handleResize: function handleResize(e) {\n      var left = this.left;\n      var top = this.top;\n      var right = this.right;\n      var bottom = this.bottom;\n      var mouseClickPosition = this.mouseClickPosition;\n      var lockAspectRatio = this.lockAspectRatio;\n      var aspectFactor = this.aspectFactor;\n      var tmpDeltaX = mouseClickPosition.mouseX - (e.touches ? e.touches[0].pageX : e.pageX);\n      var tmpDeltaY = mouseClickPosition.mouseY - (e.touches ? e.touches[0].pageY : e.pageY);\n\n      if (!this.widthTouched && tmpDeltaX) {\n        this.widthTouched = true;\n      }\n\n      if (!this.heightTouched && tmpDeltaY) {\n        this.heightTouched = true;\n      }\n\n      var _a = snapToGrid(this.grid, tmpDeltaX, tmpDeltaY, this.scale),\n          deltaX = _a[0],\n          deltaY = _a[1];\n\n      if (this.handle.includes('b')) {\n        bottom = restrictToBounds(mouseClickPosition.bottom + deltaY, this.bounds.minBottom, this.bounds.maxBottom);\n\n        if (this.lockAspectRatio && this.resizingOnY) {\n          right = this.right - (this.bottom - bottom) * aspectFactor;\n        }\n      } else if (this.handle.includes('t')) {\n        top = restrictToBounds(mouseClickPosition.top - deltaY, this.bounds.minTop, this.bounds.maxTop);\n\n        if (this.lockAspectRatio && this.resizingOnY) {\n          left = this.left - (this.top - top) * aspectFactor;\n        }\n      }\n\n      if (this.handle.includes('r')) {\n        right = restrictToBounds(mouseClickPosition.right + deltaX, this.bounds.minRight, this.bounds.maxRight);\n\n        if (this.lockAspectRatio && this.resizingOnX) {\n          bottom = this.bottom - (this.right - right) / aspectFactor;\n        }\n      } else if (this.handle.includes('l')) {\n        left = restrictToBounds(mouseClickPosition.left - deltaX, this.bounds.minLeft, this.bounds.maxLeft);\n\n        if (this.lockAspectRatio && this.resizingOnX) {\n          top = this.top - (this.left - left) / aspectFactor;\n        }\n      }\n\n      var width = computeWidth(this.parentWidth, left, right);\n      var height = computeHeight(this.parentHeight, top, bottom);\n\n      if (this.onResize(this.handle, left, top, width, height) === false) {\n        return;\n      }\n\n      this.left = left;\n      this.top = top;\n      this.right = right;\n      this.bottom = bottom;\n      this.width = width;\n      this.height = height;\n      this.$emit('resizing', this.left, this.top, this.width, this.height);\n      this.resizing = true;\n    },\n    changeWidth: function changeWidth(val) {\n      // should calculate with scale 1.\n      var _a = snapToGrid(this.grid, val, 0, 1),\n          newWidth = _a[0],\n          _ = _a[1];\n\n      var right = restrictToBounds(this.parentWidth - newWidth - this.left, this.bounds.minRight, this.bounds.maxRight);\n      var bottom = this.bottom;\n\n      if (this.lockAspectRatio) {\n        bottom = this.bottom - (this.right - right) / this.aspectFactor;\n      }\n\n      var width = computeWidth(this.parentWidth, this.left, right);\n      var height = computeHeight(this.parentHeight, this.top, bottom);\n      this.right = right;\n      this.bottom = bottom;\n      this.width = width;\n      this.height = height;\n    },\n    changeHeight: function changeHeight(val) {\n      // should calculate with scale 1.\n      var _a = snapToGrid(this.grid, 0, val, 1),\n          _ = _a[0],\n          newHeight = _a[1];\n\n      var bottom = restrictToBounds(this.parentHeight - newHeight - this.top, this.bounds.minBottom, this.bounds.maxBottom);\n      var right = this.right;\n\n      if (this.lockAspectRatio) {\n        right = this.right - (this.bottom - bottom) * this.aspectFactor;\n      }\n\n      var width = computeWidth(this.parentWidth, this.left, right);\n      var height = computeHeight(this.parentHeight, this.top, bottom);\n      this.right = right;\n      this.bottom = bottom;\n      this.width = width;\n      this.height = height;\n    },\n    handleUp: function handleUp(e) {\n      this.handle = null;\n      this.resetBoundsAndMouseState();\n      this.dragEnable = false;\n      this.resizeEnable = false;\n\n      if (this.resizing) {\n        this.resizing = false;\n        this.$emit('resizestop', this.left, this.top, this.width, this.height);\n      }\n\n      if (this.dragging) {\n        this.dragging = false;\n        this.$emit('dragstop', this.left, this.top);\n      }\n\n      removeEvent(document.documentElement, eventsFor.move, this.handleResize);\n    }\n  },\n  computed: {\n    style: function style() {\n      return __assign({\n        width: this.computedWidth,\n        height: this.computedHeight,\n        zIndex: this.zIndex\n      }, this.dragging && this.disableUserSelect ? userSelectNone : userSelectAuto);\n    },\n    actualHandles: function actualHandles() {\n      if (!this.resizable) return [];\n      return this.handles;\n    },\n    computedWidth: function computedWidth() {\n      if (this.w === 'auto') {\n        if (!this.widthTouched) {\n          return 'auto';\n        }\n      }\n\n      return this.width + 'px';\n    },\n    computedHeight: function computedHeight() {\n      if (this.h === 'auto') {\n        if (!this.heightTouched) {\n          return 'auto';\n        }\n      }\n\n      return this.height + 'px';\n    },\n    resizingOnX: function resizingOnX() {\n      return Boolean(this.handle) && (this.handle.includes('l') || this.handle.includes('r'));\n    },\n    resizingOnY: function resizingOnY() {\n      return Boolean(this.handle) && (this.handle.includes('t') || this.handle.includes('b'));\n    },\n    isCornerHandle: function isCornerHandle() {\n      return Boolean(this.handle) && ['tl', 'tr', 'br', 'bl'].includes(this.handle);\n    }\n  },\n  watch: {\n    active: function active(val) {\n      this.enabled = val;\n\n      if (val) {\n        this.$emit('activated');\n      } else {\n        this.$emit('deactivated');\n      }\n    },\n    z: function z(val) {\n      if (val >= 0 || val === 'auto') {\n        this.zIndex = val;\n      }\n    },\n    x: function x(val) {\n      if (this.resizing || this.dragging) {\n        return;\n      }\n\n      if (this.parent) {\n        this.bounds = this.calcDragLimits();\n      }\n\n      this.moveHorizontally(val);\n    },\n    y: function y(val) {\n      if (this.resizing || this.dragging) {\n        return;\n      }\n\n      if (this.parent) {\n        this.bounds = this.calcDragLimits();\n      }\n\n      this.moveVertically(val);\n    },\n    lockAspectRatio: function lockAspectRatio(val) {\n      if (val) {\n        this.aspectFactor = this.width / this.height;\n      } else {\n        this.aspectFactor = undefined;\n      }\n    },\n    minWidth: function minWidth(val) {\n      if (val > 0 && val <= this.width) {\n        this.minW = val;\n      }\n    },\n    minHeight: function minHeight(val) {\n      if (val > 0 && val <= this.height) {\n        this.minH = val;\n      }\n    },\n    maxWidth: function maxWidth(val) {\n      this.maxW = val;\n    },\n    maxHeight: function maxHeight(val) {\n      this.maxH = val;\n    },\n    w: function w(val) {\n      if (this.resizing || this.dragging) {\n        return;\n      }\n\n      if (this.parent) {\n        this.bounds = this.calcResizeLimits();\n      }\n\n      this.changeWidth(val);\n    },\n    h: function h(val) {\n      if (this.resizing || this.dragging) {\n        return;\n      }\n\n      if (this.parent) {\n        this.bounds = this.calcResizeLimits();\n      }\n\n      this.changeHeight(val);\n    }\n  },\n  render: function render() {\n    var _a;\n\n    var _this = this;\n\n    var _b, _c;\n\n    return _createVNode(\"div\", {\n      \"style\": this.style,\n      \"class\": [(_a = {}, _a[this.classNameActive] = this.enabled, _a[this.classNameDragging] = this.dragging, _a[this.classNameResizing] = this.resizing, _a[this.classNameDraggable] = this.draggable, _a[this.classNameResizable] = this.resizable, _a), this.className],\n      \"onMousedown\": this.elementMouseDown,\n      \"onTouchstart\": this.elementTouchDown\n    }, [this.actualHandles.map(function (handle) {\n      var _a, _b;\n\n      return _createVNode(\"div\", {\n        \"key\": handle,\n        \"class\": [_this.classNameHandle, _this.classNameHandle + '-' + handle],\n        \"style\": {\n          display: _this.enabled ? 'block' : 'none'\n        },\n        \"onMousedown\": function onMousedown(e) {\n          e.stopPropagation();\n\n          _this.handleDown(handle, e);\n        },\n        \"onTouchstart\": function onTouchstart(e) {\n          e.stopPropagation();\n\n          _this.handleTouchDown(handle, e);\n        }\n      }, [(_b = (_a = _this.$slots) === null || _a === void 0 ? void 0 : _a[handle]) === null || _b === void 0 ? void 0 : _b.call(_a)]);\n    }), (_c = (_b = this.$slots) === null || _b === void 0 ? void 0 : _b.default) === null || _c === void 0 ? void 0 : _c.call(_b)]);\n  }\n});"],"names":["_createVNode","__assign","defineComponent","matchesSelectorToParentElements","getComputedSize","addEvent","removeEvent","computeWidth","computeHeight","restrictToBounds","snapToGrid","events","mouse","start","move","stop","touch","userSelectNone","userSelect","MozUserSelect","WebkitUserSelect","MsUserSelect","userSelectAuto","eventsFor","replace","name","props","className","type","String","default","classNameDraggable","classNameResizable","classNameDragging","classNameResizing","classNameActive","classNameHandle","disableUserSelect","Boolean","enableNativeDrag","preventDeactivation","active","draggable","resizable","lockAspectRatio","w","Number","validator","val","h","minWidth","minHeight","maxWidth","maxHeight","x","y","z","handles","Array","s","Set","filter","has","size","length","dragHandle","dragCancel","axis","includes","grid","parent","scale","onDragStart","Function","onDrag","onResizeStart","onResize","data","left","this","top","right","bottom","width","height","widthTouched","heightTouched","aspectFactor","parentWidth","parentHeight","minW","minH","maxW","maxH","handle","enabled","resizing","dragging","dragEnable","resizeEnable","zIndex","created","console","warn","resetBoundsAndMouseState","mounted","$el","ondragstart","_a","getParentSize","_b","$emit","document","documentElement","deselect","window","checkParentSize","beforeDestroy","handleUp","methods","mouseClickPosition","mouseX","mouseY","bounds","minLeft","maxLeft","minRight","maxRight","minTop","maxTop","minBottom","maxBottom","newParentWidth","newParentHeight","style","getComputedStyle","parentNode","parseInt","getPropertyValue","elementTouchDown","e","elementDown","elementMouseDown","target","MouseEvent","which","srcElement","contains","touches","pageX","pageY","calcDragLimits","Math","floor","regex","RegExp","test","handleResize","handleTouchDown","handleDown","stopPropagation","substring","calcResizeLimits","gridX","gridY","limits","min","max","handleDrag","tmpDeltaX","tmpDeltaY","deltaX","deltaY","log","moveHorizontally","moveVertically","resizingOnY","resizingOnX","changeWidth","newWidth","changeHeight","newHeight","computed","computedWidth","computedHeight","actualHandles","isCornerHandle","watch","undefined","render","_c","_this","class","onMousedown","onTouchstart","map","key","display","$slots","call"],"mappings":"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"}