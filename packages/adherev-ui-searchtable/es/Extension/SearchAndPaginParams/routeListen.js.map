{"version":3,"file":"routeListen.js","sources":["Extension/SearchAndPaginParams/routeListen.js"],"sourcesContent":["import \"core-js/modules/es.array.last-index-of.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport { TableImplementSearchAndvPaginParamsMemo } from '../../ProSearchTable';\nvar historyStack = [];\n/**\n * clearSearAndPaginParamsByPathname\n * @description 清除查询条件根据pathname\n * @param pathname\n */\nfunction clearSearAndPaginParamsByPathname(pathname) {\n  var findIndex = TableImplementSearchAndvPaginParamsMemo.findIndexByPath(pathname);\n  if (findIndex !== -1) TableImplementSearchAndvPaginParamsMemo.deleteByIndex(findIndex);\n}\nexport default (function (_a) {\n  var location = _a.location,\n    action = _a.action;\n  var pathname = location.pathname;\n  var findIndex = historyStack.lastIndexOf(pathname);\n  // 没找到\n  if (findIndex === -1) {\n    // 清除查询条件\n    clearSearAndPaginParamsByPathname(pathname);\n    historyStack.push(pathname);\n  }\n  // 找到了\n  else {\n    var pathArr = historyStack.slice(findIndex + 1);\n    // 1 2 1\n    // 之间只有一个页面的路径\n    if (pathArr.length === 1) {\n      // pathArr[0] /system/task/list/view\n      // pathname   /system/task/list/ 当前\n      if (!pathArr[0].startsWith(pathname)) {\n        // 清除查询条件\n        clearSearAndPaginParamsByPathname(pathname);\n      }\n    } else {\n      // 清除查询条件\n      clearSearAndPaginParamsByPathname(pathname);\n    }\n    // 都需要清空路径\n    historyStack = historyStack.slice(0, findIndex);\n    historyStack.push(pathname);\n  }\n});"],"names":["TableImplementSearchAndvPaginParamsMemo","historyStack","clearSearAndPaginParamsByPathname","pathname","findIndex","findIndexByPath","deleteByIndex","_a","pathArr","location","action","lastIndexOf","slice","length","startsWith","push"],"mappings":"MAAO,kDACA,0CACA,kDACEA,uCAAqE,KAAtB,uBACxD,IAAIC,aAAe,GAMnB,SAASC,kCAAkCC,GACrCC,EAAYJ,wCAAwCK,gBAAgBF,CAAQ,EAC9D,CAAC,IAAfC,GAAkBJ,wCAAwCM,cAAcF,CAAS,CACvF,gBACe,SAAWG,GACxB,IAYMC,EAZFC,EAAWF,EAAGE,SAEdN,GADOI,EAAGG,OACCD,EAASN,UACpBC,EAAYH,aAAaU,YAAYR,CAAQ,GAE/B,CAAC,IAAfC,GAEFF,kCAAkCC,CAAQ,EAC1CF,eAOuB,KAHnBO,EAAUP,aAAaW,MAAMR,EAAY,CAAC,GAGlCS,QAGLL,EAAQ,GAAGM,WAAWX,CAAQ,GAMnCD,kCAAkCC,CAAQ,EAG5CF,aAAeA,aAAaW,MAAM,EAAGR,CAAS,IAnBjCW,KAAKZ,CAAQ,CAsB7B"}