import{createVNode as _createVNode}from"vue";import{defineComponent,inject}from"vue";import{func,oneOfType,string}from"vue-types";import Intl from"@baifendian/adherev-util-intl";import{selectorPrefix}from"../../../SearchTable";export default defineComponent({name:"adv-searchtable-editable-control",props:{rowKey:string().def(""),renderEditorTable:oneOfType([string(),func()]),renderSave:oneOfType([string(),func()]),renderCancel:oneOfType([string(),func()]),onEditor:func(),onSave:func()},emits:["renderEditorTable","renderSave","renderCancel"],setup:function(n,e){function l(){return _createVNode("a",null,[Intl.tv("编辑表格")])}function o(){var e;n.onEditor?null!=(e=null==(e=n.onEditor)?void 0:e.call(n))&&e.then(i):i()}function t(){var e,n;null!=(n=null==(e=null==u?void 0:u.validateFields())?void 0:e.then)&&n.call(e,r)}function r(e){n.onSave?n.onSave(e).then(function(){return s(e)}):s(e)}function i(){d&&(d.isTableEditor=!0)}function a(){d&&(d.isTableEditor=!1),null!=v&&v()}var c=e.slots,d=null==(e=null==(e=inject("getContext"))?void 0:e())?void 0:e.context,u=null==(e=inject("getFormIns"))?void 0:e(),v=inject("setFieldValuesByDataSource"),s=function(e){null!=(e=null==d?void 0:d.updateEditorData(e))&&e.then(a)};return function(){var e;return _createVNode("div",{class:"".concat(selectorPrefix,"-editor-table-control")},[!(null!=d&&d.isTableEditor)&&_createVNode("div",{class:"".concat(selectorPrefix,"-editor-table-control-edit"),onClick:o},[(null==(e=null==c?void 0:c[n.renderEditorTable])?void 0:e.call(c))||(null==(e=null==n?void 0:n.renderEditorTable)?void 0:e.call(n))||(null===l?void 0:l())]),(null==d?void 0:d.isTableEditor)&&_createVNode("div",{class:"".concat(selectorPrefix,"-editor-table-control-save-cancel")},[_createVNode("div",{class:"".concat(selectorPrefix,"-editor-table-control-save-cancel-item"),onClick:t},[(null==(e=null==c?void 0:c[null==n?void 0:n.renderSave])?void 0:e.call(c))||(null==(e=null==n?void 0:n.renderSave)?void 0:e.call(n))||_createVNode("a",null,[Intl.tv("保存")])]),_createVNode("div",{class:"".concat(selectorPrefix,"-editor-table-control-save-cancel-item"),onClick:a},[(null==(e=null==c?void 0:c[null==n?void 0:n.renderCancel])?void 0:e.call(c))||(null==(e=null==n?void 0:n.renderCancel)?void 0:e.call(n))||_createVNode("a",null,[Intl.tv("取消")])])])])}}});
//# sourceMappingURL=index.js.map
