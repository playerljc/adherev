import Intl from"@baifendian/adherev-util-intl";import{selectorPrefix}from"../../../SearchTable";export default{name:"adv-searchtable-editable-row-control",props:{rowKey:{type:String},editorRowId:{type:String},record:{type:Object,default:function(){return{}}},renderEditorRow:{type:Function},renderSave:{type:Function},renderCancel:{type:Function},onSave:{type:Function},onEditor:{type:Function}},emits:["renderEditorRow","renderSave","renderCancel"],inject:["getFormIns","getContext"],methods:{renderDefaultEditorRow:function(t){return t("a",[Intl.tv("编辑行")])},renderDefaultCancel:function(t){return t("a",[Intl.tv("取消")])},renderDefaultSave:function(t){return t("a",[Intl.tv("保存")])},validateFieldsSuccess:function(t){var e=this;this.onSave?this.onSave(t).then(function(){return e.updateEditorCellRowData(t)}):this.updateEditorCellRowData(t)},updateEditorCellRowData:function(t){var e=this,o=null==(o=null==(o=this.getContext)?void 0:o.call(this))?void 0:o.context;null!=(o=null==o?void 0:o.updateEditorCellRowData({values:t,record:this.record}))&&o.then(function(){return e.reset()})},updateRowEdit:function(){var t=null==(t=null==(t=this.getContext)?void 0:t.call(this))?void 0:t.context;t&&(t.editorRowId=this.record[this.rowKey])},reset:function(){var t=null==(t=null==(t=this.getContext)?void 0:t.call(this))?void 0:t.context;t&&(t.editorRowId="")},$onEditor:function(){var t,e=this;this.onEditor?null!=(t=null==(t=this.onEditor)?void 0:t.call(this,this.record[this.rowKey]))&&t.then(function(){return e.updateRowEdit()}):this.updateRowEdit()}},render:function(t){var e,o,n=this,i=this,r=i.editorRowId,l=i.record,i=i.rowKey,d=this.getFormIns();return t("div",{class:"".concat(selectorPrefix,"-editor-row-control")},[r!==l[i]&&t("div",{class:"".concat(selectorPrefix,"-editor-row-control-edit"),on:{click:this.$onEditor}},[(null==(o=null==(e=this.$slots)?void 0:e[this.renderEditorRow])?void 0:o.call(e))||(null==(o=null==this?void 0:this.renderEditorRow)?void 0:o.call(this))||this.renderDefaultEditorRow(t)]),r===l[i]&&t("div",{class:"".concat(selectorPrefix,"-editor-row-control-save-cancel")},[t("div",{class:"".concat(selectorPrefix,"-editor-row-control-save-cancel-item"),on:{click:function(){return null==d?void 0:d.validateFields().then(function(t){return n.validateFieldsSuccess(t)})}}},[(null==(o=null==(e=this.$slots)?void 0:e[this.renderSave])?void 0:o.call(e))||(null==(r=null==this?void 0:this.renderSave)?void 0:r.call(this))||this.renderDefaultSave(t)]),t("div",{class:"".concat(selectorPrefix,"-editor-row-control-save-cancel-item"),on:{click:this.reset}},[(null==(i=null==(l=this.$slots)?void 0:l[this.renderCancel])?void 0:i.call(l))||(null==(o=null==this?void 0:this.renderCancel)?void 0:o.call(this))||this.renderDefaultCancel(t)])])])}};
//# sourceMappingURL=index.js.map
