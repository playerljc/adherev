import{createVNode as _createVNode}from"vue";import{defineComponent,inject}from"vue";import{func,number,object,oneOfType,string}from"vue-types";import Intl from"@baifendian/adherev-util-intl";import{selectorPrefix}from"../../../SearchTable";export default defineComponent({name:"adv-searchtable-editable-row-control",props:{rowKey:string().def(""),rowIndex:number(),editorRowId:string().def(""),record:object().def({}),renderEditorRow:oneOfType([string(),func()]),renderSave:oneOfType([string(),func()]),renderCancel:oneOfType([string(),func()]),onSave:func(),onEditor:func()},emits:["renderEditorRow","renderSave","renderCancel"],setup:function(n,e){function r(e){null!=(e=null==d?void 0:d.updateEditorCellRowData({values:e,record:n.record,rowIndex:n.rowIndex}))&&e.then(function(){return a()})}function o(){d&&(d.editorRowId=n.record[n.rowKey])}function l(){var e;n.onEditor?null!=(e=null==(e=n.onEditor)?void 0:e.call(n,n.record[n.rowKey]))&&e.then(o):o()}var t=e.slots,d=null==(e=null==(e=inject("getContext"))?void 0:e())?void 0:e.context,i=null==(e=inject("getFormIns"))?void 0:e(),c=inject("setRowFieldValue"),a=function(){d&&(d.editorRowId="",null!=c&&c(n.record,null==n?void 0:n.rowIndex))};return function(){var e;return _createVNode("div",{class:"".concat(selectorPrefix,"-editor-row-control")},[n.editorRowId!==n.record[n.rowKey]&&_createVNode("div",{class:"".concat(selectorPrefix,"-editor-row-control-edit"),onClick:l},[(null==(e=null==t?void 0:t[null==n?void 0:n.renderEditorRow])?void 0:e.call(t))||(null==(e=null==n?void 0:n.renderEditorRow)?void 0:e.call(n))||_createVNode("a",null,[Intl.tv("编辑行")])]),n.editorRowId===n.record[n.rowKey]&&_createVNode("div",{class:"".concat(selectorPrefix,"-editor-row-control-save-cancel")},[_createVNode("div",{class:"".concat(selectorPrefix,"-editor-row-control-save-cancel-item"),onClick:function(){return null==i?void 0:i.validateFields().then(function(e){var o;o=e,n.onSave?n.onSave(o).then(function(){return r(o)}):r(o)})}},[(null==(e=null==t?void 0:t[null==n?void 0:n.renderSave])?void 0:e.call(t))||(null==(e=null==n?void 0:n.renderSave)?void 0:e.call(n))||_createVNode("a",null,[Intl.tv("保存")])]),_createVNode("div",{class:"".concat(selectorPrefix,"-editor-row-control-save-cancel-item"),onClick:a},[(null==(e=null==t?void 0:t[null==n?void 0:n.renderCancel])?void 0:e.call(t))||(null==(e=null==n?void 0:n.renderCancel)?void 0:e.call(n))||_createVNode("a",null,[Intl.tv("取消")])])])])}}});
//# sourceMappingURL=index.js.map
