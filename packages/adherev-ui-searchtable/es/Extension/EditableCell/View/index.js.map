{"version":3,"file":"index.js","sources":["Extension/EditableCell/View/index.js"],"sourcesContent":["import _Icon from \"ant-design-vue/es/icon\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport classNames from 'classnames';\nimport { selectorPrefix } from '../../../SearchTable';\n/**\n * EditableCellView\n * @description 可编辑单元格的查看状态\n */\nexport default {\n  props: {\n    rowIndex: {\n      type: Number\n    },\n    record: {\n      type: Object\n    },\n    column: {\n      type: Object\n    },\n    columns: {\n      type: Array\n    },\n    editableConfig: {\n      type: Object\n    }\n  },\n  inject: ['getContext'],\n  emits: ['triggerChange'],\n  methods: {\n    /**\n     * onTrigger\n     */\n    onTrigger: function onTrigger() {\n      var _this = this;\n      var _a;\n      var _b = this.editableConfig,\n        onBeforeToEdit = _b.onBeforeToEdit,\n        dataIndex = _b.dataIndex;\n      var _c = this,\n        rowIndex = _c.rowIndex,\n        record = _c.record;\n      if (onBeforeToEdit) {\n        (_a = this.editableConfig.onBeforeToEdit({\n          value: record[dataIndex],\n          record: record,\n          dataIndex: dataIndex,\n          rowIndex: rowIndex\n        })) === null || _a === void 0 ? void 0 : _a.then(function () {\n          _this.$emit('triggerChange');\n        });\n        return;\n      }\n      this.$emit('triggerChange');\n    },\n    /**\n     * renderTrigger\n     * @description 渲染句柄\n     */\n    renderTrigger: function renderTrigger(h) {\n      return h(_Icon, {\n        \"attrs\": {\n          \"type\": \"edit\"\n        }\n      });\n    }\n  },\n  render: function render(h) {\n    var _a, _b, _c;\n    var _d = this,\n      _e = _d.editableConfig,\n      renderToEditTrigger = _e.renderToEditTrigger,\n      useTrigger = _e.useTrigger,\n      dataIndex = _e.dataIndex,\n      record = _d.record,\n      rowIndex = _d.rowIndex,\n      column = _d.column;\n    // 不使用句柄则返回原始组件\n    if (!useTrigger) {\n      return this === null || this === void 0 ? void 0 : this.$slots.default;\n    }\n    var renderToEditTriggerArgv = {\n      value: record === null || record === void 0 ? void 0 : record[dataIndex],\n      record: record,\n      dataIndex: dataIndex,\n      rowIndex: rowIndex\n    };\n    var context = (_b = (_a = this.getContext) === null || _a === void 0 ? void 0 : _a.call(this)) === null || _b === void 0 ? void 0 : _b.context;\n    var $scopedSlots = context === null || context === void 0 ? void 0 : context.$scopedSlots;\n    return h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-editablecell-view\")\n    }, [h(\"div\", {\n      \"class\": classNames(\"\".concat(selectorPrefix, \"-editablecell-view-inner\"), 'ellipsis' in column && column.ellipsis ? \"\".concat(selectorPrefix, \"-editablecell-view-inner-ellipsis\") : '')\n    }, [this === null || this === void 0 ? void 0 : this.$slots.default]), h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-editablecell-view-trigger\")\n    }, [h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-editablecell-view-trigger-inner\"),\n      \"on\": {\n        \"click\": this.onTrigger\n      }\n    }, [((_c = $scopedSlots === null || $scopedSlots === void 0 ? void 0 : $scopedSlots[renderToEditTrigger]) === null || _c === void 0 ? void 0 : _c.call($scopedSlots, renderToEditTriggerArgv)) || (renderToEditTrigger === null || renderToEditTrigger === void 0 ? void 0 : renderToEditTrigger(renderToEditTriggerArgv)), !$scopedSlots[renderToEditTrigger] && !renderToEditTrigger && this.renderTrigger(h)])])]);\n  }\n};"],"names":["_Icon","classNames","selectorPrefix","props","rowIndex","type","Number","record","Object","column","columns","Array","editableConfig","inject","emits","methods","onTrigger","_this","this","_b","onBeforeToEdit","dataIndex","_a","value","then","$emit","renderTrigger","h","attrs","render","_d","_e","renderToEditTrigger","useTrigger","renderToEditTriggerArgv","$scopedSlots","context","getContext","call","class","concat","ellipsis","$slots","default","on","click","_c"],"mappings":"OAAOA,UAAW,+BACX,kDACAC,eAAgB,oBACdC,cAA4C,KAAtB,qCAKhB,CACbC,MAAO,CACLC,SAAU,CACRC,KAAMC,MACR,EACAC,OAAQ,CACNF,KAAMG,MACR,EACAC,OAAQ,CACNJ,KAAMG,MACR,EACAE,QAAS,CACPL,KAAMM,KACR,EACAC,eAAgB,CACdP,KAAMG,MACR,CACF,EACAK,OAAQ,CAAC,cACTC,MAAO,CAAC,iBACRC,QAAS,CAIPC,UAAW,WACT,IAAIC,EAAQC,KAERC,EAAKD,KAAKN,eACZQ,EAAiBD,EAAGC,eACpBC,EAAYF,EAAGE,UAEfjB,EADOc,KACOd,SACdG,EAFOW,KAEKX,OACVa,EACF,OAACE,EAAKJ,KAAKN,eAAeQ,eAAe,CACvCG,MAAOhB,EAAOc,GACdd,OAAQA,EACRc,UAAWA,EACXjB,SAAUA,CACZ,CAAC,IAAwCkB,EAAGE,KAAK,WAC/CP,EAAMQ,MAAM,eAAe,CAC7B,CAAC,EAGHP,KAAKO,MAAM,eAAe,CAC5B,EAKAC,cAAe,SAAuBC,GACpC,OAAOA,EAAE3B,MAAO,CACd4B,MAAS,CACPvB,KAAQ,MACV,CACF,CAAC,CACH,CACF,EACAwB,OAAQ,SAAgBF,GACtB,IACIG,EAAKZ,KACPa,EAAKD,EAAGlB,eACRoB,EAAsBD,EAAGC,oBACzBC,EAAaF,EAAGE,WAChBZ,EAAYU,EAAGV,UACfd,EAASuB,EAAGvB,OACZH,EAAW0B,EAAG1B,SACdK,EAASqB,EAAGrB,OAEd,OAAKwB,GAGDC,EAA0B,CAC5BX,MAAOhB,MAAAA,EAAuC,KAAA,EAASA,EAAOc,GAC9Dd,OAAQA,EACRc,UAAWA,EACXjB,SAAUA,CACZ,EAEI+B,EAAeC,OADfA,EAAU,OAACjB,EAAK,OAACG,EAAKJ,KAAKmB,YAAwC,KAAA,EAASf,EAAGgB,KAAKpB,IAAI,GAA+B,KAAA,EAASC,EAAGiB,SAC3E,KAAA,EAASA,EAAQD,aACtER,EAAE,MAAO,CACdY,MAAS,GAAGC,OAAOtC,eAAgB,oBAAoB,CACzD,EAAG,CAACyB,EAAE,MAAO,CACXY,MAAStC,WAAW,GAAGuC,OAAOtC,eAAgB,0BAA0B,EAAG,aAAcO,GAAUA,EAAOgC,SAAW,GAAGD,OAAOtC,eAAgB,mCAAmC,EAAI,EAAE,CAC1L,EAAG,CAACgB,MAAAA,KAAmC,KAAA,EAASA,KAAKwB,OAAOC,QAAQ,EAAGhB,EAAE,MAAO,CAC9EY,MAAS,GAAGC,OAAOtC,eAAgB,4BAA4B,CACjE,EAAG,CAACyB,EAAE,MAAO,CACXY,MAAS,GAAGC,OAAOtC,eAAgB,kCAAkC,EACrE0C,GAAM,CACJC,MAAS3B,KAAKF,SAChB,CACF,EAAG,EAAE,OAAC8B,EAAKX,MAAAA,EAAmD,KAAA,EAASA,EAAaH,IAAkD,KAAA,EAASc,EAAGR,KAAKH,EAAcD,CAAuB,KAAOF,MAAAA,EAAiE,KAAA,EAASA,EAAoBE,CAAuB,GAAI,CAACC,EAAaH,IAAwB,CAACA,GAAuBd,KAAKQ,cAAcC,CAAC,EAAE,EAAE,EAAE,GArB3YT,MAAAA,KAAmC,KAAA,EAASA,KAAKwB,OAAOC,OAsBnE,CACF"}