{"version":3,"file":"index.js","sources":["Extension/EditableCell/View/index.js"],"sourcesContent":["import \"core-js/modules/es.number.constructor.js\";\nimport { Icon } from 'ant-design-vue';\nimport classNames from 'classnames';\nimport { selectorPrefix } from '../../../SearchTable';\n/**\n * EditableCellView\n * @description 可编辑单元格的查看状态\n */\nexport default {\n  props: {\n    rowIndex: {\n      type: Number\n    },\n    record: {\n      type: Object\n    },\n    column: {\n      type: Object\n    },\n    columns: {\n      type: Array\n    },\n    editableConfig: {\n      type: Object\n    }\n  },\n  inject: ['getContext'],\n  emits: ['triggerChange'],\n  methods: {\n    /**\n     * onTrigger\n     */\n    onTrigger: function onTrigger() {\n      var _this = this;\n      var _a;\n      if (this.editableConfig.onBeforeToEdit) {\n        (_a = this.editableConfig.onBeforeToEdit({\n          value: this.record[this.editableConfig.dataIndex],\n          record: this.record,\n          dataIndex: this.editableConfig.dataIndex,\n          rowIndex: this.rowIndex\n        })) === null || _a === void 0 ? void 0 : _a.then(function () {\n          return _this.$emit('triggerChange');\n        });\n        return;\n      }\n      this.$emit('triggerChange');\n    },\n    /**\n     * renderTrigger\n     * @description 渲染句柄\n     */\n    renderTrigger: function renderTrigger() {\n      return h(Icon, {\n        \"attrs\": {\n          \"type\": \"edit\"\n        }\n      });\n    }\n  },\n  render: function render(h) {\n    var _a, _b, _c;\n    var _d = this,\n      _e = _d.editableConfig,\n      renderToEditTrigger = _e.renderToEditTrigger,\n      useTrigger = _e.useTrigger,\n      dataIndex = _e.dataIndex,\n      record = _d.record,\n      rowIndex = _d.rowIndex,\n      column = _d.column;\n    // 不使用句柄则返回原始组件\n    if (!useTrigger) {\n      return this === null || this === void 0 ? void 0 : this.$slots.default;\n    }\n    var renderToEditTriggerArgv = {\n      value: record === null || record === void 0 ? void 0 : record[dataIndex],\n      record: record,\n      dataIndex: dataIndex,\n      rowIndex: rowIndex\n    };\n    var context = (_b = (_a = this.getContext) === null || _a === void 0 ? void 0 : _a.call(this)) === null || _b === void 0 ? void 0 : _b.context;\n    var $scopedSlots = context === null || context === void 0 ? void 0 : context.$scopedSlots;\n    return h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-editablecell-view\")\n    }, [h(\"div\", {\n      \"class\": classNames(\"\".concat(selectorPrefix, \"-editablecell-view-inner\"), 'ellipsis' in column && column.ellipsis ? \"\".concat(selectorPrefix, \"-editablecell-view-inner-ellipsis\") : '')\n    }, [this === null || this === void 0 ? void 0 : this.$slots.default]), h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-editablecell-view-trigger\")\n    }, [h(\"div\", {\n      \"class\": \"\".concat(selectorPrefix, \"-editablecell-view-trigger-inner\"),\n      \"on\": {\n        \"click\": this.onTrigger\n      }\n    }, [((_c = $scopedSlots === null || $scopedSlots === void 0 ? void 0 : $scopedSlots[renderToEditTrigger]) === null || _c === void 0 ? void 0 : _c.call($scopedSlots, renderToEditTriggerArgv)) || (renderToEditTrigger === null || renderToEditTrigger === void 0 ? void 0 : renderToEditTrigger(renderToEditTriggerArgv)), !$scopedSlots[renderToEditTrigger] && !renderToEditTrigger && this.renderTrigger()])])]);\n  }\n};"],"names":["Icon","classNames","selectorPrefix","props","rowIndex","type","Number","record","Object","column","columns","Array","editableConfig","inject","emits","methods","onTrigger","_a","_this","this","onBeforeToEdit","value","dataIndex","then","$emit","renderTrigger","h","attrs","render","_d","_e","renderToEditTrigger","useTrigger","renderToEditTriggerArgv","$scopedSlots","context","_b","getContext","call","class","concat","ellipsis","$slots","default","on","click","_c"],"mappings":"MAAO,kDACEA,IAA4B,KAAhB,wBACdC,eAAgB,oBACdC,cAA4C,KAAtB,qCAKhB,CACbC,MAAO,CACLC,SAAU,CACRC,KAAMC,MACR,EACAC,OAAQ,CACNF,KAAMG,MACR,EACAC,OAAQ,CACNJ,KAAMG,MACR,EACAE,QAAS,CACPL,KAAMM,KACR,EACAC,eAAgB,CACdP,KAAMG,MACR,CACF,EACAK,OAAQ,CAAC,cACTC,MAAO,CAAC,iBACRC,QAAS,CAIPC,UAAW,WACT,IACIC,EADAC,EAAQC,KAERA,KAAKP,eAAeQ,eACtB,OAACH,EAAKE,KAAKP,eAAeQ,eAAe,CACvCC,MAAOF,KAAKZ,OAAOY,KAAKP,eAAeU,WACvCf,OAAQY,KAAKZ,OACbe,UAAWH,KAAKP,eAAeU,UAC/BlB,SAAUe,KAAKf,QACjB,CAAC,IAAwCa,EAAGM,KAAK,WAC/C,OAAOL,EAAMM,MAAM,eAAe,CACpC,CAAC,EAGHL,KAAKK,MAAM,eAAe,CAC5B,EAKAC,cAAe,WACb,OAAOC,EAAE1B,KAAM,CACb2B,MAAS,CACPtB,KAAQ,MACV,CACF,CAAC,CACH,CACF,EACAuB,OAAQ,SAAgBF,GACtB,IACIG,EAAKV,KACPW,EAAKD,EAAGjB,eACRmB,EAAsBD,EAAGC,oBACzBC,EAAaF,EAAGE,WAChBV,EAAYQ,EAAGR,UACff,EAASsB,EAAGtB,OACZH,EAAWyB,EAAGzB,SACdK,EAASoB,EAAGpB,OAEd,OAAKuB,GAGDC,EAA0B,CAC5BZ,MAAOd,MAAAA,EAAuC,KAAA,EAASA,EAAOe,GAC9Df,OAAQA,EACRe,UAAWA,EACXlB,SAAUA,CACZ,EAEI8B,EAAeC,OADfA,EAAU,OAACC,EAAK,OAACnB,EAAKE,KAAKkB,YAAwC,KAAA,EAASpB,EAAGqB,KAAKnB,IAAI,GAA+B,KAAA,EAASiB,EAAGD,SAC3E,KAAA,EAASA,EAAQD,aACtER,EAAE,MAAO,CACda,MAAS,GAAGC,OAAOtC,eAAgB,oBAAoB,CACzD,EAAG,CAACwB,EAAE,MAAO,CACXa,MAAStC,WAAW,GAAGuC,OAAOtC,eAAgB,0BAA0B,EAAG,aAAcO,GAAUA,EAAOgC,SAAW,GAAGD,OAAOtC,eAAgB,mCAAmC,EAAI,EAAE,CAC1L,EAAG,CAACiB,MAAAA,KAAmC,KAAA,EAASA,KAAKuB,OAAOC,QAAQ,EAAGjB,EAAE,MAAO,CAC9Ea,MAAS,GAAGC,OAAOtC,eAAgB,4BAA4B,CACjE,EAAG,CAACwB,EAAE,MAAO,CACXa,MAAS,GAAGC,OAAOtC,eAAgB,kCAAkC,EACrE0C,GAAM,CACJC,MAAS1B,KAAKH,SAChB,CACF,EAAG,EAAE,OAAC8B,EAAKZ,MAAAA,EAAmD,KAAA,EAASA,EAAaH,IAAkD,KAAA,EAASe,EAAGR,KAAKJ,EAAcD,CAAuB,KAAOF,MAAAA,EAAiE,KAAA,EAASA,EAAoBE,CAAuB,GAAI,CAACC,EAAaH,IAAwB,CAACA,GAAuBZ,KAAKM,cAAc,EAAE,EAAE,EAAE,GArB1YN,MAAAA,KAAmC,KAAA,EAASA,KAAKuB,OAAOC,OAsBnE,CACF"}