import{createVNode as _createVNode,mergeProps as _mergeProps}from"vue";import{__assign}from"tslib";import{computed,h,inject,onBeforeUnmount,ref,toRaw,watch}from"vue";import EditableTableCellEdit from"./Edit/EditableTableCellEdit";import EditableCellView from"./View";var useEditableTableCell=function(l,e){var t=inject("getContext"),a=null==(t=null==t?void 0:t())?void 0:t.context,i={defaultConfig:{editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==(t=l.column)?void 0:t.dataIndex,useKeepEdit:!1}},n=ref((null==(t=null==(t=l.column)?void 0:t.$editable)?void 0:t.defaultStatus)||"view"),u=computed(function(){var e;return __assign(__assign({},i.defaultConfig),(null==(e=l.column)?void 0:e.$editable)||{})}),o=watch(function(){var e;return null==(e=null==a?void 0:a.getData)?void 0:e.call(a)},function(){n.value=u.value.defaultStatus}),r=watch(function(){var e;return null==(e=null==(e=l.column)?void 0:e.$editable)?void 0:e.defaultStatus},function(){n.value=u.value.defaultStatus});return onBeforeUnmount(function(){o(),r()}),function(e){var t=e;return u.value.editable?u.value.useKeepEdit?t=h(e,{},[_createVNode(EditableTableCellEdit,_mergeProps(toRaw(l),{editableConfig:u.value,onTriggerChange:function(){return n.value="view"}}),{default:function(){return[e.children]}})]):"view"===n.value?t=h(e,{},[_createVNode(EditableCellView,_mergeProps(toRaw(l),{editableConfig:u.value,onTriggerChange:function(){n.value="edit"}}),{default:function(){return[e.children]}})]):"edit"===n.value&&(t=h(e,{},[_createVNode(EditableTableCellEdit,_mergeProps(toRaw(l),{editableConfig:u.value,onTriggerChange:function(){n.value="view"}}),{default:function(){return[e.children]}})])):t=e,t}};export{useEditableTableCell};
//# sourceMappingURL=EditableTableCell.js.map
