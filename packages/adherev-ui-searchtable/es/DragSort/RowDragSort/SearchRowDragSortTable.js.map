{"version":3,"file":"SearchRowDragSortTable.js","sources":["DragSort/RowDragSort/SearchRowDragSortTable.js"],"sourcesContent":["import \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/esnext.set.add-all.js\";\nimport \"core-js/modules/esnext.set.delete-all.js\";\nimport \"core-js/modules/esnext.set.difference.js\";\nimport \"core-js/modules/esnext.set.every.js\";\nimport \"core-js/modules/esnext.set.filter.js\";\nimport \"core-js/modules/esnext.set.find.js\";\nimport \"core-js/modules/esnext.set.intersection.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.js\";\nimport \"core-js/modules/esnext.set.join.js\";\nimport \"core-js/modules/esnext.set.map.js\";\nimport \"core-js/modules/esnext.set.reduce.js\";\nimport \"core-js/modules/esnext.set.some.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.js\";\nimport \"core-js/modules/esnext.set.union.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { __assign, __spreadArray } from \"tslib\";\nimport { arrayMoveImmutable } from 'array-move';\nimport Util from '@baifendian/adherev-util';\nimport SearchTableImplement from '../../SearchTableImplement';\nvar extend = Util._util.extend;\n/**\n * SearchRowDragSortTable\n * @description 可以进行行拖拽排序的表格\n * @param serviceName\n */\nvar SearchRowDragSortTable = function SearchRowDragSortTable(serviceName) {\n  return extend({\n    className: 'SearchRowDragSortTable',\n    mixins: [SearchTableImplement(serviceName)],\n    data: function data() {\n      var _this = this;\n      return {\n        $bodyConfigReducers: [function () {\n          var params = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n          }\n          return _this.bodyDragSortReducer.apply(_this, params);\n        }],\n        $rowConfigReducers: [function () {\n          var params = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n          }\n          return _this.rowDragSortReducer.apply(_this, params);\n        }],\n        $cellConfigReducers: [function () {\n          var params = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n          }\n          return _this.cellDragSortReducer.apply(_this, params);\n        }]\n      };\n    },\n    methods: {\n      /**\n       * onTableBodyComponentReducers\n       * @param columns\n       */\n      onTableBodyComponentReducers: function onTableBodyComponentReducers(columns) {\n        return Array.from(new Set(__spreadArray(__spreadArray([], this.$data.$tableBodyComponentReducers, true), ['useDragSortRowBody'], false)));\n      },\n      /**\n       * onTableRowComponentReducers\n       * @param columns\n       */\n      onTableRowComponentReducers: function onTableRowComponentReducers(columns) {\n        return Array.from(new Set(__spreadArray(__spreadArray([], this.$data.$tableRowComponentReducers, true), ['useRowDragSortRow'], false)));\n      },\n      /**\n       * onTableCellComponentReducers\n       * @param columns\n       */\n      onTableCellComponentReducers: function onTableCellComponentReducers(columns) {\n        return Array.from(new Set(__spreadArray(__spreadArray([], this.$data.$tableCellComponentReducers, true), ['useRowDragSortCell'], false)));\n      },\n      /**\n       * bodyDragSortReducer\n       * @param params\n       */\n      bodyDragSortReducer: function bodyDragSortReducer(params) {\n        return {\n          $bodyDragSort: this.onDragSortBody()\n        };\n      },\n      /**\n       * rowDragSortReducer\n       * @param params\n       */\n      rowDragSortReducer: function rowDragSortReducer(params) {\n        var rowConfig = params.rowConfig,\n          rowIndex = params.rowIndex,\n          columns = params.columns,\n          record = params.record;\n        rowConfig.$rowDragSort = this.onDragSortRow({\n          rowIndex: rowIndex,\n          record: __assign({}, record),\n          columns: columns\n        });\n        return rowConfig;\n      },\n      /**\n       * cellDragSortReducer\n       * @param params\n       */\n      cellDragSortReducer: function cellDragSortReducer(params) {\n        var rowIndex = params.rowIndex,\n          column = params.column,\n          record = params.record,\n          columns = params.columns;\n        column.$rowDragSort = this.onDragSortCell({\n          rowIndex: rowIndex,\n          record: __assign({}, record),\n          columns: columns\n        });\n        return column;\n      },\n      /**\n       * onDragSortBody\n       * @description\n       */\n      onDragSortBody: function onDragSortBody() {\n        return {\n          canDrag: function canDrag() {\n            return true;\n          }\n        };\n      },\n      /**\n       * onDragSortRow\n       * @param params\n       */\n      onDragSortRow: function onDragSortRow(params) {\n        return {\n          canDrag: function canDrag() {\n            return true;\n          }\n        };\n      },\n      /**\n       * onDragSortCell\n       * @param params\n       */\n      onDragSortCell: function onDragSortCell(params) {\n        return {};\n      },\n      /**\n       * moveRow\n       * @description 换行\n       * @param fromIndex\n       * @param toIndex\n       */\n      moveRow: function moveRow(fromIndex, toIndex) {\n        var _this = this;\n        return new Promise(function (resolve) {\n          _this.receiveDataMutation(arrayMoveImmutable(_this.getData(), fromIndex, toIndex));\n          _this.$nextTick(function () {\n            resolve();\n          });\n        });\n      }\n    }\n  });\n};\nexport default SearchRowDragSortTable;"],"names":["__assign","__spreadArray","arrayMoveImmutable","Util","SearchTableImplement","extend","_util","SearchRowDragSortTable","serviceName","className","mixins","data","_this","this","$bodyConfigReducers","params","_i","arguments","length","bodyDragSortReducer","apply","$rowConfigReducers","rowDragSortReducer","$cellConfigReducers","cellDragSortReducer","methods","onTableBodyComponentReducers","columns","Array","from","Set","$data","$tableBodyComponentReducers","onTableRowComponentReducers","$tableRowComponentReducers","onTableCellComponentReducers","$tableCellComponentReducers","$bodyDragSort","onDragSortBody","rowConfig","rowIndex","record","$rowDragSort","onDragSortRow","column","onDragSortCell","canDrag","moveRow","fromIndex","toIndex","Promise","resolve","receiveDataMutation","getData","$nextTick"],"mappings":"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"}