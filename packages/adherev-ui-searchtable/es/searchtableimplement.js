import"core-js/modules/es.object.assign.js";import"core-js/modules/es.array.concat.js";import"core-js/modules/es.string.trim.js";import"core-js/modules/es.array.map.js";import"core-js/modules/es.array.filter.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.array.find.js";import"core-js/modules/es.promise.js";import"core-js/modules/es.object.keys.js";import"core-js/modules/web.dom-collections.for-each.js";import{__assign,__spreadArray}from"tslib";import Util from"@baifendian/adherev-util";import{cleanMixin,mapActions,mapMutations,mapState}from"@ctsj/vuexgenerator";import SearchTable,{NUMBER_GENERATOR_RULE_CONTINUITY,ROW_SELECTION_CONTINUOUS_MODE,ROW_SELECTION_NORMAL_MODE}from"./SearchTable";var selectorPrefix="adherev-ui-searchtableimplement",extend=Util._util.extend;export default function(t){return extend({className:"SearchTableImpl",mixins:t?[SearchTable,cleanMixin([t])]:[SearchTable],data:function(){var e;return __assign(__assign({},this.getParams()),((e={})[this.getOrderFieldProp()]=this.getOrderFieldValue(),e[this.getOrderProp()]=this.getOrderPropValue()||"descend",e.searchParams=__assign({},this.getParams()),e.selectedRowKeys=[],e.selectedRows=[],e))},computed:t?__assign({},mapState([t])):{},methods:Object.assign({getFetchListPropName:function(){return""},getFetchListPropNameToFirstUpper:function(){var e=this.getFetchListPropName();return 1<e.length?"".concat(e.charAt(0).toUpperCase()).concat(e.substring(1)):e},onSelectChange:function(e,t){this[e]=t},onInputChange:function(e,t){this[e]=t.target.value.trim()},onDateTimeRangeChange:function(e,t){this[e[0]]=t&&t.length?t[0]:null,this[e[1]]=t&&t.length?t[1]:null},getParams:function(){return{}},getServiceName:function(){return t},getFetchDataParams:function(){return{}},isShowNumber:function(){return!0},getNumberGeneratorRule:function(){return NUMBER_GENERATOR_RULE_CONTINUITY},getRowSelectionMode:function(){return ROW_SELECTION_NORMAL_MODE},getTableNumberColumnWidth:function(){return 80},getTableNumberColumnProps:function(){return{}},getRowKey:function(){return"id"},getDataKey:function(){return"list"},getTotalKey:function(){return"totalCount"},getData:function(){return this["".concat(t).concat(this.getFetchListPropNameToFirstUpper())][this.getDataKey()]},getTotal:function(){return this["".concat(t).concat(this.getFetchListPropNameToFirstUpper())][this.getTotalKey()]},getRowSelection:function(){var n=this,t=this;function o(e,r){var n=t.getRowKey();e?(t.selectedRowKeys=__spreadArray(__spreadArray([],t.selectedRowKeys||[],!0),r.map(function(e){return e[n]}),!0),t.selectedRows=__spreadArray(__spreadArray([],t.selectedRows||[],!0),r,!0)):(t.selectedRows=(t.selectedRows||[]).filter(function(t){return!r.find(function(e){return e[n]===t[n]})}),t.selectedRowKeys=(t.selectedRowKeys||[]).filter(function(t){return!r.find(function(e){return e[n]===t})}))}return{selectedRowKeys:this.selectedRowKeys,onChange:function(e,t){n.getRowSelectionMode()!==ROW_SELECTION_CONTINUOUS_MODE&&(n.selectedRowKeys=e,n.selectedRows=t)},onSelect:function(e,t){n.getRowSelectionMode()!==ROW_SELECTION_NORMAL_MODE&&o(t,[e])},onSelectAll:function(e,t,r){n.getRowSelectionMode()!==ROW_SELECTION_NORMAL_MODE&&o(e,r)}}},renderSearchForm:function(e){return null},renderInner:function(e){var t=this.$renderInnerSearchTable(e);return e("div",{ref:"innerWrapRef",class:"".concat(selectorPrefix,"-tablewrapper")},[t])},renderSearchFooterItems:function(){return[]},getOrderFieldProp:function(){return"orderField"},getOrderFieldValue:function(){return""},getOrderProp:function(){return"order"},getOrderPropValue:function(){return"descend"},clear:function(){var r=this;return new Promise(function(e){var t;Object.assign(r,__assign(__assign({},r.getParams()),((t={})[r.getOrderFieldProp()]=r.getOrderFieldValue(),t[r.getOrderProp()]=r.getOrderPropValue()||"descend",t.searchParams=__assign({},r.getParams()),t.selectedRowKeys=[],t.selectedRows=[],t))),r.$nextTick(function(){e()})})},showLoading:function(){return this.loading["".concat(t,"/").concat(this.getFetchListPropName())]},getSearchParams:function(){var e=this.page,t=this.limit,r=this.searchParams,n=this[this.getOrderProp()];return __assign({},__assign(__assign(__assign({page:e,limit:t},r),((e={})[this.getOrderProp()]="descend"===n?"desc":"asc",e[this.getOrderFieldProp()]=this[this.getOrderFieldProp()],e)),this.getFetchDataParams()))},fetchData:function(){return this.fetchDataExecute(this.getSearchParams())},fetchDataExecute:function(e){return this["".concat(t).concat(this.getFetchListPropNameToFirstUpper(),"Action")](e)},onSearch:function(){var r=this,e=Object.keys(this.getParams()),n={};return e.forEach(function(e){n[e]=r[e]}),new Promise(function(e){var t;r.searchParams=__assign(__assign({},n),((t={})[r.getOrderFieldProp()]=r[r.getOrderFieldProp()],t[r.getOrderProp()]=r[r.getOrderProp()],t)),r.$nextTick(function(){r.fetchData().then(function(){e()})})})},getColumns:function(){return[]},onSubTableChange:function(){},renderSearchFormAfter:function(e){return null},renderSearchFormBefore:function(e){return null},renderTableFooter:function(e){return null},renderTableHeader:function(e){return null}},t?__assign(__assign({},mapActions([t])),mapMutations([t])):{})})}
//# sourceMappingURL=SearchTableImplement.js.map
