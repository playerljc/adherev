"use strict";require("core-js/modules/es.symbol.js"),require("core-js/modules/es.object.get-own-property-descriptor.js"),require("core-js/modules/es.object.get-own-property-descriptors.js"),require("core-js/modules/es.object.define-properties.js");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_babelHelperVueJsxMergeProps=_interopRequireDefault(require("@vue/babel-helper-vue-jsx-merge-props"));function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.search.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.reduce.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.string.trim.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.string.starts-with.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/es.promise.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),ant_design_vue_1=require("ant-design-vue"),lodash_merge_1=tslib_1.__importDefault(require("lodash.merge")),moment_1=tslib_1.__importDefault(require("moment/moment")),omit_js_1=tslib_1.__importDefault(require("omit.js")),qs_1=tslib_1.__importDefault(require("qs")),adherev_ui_antdvformitem_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-antdvformitem")),adherev_ui_conditionalrender_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-conditionalrender")),adherev_ui_tablegridlayout_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-tablegridlayout")),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),adherev_util_intl_1=tslib_1.__importDefault(require("@baifendian/adherev-util-intl")),adherev_util_resource_1=tslib_1.__importDefault(require("@baifendian/adherev-util-resource")),adherev_util_validator_1=tslib_1.__importDefault(require("@baifendian/adherev-util-validator")),AdvancedSearchPanel_1=tslib_1.__importDefault(require("./Extension/AdvancedSearchPanel")),SearchTable_1=require("./SearchTable"),extend=adherev_util_1.default._util.extend,FormItemGeneratorToDict=adherev_ui_antdvformitem_1.default.FormItemGeneratorToDict,_a=adherev_ui_antdvformitem_1.default.AntFormItemNormalize,DatePicker=_a.DatePicker,InputNumberDecimal1=_a.InputNumberDecimal1,InputNumberDecimal2=_a.InputNumberDecimal2,InputNumberInteger=_a.InputNumberInteger,RangePicker=_a.RangePicker,TimePicker=_a.TimePicker,_renderGridSearchFormGroup=adherev_ui_tablegridlayout_1.default.renderGridSearchFormGroup,Label=adherev_ui_tablegridlayout_1.default.Label,Value=adherev_ui_tablegridlayout_1.default.Value,_selectorPrefix="".concat(SearchTable_1.selectorPrefix,"-protable");exports.default=function(e,o){var t=e.className,e=e.superClass;return extend({className:t,mixins:[e],props:{openSearchParamsMemory:{type:Boolean,default:!0}},data:function(){var e=this;return{$pathname:"undefined"!=typeof window?this.getPathName():"",$hasAdvancedSearchPanel:!1,$advancedSearchConfig:{rowCount:"auto",showStrategy:"remaining",insertSearchButton:null,advancedSearch:{className:"",style:{},width:"60%",mask:!0,zIndex:1e3,time:300,direction:"right",collapse:!0,onBeforeShow:function(){},onBeforeClose:function(){},onAfterShow:function(){},onAfterClose:function(){e.advancedSearchPanelCollapse=!1},getPopupContainer:function(){return document.body}}},advancedSearchPanelCollapse:!1,search:{},searchParams:{},page:1,limit:10}},created:function(){var e={search:{},page:1,limit:this.getLimit()||10};for(t in(e="openSearchParamsMemory"in this&&!("openSearchParamsMemory"in this&&this.openSearchParamsMemory)?e:this.initSearchAndPaginParams()).search)this[t]=e.search[t];this.page=e.page,this.limit=e.limit,this.searchParams=tslib_1.__assign(tslib_1.__assign({},this.searchParams),e.search);var t,r=this.getDateState((0,omit_js_1.default)(this.$data,["searchParams"]));for(t in r)this[t]=r[t];this.searchParams=tslib_1.__assign(tslib_1.__assign({},this.searchParams),this.getDateState(this.searchParams)),this.$data.$hasAdvancedSearchPanel=!1},beforeDestroy:function(){"openSearchParamsMemory"in this&&!("openSearchParamsMemory"in this&&this.openSearchParamsMemory)||this.unMountSearchAndPaginParamsDeal()},methods:{onSearchPanelCollapseBefore:function(){this.$data.$hasAdvancedSearchPanel&&this.expand&&(this.advancedSearchPanelCollapse=!1)},unMountSearchAndPaginParamsDeal:function(){var e,t=this.searchParams||{},r=this.$data.$pathname,n=this.getComponentId();o.isEmpty()?o.add(r,((e={})[n]={search:t,page:this.page,limit:this.limit},e)):(e=o.findByPath(r))?(e.components[n].search=t,e.components[n].page=this.page,e.components[n].limit=this.limit):o.add(r,((e={})[n]={search:t,page:this.page,limit:this.limit},e))},initSearchAndPaginParams:function(t){var e,r,n=qs_1.default.parse(this.getSearch(),{ignoreQueryPrefix:!0}),a={};return Object.keys(n).forEach(function(e){a[e]=t?t(e,n[e]):n[e]}),!o.isEmpty()&&(e=o.findByPath(this.$data.$pathname),r=this.getComponentId(),e)&&e.components[r]?tslib_1.__assign(tslib_1.__assign({},a),e.components[r]):{search:tslib_1.__assign({},a),page:1,limit:this.getLimit()}},hasAdvancedSearch:function(){return!0},hasNumberColumnFixed:function(){return!0},hasOptionColumnFixed:function(){return!0},getPathName:function(){return window.location.pathname},getSearch:function(){return window.location.search},getFilterDropdownSlot:function(){return"filterDropdown"},getFilterIconSlot:function(){return"filterIcon"},getParams:function(){var o=this,t={};return function a(e){e.reduce(function(e,t){var r=t.$search,n=t.children,r=r||{},t=r.dataIndex||t.dataIndex;return[o.getOptionsColumnDataIndex(),o.getLinkColumnDataIndex(),"_number"].includes(t)||("rangePicker"===r.type?(r.startName&&(e[r.startName]=null),r.endName&&(e[r.endName]=null)):["datePicker","timePicker"].includes(r.type)?e[t]=null:e[t]=void 0,n&&Array.isArray(n)&&a(n)),e},t)}(this.getTableColumns()),t},getDateState:function(t){var e=Object.keys(t).filter(function(e){return null===t[e]||"null"===t[e]||adherev_util_validator_1.default.isDate(t[e],{format:"YYYY-MM-DD"})}),r={};return e.forEach(function(e){r[e]=null===t[e]||"null"===t[e]?null:(0,moment_1.default)(t[e])}),r},getDataKey:function(){return"records"},getTotalKey:function(){return"total"},getLimit:function(){return 10},getFetchDataParams:function(){var r=this,n={};return Object.keys(this.searchParams).filter(function(t){return["start","Start"].some(function(e){return-1!==t.indexOf(e)})||["end","End"].some(function(e){return-1!==t.indexOf(e)})}).forEach(function(t){n[t]=r.searchParams[t]?"".concat(r.searchParams[t].format(adherev_util_resource_1.default.Dict.value.ResourceMomentFormat10.value())," ").concat(["start","Start"].some(function(e){return-1!==t.indexOf(e)})?"00:00:00":["end","End"].some(function(e){return-1!==t.indexOf(e)})?"23:59:59":"").trim():null}),Object.keys(this.searchParams).filter(function(e){return!(e in n)&&r.searchParams[e]instanceof moment_1.default}).forEach(function(e){n[e]=r.searchParams[e]?r.searchParams[e].format(adherev_util_resource_1.default.Dict.value.ResourceMomentFormat10.value()).trim():null}),n},getColumns:function(e){return(e||this.$getColumnsSearchTableImpl()).map(function(e){return tslib_1.__assign({},e)})},getTableColumns:function(e){var o=this,e=this.$getTableColumnsSearchTable(e),t=(!this.hasOptionColumnFixed()||!(t=e.find(function(e){return e.dataIndex===(o.getOptionsColumnDataIndex()||"_options")}))||"fixed"in t||t.fixed||(t.fixed="right"),!this.hasNumberColumnFixed()||!(t=e.find(function(e){return"_number"===e.dataIndex}))||"fixed"in t||t.fixed||(t.fixed="left"),e.find(function(e){return e.dataIndex===(o.getLinkColumnDataIndex()||"_linkColumn")}));return t&&("ellipsis"in t||(t.ellipsis=!1),"align"in t||(t.align="left")),e.map(function(e){return tslib_1.__assign(tslib_1.__assign({},e),{align:[o.getLinkColumnDataIndex()||"_linkColumn"].includes(e.dataIndex)&&"align"in e&&e.align?e.align:"center"})}).map(function(e){return function r(n){var e=n.$search,t=tslib_1.__rest(n,["$search"]),e=o.assignSearchConfig(e,t),t=e.showColumnHeader,a=tslib_1.__assign({},n),e=e.dataIndex||n.dataIndex;return!["_number",o.getOptionsColumnDataIndex()].includes(e)&&t&&(a=tslib_1.__assign(tslib_1.__assign({},a),{scopedSlots:{filterDropdown:o.getFilterDropdownSlot(),filterIcon:o.getFilterIconSlot()}})),n.children&&Array.isArray(n.children)&&n.children.forEach(function(e,t){n.children[t]=r(e)}),a}(e)})},getOptionsColumnDataIndex:function(){return"_options"},getLinkColumnDataIndex:function(){return"_linkColumn"},getPagination:function(){var n=this;return tslib_1.__assign(tslib_1.__assign({},this.$getPaginationSearchTable()),{showTotal:function(e){var t=(n.page-1)*n.limit+1,r=n.page*n.limit;return adherev_util_intl_1.default.tv("当前 {page}-{pageSize}/共 {total}条",{page:t,pageSize:r<e?r:e,total:e})}})},getGridSearchFormGroupParams:function(){return[[{name:"g1",columnCount:3,colgroup:[,"auto",,"auto",,"auto"],data:this.getGridSearchFormGroupDataByColumnConfig()}],{},{rowCount:1}]},getGridSearchFormGroupDataByColumnConfig:function(){var c=this,u=[];return function s(e){e.filter(function(e){return"$search"in e&&!!e.$search.visible}).forEach(function(e){var t=e.$search,r=tslib_1.__rest(e,["$search"]),n=c.assignSearchConfig(t,r),a=(null==n?void 0:n.type)||"input",o=n.dataIndex||e.dataIndex,i=t.title||e.title;u.push({key:o,label:h(Label,(0,_babelHelperVueJsxMergeProps.default)([{},t.labelAttrs||{}]),[i,"："]),value:adherev_ui_conditionalrender_1.default.conditionalRender({conditional:!c.hasAuthority||(null==(i=c.hasAuthority)?void 0:i.call(c,n.authority)),match:h(Value,(0,_babelHelperVueJsxMergeProps.default)([{},t.valueAttrs||{}]),[c.renderGridSearchFormGroupDataItem(a,{searchConfig:n,column:r,dataIndex:o})]),noMatch:t.renderNoAuthority?h(Value,(0,_babelHelperVueJsxMergeProps.default)([{},t.valueAttrs||{}]),[(null==(a=null==(i=c.$scopedSlots)?void 0:i[null==t?void 0:t.renderNoAuthority])?void 0:a.call(i))||(null==(n=null==t?void 0:t.renderNoAuthority)?void 0:n.call(t))]):null})}),e.children&&Array.isArray(e.children)&&s(e.children)})}(this.getColumns(this.$getColumnsSearchTableImpl())),u.filter(function(e){return!!e.value})},getScopedSlots:function(o){var i=this,e={};return e[this.getFilterDropdownSlot()]=function(e){var t=e.confirm,e=e.column,r=e.$search,n=e.dataIndex,a=r.type;return o("div",{class:"".concat(_selectorPrefix,"-headersearchwrap")},[o("div",{class:"".concat(_selectorPrefix,"-headersearchwrap-main")},[i.renderGridSearchFormGroupDataItem(a,{searchConfig:r,column:e,dataIndex:n})]),o("div",{class:"".concat(_selectorPrefix,"-headersearchwrap-footer")},[o(ant_design_vue_1.Button,{attrs:{size:"small"},on:{click:function(){"rangePicker"===a?(r.startName&&(i[r.startName]=null),r.endName&&(i[r.endName]=null)):i[n]=void 0,i.$nextTick(function(){return i.onSearch().then(function(){return t()})})}}},[adherev_util_intl_1.default.tv("重置")]),o(ant_design_vue_1.Button,{attrs:{size:"small",type:"primary"},on:{click:function(){return i.onSearch().then(function(){return t()})}}},[adherev_util_intl_1.default.tv("确定")])])])},e[this.getFilterIconSlot()]=function(){return o(ant_design_vue_1.Icon,{attrs:{type:"search"}})},e},assignSearchConfig:function(e,t){t={type:"input",visible:!0,showColumnHeader:!0,props:{},labelAttrs:{},valueAttrs:{},authority:[],renderNoAuthority:function(){return null},dataIndex:t.dataIndex,title:t.title,dictName:"",renderChildren:function(){return null},render:function(){return null},startName:"",endName:""};return tslib_1.__assign(tslib_1.__assign({},t),e||{})},renderSearchForm:function(e){return this.renderGridSearchFormGroup.apply(this,tslib_1.__spreadArray([e],this.getGridSearchFormGroupParams(),!1))},renderSearchFooterItems:function(e,t){var r,n,a=this,t=tslib_1.__spreadArray([],t||[],!0);return this.$data.$hasAdvancedSearchPanel&&this.expand&&(r=e(ant_design_vue_1.Button,{slot:"default",attrs:{icon:"filter",type:"primary"},on:{click:function(){a.advancedSearchPanelCollapse=!0}}},[adherev_util_intl_1.default.v("高级搜索")]),this.$data.$advancedSearchConfig.insertSearchButton?this.$data.$advancedSearchConfig.insertSearchButton(t,r):-1!==(n=t.findIndex(function(e){return"tag"in e&&e.tag&&e.tag.startsWith("vue-component-")&&"key"in e&&"reset"===e.key}))&&t.splice(n+1,0,r)),this.renderSearchFooterItemsImpl(e,t).map(function(e){return"tag"in e&&e.tag&&e.tag.startsWith("vue-component-")?e:e.value})},renderSearchFooterItemsImpl:function(e,t){var r=this.renderTableDensitySetting(this.$createElement),n=this.renderColumnSetting(this.$createElement);return tslib_1.__spreadArray(tslib_1.__spreadArray([],t,!0),[{value:e("div",{class:"".concat(_selectorPrefix,"-headeritem")},[r])},{value:e("div",{class:"".concat(_selectorPrefix,"-headeritem")},[n])}],!1)},renderGridSearchFormGroupDataItem:function(e,t){var o=this,r=t.searchConfig,n=t.column,a=t.dataIndex;return null==(t=new Map([["input",function(e){var t=e.searchConfig,r=e.dataIndex;return h(ant_design_vue_1.Input,{attrs:{value:o[r]},on:{change:function(e){return o.onInputChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["textArea",function(e){var t=e.searchConfig,r=e.dataIndex;return h(ant_design_vue_1.Input.TextArea,{attrs:{value:o[r]},on:{change:function(e){return o.onInputChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["inputNumber",function(e){var t=e.searchConfig,r=e.dataIndex;return h(ant_design_vue_1.InputNumber,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["inputNumberDecimal1",function(e){var t=e.searchConfig,r=e.dataIndex;return h(InputNumberDecimal1,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["inputNumberDecimal2",function(e){var t=e.searchConfig,r=e.dataIndex;return h(InputNumberDecimal2,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["inputNumberInteger",function(e){var t=e.searchConfig,r=e.dataIndex;return h(InputNumberInteger,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["select",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"FormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["multiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"MulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["checkAllMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"CheckAllMulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["autoCompleteSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"FormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["autoCompleteSelectMulti",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"MulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["autoCompleteSelectCheckAllMulti",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"CheckAllMulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["radioHorizontal",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"HorizontalFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["radioButton",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"ButtonFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["radioSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"SelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["radioCustom",function(e){var n=e.searchConfig,t=e.dataIndex,e=FormItemGeneratorToDict["".concat(n.dictName,"CustomFormItem")];return h(e,{attrs:{value:o[t]},on:{change:function(e){return o.onSelectChange(t,e)}},props:_objectSpread({},tslib_1.__assign({},n.props||{}))},[function(e){var t,r;return(null==(r=null==(t=o.$scopedSlots)?void 0:t[null==n?void 0:n.renderChildren])?void 0:r.call(t,e))||(null==(r=null==n?void 0:n.renderChildren)?void 0:r.call(n,e))}])}],["checkBoxHorizontal",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"HorizontalFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["checkBoxCheckAllHorizontal",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"CheckAllHorizontalFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["checkboxSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"SelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["checkBoxCheckAllSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"CheckAllSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["checkBoxCustom",function(e){var n=e.searchConfig,t=e.dataIndex,e=FormItemGeneratorToDict["".concat(n.dictName,"CustomFormItem")];return h(e,{attrs:{value:o[t]},on:{change:function(e){return o.onSelectChange(t,e)}},props:_objectSpread({},tslib_1.__assign({},n.props||{}))},[function(e){var t,r;return(null==(r=null==(t=o.$scopedSlots)?void 0:t[null==n?void 0:n.renderChildren])?void 0:r.call(t,e))||(null==(r=null==n?void 0:n.renderChildren)?void 0:r.call(n,e))}])}],["checkBoxCheckAllCustom",function(e){var n=e.searchConfig,t=e.dataIndex,e=FormItemGeneratorToDict["".concat(n.dictName,"CheckAllCustomFormItem")];return h(e,{attrs:{value:o[t]},on:{change:function(e){return o.onSelectChange(t,e)}},props:_objectSpread({},tslib_1.__assign({},n.props||{}))},[function(e){var t,r;return(null==(r=null==(t=o.$scopedSlots)?void 0:t[null==n?void 0:n.renderChildren])?void 0:r.call(t,e))||(null==(r=null==n?void 0:n.renderChildren)?void 0:r.call(n,e))}])}],["transferSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"SelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["tableSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"SelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["tableMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"MulitSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["tablePagingSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"PaginationSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["tablePagingMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"PaginationMulitSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["listSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"SelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["listMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"MulitSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["listPagingSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"PaginationSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["listPagingMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"PaginationMulitSelectFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["treeSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"FormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["treeMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"MulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["treeSelectLeaf",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"LeafFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["treeMultiSelectLeaf",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"LeafMulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["cascaderSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"FormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["cascaderMultiSelect",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"MulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["cascaderSelectLeaf",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"LeafFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["cascaderMultiSelectLeaf",function(e){var t=e.searchConfig,r=e.dataIndex,e=FormItemGeneratorToDict["".concat(t.dictName,"LeafMulitFormItem")];return h(e,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["datePicker",function(e){var t=e.searchConfig,r=e.dataIndex;return h(DatePicker,{attrs:{value:o[r]},on:{change:function(e){var t;o.setState(((t={})[r]=e||null,t))}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["timePicker",function(e){var t=e.searchConfig,r=e.dataIndex;return h(TimePicker,{attrs:{value:o[r]},on:{change:function(e){var t;o.setState(((t={})[r]=e||null,t))}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["rangePicker",function(e){var e=e.searchConfig,t=e.startName,r=e.endName;return h(RangePicker,{attrs:{value:[o[t],o[r]]},on:{change:function(e){o.onDateTimeRangeChange([t,r],e)}},props:_objectSpread({},tslib_1.__assign({},e.props||{}))})}],["slider",function(e){var t=e.searchConfig,r=e.dataIndex;return h(ant_design_vue_1.Slider,{attrs:{value:o[r]},on:{change:function(e){return o.onSelectChange(r,e)}},props:_objectSpread({},tslib_1.__assign({},t.props||{}))})}],["sliderRange",function(e){e=e.searchConfig;return h(ant_design_vue_1.Slider,{attrs:{range:!0,value:o[a]},on:{change:function(e){return o.onSelectChange(a,e)}},props:_objectSpread({},tslib_1.__assign({},e.props||{}))})}],["rate",function(e){e=e.searchConfig;return h(ant_design_vue_1.Rate,{attrs:{value:o[a]},on:{change:function(e){return o.onSelectChange(a,e)}},props:_objectSpread({},tslib_1.__assign({},e.props||{}))})}],["switch",function(e){e=e.searchConfig;return h(ant_design_vue_1.Switch,{attrs:{value:o[a]},on:{change:function(e){return o.onSelectChange(a,e)}},props:_objectSpread({},tslib_1.__assign({},e.props||{}))})}],["custom",function(e){var t,r,n=e.searchConfig,a=e.column,e=e.dataIndex;return(null==(r=null==(t=o.$scopedSlots)?void 0:t[null==n?void 0:n.render])?void 0:r.call(t,{searchConfig:n,column:a,dataIndex:e}))||(null==(r=null==n?void 0:n.render)?void 0:r.call(n,{searchConfig:n,column:a,dataIndex:e}))}]]).get(e))?void 0:t({searchConfig:r,column:n,dataIndex:a})},renderGridSearchFormGroup:function(e,t,r,n){var a,o=this,r=(0,lodash_merge_1.default)({layout:"horizontal",density:"middle"},r||{}),i=(null!=(i=null==n?void 0:n.advancedSearch)&&i.onAfterClose&&(a=n.advancedSearch.onAfterClose,n.advancedSearch.onAfterClose=function(){a(),o.advancedSearchPanelCollapse=!1}),this.$data.$advancedSearchConfig=(0,lodash_merge_1.default)(this.$data.$advancedSearchConfig,n||{}),_renderGridSearchFormGroup(e,this,t,r));if("auto"!==this.$data.$advancedSearchConfig.rowCount){var n=adherev_ui_tablegridlayout_1.default.getRenderDetail(e,this,t,r),s=n.rowCount,c=n.detail;if(s>this.$data.$advancedSearchConfig.rowCount){for(var u=[],l=[],d=this.$data.$advancedSearchConfig.rowCount,h=0;0!==d;){var m=t[h],p=c[h];p.rowCount<=d?(u.push(tslib_1.__assign({},m)),d-=p.rowCount):(p=p.detail.slice(0,d),u.push(tslib_1.__assign(tslib_1.__assign({},m),{data:m.data.slice(p[0].startIndex,p[p.length-1].endIndex+1)})),l.push(tslib_1.__assign(tslib_1.__assign({},m),{data:m.data.slice(p[p.length-1].endIndex+1)})),d=0),h+=1}for(var _=h;_<t.length;_++)l.push(tslib_1.__assign({},t[_]));return this.$data.$hasAdvancedSearchPanel=!0,this.$data.$advancedSearchConfig.advancedSearch.collapse=this.advancedSearchPanelCollapse,e("div",{class:"".concat(_selectorPrefix,"-gridsearchformgroupwrap")},[_renderGridSearchFormGroup(e,this,u,r),e(AdvancedSearchPanel_1.default,{attrs:{groupData:t,tableGridLayoutConfig:r,remainingGroupData:l,advancedSearchConfig:this.$data.$advancedSearchConfig,searchFn:function(){return new Promise(function(e){o.page=1,o.$nextTick(function(){this.onSearch().then(function(){return e()})})})},resetFn:function(){return o.onClear()},collapseFn:function(e){o.advancedSearchPanelCollapse=e}}})])}}return this.$data.$hasAdvancedSearchPanel=!1,e("div",{class:"".concat(_selectorPrefix,"-gridsearchformgroupwrap")},[i])},renderOptionColumn:function(e){return e.map(function(e){return e.value}).filter(function(e){return!!e})}}})};
//# sourceMappingURL=ProTableFactory.js.map
