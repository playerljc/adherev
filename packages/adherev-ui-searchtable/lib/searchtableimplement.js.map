{"version":3,"file":"searchtableimplement.js","sources":["searchtableimplement.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.string.trim.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar vue_1 = __importDefault(require(\"vue\"));\n\nvar vuexgenerator_1 = require(\"@ctsj/vuexgenerator\");\n\nvar searchtable_1 = __importStar(require(\"./searchtable\"));\n\nvar selectorPrefix = 'adherev-ui-searchtableimplement';\n\nexports.default = function (serviceName) {\n  return vue_1.default.extend({\n    mixins: serviceName ? [searchtable_1.default, vuexgenerator_1.cleanMixin([serviceName])] : [searchtable_1.default],\n    data: function data() {\n      var _a;\n\n      return __assign(__assign({}, this.getParams()), (_a = {}, _a[this.getOrderFieldProp()] = this.getOrderFieldValue(), _a[this.getOrderProp()] = this.getOrderPropValue() || 'descend', // 查询参数\n      _a.searchParams = __assign({}, this.getParams()), _a.selectedRowKeys = [], _a));\n    },\n    computed: serviceName ? __assign({}, vuexgenerator_1.mapState([serviceName])) : {},\n    methods: Object.assign({\n      /**\n       * getFetchListPropName\n       * @override\n       * @description - 获取调用列表接口的函数名\n       */\n      getFetchListPropName: function getFetchListPropName() {\n        return '';\n      },\n\n      /**\n       * getFetchListPropNameToFirstUpper\n       * @override\n       * @description - 获取调用列表接口的函数名首字母大写\n       * @return string\n       */\n      getFetchListPropNameToFirstUpper: function getFetchListPropNameToFirstUpper() {\n        var fetchListPropName = this.getFetchListPropName();\n\n        if (fetchListPropName.length > 1) {\n          return \"\" + fetchListPropName.charAt(0).toUpperCase() + fetchListPropName.substring(1);\n        }\n\n        return fetchListPropName;\n      },\n      // ------------ 不需要重写(override)的方法 start ------------------\n\n      /**\n       * onSelectChange\n       * @description - onSelectChange\n       * @param property\n       * @param v\n       */\n      onSelectChange: function onSelectChange(property, v) {\n        this[property] = v;\n      },\n\n      /**\n       * onInputChange\n       * @description - onInputChange\n       * @param property\n       * @param e\n       */\n      onInputChange: function onInputChange(property, e) {\n        this[property] = e.target.value.trim();\n      },\n\n      /**\n       * onDateTimeRangeChange\n       * @description - onDateTimeRangeChange\n       * @param propertys\n       * @param moments\n       */\n      onDateTimeRangeChange: function onDateTimeRangeChange(propertys, moments) {\n        this[propertys[0]] = moments && moments.length ? moments[0] : null;\n        this[propertys[1]] = moments && moments.length ? moments[1] : null;\n      },\n      // ------------ 不需要重写(override)的方法 end ------------------\n\n      /**\n       * getParams\n       * @override\n       * @description - 获取查询参数对象\n       */\n      getParams: function getParams() {\n        return {};\n      },\n\n      /**\n       * getServiceName\n       * @override\n       * @description - 获取接口服务的model名称\n       */\n      getServiceName: function getServiceName() {\n        return serviceName;\n      },\n\n      /**\n       * getFetchDataParams\n       * @override\n       * @description - 获取调用数据接口的参数\n       */\n      getFetchDataParams: function getFetchDataParams() {\n        return {};\n      },\n\n      /**\n       * isShowNumber\n       * @description - 是否线上序号列\n       * @override\n       * @return {boolean}\n       */\n      isShowNumber: function isShowNumber() {\n        return true;\n      },\n\n      /**\n       * getNumberGeneratorRule\n       * @override\n       * @description - 表格序号列的生成规则\n       */\n      getNumberGeneratorRule: function getNumberGeneratorRule() {\n        return searchtable_1.NUMBER_GENERATOR_RULE_CONTINUITY;\n      },\n\n      /**\n       * getTableNumberColumnWidth\n       * @override\n       * @description - 表格序号列的宽度\n       */\n      getTableNumberColumnWidth: function getTableNumberColumnWidth() {\n        return 80;\n      },\n\n      /**\n       * getRowKey\n       * @override\n       * @description - 数据的主键\n       */\n      getRowKey: function getRowKey() {\n        return 'id';\n      },\n\n      /**\n       * getDataKey\n       * @description - 获取数据的key\n       * @protected\n       */\n      getDataKey: function getDataKey() {\n        return 'list';\n      },\n\n      /**\n       * getTotalKey\n       * @description - 获取total的key\n       * @protected\n       */\n      getTotalKey: function getTotalKey() {\n        return 'totalCount';\n      },\n\n      /**\n       * getData\n       * @description - Table的数据(Table的dataSource字段)\n       * @override\n       * @return {Array}\n       */\n      getData: function getData() {\n        return this[\"\" + serviceName + this.getFetchListPropNameToFirstUpper()][this.getDataKey()];\n      },\n\n      /**\n       * getTotal\n       * @description - Table数据的总条数\n       * @override\n       */\n      getTotal: function getTotal() {\n        return this[\"\" + serviceName + this.getFetchListPropNameToFirstUpper()][this.getTotalKey()];\n      },\n\n      /**\n       * getRowSelection\n       * @override\n       * @description - 获取表格行选择对象\n       */\n      getRowSelection: function getRowSelection() {\n        var _this = this;\n\n        return {\n          selectedRowKeys: this.selectedRowKeys,\n          onChange: function onChange(selectedRowKeys) {\n            _this.selectedRowKeys = selectedRowKeys;\n          }\n        };\n      },\n\n      /**\n       * renderSearchForm\n       * @override\n       * @description - 渲染Table查询的表单\n       */\n      renderSearchForm: function renderSearchForm(h) {\n        return null;\n      },\n      renderSearchTableImplementInner: function renderSearchTableImplementInner(h) {\n        var innerVNode = this.renderSearchTableInner(h);\n        return h(\"div\", {\n          \"ref\": \"innerWrapRef\",\n          \"class\": selectorPrefix + \"-tablewrapper\"\n        }, [innerVNode]);\n      },\n\n      /**\n       * renderInner\n       * @override\n       * @description - 渲染主体\n       */\n      renderInner: function renderInner(h) {\n        return this.renderSearchTableImplementInner(h);\n      },\n\n      /**\n       * renderSearchFooterItems\n       * @description - 渲染表格的工具栏\n       * @override\n       */\n      renderSearchFooterItems: function renderSearchFooterItems() {\n        return [];\n      },\n\n      /**\n       * getOrderFieldProp\n       * @description - 获取排序字段\n       * @override\n       */\n      getOrderFieldProp: function getOrderFieldProp() {\n        return 'orderField';\n      },\n\n      /**\n       * getOrderFieldValue\n       * @description - 获取默认排序字段的值\n       * @override\n       * @protected\n       */\n      getOrderFieldValue: function getOrderFieldValue() {\n        return '';\n      },\n\n      /**\n       * getOrderProp\n       * @description - 获取排序方式\n       */\n      getOrderProp: function getOrderProp() {\n        return 'order';\n      },\n\n      /**\n       * getOrderPropValue\n       * @override\n       * @description - 获取默认排序方式\n       * @protected\n       */\n      getOrderPropValue: function getOrderPropValue() {\n        return 'descend';\n      },\n\n      /**\n       * clear\n       * @description - 清空查询条件\n       * @override\n       */\n      clear: function clear() {\n        var _this = this;\n\n        return new Promise(function (resolve) {\n          var _a;\n\n          Object.assign(_this, __assign(__assign({}, _this.getParams()), (_a = {}, _a[_this.getOrderFieldProp()] = _this.getOrderFieldValue(), _a[_this.getOrderProp()] = _this.getOrderPropValue() || 'descend', // 查询参数\n          _a.searchParams = __assign({}, _this.getParams()), _a.selectedRowKeys = [], _a)));\n\n          _this.$nextTick(function () {\n            resolve();\n          });\n        });\n      },\n\n      /**\n       * showLoading\n       * @description - 是否显示遮罩\n       * @override\n       */\n      showLoading: function showLoading() {\n        return this.loading[serviceName + \"/\" + this.getFetchListPropName()];\n      },\n\n      /**\n       * getSearchParams\n       * @description - 获取查询参数\n       * @protected\n       */\n      getSearchParams: function getSearchParams() {\n        var _a;\n\n        var _b = this,\n            page = _b.page,\n            limit = _b.limit,\n            searchParams = _b.searchParams;\n\n        return __assign({}, __assign(__assign(__assign({\n          page: page,\n          limit: limit\n        }, searchParams), (_a = {}, _a[this.getOrderFieldProp()] = this.getOrderFieldValue(), _a[this.getOrderProp()] = this.getOrderPropValue() || 'descend', _a)), this.getFetchDataParams()));\n      },\n\n      /**\n       * fetchData\n       * @description - 加载数据\n       * @override\n       */\n      fetchData: function fetchData() {\n        return this.fetchDataExecute(this.getSearchParams());\n      },\n\n      /**\n       * fetchDataExecute\n       * @description - 真正的执行获取列表数据的接口\n       * @param searchParams\n       * @protected\n       */\n      fetchDataExecute: function fetchDataExecute(searchParams) {\n        return this[\"\" + serviceName + this.getFetchListPropNameToFirstUpper() + \"Action\"](searchParams);\n      },\n\n      /**\n       * onSearch\n       * @description - 点击查询\n       * @override\n       */\n      onSearch: function onSearch() {\n        var _this = this;\n\n        var keys = Object.keys(this.getParams());\n        var params = {};\n        keys.forEach(function (key) {\n          params[key] = _this[key];\n        });\n        return new Promise(function (resolve) {\n          var _a;\n\n          _this.searchParams = __assign(__assign({}, params), (_a = {}, _a[_this.getOrderFieldProp()] = _this[_this.getOrderFieldProp()], _a[_this.getOrderProp()] = _this[_this.getOrderProp()], _a));\n\n          _this.$nextTick(function () {\n            _this.fetchData().then(function () {\n              resolve();\n            });\n          });\n        });\n      },\n\n      /**\n       * renderSearchTableImplement\n       * @description - renderSearchTableImplement\n       * @param h\n       */\n      renderSearchTableImplement: function renderSearchTableImplement(h) {\n        return this.renderSearchTable(h);\n      }\n    }, serviceName ? __assign(__assign({}, vuexgenerator_1.mapActions([serviceName])), vuexgenerator_1.mapMutations([serviceName])) : {}),\n    render: function render(h) {\n      return this.renderSearchTableImplement(h);\n    }\n  });\n};"],"names":["require","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__importDefault","default","exports","vue_1","vuexgenerator_1","searchtable_1","selectorPrefix","serviceName","extend","mixins","cleanMixin","data","_a","getParams","getOrderFieldProp","getOrderFieldValue","getOrderProp","getOrderPropValue","searchParams","selectedRowKeys","computed","mapState","methods","getFetchListPropName","getFetchListPropNameToFirstUpper","fetchListPropName","charAt","toUpperCase","substring","onSelectChange","property","onInputChange","e","target","trim","onDateTimeRangeChange","propertys","moments","getServiceName","getFetchDataParams","isShowNumber","getNumberGeneratorRule","NUMBER_GENERATOR_RULE_CONTINUITY","getTableNumberColumnWidth","getRowKey","getDataKey","getTotalKey","getData","getTotal","getRowSelection","_this","onChange","renderSearchForm","h","renderSearchTableImplementInner","innerVNode","renderSearchTableInner","ref","class","renderInner","renderSearchFooterItems","clear","Promise","resolve","$nextTick","showLoading","loading","getSearchParams","page","limit","fetchData","fetchDataExecute","onSearch","keys","params","forEach","key","then","renderSearchTableImplement","renderSearchTable","mapActions","mapMutations","render"],"mappings":"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"}