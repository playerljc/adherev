"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.array.last-index-of.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),dayjs_1=tslib_1.__importDefault(require("dayjs")),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),SearchEditableCellTable_1=tslib_1.__importDefault(require("./SearchEditableCellTable")),extend=adherev_util_1.default._util.extend,SearchEditableRowTable=function(e){return extend({className:"SearchEditableRowTable",mixins:[(0,SearchEditableCellTable_1.default)(e)],data:function(){var t=this;return{$rowConfigReducers:[function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.rowEditableReducer.apply(t,e)}],editorRowId:""}},methods:{rowEditableReducer:function(e){var r=e.rowConfig,t=e.rowIndex,o=e.columns,e=e.record;return this.onEditorRow&&(r.$editable=this.onEditorRow({rowIndex:t,record:e,columns:o})),r},onEditorRow:function(e){return{editable:!0}},onEditorCell:function(e){var r=e.record,e=e.editorConfig;e&&(e.useTrigger=!1,r[this.getRowKey()]===this.editorRowId&&(e.defaultStatus="edit"))},fetchData:function(){var r=this;return this.$fetchDataSearchEditableCellTable().then(function(e){return r.editorRowId="",e})},updateEditorCellRowData:function(e){var r=this,a=e.values,s=e.record,n=e.rowIndex;return new Promise(function(e){var o=r.getData()||[],i=r.getRowKey();Object.keys(a).forEach(function(e){var r=a[e],t=(r instanceof dayjs_1.default&&(r=r.valueOf()),o.find(function(e){return e[i]===s[i]}));t&&(t[e.substring(0,e.lastIndexOf("_".concat(n)))]=r)}),r.receiveDataMutation(o),r.$nextTick(function(){return e()})})}}})};exports.default=SearchEditableRowTable;
//# sourceMappingURL=SearchEditableRowTable.js.map
