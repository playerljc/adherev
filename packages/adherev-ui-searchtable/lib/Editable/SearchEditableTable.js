"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.array.from.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.set.js"),require("core-js/modules/esnext.set.add-all.js"),require("core-js/modules/esnext.set.delete-all.js"),require("core-js/modules/esnext.set.difference.js"),require("core-js/modules/esnext.set.every.js"),require("core-js/modules/esnext.set.filter.js"),require("core-js/modules/esnext.set.find.js"),require("core-js/modules/esnext.set.intersection.js"),require("core-js/modules/esnext.set.is-disjoint-from.js"),require("core-js/modules/esnext.set.is-subset-of.js"),require("core-js/modules/esnext.set.is-superset-of.js"),require("core-js/modules/esnext.set.join.js"),require("core-js/modules/esnext.set.map.js"),require("core-js/modules/esnext.set.reduce.js"),require("core-js/modules/esnext.set.some.js"),require("core-js/modules/esnext.set.symmetric-difference.js"),require("core-js/modules/esnext.set.union.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.reduce.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/es.array.last-index-of.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.array.map.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),SearchEditableCellTable_1=tslib_1.__importDefault(require("./SearchEditableCellTable")),extend=adherev_util_1.default._util.extend,SearchEditableTable=function(e){return extend({className:"SearchEditableTable",mixins:[(0,SearchEditableCellTable_1.default)(e)],data:function(){var s=this;return{$rowConfigReducers:[function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return s.rowEditableReducer.apply(s,e)}],isTableEditor:!1}},methods:{onTableRowComponentReducers:function(e){return e.some(function(e){return"$editable"in e&&(null==(e=e.$editable)?void 0:e.editable)})?Array.from(new Set(tslib_1.__spreadArray(tslib_1.__spreadArray([],this.$data.$tableRowComponentReducers,!0),["useEditableTableRow"],!1))):this.$data.$tableRowComponentReducers},onTableCellComponentReducers:function(e){return e.some(function(e){return"$editable"in e&&(null==(e=e.$editable)?void 0:e.editable)})?Array.from(new Set(tslib_1.__spreadArray(tslib_1.__spreadArray([],this.$data.$tableCellComponentReducers,!0),["useEditableTableCell"],!1))):this.$data.$tableCellComponentReducers},rowEditableReducer:function(e){var r=e.rowConfig,s=e.rowIndex,t=e.columns,e=e.record;return this.onEditorRow&&(r.$editable=this.onEditorRow({rowIndex:s,record:e,columns:t})),r},onEditorRow:function(e){return{editable:!0}},onEditorCell:function(e){e.record;e=e.editorConfig;e&&(e.useTrigger=!1,this.isTableEditor&&(e.defaultStatus="edit"))},setFieldValues:function(){var e,r=this.getFormIns();null!=(e=null==r?void 0:r.setFieldsValue)&&e.call(r,this.$arrayToValues(this.getData()))},$arrayToValues:function(e){var a=this,r=this.getTableColumns();return(e||[]).reduce(function(t,o,i){return r.forEach(function(e){var r,s=e.dataIndex,e=e.$editable;s in o&&e&&"type"in e&&(r="".concat(s,"_").concat(i),t[r]=a.valueToFormItemValue({type:e.type,record:o,dataIndex:s}))}),t},{})},$valuesToArray:function(o){return Object.keys(o).reduce(function(e,r){var s=parseInt(r.substring(r.lastIndexOf("_")+1)),t=r.substring(0,r.lastIndexOf("_"));return e[s]||(e[s]={}),e[s][t]=o[r],e},[])},fetchData:function(){var r=this;return this.$fetchDataSearchTableImpl().then(function(e){return r.isTableEditor=!1,e})},updateEditorData:function(t){var o=this;return new Promise(function(e){var r=o.getData(),s=o.$valuesToArray(t);o.receiveDataMutation(r.map(function(e,r){return tslib_1.__assign(tslib_1.__assign({},e),s[r])})),o.$nextTick(function(){return e()})})}}})};exports.default=SearchEditableTable;
//# sourceMappingURL=SearchEditableTable.js.map
