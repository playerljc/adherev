{"version":3,"file":"SearchRowDragSortTable.js","sources":["DragSort/RowDragSort/SearchRowDragSortTable.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.set.js\");\nrequire(\"core-js/modules/esnext.set.add-all.js\");\nrequire(\"core-js/modules/esnext.set.delete-all.js\");\nrequire(\"core-js/modules/esnext.set.difference.js\");\nrequire(\"core-js/modules/esnext.set.every.js\");\nrequire(\"core-js/modules/esnext.set.filter.js\");\nrequire(\"core-js/modules/esnext.set.find.js\");\nrequire(\"core-js/modules/esnext.set.intersection.js\");\nrequire(\"core-js/modules/esnext.set.is-disjoint-from.js\");\nrequire(\"core-js/modules/esnext.set.is-subset-of.js\");\nrequire(\"core-js/modules/esnext.set.is-superset-of.js\");\nrequire(\"core-js/modules/esnext.set.join.js\");\nrequire(\"core-js/modules/esnext.set.map.js\");\nrequire(\"core-js/modules/esnext.set.reduce.js\");\nrequire(\"core-js/modules/esnext.set.some.js\");\nrequire(\"core-js/modules/esnext.set.symmetric-difference.js\");\nrequire(\"core-js/modules/esnext.set.union.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.promise.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar array_move_1 = require(\"array-move\");\nvar adherev_util_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util\"));\nvar SearchTableImplement_1 = tslib_1.__importDefault(require(\"../../SearchTableImplement\"));\nvar extend = adherev_util_1.default._util.extend;\n/**\n * SearchRowDragSortTable\n * @description 可以进行行拖拽排序的表格\n * @param serviceName\n */\nexports.default = function (serviceName) {\n  return extend({\n    className: 'SearchRowDragSortTable',\n    mixins: [(0, SearchTableImplement_1.default)(serviceName)],\n    data: function data() {\n      var _this = this;\n      return {\n        $bodyConfigReducers: [function () {\n          var params = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n          }\n          return _this.bodyDragSortReducer.apply(_this, params);\n        }],\n        $rowConfigReducers: [function () {\n          var params = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n          }\n          return _this.rowDragSortReducer.apply(_this, params);\n        }],\n        $cellConfigReducers: [function () {\n          var params = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n          }\n          return _this.cellDragSortReducer.apply(_this, params);\n        }]\n      };\n    },\n    methods: {\n      /**\n       * onTableBodyComponentReducers\n       * @param columns\n       */\n      onTableBodyComponentReducers: function onTableBodyComponentReducers(columns) {\n        return Array.from(new Set(tslib_1.__spreadArray(tslib_1.__spreadArray([], this.$data.$tableBodyComponentReducers, true), ['useDragSortRowBody'], false)));\n      },\n      /**\n       * onTableRowComponentReducers\n       * @param columns\n       */\n      onTableRowComponentReducers: function onTableRowComponentReducers(columns) {\n        return Array.from(new Set(tslib_1.__spreadArray(tslib_1.__spreadArray([], this.$data.$tableRowComponentReducers, true), ['useRowDragSortRow'], false)));\n      },\n      /**\n       * onTableCellComponentReducers\n       * @param columns\n       */\n      onTableCellComponentReducers: function onTableCellComponentReducers(columns) {\n        return Array.from(new Set(tslib_1.__spreadArray(tslib_1.__spreadArray([], this.$data.$tableCellComponentReducers, true), ['useRowDragSortCell'], false)));\n      },\n      /**\n       * bodyDragSortReducer\n       * @param params\n       */\n      bodyDragSortReducer: function bodyDragSortReducer(params) {\n        return {\n          $bodyDragSort: this.onDragSortBody()\n        };\n      },\n      /**\n       * rowDragSortReducer\n       * @param params\n       */\n      rowDragSortReducer: function rowDragSortReducer(params) {\n        var rowConfig = params.rowConfig,\n          rowIndex = params.rowIndex,\n          columns = params.columns,\n          record = params.record;\n        rowConfig.$rowDragSort = this.onDragSortRow({\n          rowIndex: rowIndex,\n          record: tslib_1.__assign({}, record),\n          columns: columns\n        });\n        return rowConfig;\n      },\n      /**\n       * cellDragSortReducer\n       * @param params\n       */\n      cellDragSortReducer: function cellDragSortReducer(params) {\n        var rowIndex = params.rowIndex,\n          column = params.column,\n          record = params.record,\n          columns = params.columns;\n        column.$rowDragSort = this.onDragSortCell({\n          rowIndex: rowIndex,\n          record: tslib_1.__assign({}, record),\n          columns: columns\n        });\n        return column;\n      },\n      /**\n       * onDragSortBody\n       * @description\n       */\n      onDragSortBody: function onDragSortBody() {\n        return {\n          canDrag: function canDrag() {\n            return true;\n          }\n        };\n      },\n      /**\n       * onDragSortRow\n       * @param params\n       */\n      onDragSortRow: function onDragSortRow(params) {\n        return {\n          canDrag: function canDrag() {\n            return true;\n          }\n        };\n      },\n      /**\n       * onDragSortCell\n       * @param params\n       */\n      onDragSortCell: function onDragSortCell(params) {\n        return {};\n      },\n      /**\n       * moveRow\n       * @description 换行\n       * @param fromIndex\n       * @param toIndex\n       */\n      moveRow: function moveRow(fromIndex, toIndex) {\n        var _this = this;\n        return new Promise(function (resolve) {\n          _this.receiveDataMutation((0, array_move_1.arrayMoveImmutable)(_this.getData(), fromIndex, toIndex));\n          _this.$nextTick(function () {\n            resolve();\n          });\n        });\n      }\n    }\n  });\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","array_move_1","adherev_util_1","__importDefault","SearchTableImplement_1","extend","default","_util","serviceName","className","mixins","data","_this","this","$bodyConfigReducers","params","_i","arguments","length","bodyDragSortReducer","apply","$rowConfigReducers","rowDragSortReducer","$cellConfigReducers","cellDragSortReducer","methods","onTableBodyComponentReducers","columns","Array","from","Set","__spreadArray","$data","$tableBodyComponentReducers","onTableRowComponentReducers","$tableRowComponentReducers","onTableCellComponentReducers","$tableCellComponentReducers","$bodyDragSort","onDragSortBody","rowConfig","rowIndex","record","$rowDragSort","onDragSortRow","__assign","column","onDragSortCell","canDrag","moveRow","fromIndex","toIndex","Promise","resolve","receiveDataMutation","arrayMoveImmutable","getData","$nextTick"],"mappings":"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"}