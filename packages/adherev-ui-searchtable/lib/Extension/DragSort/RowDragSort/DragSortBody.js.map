{"version":3,"file":"DragSortBody.js","sources":["Extension/DragSort/RowDragSort/DragSortBody.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\n// export default {\n//   methods: {\n//     onUseDragSortRowBodyEnd(e) {\n//       // newDraggableIndex\n//       // newIndex\n//       // oldDraggableIndex\n//       // oldIndex\n//       this.getContext?.()\n//         ?.context.moveRow(e.oldDraggableIndex, e.newDraggableIndex)\n//         .then(() => {});\n//     },\n//     /**\n//      * useDragSortRowBody\n//      * @param tbodyVNode\n//      */\n//     useDragSortRowBody(tbodyVNode: VNode): VNode | null {\n//       const bodyConfig = this.props.bodyConfig;\n//\n//       return (\n//         <Draggable\n//           {...(bodyConfig?.$bodyDragSort?.draggableProps || {})}\n//           tag=\"tbody\"\n//           class={classNames(\n//             `${selectorPrefix}-search-row-drag-sort-table`,\n//             tbodyVNode?.props?.class,\n//           )}\n//           draggable={\n//             bodyConfig?.$bodyDragSort?.canDrag?.()\n//               ? `.${selectorPrefix}-row-drag-sort-draggable-item`\n//               : false\n//           }\n//           // handle={`.${selectorPrefix}-row-drag-sort-handle`}\n//           onEnd={this.onUseDragSortRowBodyEnd}\n//         >\n//           {tbodyVNode.children}\n//         </Draggable>\n//       );\n//     },\n//   },\n// };\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n// import Draggable from 'vuedraggable';\nvar sortablejs_1 = tslib_1.__importDefault(require(\"sortablejs\"));\nvar vue_1 = require(\"vue\");\nvar SearchTable_1 = require(\"../../../SearchTable\");\nexports.default = function (props) {\n  var _a, _b, _c;\n  var getContext = (0, vue_1.inject)('getContext');\n  var context = (_a = getContext === null || getContext === void 0 ? void 0 : getContext()) === null || _a === void 0 ? void 0 : _a.context;\n  var bodyConfig = (_c = (_b = context.onBody) === null || _b === void 0 ? void 0 : _b.call(context)) === null || _c === void 0 ? void 0 : _c.bodyConfig;\n  var tbodyRef = (0, vue_1.ref)();\n  var onUseDragSortRowBodyEnd = function onUseDragSortRowBodyEnd(e) {\n    var _a, _b, _c;\n    // newDraggableIndex\n    // newIndex\n    // oldDraggableIndex\n    // oldIndex\n    (_c = (_b = (_a = context === null || context === void 0 ? void 0 : context.moveRow) === null || _a === void 0 ? void 0 : _a.call(context, e.oldDraggableIndex, e.newDraggableIndex)) === null || _b === void 0 ? void 0 : _b.then) === null || _c === void 0 ? void 0 : _c.call(_b, function () {});\n  };\n  (0, vue_1.onMounted)(function () {\n    var _a, _b, _c;\n    if (!tbodyRef.value) return;\n    sortablejs_1.default.create(tbodyRef.value, tslib_1.__assign(tslib_1.__assign({\n      draggable: ((_b = (_a = bodyConfig === null || bodyConfig === void 0 ? void 0 : bodyConfig.$bodyDragSort) === null || _a === void 0 ? void 0 : _a.canDrag) === null || _b === void 0 ? void 0 : _b.call(_a)) ? \".\".concat(SearchTable_1.selectorPrefix, \"-row-drag-sort-draggable-item\") : false\n    }, ((_c = bodyConfig === null || bodyConfig === void 0 ? void 0 : bodyConfig.$bodyDragSort) === null || _c === void 0 ? void 0 : _c.draggableProps) || {}), {\n      onEnd: function onEnd(e) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if ((_b = (_a = bodyConfig === null || bodyConfig === void 0 ? void 0 : bodyConfig.$bodyDragSort) === null || _a === void 0 ? void 0 : _a.draggableProps) === null || _b === void 0 ? void 0 : _b.onEnd) {\n          (_g = (_f = (_e = (_d = (_c = bodyConfig === null || bodyConfig === void 0 ? void 0 : bodyConfig.$bodyDragSort) === null || _c === void 0 ? void 0 : _c.draggableProps) === null || _d === void 0 ? void 0 : _d.onEnd) === null || _e === void 0 ? void 0 : _e.call(_d, e)) === null || _f === void 0 ? void 0 : _f.then) === null || _g === void 0 ? void 0 : _g.call(_f, function () {\n            onUseDragSortRowBodyEnd(e);\n          });\n        } else {\n          onUseDragSortRowBodyEnd(e);\n        }\n      }\n    }));\n  });\n  return function (tbodyVNode) {\n    var _a, _b;\n    var targetTbodyVNode = (0, vue_1.cloneVNode)(tbodyVNode, {\n      ref: tbodyRef,\n      class: (0, classnames_1.default)((_a = tbodyVNode === null || tbodyVNode === void 0 ? void 0 : tbodyVNode.props) === null || _a === void 0 ? void 0 : _a.class, \"\".concat(SearchTable_1.selectorPrefix, \"-search-row-drag-sort-table\"), (_b = tbodyVNode === null || tbodyVNode === void 0 ? void 0 : tbodyVNode.props) === null || _b === void 0 ? void 0 : _b.class)\n    });\n    return (\n      /*<Draggable\n        {...(bodyConfig?.$bodyDragSort?.draggableProps || {})}\n        tag=\"tbody\"\n        class={classNames(`${selectorPrefix}-search-row-drag-sort-table`, tbodyVNode?.props?.class)}\n        draggable={\n          bodyConfig?.$bodyDragSort?.canDrag?.()\n            ? `.${selectorPrefix}-row-drag-sort-draggable-item`\n            : false\n        }\n        // handle={`.${selectorPrefix}-row-drag-sort-handle`}\n        onEnd={onUseDragSortRowBodyEnd}\n        list={tbodyVNode?.children?.[0]?.[1]?.children || []}\n        v-slots={{\n          item: (params) => (params || {})?.element,\n        }}\n      />*/\n      targetTbodyVNode\n    );\n  };\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","classnames_1","__importDefault","sortablejs_1","vue_1","SearchTable_1","default","props","onUseDragSortRowBodyEnd","e","_b","_c","_a","context","moveRow","call","oldDraggableIndex","newDraggableIndex","then","getContext","inject","bodyConfig","onBody","tbodyRef","ref","onMounted","create","__assign","draggable","$bodyDragSort","canDrag","concat","selectorPrefix","draggableProps","onEnd","_f","_g","_e","_d","tbodyVNode","cloneVNode","class"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACD,IAAIC,QAAUL,QAAQ,OAAO,EAyCzBM,aAAeD,QAAQE,gBAAgBP,QAAQ,YAAY,CAAC,EAE5DQ,aAAeH,QAAQE,gBAAgBP,QAAQ,YAAY,CAAC,EAC5DS,MAAQT,QAAQ,KAAK,EACrBU,cAAgBV,QAAQ,sBAAsB,EAClDG,QAAQQ,QAAU,SAAUC,GAMI,SAA1BC,EAA2DC,GAC7D,IAAQC,EAKR,OAACC,EAAK,OAACD,EAAK,OAACE,EAAKC,MAAAA,EAAyC,KAAA,EAASA,EAAQC,SAAqC,KAAA,EAASF,EAAGG,KAAKF,EAASJ,EAAEO,kBAAmBP,EAAEQ,iBAAiB,GAA+B,KAAA,EAASP,EAAGQ,OAA2CP,EAAGI,KAAKL,EAAI,YAAc,CACrS,CAZA,IACIS,GAAa,EAAIf,MAAMgB,QAAQ,YAAY,EAC3CP,EAAU,OAACD,EAAKO,MAAAA,EAA+C,KAAA,EAASA,EAAW,GAA+B,KAAA,EAASP,EAAGC,QAC9HQ,EAAa,OAACV,EAAK,OAACD,EAAKG,EAAQS,QAAoC,KAAA,EAASZ,EAAGK,KAAKF,CAAO,GAA+B,KAAA,EAASF,EAAGU,WACxIE,GAAW,EAAInB,MAAMoB,KAAK,EA2B9B,OAlBA,EAAIpB,MAAMqB,WAAW,WACnB,IAAIb,EAAQD,EACPY,EAASxB,OACdI,aAAaG,QAAQoB,OAAOH,EAASxB,MAAOC,QAAQ2B,SAAS3B,QAAQ2B,SAAS,CAC5EC,UAAW,EAAC,OAAClB,EAAK,OAACE,EAAKS,MAAAA,EAA+C,KAAA,EAASA,EAAWQ,eAA2C,KAAA,EAASjB,EAAGkB,UAA8CpB,CAAAA,EAAGK,KAAKH,CAAE,IAAK,IAAImB,OAAO1B,cAAc2B,eAAgB,+BAA+B,CACzR,GAAI,OAACrB,EAAKU,MAAAA,EAA+C,KAAA,EAASA,EAAWQ,eAA2C,KAAA,EAASlB,EAAGsB,iBAAmB,EAAE,EAAG,CAC1JC,MAAO,SAAezB,GACpB,IAAwB0B,EAAIC,EACxB,OAAC1B,EAAK,OAACE,EAAKS,MAAAA,EAA+C,KAAA,EAASA,EAAWQ,eAA2C,KAAA,EAASjB,EAAGqB,iBAAqDvB,EAAGwB,MAChM,OAACE,EAAK,OAACD,EAAK,OAACE,EAAK,OAACC,EAAK,OAAC3B,EAAKU,MAAAA,EAA+C,KAAA,EAASA,EAAWQ,eAA2C,KAAA,EAASlB,EAAGsB,gBAA4C,KAAA,EAASK,EAAGJ,OAAmC,KAAA,EAASG,EAAGtB,KAAKuB,EAAI7B,CAAC,GAA+B,KAAA,EAAS0B,EAAGjB,OAA2CkB,EAAGrB,KAAKoB,EAAI,WACzW3B,EAAwBC,CAAC,CAC3B,CAAC,EAEDD,EAAwBC,CAAC,CAE7B,CACF,CAAC,CAAC,CACJ,CAAC,EACM,SAAU8B,GACf,IAAQ7B,EAKR,OAJuB,EAAIN,MAAMoC,YAAYD,EAAY,CACvDf,IAAKD,EACLkB,OAAO,EAAIxC,aAAaK,SAAS,OAACM,EAAK2B,MAAAA,EAA+C,KAAA,EAASA,EAAWhC,OAAmC,KAAA,EAASK,EAAG6B,MAAO,GAAGV,OAAO1B,cAAc2B,eAAgB,6BAA6B,EAAG,OAACtB,EAAK6B,MAAAA,EAA+C,KAAA,EAASA,EAAWhC,OAAmC,KAAA,EAASG,EAAG+B,KAAK,CACvW,CAAC,CAoBH,CACF"}