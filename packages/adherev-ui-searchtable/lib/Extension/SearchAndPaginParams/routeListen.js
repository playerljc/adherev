"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.last-index-of.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/es.string.starts-with.js"),Object.defineProperty(exports,"__esModule",{value:!0});var ProSearchTable_1=require("../../ProSearchTable"),historyStack=[];function clearSearAndPaginParamsByPathname(e){e=ProSearchTable_1.TableImplementSearchAndvPaginParamsMemo.findIndexByPath(e);-1!==e&&ProSearchTable_1.TableImplementSearchAndvPaginParamsMemo.deleteByIndex(e)}function deal(e){var a,t=historyStack.lastIndexOf(e);(-1===t?(clearSearAndPaginParamsByPathname(e),historyStack):(1===(a=historyStack.slice(t+1)).length&&a[0].startsWith(e)||clearSearAndPaginParamsByPathname(e),historyStack=historyStack.slice(0,t))).push(e)}var popstateHandler,popstate=function(e){deal(window.location.pathname),e.on(routeListen)};function routeListen(e){var a=e.location,e=(e.action,e.context),a=a.pathname;e.remove(routeListen),popstateHandler&&window.removeEventListener("popstate",popstateHandler),popstateHandler=popstate.bind(this,e),window.addEventListener("popstate",popstateHandler),deal(a)}exports.default=routeListen;
//# sourceMappingURL=routeListen.js.map
