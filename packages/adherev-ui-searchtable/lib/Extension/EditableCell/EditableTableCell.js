"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.useEditableTableCell=void 0,require("tslib")),vue_1=require("vue"),EditableTableCellEdit_1=tslib_1.__importDefault(require("./Edit/EditableTableCellEdit")),View_1=tslib_1.__importDefault(require("./View")),useEditableTableCell=function(t,e){var u=(0,vue_1.inject)("getContext"),l=null==(u=null==u?void 0:u())?void 0:u.context,i={defaultConfig:{editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==(u=t.column)?void 0:u.dataIndex,useKeepEdit:!1}},a=(0,vue_1.ref)((null==(u=null==(u=t.column)?void 0:u.$editable)?void 0:u.defaultStatus)||"view"),n=(0,vue_1.computed)(function(){var e;return tslib_1.__assign(tslib_1.__assign({},i.defaultConfig),(null==(e=t.column)?void 0:e.$editable)||{})}),r=(0,vue_1.watch)(function(){var e;return null==(e=null==l?void 0:l.getData)?void 0:e.call(l)},function(){a.value=n.value.defaultStatus}),o=(0,vue_1.watch)(function(){var e;return null==(e=null==(e=t.column)?void 0:e.$editable)?void 0:e.defaultStatus},function(){a.value=n.value.defaultStatus});return(0,vue_1.onBeforeUnmount)(function(){r(),o()}),function(e){var u=e;return n.value.editable?n.value.useKeepEdit?u=(0,vue_1.h)(e,{},[(0,_vue.createVNode)(EditableTableCellEdit_1.default,(0,_vue.mergeProps)((0,vue_1.toRaw)(t),{editableConfig:n.value,onTriggerChange:function(){return a.value="view"}}),{default:function(){return[e.children]}})]):"view"===a.value?u=(0,vue_1.h)(e,{},[(0,_vue.createVNode)(View_1.default,(0,_vue.mergeProps)((0,vue_1.toRaw)(t),{editableConfig:n.value,onTriggerChange:function(){a.value="edit"}}),{default:function(){return[e.children]}})]):"edit"===a.value&&(u=(0,vue_1.h)(e,{},[(0,_vue.createVNode)(EditableTableCellEdit_1.default,(0,_vue.mergeProps)((0,vue_1.toRaw)(t),{editableConfig:n.value,onTriggerChange:function(){a.value="view"}}),{default:function(){return[e.children]}})])):u=e,u}};exports.useEditableTableCell=useEditableTableCell;
//# sourceMappingURL=EditableTableCell.js.map
