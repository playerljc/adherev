"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.concat.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),ant_design_vue_1=require("ant-design-vue"),vue_1=require("vue"),vue_types_1=require("vue-types"),icons_vue_1=require("@ant-design/icons-vue"),SearchTable_1=require("../../../SearchTable"),FormItemGenerator_1=tslib_1.__importDefault(require("./FormItemGenerator"));exports.default=(0,vue_1.defineComponent)({props:{rowIndex:(0,vue_types_1.number)(),record:(0,vue_types_1.object)(),column:(0,vue_types_1.object)(),columns:(0,vue_types_1.array)().def([]),editableConfig:(0,vue_types_1.object)()},emits:["triggerChange"],setup:function(i,e){function o(){var e,l,n=tslib_1.__assign({autoFocus:!(null!=(n=null==i?void 0:i.editableConfig)&&n.useKeepEdit)},(null==(n=null==i?void 0:i.editableConfig)?void 0:n.props)||{}),n=FormItemGenerator_1.default.render({type:null==(d=null==i?void 0:i.editableConfig)?void 0:d.type,props:n,dictName:null==(d=null==i?void 0:i.editableConfig)?void 0:d.dictName,renderChildren:null==(n=null==i?void 0:i.editableConfig)?void 0:n.renderChildren,dataIndex:null==(d=null==i?void 0:i.editableConfig)?void 0:d.dataIndex,rowIndex:null==i?void 0:i.rowIndex,initialValue:f,name:_,form:c,context:v}),d={value:null==(d=null==i?void 0:i.record)?void 0:d[null==(d=null==i?void 0:i.editableConfig)?void 0:d.dataIndex],record:null==i?void 0:i.record,dataIndex:null==(d=null==i?void 0:i.editableConfig)?void 0:d.dataIndex,rowIndex:null==i?void 0:i.rowIndex,children:n,form:c};return(null==(e=null==t?void 0:t[null==(e=null==i?void 0:i.editableConfig)?void 0:e.render])?void 0:e.call(t,d))||(null==(l=null==(e=null==i?void 0:i.editableConfig)?void 0:e.render)?void 0:l.call(e,d))||n}function r(){var e,d=l();null!=(e=null==i?void 0:i.editableConfig)&&e.onSave?null!=c&&c.validateFields().then(function(e){var l,n;null!=(n=null==(l=null==(n=null==i?void 0:i.editableConfig)?void 0:n.onSave)?void 0:l.call(n,{value:d,values:e,record:null==i?void 0:i.record,dataIndex:null==(l=null==i?void 0:i.editableConfig)?void 0:l.dataIndex,rowIndex:null==i?void 0:i.rowIndex}))&&n.then(function(){a("triggerChange")})}):a("triggerChange")}function u(){var e,l,n=null==(n=null==i?void 0:i.record)?void 0:n[null==(n=null==i?void 0:i.editableConfig)?void 0:n.dataIndex];v.formData[_]=n,null!=(l=null==i?void 0:i.editableConfig)&&l.onBeforeCancel?null!=(l=null==(e=null==(l=null==i?void 0:i.editableConfig)?void 0:l.onBeforeCancel)?void 0:e.call(l,{value:n,record:null==i?void 0:i.record,dataIndex:null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex,rowIndex:null==i?void 0:i.rowIndex}))&&l.then(function(){return a("triggerChange")}):a("triggerChange")}function l(){return v.formData[_]}var a=e.emit,t=e.slots,e=(0,vue_1.inject)("getContext"),v=null==(e=null==e?void 0:e())?void 0:e.context,c=(0,vue_1.inject)("getFormIns")(),g={value:null==(e=i.record)?void 0:e[null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex],record:i.record,dataIndex:null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex,rowIndex:i.rowIndex},s={value:null==(e=i.record)?void 0:e[null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex],record:i.record,dataIndex:null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex,rowIndex:i.rowIndex},f=null==v?void 0:v.valueToFormItemValue({type:null==(e=null==i?void 0:i.editableConfig)?void 0:e.type,record:i.record,dataIndex:null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex}),b={initialValue:f,value:null==(e=i.record)?void 0:e[null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex],record:i.record,dataIndex:null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex,rowIndex:i.rowIndex,form:c},_="".concat(null==(e=null==i?void 0:i.editableConfig)?void 0:e.dataIndex,"_").concat(null==i?void 0:i.rowIndex);return function(){var e,l,n,d;return(0,_vue.createVNode)("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editablecell-edit")},[(0,_vue.createVNode)("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editablecell-edit-inner")},[(0,_vue.createVNode)(ant_design_vue_1.Form.Item,(0,_vue.mergeProps)({name:"".concat(null==(d=null==i?void 0:i.editableConfig)?void 0:d.dataIndex,"_").concat(i.rowIndex),rules:null==(d=null==i?void 0:i.editableConfig)?void 0:d.rules},(null==(d=null==i?void 0:i.editableConfig)?void 0:d.formItemProps)||{}),{default:function(){return["custom"!==(null==(e=null==i?void 0:i.editableConfig)?void 0:e.type)?null===o?void 0:o():(null==(e=null==t?void 0:t[null==(e=null==i?void 0:i.editableConfig)?void 0:e.render])?void 0:e.call(t,b))||(null==(l=null==(e=null==i?void 0:i.editableConfig)?void 0:e.render)?void 0:l.call(e,b))]}})]),!(null==(d=null==i?void 0:i.editableConfig)||!d.useTrigger)&&!(null!=(d=null==i?void 0:i.editableConfig)&&d.useKeepEdit)&&(0,_vue.createVNode)("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editablecell-edit-trigger")},[(0,_vue.createVNode)("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editablecell-edit-trigger-inner")},[(0,_vue.createVNode)("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editablecell-edit-trigger-save"),onClick:r},[(null==(d=null==t?void 0:t[null==(d=null==i?void 0:i.editableConfig)?void 0:d.renderSaveTrigger])?void 0:d.call(t,g))||(null==(n=null==(d=null==i?void 0:i.editableConfig)?void 0:d.renderSaveTrigger)?void 0:n.call(d,g))||(0,_vue.createVNode)(icons_vue_1.CheckOutlined,null,null)]),(0,_vue.createVNode)("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editablecell-edit-trigger-cancel"),onClick:u},[(null==(d=null==t?void 0:t[null==(n=null==i?void 0:i.editableConfig)?void 0:n.renderCancelTrigger])?void 0:d.call(t,s))||(null==(d=null==(n=null==i?void 0:i.editableConfig)?void 0:n.renderCancelTrigger)?void 0:d.call(n,s))||(0,_vue.createVNode)(icons_vue_1.CloseOutlined,null,null)])])])])}}});
//# sourceMappingURL=EditableTableCellEdit.js.map
