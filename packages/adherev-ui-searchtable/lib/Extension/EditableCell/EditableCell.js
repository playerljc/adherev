"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.useEditableCell=void 0,require("tslib")),vue_1=require("vue"),EditableCellEdit_1=tslib_1.__importDefault(require("./Edit/EditableCellEdit")),View_1=tslib_1.__importDefault(require("./View")),useEditableCell=function(t,e){var u=(0,vue_1.inject)("getContext"),l=null==(u=null==u?void 0:u())?void 0:u.context,i=(0,vue_1.inject)("setActiveValue"),n={defaultConfig:{editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==(u=t.column)?void 0:u.dataIndex,useKeepEdit:!1}},a=(0,vue_1.ref)((null==(u=null==(u=t.column)?void 0:u.$editable)?void 0:u.defaultStatus)||"view"),r=(0,vue_1.computed)(function(){var e;return tslib_1.__assign(tslib_1.__assign({},n.defaultConfig),(null==(e=t.column)?void 0:e.$editable)||{})}),o=(0,vue_1.watch)(function(){return null==l?void 0:l.getData()},function(){a.value=r.value.defaultStatus}),d=(0,vue_1.watch)(function(){var e;return null==(e=null==(e=t.column)?void 0:e.$editable)?void 0:e.defaultStatus},function(){a.value=r.value.defaultStatus});return(0,vue_1.onBeforeUnmount)(function(){o(),d()}),function(e){var u=e;return r.value.editable?r.value.useKeepEdit?u=(0,vue_1.h)(e,{},[(0,_vue.createVNode)(EditableCellEdit_1.default,(0,_vue.mergeProps)((0,vue_1.toRaw)(t),{editableConfig:r.value,onTriggerChange:function(){null!=i&&i(""),a.value="view"}}),{default:function(){return[e.children]}})]):"view"===a.value?u=(0,vue_1.h)(e,{},[(0,_vue.createVNode)(View_1.default,(0,_vue.mergeProps)((0,vue_1.toRaw)(t),{editableConfig:r.value,onTriggerChange:function(){null!=i&&i(t.record[t.column.dataIndex]),a.value="edit"}}),{default:function(){return[e.children]}})]):"edit"===a.value&&(u=(0,vue_1.h)(e,{},[(0,_vue.createVNode)(EditableCellEdit_1.default,(0,_vue.mergeProps)((0,vue_1.toRaw)(t),{editableConfig:r.value,onTriggerChange:function(){null!=i&&i(""),a.value="view"}}),{default:function(){return[e.children]}})])):u=e,u}};exports.useEditableCell=useEditableCell;
//# sourceMappingURL=EditableCell.js.map
