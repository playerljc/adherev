"use strict";require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.get-own-property-descriptor.js"),require("core-js/modules/es.object.get-own-property-descriptors.js"),require("core-js/modules/es.object.define-properties.js");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));function ownKeys(t,e){var i,l=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),l.push.apply(l,i)),l}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.for-each.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),EditableCellEdit_1=tslib_1.__importDefault(require("./Edit/EditableCellEdit")),View_1=tslib_1.__importDefault(require("./View")),cloneElement=adherev_util_1.default._util.cloneElement;exports.default={inject:["getActiveValue","setActiveValue"],data:function(){var e;return{$editableCell:{defaultConfig:{editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==(e=this.column)?void 0:e.dataIndex,useKeepEdit:!1},watchHandler:[]},editableCell:{status:(null==(e=null==(e=this.column)?void 0:e.$editable)?void 0:e.defaultStatus)||"view"}}},computed:{editableCellEditableConfig:function(){var e;return tslib_1.__assign(tslib_1.__assign({},this.$data.$editableCell.defaultConfig),(null==(e=this.column)?void 0:e.$editable)||{})}},created:function(){var e=this.$data.$editableCell;e.watchHandler.push(this.$watch(function(){var e;return null==(e=null==(e=null==(e=this.getContext)?void 0:e.call(this))?void 0:e.context)?void 0:e.getData()},function(){this.editableCell.status=this.editableCellEditableConfig.defaultStatus})),e.watchHandler.push(this.$watch(function(){var e;return null==(e=null==(e=this.column)?void 0:e.$editable)?void 0:e.defaultStatus},function(){console.log("editable",this.editableCellEditableConfig.defaultStatus),this.editableCell.status=this.editableCellEditableConfig.defaultStatus}))},beforeDestroy:function(){this.$data.$editableCell.watchHandler.forEach(function(e){return e()})},methods:{useEditableCell:function(e,t){var i=this,l=t,r=this.editableCellEditableConfig,o=r.editable,r=r.useKeepEdit,a=this.editableCell.status;return o?r?l=cloneElement(t,{children:[e(EditableCellEdit_1.default,{props:_objectSpread({},this.$props),attrs:{editableConfig:this.editableCellEditableConfig},on:{triggerChange:function(){i.setActiveValue(""),i.editableCell.status="view"}}},[t.children])]}):"view"===a?l=cloneElement(t,{children:[e(View_1.default,{props:_objectSpread({},this.$props),attrs:{editableConfig:this.editableCellEditableConfig},on:{triggerChange:function(){i.setActiveValue(i.record[i.column.dataIndex]),i.editableCell.status="edit"}}},[t.children])]}):"edit"===a&&(l=cloneElement(t,{children:[e(EditableCellEdit_1.default,{props:_objectSpread({},this.$props),attrs:{editableConfig:this.editableCellEditableConfig},on:{triggerChange:function(){i.setActiveValue(""),i.editableCell.status="view"}}},[t.children])]})):l=t,l}}};
//# sourceMappingURL=EditableCell.js.map
