"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.number.constructor.js"),Object.defineProperty(exports,"__esModule",{value:!0});var SearchTable_1=require("../../../SearchTable");exports.default={name:"adv-searchtable-editable-row-control",props:{rowKey:{type:String},editorRowId:{type:String},rowIndex:{type:Number},record:{type:Object,default:function(){return{}}},renderEditorRow:{type:Function},renderSave:{type:Function},renderCancel:{type:Function},onSave:{type:Function},onEditor:{type:Function}},emits:["renderEditorRow","renderSave","renderCancel"],inject:["getFormIns","getContext"],methods:{renderDefaultEditorRow:function(e){return e("a",["编辑行"])},renderDefaultCancel:function(e){return e("a",["取消"])},renderDefaultSave:function(e){return e("a",["保存"])},validateFieldsSuccess:function(e){var t=this;this.onSave?this.onSave(e).then(function(){return t.updateEditorCellRowData(e)}):this.updateEditorCellRowData(e)},updateEditorCellRowData:function(e){var t=this,r=null==(r=null==(r=this.getContext)?void 0:r.call(this))?void 0:r.context;null!=(r=null==r?void 0:r.updateEditorCellRowData({values:e,record:this.record,rowIndex:this.rowIndex}))&&r.then(function(){return t.reset()})},updateRowEdit:function(){var e=null==(e=null==(e=this.getContext)?void 0:e.call(this))?void 0:e.context;e&&(e.editorRowId=this.record[this.rowKey])},reset:function(){var e=null==(e=null==(e=this.getContext)?void 0:e.call(this))?void 0:e.context;e&&(e.editorRowId="")},$onEditor:function(){var e,t=this;this.onEditor?null!=(e=null==(e=this.onEditor)?void 0:e.call(this,this.record[this.rowKey]))&&e.then(function(){return t.updateRowEdit()}):this.updateRowEdit()}},render:function(e){var t,r,o=this,n=this,i=n.editorRowId,l=n.record,n=n.rowKey,d=this.getFormIns();return e("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editor-row-control")},[i!==l[n]&&e("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editor-row-control-edit"),on:{click:this.$onEditor}},[(null==(r=null==(t=this.$slots)?void 0:t[this.renderEditorRow])?void 0:r.call(t))||(null==(r=null==this?void 0:this.renderEditorRow)?void 0:r.call(this,e))||this.renderDefaultEditorRow(e)]),i===l[n]&&e("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editor-row-control-save-cancel")},[e("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editor-row-control-save-cancel-item"),on:{click:function(){return null==d?void 0:d.validateFields().then(function(e){return o.validateFieldsSuccess(e)})}}},[(null==(r=null==(t=this.$slots)?void 0:t[this.renderSave])?void 0:r.call(t))||(null==(i=null==this?void 0:this.renderSave)?void 0:i.call(this,e))||this.renderDefaultSave(e)]),e("div",{class:"".concat(SearchTable_1.selectorPrefix,"-editor-row-control-save-cancel-item"),on:{click:this.reset}},[(null==(n=null==(l=this.$slots)?void 0:l[this.renderCancel])?void 0:n.call(l))||(null==(r=null==this?void 0:this.renderCancel)?void 0:r.call(this,e))||this.renderDefaultCancel(e)])])])}};
//# sourceMappingURL=index.js.map
