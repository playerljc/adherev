{"version":3,"file":"index.js","sources":["Extension/EditableCell/View/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar ant_design_vue_1 = require(\"ant-design-vue\");\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\nvar SearchTable_1 = require(\"../../../SearchTable\");\n/**\n * EditableCellView\n * @description 可编辑单元格的查看状态\n */\nexports.default = {\n  props: {\n    rowIndex: {\n      type: Number\n    },\n    record: {\n      type: Object\n    },\n    column: {\n      type: Object\n    },\n    columns: {\n      type: Array\n    },\n    editableConfig: {\n      type: Object\n    }\n  },\n  inject: ['getContext'],\n  emits: ['triggerChange'],\n  methods: {\n    /**\n     * onTrigger\n     */\n    onTrigger: function onTrigger() {\n      var _this = this;\n      var _a;\n      var _b = this.editableConfig,\n        onBeforeToEdit = _b.onBeforeToEdit,\n        dataIndex = _b.dataIndex;\n      var _c = this,\n        rowIndex = _c.rowIndex,\n        record = _c.record;\n      if (onBeforeToEdit) {\n        (_a = this.editableConfig.onBeforeToEdit({\n          value: record[dataIndex],\n          record: record,\n          dataIndex: dataIndex,\n          rowIndex: rowIndex\n        })) === null || _a === void 0 ? void 0 : _a.then(function () {\n          _this.$emit('triggerChange');\n        });\n        return;\n      }\n      this.$emit('triggerChange');\n    },\n    /**\n     * renderTrigger\n     * @description 渲染句柄\n     */\n    renderTrigger: function renderTrigger(h) {\n      return h(ant_design_vue_1.Icon, {\n        \"attrs\": {\n          \"type\": \"edit\"\n        }\n      });\n    }\n  },\n  render: function render(h) {\n    var _a, _b, _c;\n    var _d = this,\n      _e = _d.editableConfig,\n      renderToEditTrigger = _e.renderToEditTrigger,\n      useTrigger = _e.useTrigger,\n      dataIndex = _e.dataIndex,\n      record = _d.record,\n      rowIndex = _d.rowIndex,\n      column = _d.column;\n    // 不使用句柄则返回原始组件\n    if (!useTrigger) {\n      return this === null || this === void 0 ? void 0 : this.$slots.default;\n    }\n    var renderToEditTriggerArgv = {\n      value: record === null || record === void 0 ? void 0 : record[dataIndex],\n      record: record,\n      dataIndex: dataIndex,\n      rowIndex: rowIndex\n    };\n    var context = (_b = (_a = this.getContext) === null || _a === void 0 ? void 0 : _a.call(this)) === null || _b === void 0 ? void 0 : _b.context;\n    var $scopedSlots = context === null || context === void 0 ? void 0 : context.$scopedSlots;\n    return h(\"div\", {\n      \"class\": \"\".concat(SearchTable_1.selectorPrefix, \"-editablecell-view\")\n    }, [h(\"div\", {\n      \"class\": (0, classnames_1.default)(\"\".concat(SearchTable_1.selectorPrefix, \"-editablecell-view-inner\"), 'ellipsis' in column && column.ellipsis ? \"\".concat(SearchTable_1.selectorPrefix, \"-editablecell-view-inner-ellipsis\") : '')\n    }, [this === null || this === void 0 ? void 0 : this.$slots.default]), h(\"div\", {\n      \"class\": \"\".concat(SearchTable_1.selectorPrefix, \"-editablecell-view-trigger\")\n    }, [h(\"div\", {\n      \"class\": \"\".concat(SearchTable_1.selectorPrefix, \"-editablecell-view-trigger-inner\"),\n      \"on\": {\n        \"click\": this.onTrigger\n      }\n    }, [((_c = $scopedSlots === null || $scopedSlots === void 0 ? void 0 : $scopedSlots[renderToEditTrigger]) === null || _c === void 0 ? void 0 : _c.call($scopedSlots, renderToEditTriggerArgv)) || (renderToEditTrigger === null || renderToEditTrigger === void 0 ? void 0 : renderToEditTrigger(renderToEditTriggerArgv)), !$scopedSlots[renderToEditTrigger] && !renderToEditTrigger && this.renderTrigger(h)])])]);\n  }\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","ant_design_vue_1","classnames_1","__importDefault","SearchTable_1","default","props","rowIndex","type","Number","record","column","columns","Array","editableConfig","inject","emits","methods","onTrigger","_this","this","_b","onBeforeToEdit","dataIndex","_a","then","$emit","renderTrigger","h","Icon","attrs","render","_d","_e","renderToEditTrigger","useTrigger","renderToEditTriggerArgv","$scopedSlots","context","getContext","call","class","concat","selectorPrefix","ellipsis","$slots","on","click","_c"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDA,QAAQ,0CAA0C,EAClDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACD,IAAIC,QAAUL,QAAQ,OAAO,EACzBM,iBAAmBN,QAAQ,gBAAgB,EAC3CO,aAAeF,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAC5DS,cAAgBT,QAAQ,sBAAsB,EAKlDG,QAAQO,QAAU,CAChBC,MAAO,CACLC,SAAU,CACRC,KAAMC,MACR,EACAC,OAAQ,CACNF,KAAMZ,MACR,EACAe,OAAQ,CACNH,KAAMZ,MACR,EACAgB,QAAS,CACPJ,KAAMK,KACR,EACAC,eAAgB,CACdN,KAAMZ,MACR,CACF,EACAmB,OAAQ,CAAC,cACTC,MAAO,CAAC,iBACRC,QAAS,CAIPC,UAAW,WACT,IAAIC,EAAQC,KAERC,EAAKD,KAAKN,eACZQ,EAAiBD,EAAGC,eACpBC,EAAYF,EAAGE,UAEfhB,EADOa,KACOb,SACdG,EAFOU,KAEKV,OACVY,EACF,OAACE,EAAKJ,KAAKN,eAAeQ,eAAe,CACvCvB,MAAOW,EAAOa,GACdb,OAAQA,EACRa,UAAWA,EACXhB,SAAUA,CACZ,CAAC,IAAwCiB,EAAGC,KAAK,WAC/CN,EAAMO,MAAM,eAAe,CAC7B,CAAC,EAGHN,KAAKM,MAAM,eAAe,CAC5B,EAKAC,cAAe,SAAuBC,GACpC,OAAOA,EAAE3B,iBAAiB4B,KAAM,CAC9BC,MAAS,CACPtB,KAAQ,MACV,CACF,CAAC,CACH,CACF,EACAuB,OAAQ,SAAgBH,GACtB,IACII,EAAKZ,KACPa,EAAKD,EAAGlB,eACRoB,EAAsBD,EAAGC,oBACzBC,EAAaF,EAAGE,WAChBZ,EAAYU,EAAGV,UACfb,EAASsB,EAAGtB,OACZH,EAAWyB,EAAGzB,SACdI,EAASqB,EAAGrB,OAEd,OAAKwB,GAGDC,EAA0B,CAC5BrC,MAAOW,MAAAA,EAAuC,KAAA,EAASA,EAAOa,GAC9Db,OAAQA,EACRa,UAAWA,EACXhB,SAAUA,CACZ,EAEI8B,EAAeC,OADfA,EAAU,OAACjB,EAAK,OAACG,EAAKJ,KAAKmB,YAAwC,KAAA,EAASf,EAAGgB,KAAKpB,IAAI,GAA+B,KAAA,EAASC,EAAGiB,SAC3E,KAAA,EAASA,EAAQD,aACtET,EAAE,MAAO,CACda,MAAS,GAAGC,OAAOtC,cAAcuC,eAAgB,oBAAoB,CACvE,EAAG,CAACf,EAAE,MAAO,CACXa,OAAS,EAAIvC,aAAaG,SAAS,GAAGqC,OAAOtC,cAAcuC,eAAgB,0BAA0B,EAAG,aAAchC,GAAUA,EAAOiC,SAAW,GAAGF,OAAOtC,cAAcuC,eAAgB,mCAAmC,EAAI,EAAE,CACrO,EAAG,CAACvB,MAAAA,KAAmC,KAAA,EAASA,KAAKyB,OAAOxC,QAAQ,EAAGuB,EAAE,MAAO,CAC9Ea,MAAS,GAAGC,OAAOtC,cAAcuC,eAAgB,4BAA4B,CAC/E,EAAG,CAACf,EAAE,MAAO,CACXa,MAAS,GAAGC,OAAOtC,cAAcuC,eAAgB,kCAAkC,EACnFG,GAAM,CACJC,MAAS3B,KAAKF,SAChB,CACF,EAAG,EAAE,OAAC8B,EAAKX,MAAAA,EAAmD,KAAA,EAASA,EAAaH,IAAkD,KAAA,EAASc,EAAGR,KAAKH,EAAcD,CAAuB,KAAOF,MAAAA,EAAiE,KAAA,EAASA,EAAoBE,CAAuB,GAAI,CAACC,EAAaH,IAAwB,CAACA,GAAuBd,KAAKO,cAAcC,CAAC,EAAE,EAAE,EAAE,GArB3YR,MAAAA,KAAmC,KAAA,EAASA,KAAKyB,OAAOxC,OAsBnE,CACF"}