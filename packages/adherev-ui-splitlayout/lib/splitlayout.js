"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.number.parse-int.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.from.js"),require("core-js/modules/es.string.split.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),adherev_ui_flexlayout_1=(0,tslib_1.__importDefault)(require("@baifendian/adherev-ui-flexlayout")),classnames_1=(0,tslib_1.__importDefault)(require("classnames")),vue_1=require("vue"),vue_types_1=require("vue-types"),flexlayoutSelectorPrefix=adherev_ui_flexlayout_1.default.selectorPrefix,selectorPrefix="adherev-ui-splitlayout",directionProp={horizontal:{page:"pageX",dimension:"width",offset:"offsetWidth"},vertical:{page:"pageY",dimension:"height",offset:"offsetHeight"}};function toPoint(e){e=e.replace("%","");return Number.parseInt(e)/100}var splitLayoutProps={maxSize:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]).def("100%"),minSize:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]).def(10)};exports.default=(0,vue_1.defineComponent)({name:"adv-splitlayout",emits:["canDrag","dragStarted","dragFinished","change"],props:splitLayoutProps,setup:function(r,e){function v(){var e;null!==(e=s.value)&&void 0!==e&&e.removeEventListener("mouseenter",x),null!==(e=s.value)&&void 0!==e&&e.removeEventListener("mousedown",j),null!==(e=s.value)&&void 0!==e&&e.removeEventListener("mouseout",t),null!==(e=s.value)&&void 0!==e&&e.removeEventListener("mousemove",n),null!==(e=s.value)&&void 0!==e&&e.removeEventListener("mouseup",o),null!=l&&l.removeEventListener("mousemove",n),null!=l&&l.removeEventListener("mouseout",t),null!=l&&l.removeEventListener("mouseup",o),null!=u&&u.removeEventListener("mouseout",t),null!=u&&u.removeEventListener("mousemove",n),null!=u&&u.removeEventListener("mouseup",o),null!=E&&E.removeEventListener("mouseleave",_),null!==(e=s.value)&&void 0!==e&&e.addEventListener("mouseenter",x),null!==(e=s.value)&&void 0!==e&&e.addEventListener("mousedown",j),null!==(e=s.value)&&void 0!==e&&e.addEventListener("mousemove",n),null!==(e=s.value)&&void 0!==e&&e.addEventListener("mouseout",t),null!==(e=s.value)&&void 0!==e&&e.addEventListener("mouseup",o),null!=l&&l.addEventListener("mousemove",n),null!=l&&l.addEventListener("mouseout",t),null!=l&&l.addEventListener("mouseup",o),null!=u&&u.addEventListener("mousemove",n),null!=u&&u.addEventListener("mouseout",t),null!=u&&u.addEventListener("mouseup",o),null!=E&&E.addEventListener("mouseleave",_)}function d(){var e=s.value,n=e.previousElementSibling,r=e.nextElementSibling;return Array.from(h.keys()).some(function(e){var e=e.split("_"),o=e[0],e=e[1];return(null==n?void 0:n.classList.contains(o))&&(null==r?void 0:r.classList.contains(e))})}function m(){var e,o,n=(r=s.value).previousElementSibling,r=r.nextElementSibling;return null!==(o=null===(e=null==n?void 0:n.classList)||void 0===e?void 0:e.contains)&&void 0!==o&&o.call(e,"".concat(flexlayoutSelectorPrefix,"-fixed"))?n:r}function f(){var e,o,n=(r=s.value).previousElementSibling,r=r.nextElementSibling;return null!==(o=null===(e=null==n?void 0:n.classList)||void 0===e?void 0:e.contains)&&void 0!==o&&o.call(e,"".concat(flexlayoutSelectorPrefix,"-auto"))?n:r}function p(){if(b)return b;var e=m(),o=(console.log("fixedEl",e),f()),n=(console.log("autoEl",o),c().offset);return b=e[n]+o[n],console.log("offset",n),console.log("fixedEl[offset]",e[n]),console.log("autoEl[offset]",o[n]),console.log("maxDimension",b),b}function x(e){var o;null!==(o=s.value)&&void 0!==o&&o.classList.add("".concat(selectorPrefix,"-").concat(w())),i=!(L=!1),g("canDrag",e)}function j(e){var o;null!==(o=s.value)&&void 0!==o&&o.classList.remove("".concat(selectorPrefix,"-").concat(w())),i&&(a=!0,q=e[null==c?void 0:c().page],P=null==l?void 0:l[null==c?void 0:c().offset],g("dragStarted",e))}function o(e){var o;null!==(o=s.value)&&void 0!==o&&o.classList.add("".concat(selectorPrefix,"-").concat(w())),a&&(a=!1,i=!L,q=0,g("dragFinished",e))}function _(e){a&&(i=a=!1,q=0,g("dragFinished",e))}function n(e){var o,n,r,t;i&&a&&(o=e[c().page],S=o-q,o="prev"===z()?P+S:P-S,n=void 0,r=D(),t=k(),r<=o||o<=t?r<=o?n=r:o<=t&&(n=t):n=o,l.style[c().dimension]="".concat(n,"px"),g("change",e))}function t(e){L=!0,a||(i=!1,g("change",e))}var g=e.emit,s=(0,vue_1.ref)(),y=(0,vue_1.inject)("direction"),l=null,u=null,E=null,i=!1,L=!1,a=!1,q=0,S=0,P=0,b=0,h=new Map([["".concat(flexlayoutSelectorPrefix,"-fixed_").concat(flexlayoutSelectorPrefix,"-auto"),!0],["".concat(flexlayoutSelectorPrefix,"-auto_").concat(flexlayoutSelectorPrefix,"-fixed"),!0]]),z=function(){var e,o=s.value.previousElementSibling;return null!==(e=null===(o=null==o?void 0:o.classList)||void 0===o?void 0:o.contains)&&void 0!==e&&e.call(o,"".concat(flexlayoutSelectorPrefix,"-fixed"))?"prev":"next"},w=function(){return"vertical"===y?"rowResize":"colResize"},c=function(){return directionProp[y]},D=function(){var e=0,o=p();return"string"==typeof r.maxSize?e=o*toPoint(r.maxSize):"number"==typeof r.maxSize&&(e=r.maxSize),o<e?o:e},k=function(){var e=0,o=p(),n=c().offset,n=s.value[n];return"string"==typeof r.minSize?e=o*toPoint(r.minSize):"number"==typeof r.minSize&&(e=r.minSize),e<n?n:e};return(0,vue_1.onMounted)(function(){var e;d()&&(l=m(),u=f(),null!=(E=null===(e=null==s?void 0:s.value)||void 0===e?void 0:e.parentElement)&&E.classList.add("".concat(selectorPrefix,"-noSelect")),v())}),(0,vue_1.onUpdated)(function(){d()&&(a=L=i=!1,b=P=S=q=0,l=m(),u=f(),v())}),function(){return(0,_vue.createVNode)("div",{ref:s,class:(0,classnames_1.default)(selectorPrefix,"".concat(selectorPrefix,"-").concat(y))},null)}}});
//# sourceMappingURL=splitlayout.js.map
