"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.number.parse-int.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.from.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),classnames_1=tslib_1.__importDefault(require("classnames")),vue_1=require("vue"),vue_types_1=require("vue-types"),adherev_ui_flexlayout_1=tslib_1.__importDefault(require("@baifendian/adherev-ui-flexlayout")),flexlayoutSelectorPrefix=adherev_ui_flexlayout_1.default.selectorPrefix,selectorPrefix="adherev-ui-splitlayout",directionProp={horizontal:{page:"pageX",dimension:"width",offset:"offsetWidth"},vertical:{page:"pageY",dimension:"height",offset:"offsetHeight"}};function toPoint(e){e=e.replace("%","");return Number.parseInt(e)/100}var splitLayoutProps={maxSize:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]).def("100%"),minSize:(0,vue_types_1.oneOfType)([(0,vue_types_1.string)(),(0,vue_types_1.number)()]).def(10)};exports.default=(0,vue_1.defineComponent)({name:"adv-splitlayout",emits:["canDrag","dragStarted","dragFinished","change"],props:splitLayoutProps,setup:function(t,e){function r(){var e;null!=(e=f.value)&&e.removeEventListener("mouseenter",l),null!=(e=f.value)&&e.removeEventListener("mousedown",i),null!=(e=f.value)&&e.removeEventListener("mouseout",m),null!=(e=f.value)&&e.removeEventListener("mousemove",v),null!=(e=f.value)&&e.removeEventListener("mouseup",a),null!=x&&x.removeEventListener("mousemove",v),null!=x&&x.removeEventListener("mouseout",m),null!=x&&x.removeEventListener("mouseup",a),null!=j&&j.removeEventListener("mouseout",m),null!=j&&j.removeEventListener("mousemove",v),null!=j&&j.removeEventListener("mouseup",a),null!=_&&_.removeEventListener("mouseleave",c),null!=(e=f.value)&&e.addEventListener("mouseenter",l),null!=(e=f.value)&&e.addEventListener("mousedown",i),null!=(e=f.value)&&e.addEventListener("mousemove",v),null!=(e=f.value)&&e.addEventListener("mouseout",m),null!=(e=f.value)&&e.addEventListener("mouseup",a),null!=x&&x.addEventListener("mousemove",v),null!=x&&x.addEventListener("mouseout",m),null!=x&&x.addEventListener("mouseup",a),null!=j&&j.addEventListener("mousemove",v),null!=j&&j.addEventListener("mouseout",m),null!=j&&j.addEventListener("mouseup",a),null!=_&&_.addEventListener("mouseleave",c)}function n(){var e=f.value,n=e.previousElementSibling,t=e.nextElementSibling;return Array.from(b.keys()).some(function(e){var e=e.split("_"),r=e[0],e=e[1];return(null==n?void 0:n.classList.contains(r))&&(null==t?void 0:t.classList.contains(e))})}function o(){var e,r,n=(t=f.value).previousElementSibling,t=t.nextElementSibling;return null!=(r=null==(e=null==n?void 0:n.classList)?void 0:e.contains)&&r.call(e,"".concat(flexlayoutSelectorPrefix,"-fixed"))?n:t}function s(){var e,r,n=(t=f.value).previousElementSibling,t=t.nextElementSibling;return null!=(r=null==(e=null==n?void 0:n.classList)?void 0:e.contains)&&r.call(e,"".concat(flexlayoutSelectorPrefix,"-auto"))?n:t}function u(){var e,r,n;return P||(e=o(),r=s(),n=w().offset,P=e[n]+r[n]),P}function l(e){var r;null!=(r=f.value)&&r.classList.add("".concat(selectorPrefix,"-").concat(z())),y=!(L=!1),d("canDrag",e)}function i(e){var r;null!=(r=f.value)&&r.classList.remove("".concat(selectorPrefix,"-").concat(z())),y&&(g=!0,E=e[null==w?void 0:w().page],S=null==x?void 0:x[null==w?void 0:w().offset],d("dragStarted",e))}function a(e){var r;null!=(r=f.value)&&r.classList.add("".concat(selectorPrefix,"-").concat(z())),g&&(g=!1,y=!L,E=0,d("dragFinished",e))}function c(e){g&&(y=g=!1,E=0,d("dragFinished",e))}function v(e){var r,n,t,o;y&&g&&(r=e[w().page],q=r-E,r="prev"===h()?S+q:S-q,n=void 0,t=k(),o=D(),t<=r||r<=o?t<=r?n=t:r<=o&&(n=o):n=r,x.style[w().dimension]="".concat(n,"px"),d("change",e))}function m(e){L=!0,g||(y=!1,d("change",e))}var d=e.emit,f=(0,vue_1.ref)(),p=(0,vue_1.inject)("direction"),x=null,j=null,_=null,y=!1,L=!1,g=!1,E=0,q=0,S=0,P=0,b=new Map([["".concat(flexlayoutSelectorPrefix,"-fixed_").concat(flexlayoutSelectorPrefix,"-auto"),!0],["".concat(flexlayoutSelectorPrefix,"-auto_").concat(flexlayoutSelectorPrefix,"-fixed"),!0]]),h=function(){var e,r=f.value.previousElementSibling;return null!=(e=null==(r=null==r?void 0:r.classList)?void 0:r.contains)&&e.call(r,"".concat(flexlayoutSelectorPrefix,"-fixed"))?"prev":"next"},z=function(){return"vertical"===p?"rowResize":"colResize"},w=function(){return directionProp[p]},k=function(){var e=0,r=u();return"string"==typeof t.maxSize?e=r*toPoint(t.maxSize):"number"==typeof t.maxSize&&(e=t.maxSize),r<e?r:e},D=function(){var e=0,r=u(),n=w().offset,n=f.value[n];return"string"==typeof t.minSize?e=r*toPoint(t.minSize):"number"==typeof t.minSize&&(e=t.minSize),e<n?n:e};return(0,vue_1.onMounted)(function(){var e;n()&&(x=o(),j=s(),null!=(_=null==(e=null==f?void 0:f.value)?void 0:e.parentElement)&&_.classList.add("".concat(selectorPrefix,"-noSelect")),r())}),(0,vue_1.onUpdated)(function(){n()&&(g=L=y=!1,P=S=q=E=0,x=o(),j=s(),r())}),function(){return(0,_vue.createVNode)("div",{ref:f,class:(0,classnames_1.default)(selectorPrefix,"".concat(selectorPrefix,"-").concat(p))},null)}}});
//# sourceMappingURL=splitlayout.js.map
