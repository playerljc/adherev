import{createVNode as _createVNode}from"vue";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.replace.js";import"core-js/modules/es.number.parse-int.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.map.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/esnext.map.delete-all.js";import"core-js/modules/esnext.map.every.js";import"core-js/modules/esnext.map.filter.js";import"core-js/modules/esnext.map.find.js";import"core-js/modules/esnext.map.find-key.js";import"core-js/modules/esnext.map.includes.js";import"core-js/modules/esnext.map.key-of.js";import"core-js/modules/esnext.map.map-keys.js";import"core-js/modules/esnext.map.map-values.js";import"core-js/modules/esnext.map.merge.js";import"core-js/modules/esnext.map.reduce.js";import"core-js/modules/esnext.map.some.js";import"core-js/modules/esnext.map.update.js";import"core-js/modules/web.dom-collections.iterator.js";import"core-js/modules/es.array.concat.js";import"core-js/modules/es.array.from.js";import classNames from"classnames";import{defineComponent,inject,onMounted,onUpdated,ref}from"vue";import{number,oneOfType,string}from"vue-types";import FlexLayout from"@baifendian/adherev-ui-flexlayout";var flexlayoutSelectorPrefix=FlexLayout.selectorPrefix,selectorPrefix="adherev-ui-splitlayout",directionProp={horizontal:{page:"pageX",dimension:"width",offset:"offsetWidth"},vertical:{page:"pageY",dimension:"height",offset:"offsetHeight"}};function toPoint(e){e=e.replace("%","");return Number.parseInt(e)/100}var splitLayoutProps={maxSize:oneOfType([string(),number()]).def("100%"),minSize:oneOfType([string(),number()]).def(10)};export default defineComponent({name:"adv-splitlayout",emits:["canDrag","dragStarted","dragFinished","change"],props:splitLayoutProps,setup:function(n,e){function o(){var e;null!=(e=p.value)&&e.removeEventListener("mouseenter",i),null!=(e=p.value)&&e.removeEventListener("mousedown",u),null!=(e=p.value)&&e.removeEventListener("mouseout",d),null!=(e=p.value)&&e.removeEventListener("mousemove",c),null!=(e=p.value)&&e.removeEventListener("mouseup",a),null!=x&&x.removeEventListener("mousemove",c),null!=x&&x.removeEventListener("mouseout",d),null!=x&&x.removeEventListener("mouseup",a),null!=j&&j.removeEventListener("mouseout",d),null!=j&&j.removeEventListener("mousemove",c),null!=j&&j.removeEventListener("mouseup",a),null!=L&&L.removeEventListener("mouseleave",m),null!=(e=p.value)&&e.addEventListener("mouseenter",i),null!=(e=p.value)&&e.addEventListener("mousedown",u),null!=(e=p.value)&&e.addEventListener("mousemove",c),null!=(e=p.value)&&e.addEventListener("mouseout",d),null!=(e=p.value)&&e.addEventListener("mouseup",a),null!=x&&x.addEventListener("mousemove",c),null!=x&&x.addEventListener("mouseout",d),null!=x&&x.addEventListener("mouseup",a),null!=j&&j.addEventListener("mousemove",c),null!=j&&j.addEventListener("mouseout",d),null!=j&&j.addEventListener("mouseup",a),null!=L&&L.addEventListener("mouseleave",m)}function t(){var e=p.value,t=e.previousElementSibling,n=e.nextElementSibling;return Array.from(z.keys()).some(function(e){var e=e.split("_"),o=e[0],e=e[1];return(null==t?void 0:t.classList.contains(o))&&(null==n?void 0:n.classList.contains(e))})}function r(){var e,o,t=(n=p.value).previousElementSibling,n=n.nextElementSibling;return null!=(o=null==(e=null==t?void 0:t.classList)?void 0:e.contains)&&o.call(e,"".concat(flexlayoutSelectorPrefix,"-fixed"))?t:n}function s(){var e,o,t=(n=p.value).previousElementSibling,n=n.nextElementSibling;return null!=(o=null==(e=null==t?void 0:t.classList)?void 0:e.contains)&&o.call(e,"".concat(flexlayoutSelectorPrefix,"-auto"))?t:n}function l(){var e,o,t;return h||(e=r(),o=s(),t=F().offset,h=e[t]+o[t]),h}function i(e){var o;null!=(o=p.value)&&o.classList.add("".concat(selectorPrefix,"-").concat(N())),g=!(y=!1),v("canDrag",e)}function u(e){var o;null!=(o=p.value)&&o.classList.remove("".concat(selectorPrefix,"-").concat(N())),g&&(E=!0,S=e[null==F?void 0:F().page],b=null==x?void 0:x[null==F?void 0:F().offset],v("dragStarted",e))}function a(e){var o;null!=(o=p.value)&&o.classList.add("".concat(selectorPrefix,"-").concat(N())),E&&(E=!1,g=!y,S=0,v("dragFinished",e))}function m(e){E&&(g=E=!1,S=0,v("dragFinished",e))}function c(e){var o,t,n,r;g&&E&&(o=e[F().page],P=o-S,o="prev"===w()?b+P:b-P,t=void 0,n=_(),r=k(),n<=o||o<=r?n<=o?t=n:o<=r&&(t=r):t=o,x.style[F().dimension]="".concat(t,"px"),v("change",e))}function d(e){y=!0,E||(g=!1,v("change",e))}var v=e.emit,p=ref(),f=inject("direction"),x=null,j=null,L=null,g=!1,y=!1,E=!1,S=0,P=0,b=0,h=0,z=new Map([["".concat(flexlayoutSelectorPrefix,"-fixed_").concat(flexlayoutSelectorPrefix,"-auto"),!0],["".concat(flexlayoutSelectorPrefix,"-auto_").concat(flexlayoutSelectorPrefix,"-fixed"),!0]]),w=function(){var e,o=p.value.previousElementSibling;return null!=(e=null==(o=null==o?void 0:o.classList)?void 0:o.contains)&&e.call(o,"".concat(flexlayoutSelectorPrefix,"-fixed"))?"prev":"next"},N=function(){return"vertical"===f?"rowResize":"colResize"},F=function(){return directionProp[f]},_=function(){var e=0,o=l();return"string"==typeof n.maxSize?e=o*toPoint(n.maxSize):"number"==typeof n.maxSize&&(e=n.maxSize),o<e?o:e},k=function(){var e=0,o=l(),t=F().offset,t=p.value[t];return"string"==typeof n.minSize?e=o*toPoint(n.minSize):"number"==typeof n.minSize&&(e=n.minSize),e<t?t:e};return onMounted(function(){var e;t()&&(x=r(),j=s(),null!=(L=null==(e=null==p?void 0:p.value)?void 0:e.parentElement)&&L.classList.add("".concat(selectorPrefix,"-noSelect")),o())}),onUpdated(function(){t()&&(E=y=g=!1,h=b=P=S=0,x=r(),j=s(),o())}),function(){return _createVNode("div",{ref:p,class:classNames(selectorPrefix,"".concat(selectorPrefix,"-").concat(f))},null)}}});
//# sourceMappingURL=splitlayout.js.map
