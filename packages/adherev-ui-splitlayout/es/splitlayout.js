import{createVNode as _createVNode}from"vue";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.replace.js";import"core-js/modules/es.number.parse-int.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.map.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/esnext.map.delete-all.js";import"core-js/modules/esnext.map.every.js";import"core-js/modules/esnext.map.filter.js";import"core-js/modules/esnext.map.find.js";import"core-js/modules/esnext.map.find-key.js";import"core-js/modules/esnext.map.includes.js";import"core-js/modules/esnext.map.key-of.js";import"core-js/modules/esnext.map.map-keys.js";import"core-js/modules/esnext.map.map-values.js";import"core-js/modules/esnext.map.merge.js";import"core-js/modules/esnext.map.reduce.js";import"core-js/modules/esnext.map.some.js";import"core-js/modules/esnext.map.update.js";import"core-js/modules/web.dom-collections.iterator.js";import"core-js/modules/es.array.concat.js";import"core-js/modules/es.array.from.js";import"core-js/modules/es.string.split.js";import FlexLayout from"@baifendian/adherev-ui-flexlayout";import classNames from"classnames";import{defineComponent,inject,onMounted,onUpdated,ref}from"vue";import{number,oneOfType,string}from"vue-types";var flexlayoutSelectorPrefix=FlexLayout.selectorPrefix,selectorPrefix="adherev-ui-splitlayout",directionProp={horizontal:{page:"pageX",dimension:"width",offset:"offsetWidth"},vertical:{page:"pageY",dimension:"height",offset:"offsetHeight"}};function toPoint(e){e=e.replace("%","");return Number.parseInt(e)/100}var splitLayoutProps={maxSize:oneOfType([string(),number()]).def("100%"),minSize:oneOfType([string(),number()]).def(10)};export default defineComponent({name:"adv-splitlayout",emits:["canDrag","dragStarted","dragFinished","change"],props:splitLayoutProps,setup:function(n,e){function c(){var e;null!==(e=r.value)&&void 0!==e&&e.removeEventListener("mouseenter",x),null!==(e=r.value)&&void 0!==e&&e.removeEventListener("mousedown",j),null!==(e=r.value)&&void 0!==e&&e.removeEventListener("mouseout",s),null!==(e=r.value)&&void 0!==e&&e.removeEventListener("mousemove",t),null!==(e=r.value)&&void 0!==e&&e.removeEventListener("mouseup",o),null!=l&&l.removeEventListener("mousemove",t),null!=l&&l.removeEventListener("mouseout",s),null!=l&&l.removeEventListener("mouseup",o),null!=i&&i.removeEventListener("mouseout",s),null!=i&&i.removeEventListener("mousemove",t),null!=i&&i.removeEventListener("mouseup",o),null!=y&&y.removeEventListener("mouseleave",g),null!==(e=r.value)&&void 0!==e&&e.addEventListener("mouseenter",x),null!==(e=r.value)&&void 0!==e&&e.addEventListener("mousedown",j),null!==(e=r.value)&&void 0!==e&&e.addEventListener("mousemove",t),null!==(e=r.value)&&void 0!==e&&e.addEventListener("mouseout",s),null!==(e=r.value)&&void 0!==e&&e.addEventListener("mouseup",o),null!=l&&l.addEventListener("mousemove",t),null!=l&&l.addEventListener("mouseout",s),null!=l&&l.addEventListener("mouseup",o),null!=i&&i.addEventListener("mousemove",t),null!=i&&i.addEventListener("mouseout",s),null!=i&&i.addEventListener("mouseup",o),null!=y&&y.addEventListener("mouseleave",g)}function d(){var e=r.value,t=e.previousElementSibling,n=e.nextElementSibling;return Array.from(w.keys()).some(function(e){var e=e.split("_"),o=e[0],e=e[1];return(null==t?void 0:t.classList.contains(o))&&(null==n?void 0:n.classList.contains(e))})}function v(){var e,o,t=(n=r.value).previousElementSibling,n=n.nextElementSibling;return null!==(o=null===(e=null==t?void 0:t.classList)||void 0===e?void 0:e.contains)&&void 0!==o&&o.call(e,"".concat(flexlayoutSelectorPrefix,"-fixed"))?t:n}function f(){var e,o,t=(n=r.value).previousElementSibling,n=n.nextElementSibling;return null!==(o=null===(e=null==t?void 0:t.classList)||void 0===e?void 0:e.contains)&&void 0!==o&&o.call(e,"".concat(flexlayoutSelectorPrefix,"-auto"))?t:n}function p(){if(z)return z;var e=v(),o=(console.log("fixedEl",e),f()),t=(console.log("autoEl",o),m().offset);return z=e[t]+o[t],console.log("offset",t),console.log("fixedEl[offset]",e[t]),console.log("autoEl[offset]",o[t]),console.log("maxDimension",z),z}function x(e){var o;null!==(o=r.value)&&void 0!==o&&o.classList.add("".concat(selectorPrefix,"-").concat(F())),u=!(S=!1),L("canDrag",e)}function j(e){var o;null!==(o=r.value)&&void 0!==o&&o.classList.remove("".concat(selectorPrefix,"-").concat(F())),u&&(a=!0,P=e[null==m?void 0:m().page],h=null==l?void 0:l[null==m?void 0:m().offset],L("dragStarted",e))}function o(e){var o;null!==(o=r.value)&&void 0!==o&&o.classList.add("".concat(selectorPrefix,"-").concat(F())),a&&(a=!1,u=!S,P=0,L("dragFinished",e))}function g(e){a&&(u=a=!1,P=0,L("dragFinished",e))}function t(e){var o,t,n,s;u&&a&&(o=e[m().page],b=o-P,o="prev"===N()?h+b:h-b,t=void 0,n=_(),s=k(),n<=o||o<=s?n<=o?t=n:o<=s&&(t=s):t=o,l.style[m().dimension]="".concat(t,"px"),L("change",e))}function s(e){S=!0,a||(u=!1,L("change",e))}var L=e.emit,r=ref(),E=inject("direction"),l=null,i=null,y=null,u=!1,S=!1,a=!1,P=0,b=0,h=0,z=0,w=new Map([["".concat(flexlayoutSelectorPrefix,"-fixed_").concat(flexlayoutSelectorPrefix,"-auto"),!0],["".concat(flexlayoutSelectorPrefix,"-auto_").concat(flexlayoutSelectorPrefix,"-fixed"),!0]]),N=function(){var e,o=r.value.previousElementSibling;return null!==(e=null===(o=null==o?void 0:o.classList)||void 0===o?void 0:o.contains)&&void 0!==e&&e.call(o,"".concat(flexlayoutSelectorPrefix,"-fixed"))?"prev":"next"},F=function(){return"vertical"===E?"rowResize":"colResize"},m=function(){return directionProp[E]},_=function(){var e=0,o=p();return"string"==typeof n.maxSize?e=o*toPoint(n.maxSize):"number"==typeof n.maxSize&&(e=n.maxSize),o<e?o:e},k=function(){var e=0,o=p(),t=m().offset,t=r.value[t];return"string"==typeof n.minSize?e=o*toPoint(n.minSize):"number"==typeof n.minSize&&(e=n.minSize),e<t?t:e};return onMounted(function(){var e;d()&&(l=v(),i=f(),null!=(y=null===(e=null==r?void 0:r.value)||void 0===e?void 0:e.parentElement)&&y.classList.add("".concat(selectorPrefix,"-noSelect")),c())}),onUpdated(function(){d()&&(a=S=u=!1,z=h=b=P=0,l=v(),i=f(),c())}),function(){return _createVNode("div",{ref:r,class:classNames(selectorPrefix,"".concat(selectorPrefix,"-").concat(E))},null)}}});
//# sourceMappingURL=splitlayout.js.map
