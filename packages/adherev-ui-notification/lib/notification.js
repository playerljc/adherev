"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.promise.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.Notification=void 0,require("tslib")),adherev_util_1=(0,tslib_1.__importDefault)(require("@baifendian/adherev-util")),uuid_1=require("uuid"),vue_1=require("vue"),selectorPrefix="adherev-ui-notification",Notification=function(){function e(e,t){this.config={style:"material",type:"top"},this.notifications={},this.key=!1,this.container=e,this.config=Object.assign(this.config,t),this.createInnerContainer(),this.init(),this.initEvents()}return e.prototype.createInnerContainer=function(){var e,t=this.container.querySelector(".".concat(selectorPrefix));t&&null!==(e=null==t?void 0:t.parentElement)&&void 0!==e&&e.removeChild(t),this.innerContainer=document.createElement("div"),this.innerContainer.className=selectorPrefix,this.notificationContainer=document.createElement("ul"),this.innerContainer.appendChild(this.notificationContainer),this.container.appendChild(this.innerContainer)},e.prototype.init=function(){var e=this.config;this.innerContainer&&(this.innerContainer.classList.remove([selectorPrefix].concat(["top"===e.type?"bottom":"top",e.style]).join("-")),this.innerContainer.classList.add([selectorPrefix].concat([e.type,e.style]).join("-")))},e.prototype.initEvents=function(){var i=this;this.notificationContainer&&this.notificationContainer.addEventListener("click",function(e){var t;!e.target.classList.contains("closeBtn")||(t=null===(t=adherev_util_1.default.getTopDom)||void 0===t?void 0:t.call(adherev_util_1.default,e.target,"".concat(selectorPrefix,"-item")))&&i.closeNotification.call(i,null===(e=null==t?void 0:t.dataset)||void 0===e?void 0:e.id)})},e.prototype.closeNotification=function(e){var i,n=this;n.key||(n.key=!0,i=n.notifications[e],n.trigger("onCloseBefore",i),i.addEventListener("transitionend",function e(){var t;i.removeEventListener("transitionend",e),null!==(t=null==n?void 0:n.notificationContainer)&&void 0!==t&&t.removeChild(i),n.key=!1,n.trigger("onCloseAfter",i)}),i.style.overflow="hidden",i.querySelector(".info").style.opacity="0",i.style.height="0")},e.prototype.buildCustom=function(a){var l=this;return new Promise(function(e){var t=a.closed,i=a.children,n=(0,uuid_1.v1)(),o=document.createElement("li"),r=(o.className="".concat(selectorPrefix,"-item"),o.dataset.id=n,l);(0,vue_1.createApp)({mounted:function(){e(r.build(n,o))},render:function(){var e;return(0,_vue.createVNode)(_vue.Fragment,null,[(0,_vue.createVNode)("div",{class:"info"},[null!==(e=adherev_util_1.default.isObject)&&void 0!==e&&e.call(adherev_util_1.default,i)?(0,vue_1.h)(i):null!==(e=adherev_util_1.default.isFunction)&&void 0!==e&&e.call(adherev_util_1.default,i)?i():i||""]),t?(0,_vue.createVNode)("span",{class:"closeBtn"},null):null])}}).mount(o)})},e.prototype.buildStandard=function(v){var f=this;return new Promise(function(e){var t=v.headerLabel,i=void 0===t?"":t,t=v.headerIcon,n=void 0===t?"":t,t=v.title,o=void 0===t?"":t,t=v.text,r=void 0===t?"":t,t=v.icon,a=void 0===t?"":t,t=v.closed,u=void 0===t||t,t=v.datetime,l=void 0===t?"":t,c=(0,uuid_1.v1)(),s=document.createElement("li"),d=(s.className="".concat(selectorPrefix,"-item"),s.dataset.id=c,f);(0,vue_1.createApp)({mounted:function(){e(d.build(c,s))},render:function(){var e;return(0,_vue.createVNode)(_vue.Fragment,null,[(0,_vue.createVNode)("div",{class:"info"},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-header")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-header-icon")},[n?(0,_vue.createVNode)("img",{src:n,alt:""},null):null]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-header-label")},[null!==(e=adherev_util_1.default.isObject)&&void 0!==e&&e.call(adherev_util_1.default,i)?(0,vue_1.h)(i):null!==(e=adherev_util_1.default.isFunction)&&void 0!==e&&e.call(adherev_util_1.default,i)?i():i||""])]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-content")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-content-media-l")},[a?(0,_vue.createVNode)("img",{src:a,alt:""},null):null]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-content-row")},[(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-content-row-title")},[null!==(e=adherev_util_1.default.isObject)&&void 0!==e&&e.call(adherev_util_1.default,o)?(0,vue_1.h)(o):null!==(e=adherev_util_1.default.isFunction)&&void 0!==e&&e.call(adherev_util_1.default,o)?o():o||""]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-content-row-text")},[null!==(e=adherev_util_1.default.isObject)&&void 0!==e&&e.call(adherev_util_1.default,r)?(0,vue_1.h)(r):null!==(e=adherev_util_1.default.isFunction)&&void 0!==e&&e.call(adherev_util_1.default,r)?r():r||""])]),(0,_vue.createVNode)("div",{class:"".concat(selectorPrefix,"-standard-content-media-r")},[null!==(e=adherev_util_1.default.isObject)&&void 0!==e&&e.call(adherev_util_1.default,l)?(0,vue_1.h)(l):null!==(e=adherev_util_1.default.isFunction)&&void 0!==e&&e.call(adherev_util_1.default,l)?l():l||""])])]),u?(0,_vue.createVNode)("span",{class:"closeBtn"},null):null])}}).mount(s)})},e.prototype.build=function(e,t){var i,n=this,o=(this.notifications[e]=t,null!==(i=null==this?void 0:this.notificationContainer)&&void 0!==i&&i.appendChild(t),n.trigger("onCreate",t),t.style.height="auto",t.clientHeight);return"material"===n.config.style?o<40&&(o=40):"ios"===n.config.style&&o<70&&(o=70),t.style.height="0",setTimeout(function(){t.style.height="".concat(o,"px"),t.querySelector(".info").style.opacity="1",n.trigger("onShow",t)},100),e},e.prototype.trigger=function(e,t){this.config[e]&&this.config[e](t)},e.prototype.show=function(e){return this.buildCustom(e)},e.prototype.showStandard=function(e){return this.buildStandard(e)},e.prototype.close=function(e){this.closeNotification(e)},e}(),NotificationFactory=(exports.Notification=Notification,{build:function(e,t){return new Notification(e,t)}});exports.default=NotificationFactory;
//# sourceMappingURL=notification.js.map
