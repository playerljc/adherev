"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.promise.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),uuid_1=require("uuid"),vue_1=tslib_1.__importDefault(require("vue")),vue_fragment_1=require("vue-fragment"),adherev_util_1=tslib_1.__importDefault(require("@baifendian/adherev-util")),selectorPrefix="adherev-ui-notification",Notification=function(){function e(e,t){this.config={style:"material",type:"top"},this.notifications={},this.key=!1,this.container=e,this.config=Object.assign(this.config,t),this.createInnerContainer(),this.init(),this.initEvents()}return e.prototype.createInnerContainer=function(){var e,t=this.container.querySelector("."+selectorPrefix);t&&null!==(e=null==t?void 0:t.parentElement)&&void 0!==e&&e.removeChild(t),this.innerContainer=document.createElement("div"),this.innerContainer.className=selectorPrefix,this.notificationContainer=document.createElement("ul"),this.innerContainer.appendChild(this.notificationContainer),this.container.appendChild(this.innerContainer)},e.prototype.init=function(){var e,t=this.config;null!==(e=null==this?void 0:this.innerContainer)&&void 0!==e&&e.classList.remove([selectorPrefix].concat(["top"===t.type?"bottom":"top",t.style]).join("-")),null!==(e=null==this?void 0:this.innerContainer)&&void 0!==e&&e.classList.add([selectorPrefix].concat([t.type,t.style]).join("-"))},e.prototype.initEvents=function(){var e,n=this;null!==(e=null==this?void 0:this.notificationContainer)&&void 0!==e&&e.addEventListener("click",function(e){var t,i;null!==(i=null===(t=null===(i=e.target)||void 0===i?void 0:i.classList)||void 0===t?void 0:t.contains)&&void 0!==i&&i.call(t,"closeBtn")&&(e=adherev_util_1.default.getTopDom(e.target,selectorPrefix+"-item"),n.closeNotification.call(n,e.dataset.id))})},e.prototype.closeNotification=function(e){var i,n=this;n.key||(n.key=!0,i=n.notifications[e],n.trigger("onCloseBefore",i),i.addEventListener("transitionend",function e(){var t;i.removeEventListener("transitionend",e),null!==(t=null==n?void 0:n.notificationContainer)&&void 0!==t&&t.removeChild(i),n.key=!1,n.trigger("onCloseAfter",i)}),i.style.overflow="hidden",i.querySelector(".info").style.opacity="0",i.style.height="0")},e.prototype.buildCustom=function(a){var l=this;return new Promise(function(e){var t=a.closed,i=a.children,n=uuid_1.v1(),o=document.createElement("li");o.className=selectorPrefix+"-item",o.dataset.id=n;var r=document.createElement("div");o.appendChild(r);var s=l;new vue_1.default({mounted:function(){e(s.build(n,o))},render:function(e){return e(vue_fragment_1.Fragment,[e("div",{class:"info"},[adherev_util_1.default.isObject(i)?e(i):adherev_util_1.default.isFunction(i)?i(e):i||""]),t?e("span",{class:"closeBtn"}):null])}}).$mount(r)})},e.prototype.buildStandard=function(f){var v=this;return new Promise(function(e){var t=f.headerLabel,i=void 0===t?"":t,t=f.headerIcon,n=void 0===t?"":t,t=f.title,o=void 0===t?"":t,t=f.text,r=void 0===t?"":t,t=f.icon,s=void 0===t?"":t,t=f.closed,a=void 0===t||t,t=f.datetime,l=void 0===t?"":t,d=uuid_1.v1(),c=document.createElement("li");c.className=selectorPrefix+"-item",c.dataset.id=d;t=document.createElement("div");c.appendChild(t);var u=v;new vue_1.default({mounted:function(){e(u.build(d,c))},render:function(e){return e(vue_fragment_1.Fragment,[e("div",{class:"info"},[e("div",{class:selectorPrefix+"-standard-header"},[e("div",{class:selectorPrefix+"-standard-header-icon"},[n?e("img",{attrs:{src:n,alt:""}}):null]),e("div",{class:selectorPrefix+"-standard-header-label"},[adherev_util_1.default.isObject(i)?e(i):adherev_util_1.default.isFunction(i)?i(e):i||""])]),e("div",{class:selectorPrefix+"-standard-content"},[e("div",{class:selectorPrefix+"-standard-content-media-l"},[s?e("img",{attrs:{src:s,alt:""}}):null]),e("div",{class:selectorPrefix+"-standard-content-row"},[e("div",{class:selectorPrefix+"-standard-content-row-title"},[adherev_util_1.default.isObject(o)?e(o):adherev_util_1.default.isFunction(o)?o(e):o||""]),e("div",{class:selectorPrefix+"-standard-content-row-text"},[adherev_util_1.default.isObject(r)?e(r):adherev_util_1.default.isFunction(r)?r(e):r||""])]),e("div",{class:selectorPrefix+"-standard-content-media-r"},[adherev_util_1.default.isObject(l)?e(l):adherev_util_1.default.isFunction(l)?l(e):l||""])])]),a?e("span",{class:"closeBtn"}):null])}}).$mount(t)})},e.prototype.build=function(e,t){var i,n=this;this.notifications[e]=t,null!==(i=null==this?void 0:this.notificationContainer)&&void 0!==i&&i.appendChild(t),n.trigger("onCreate",t),t.style.height="auto";var o=t.clientHeight;return"material"===n.config.style?o<40&&(o=40):"ios"===n.config.style&&o<70&&(o=70),t.style.height="0",setTimeout(function(){t.style.height=o+"px",t.querySelector(".info").style.opacity="1",n.trigger("onShow",t)},100),e},e.prototype.trigger=function(e,t){this.config[e]&&this.config[e](t)},e.prototype.show=function(e){return this.buildCustom(e)},e.prototype.showStandard=function(e){return this.buildStandard(e)},e.prototype.close=function(e){this.closeNotification(e)},e}();exports.default={build:function(e,t){return new Notification(e,t)}};
//# sourceMappingURL=notification.js.map
