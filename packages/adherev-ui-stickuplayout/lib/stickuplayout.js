"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),classnames_1=tslib_1.__importDefault(require("classnames")),vue_1=require("vue"),vue_types_1=require("vue-types"),selectorPrefix="adherev-ui-stickuplayout",stickupLayoutProps={fixedClassName:(0,vue_types_1.string)().def(""),fixedStyle:(0,vue_types_1.object)().def({}),innerClassName:(0,vue_types_1.string)().def(""),innerStyle:(0,vue_types_1.object)().def({})};exports.default=(0,vue_1.defineComponent)({name:"adv-stickuplayout",props:stickupLayoutProps,emits:["change"],setup:function(n,e){function l(){var e;v=!1,f=[],u=null==(e=r.value)?void 0:e.querySelectorAll(".".concat(selectorPrefix,"-item-header")),m(),_(),null!=(e=d.value)&&e.removeEventListener("scroll",y),null!=(e=d.value)&&e.addEventListener("scroll",y)}function o(e,n){e=e.start+u[e.index].offsetHeight,0===(n=void 0===n?300:n)?d.value.scrollTop=e:h(e,n)}function i(){c||((c=document.createElement("div")).className="".concat(selectorPrefix,"-mask"),window.document.body.appendChild(c))}var u,t=e.slots,s=e.emit,e=e.expose,r=(0,vue_1.ref)(),a=(0,vue_1.ref)(),d=(0,vue_1.ref)(),v=!1,c=null,f=[],p=null,m=function(){var e,n=0;f=[],p=null;for(var l=0,t=u.length;l<t;l++){var o=u[l],r=n,i=void 0,i=l!==t-1?u[l+1].offsetTop-o.offsetHeight:null==(e=d.value)?void 0:e.scrollHeight;if(f.push({start:r,end:i,dom:o,index:l}),(n=i)>(null==(e=d.value)?void 0:e.scrollHeight)-(null==(r=d.value)?void 0:r.offsetHeight))break}},_=function(){for(var e,n,l=null==(e=d.value)?void 0:e.scrollTop,t=0,o=f.length-1;t<=o&&t<=f.length-1&&o<=f.length-1;){var r,i=f[r=o+t>>1];if(l>=i.start&&l<i.end){n=i;break}l<i.start?o=r-1:t=1+r}if(n){if(p&&p.index===n.index)return!1;p=n,a.value.innerHTML=n.dom.outerHTML,s("change",n.index)}},y=function(){return _()},h=function(l,e){var n,t,o,r;void 0===l&&(l=0),void 0===e&&(e=300),v||(i(),v=!0,c.style.display="block",t=null==(n=d.value)?void 0:n.scrollTop,o=t,r=(null==(n=d.value)?void 0:n.scrollHeight)/(e/((null==(n=window.screen)?void 0:n.updateInterval)||16.7)+(e%((null==(n=window.screen)?void 0:n.updateInterval)||16.7)!=0?1:0)),window.requestAnimationFrame(function e(){function n(){v=!1,c.style.display="none"}t<l?l<o+r?o=l:o+=r:o-r<l?o=l:o-=r,d.value.scrollTop=o,t<l?l<=o?n():"undefined"!=typeof window&&window.requestAnimationFrame(e):o<=l?n():"undefined"!=typeof window&&window.requestAnimationFrame(e)}))};return e({refresh:l,scrollToByIndex:function(e,n){void 0===n&&(n=300);for(var l,t=0;t<f.length;t++)if(f[t].index===e){l=f[t];break}l=l||f[f.length-1],o(l,n)},scrollToByHeaderEl:function(e,n){void 0===n&&(n=300);for(var l,t=0;t<f.length;t++)if(f[t].dom===e){l=f[t],0;break}l=l||f[f.length-1],o(l,n)}}),(0,vue_1.onMounted)(function(){l()}),(0,vue_1.onUpdated)(function(){l()}),(0,vue_1.onBeforeMount)(function(){var e,n;c&&null!=(n=null==(e=null==c?void 0:c.parentElement)?void 0:e.removeChild)&&n.call(e,c)}),function(){var e;return(0,_vue.createVNode)("div",{class:selectorPrefix,ref:r},[(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-fixed"),n.fixedClassName||""),style:n.fixedStyle,ref:a},null),(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-inner"),n.innerClassName||""),style:n.innerStyle,ref:d},[null==(e=null==t?void 0:t.default)?void 0:e.call(t)])])}}});
//# sourceMappingURL=stickuplayout.js.map
