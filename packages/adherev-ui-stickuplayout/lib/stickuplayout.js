"use strict";var _vue=require("vue"),tslib_1=(require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),Object.defineProperty(exports,"__esModule",{value:!0}),require("tslib")),classnames_1=(0,tslib_1.__importDefault)(require("classnames")),vue_1=require("vue"),vue_types_1=require("vue-types"),selectorPrefix="adherev-ui-stickuplayout",stickupLayoutProps={fixedClassName:(0,vue_types_1.string)().def(""),fixedStyle:(0,vue_types_1.object)().def({}),innerClassName:(0,vue_types_1.string)().def(""),innerStyle:(0,vue_types_1.object)().def({})};exports.default=(0,vue_1.defineComponent)({name:"adv-stickuplayout",props:stickupLayoutProps,setup:function(o,e){function l(){var e;r=!1,a=[],u=null===(e=t.value)||void 0===e?void 0:e.querySelectorAll(".".concat(selectorPrefix,"-item-header")),m(),_(),null!==(e=s.value)&&void 0!==e&&e.removeEventListener("scroll",y),null!==(e=s.value)&&void 0!==e&&e.addEventListener("scroll",y)}function i(e,o){e=e.start+u[e.index].offsetHeight,0===(o=void 0===o?300:o)?s.value.scrollTop=e:x(e,o)}function c(){d||((d=document.createElement("div")).className="".concat(selectorPrefix,"-mask"),window.document.body.appendChild(d))}var u,n=e.slots,f=e.emit,e=e.expose,t=(0,vue_1.ref)(),p=(0,vue_1.ref)(),s=(0,vue_1.ref)(),r=!1,d=null,a=[],v=null,m=function(){var e,o=0;a=[],v=null;for(var l=0,n=u.length;l<n;l++){var i=u[l],t=o,r=void 0,r=l!==n-1?u[l+1].offsetTop-i.offsetHeight:null===(e=s.value)||void 0===e?void 0:e.scrollHeight;if(a.push({start:t,end:r,dom:i,index:l}),(o=r)>(null===(e=s.value)||void 0===e?void 0:e.scrollHeight)-(null===(t=s.value)||void 0===t?void 0:t.offsetHeight))break}},_=function(){for(var e,o,l=null===(e=s.value)||void 0===e?void 0:e.scrollTop,n=0,i=a.length-1;n<=i&&n<=a.length-1&&i<=a.length-1;){var t,r=a[t=i+n>>1];if(l>=r.start&&l<r.end){o=r;break}l<r.start?i=t-1:n=1+t}if(o){if(v&&v.index===o.index)return!1;v=o,p.value.innerHTML=o.dom.outerHTML,f("change",o.index)}},y=function(){return _()},x=function(l,e){var o,n,i,t;void 0===l&&(l=0),void 0===e&&(e=300),r||(c(),r=!0,d.style.display="block",n=null===(o=s.value)||void 0===o?void 0:o.scrollTop,i=n,t=(null===(o=s.value)||void 0===o?void 0:o.scrollHeight)/(e/((null===(o=window.screen)||void 0===o?void 0:o.updateInterval)||16.7)+(e%((null===(o=window.screen)||void 0===o?void 0:o.updateInterval)||16.7)!=0?1:0)),window.requestAnimationFrame(function e(){function o(){r=!1,d.style.display="none"}n<l?l<i+t?i=l:i+=t:i-t<l?i=l:i-=t,s.value.scrollTop=i,n<l?l<=i?o():"undefined"!=typeof window&&window.requestAnimationFrame(e):i<=l?o():"undefined"!=typeof window&&window.requestAnimationFrame(e)}))};return e({refresh:l,scrollToByIndex:function(e,o){void 0===o&&(o=300);for(var l,n=0;n<a.length;n++)if(a[n].index===e){l=a[n];break}if(!l)return!1;i(l,o)},scrollToByHeaderEl:function(e,o){void 0===o&&(o=300);for(var l,n=0;n<a.length;n++)if(a[n].dom===e){l=a[n],0;break}if(!l)return!1;i(l,o)}}),(0,vue_1.onMounted)(function(){l()}),(0,vue_1.onUpdated)(function(){l()}),(0,vue_1.onBeforeMount)(function(){var e,o;d&&null!==(o=null===(e=null==d?void 0:d.parentElement)||void 0===e?void 0:e.removeChild)&&void 0!==o&&o.call(e,d)}),function(){var e;return(0,_vue.createVNode)("div",{class:selectorPrefix,ref:t},[(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-fixed"),o.fixedClassName.split(/\s+/)),style:o.fixedStyle,ref:p},null),(0,_vue.createVNode)("div",{class:(0,classnames_1.default)("".concat(selectorPrefix,"-inner"),o.innerClassName.split(/\s+/)),style:o.innerStyle,ref:s},[null===(e=null==n?void 0:n.default)||void 0===e?void 0:e.call(n)])])}}});
//# sourceMappingURL=stickuplayout.js.map
