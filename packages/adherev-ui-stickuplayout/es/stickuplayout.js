import{createVNode as _createVNode}from"vue";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import classNames from"classnames";import{defineComponent,onBeforeMount,onMounted,onUpdated,ref}from"vue";import{object,string}from"vue-types";var selectorPrefix="adherev-ui-stickuplayout",stickupLayoutProps={fixedClassName:string().def(""),fixedStyle:object().def({}),innerClassName:string().def(""),innerStyle:object().def({})};export default defineComponent({name:"adv-stickuplayout",props:stickupLayoutProps,setup:function(o,e){function n(){var e;r=!1,u=[],d=null===(e=t.value)||void 0===e?void 0:e.querySelectorAll(".".concat(selectorPrefix,"-item-header")),p(),x(),null!==(e=s.value)&&void 0!==e&&e.removeEventListener("scroll",y),null!==(e=s.value)&&void 0!==e&&e.addEventListener("scroll",y)}function l(e,o){e=e.start+d[e.index].offsetHeight,0===(o=void 0===o?300:o)?s.value.scrollTop=e:h(e,o)}function f(){a||((a=document.createElement("div")).className="".concat(selectorPrefix,"-mask"),window.document.body.appendChild(a))}var d,i=e.slots,v=e.emit,e=e.expose,t=ref(),m=ref(),s=ref(),r=!1,a=null,u=[],c=null,p=function(){var e,o=0;u=[],c=null;for(var n=0,i=d.length;n<i;n++){var l=d[n],t=o,r=void 0,r=n!==i-1?d[n+1].offsetTop-l.offsetHeight:null===(e=s.value)||void 0===e?void 0:e.scrollHeight;if(u.push({start:t,end:r,dom:l,index:n}),(o=r)>(null===(e=s.value)||void 0===e?void 0:e.scrollHeight)-(null===(t=s.value)||void 0===t?void 0:t.offsetHeight))break}},x=function(){for(var e,o,n=null===(e=s.value)||void 0===e?void 0:e.scrollTop,i=0,l=u.length-1;i<=l&&i<=u.length-1&&l<=u.length-1;){var t,r=u[t=l+i>>1];if(n>=r.start&&n<r.end){o=r;break}n<r.start?l=t-1:i=1+t}if(o){if(c&&c.index===o.index)return!1;c=o,m.value.innerHTML=o.dom.outerHTML,v("change",o.index)}},y=function(){return x()},h=function(n,e){var o,i,l,t;void 0===n&&(n=0),void 0===e&&(e=300),r||(f(),r=!0,a.style.display="block",i=null===(o=s.value)||void 0===o?void 0:o.scrollTop,l=i,t=(null===(o=s.value)||void 0===o?void 0:o.scrollHeight)/(e/((null===(o=window.screen)||void 0===o?void 0:o.updateInterval)||16.7)+(e%((null===(o=window.screen)||void 0===o?void 0:o.updateInterval)||16.7)!=0?1:0)),window.requestAnimationFrame(function e(){function o(){r=!1,a.style.display="none"}i<n?n<l+t?l=n:l+=t:l-t<n?l=n:l-=t,s.value.scrollTop=l,i<n?n<=l?o():"undefined"!=typeof window&&window.requestAnimationFrame(e):l<=n?o():"undefined"!=typeof window&&window.requestAnimationFrame(e)}))};return e({refresh:n,scrollToByIndex:function(e,o){void 0===o&&(o=300);for(var n,i=0;i<u.length;i++)if(u[i].index===e){n=u[i];break}if(!n)return!1;l(n,o)},scrollToByHeaderEl:function(e,o){void 0===o&&(o=300);for(var n,i=0;i<u.length;i++)if(u[i].dom===e){n=u[i],0;break}if(!n)return!1;l(n,o)}}),onMounted(function(){n()}),onUpdated(function(){n()}),onBeforeMount(function(){var e,o;a&&null!==(o=null===(e=null==a?void 0:a.parentElement)||void 0===e?void 0:e.removeChild)&&void 0!==o&&o.call(e,a)}),function(){var e;return _createVNode("div",{class:selectorPrefix,ref:t},[_createVNode("div",{class:classNames("".concat(selectorPrefix,"-fixed"),o.fixedClassName.split(/\s+/)),style:o.fixedStyle,ref:m},null),_createVNode("div",{class:classNames("".concat(selectorPrefix,"-inner"),o.innerClassName.split(/\s+/)),style:o.innerStyle,ref:s},[null===(e=null==i?void 0:i.default)||void 0===e?void 0:e.call(i)])])}}});
//# sourceMappingURL=stickuplayout.js.map
