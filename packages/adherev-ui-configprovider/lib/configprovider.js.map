{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_hooks_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-hooks\"));\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\nvar adherev_util_mixins_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-mixins\"));\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\nvar props = {\n  intl: (0, vue_types_1.object)().def(function () {\n    return {\n      lang: 'zh_CN',\n      locales: {},\n      prefix: 'local',\n      mainLanguage: 'zh_CN'\n    };\n  })\n};\nvar forceUpdate = adherev_util_mixins_1.default.forceUpdate;\nvar useForceUpdate = adherev_ui_hooks_1.default.useForceUpdate;\nvar ConfigProvider = (0, vue_1.defineComponent)({\n  name: 'adv-configprovider',\n  mixins: [forceUpdate],\n  props: props,\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    var isIntlInit = (0, vue_1.ref)(false);\n    var $forceUpdate = useForceUpdate();\n    var init = function init() {\n      return adherev_util_intl_1.default.init({\n        prefix: props.intl.prefix || 'local',\n        currentLocale: props.intl.lang,\n        locales: props.intl.locales || {},\n        mainLanguage: props.intl.mainLanguage || 'zh_CN'\n      }, adherev_util_intl_1.default.isInit()).then(function () {\n        adherev_util_resource_1.default.Dict.value.LocalsMoment.value[props.intl.lang]();\n        if (!isIntlInit.value) {\n          isIntlInit.value = true;\n        } else {\n          $forceUpdate();\n        }\n      });\n    };\n    (0, vue_1.watch)([function () {\n      return props.intl.lang;\n    }, function () {\n      return props.intl.locales;\n    }, function () {\n      return props.intl.prefix;\n    }, function () {\n      return props.intl.mainLanguage;\n    }], function () {\n      return init();\n    });\n    (0, vue_1.onMounted)(function () {\n      return init();\n    });\n    return function () {\n      var _a;\n      return isIntlInit.value ? (_a = slots === null || slots === void 0 ? void 0 : slots.default) === null || _a === void 0 ? void 0 : _a.call(slots) : null;\n    };\n  }\n});\nexports.default = ConfigProvider;"],"names":["require","Object","defineProperty","exports","value","tslib_1","vue_1","vue_types_1","adherev_ui_hooks_1","__importDefault","adherev_util_intl_1","adherev_util_mixins_1","adherev_util_resource_1","props","intl","object","def","lang","locales","prefix","mainLanguage","forceUpdate","default","useForceUpdate","ConfigProvider","defineComponent","name","mixins","setup","_a","init","currentLocale","isInit","then","Dict","LocalsMoment","isIntlInit","$forceUpdate","slots","ref","watch","onMounted","call"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACD,IAAIC,QAAUL,QAAQ,OAAO,EACzBM,MAAQN,QAAQ,KAAK,EACrBO,YAAcP,QAAQ,WAAW,EACjCQ,mBAAqBH,QAAQI,gBAAgBT,QAAQ,8BAA8B,CAAC,EACpFU,oBAAsBL,QAAQI,gBAAgBT,QAAQ,+BAA+B,CAAC,EACtFW,sBAAwBN,QAAQI,gBAAgBT,QAAQ,iCAAiC,CAAC,EAC1FY,wBAA0BP,QAAQI,gBAAgBT,QAAQ,mCAAmC,CAAC,EAC9Fa,MAAQ,CACVC,MAAM,EAAIP,YAAYQ,QAAQ,EAAEC,IAAI,WAClC,MAAO,CACLC,KAAM,QACNC,QAAS,GACTC,OAAQ,QACRC,aAAc,OAChB,CACF,CAAC,CACH,EACIC,YAAcV,sBAAsBW,QAAQD,YAC5CE,eAAiBf,mBAAmBc,QAAQC,eAC5CC,gBAAiB,EAAIlB,MAAMmB,iBAAiB,CAC9CC,KAAM,qBACNC,OAAQ,CAACN,aACTR,MAAOA,MACPe,MAAO,SAAef,EAAOgB,GAIhB,SAAPC,IACF,OAAOpB,oBAAoBY,QAAQQ,KAAK,CACtCX,OAAQN,EAAMC,KAAKK,QAAU,QAC7BY,cAAelB,EAAMC,KAAKG,KAC1BC,QAASL,EAAMC,KAAKI,SAAW,GAC/BE,aAAcP,EAAMC,KAAKM,cAAgB,OAC3C,EAAGV,oBAAoBY,QAAQU,OAAO,CAAC,EAAEC,KAAK,WAC5CrB,wBAAwBU,QAAQY,KAAK9B,MAAM+B,aAAa/B,MAAMS,EAAMC,KAAKG,MAAM,EAC1EmB,EAAWhC,MAGdiC,EAAa,EAFbD,EAAWhC,MAAQ,CAAA,CAIvB,CAAC,CACH,CAjBA,IAAIkC,EAAQT,EAAGS,MACXF,GAAa,EAAI9B,MAAMiC,KAAK,CAAA,CAAK,EACjCF,EAAed,eAAe,EA8BlC,OAdA,EAAIjB,MAAMkC,OAAO,CAAC,WAChB,OAAO3B,EAAMC,KAAKG,IACpB,EAAG,WACD,OAAOJ,EAAMC,KAAKI,OACpB,EAAG,WACD,OAAOL,EAAMC,KAAKK,MACpB,EAAG,WACD,OAAON,EAAMC,KAAKM,YACpB,GACSU,CACR,GACD,EAAIxB,MAAMmC,WACDX,CACR,EACM,WACL,IAAID,EACJ,OAAOO,EAAWhC,MAAQ,OAACyB,EAAKS,MAAAA,EAAqC,KAAA,EAASA,EAAMhB,SAAqC,KAAA,EAASO,EAAGa,KAAKJ,CAAK,EAAI,IACrJ,CACF,CACF,CAAC,EACDnC,QAAQmB,QAAUE"}