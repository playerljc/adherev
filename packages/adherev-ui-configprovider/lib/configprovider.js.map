{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar lodash_debounce_1 = tslib_1.__importDefault(require(\"lodash.debounce\"));\n\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\n\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\n\nvar ConfigProvider = {\n  name: 'adv-configprovider',\n  props: {\n    intl: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['intlInit', 'propsChange'],\n  data: function data() {\n    return {\n      isIntlInit: false,\n      $propsChangeHandler: null\n    };\n  },\n  provide: function provide() {\n    return {};\n  },\n  watch: {\n    'intl.lang': function intlLang() {\n      this.$init();\n    },\n    'intl.locales': function intlLocales() {\n      this.$init();\n    },\n    'intl.prefix': function intlPrefix() {\n      this.$init();\n    },\n    'intl.mainLanguage': function intlMainLanguage() {\n      this.$init();\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    this.$data.$propsChangeHandler = lodash_debounce_1.default(function () {\n      _this.$emit('propsChange');\n    }, 200);\n  },\n  methods: {\n    $init: function $init() {\n      var _this = this;\n\n      adherev_util_intl_1.default.init({\n        prefix: this.intl.prefix || 'local',\n        currentLocale: this.intl.lang,\n        locales: this.intl.locales || {},\n        mainLanguage: this.intl.mainLanguage || 'zh_CN'\n      }, adherev_util_intl_1.default.isInit()).then(function () {\n        adherev_util_resource_1.default.Dict.value.LocalsMoment.value[_this.intl.lang]();\n\n        if (!_this.isIntlInit) {\n          _this.isIntlInit = true;\n\n          _this.$nextTick(function () {\n            this.$emit('intlInit');\n          });\n        } else {\n          _this.$forceUpdate();\n\n          _this.$nextTick(_this.$data.$propsChangeHandler);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.$init();\n  },\n  render: function render(h) {\n    var _a;\n\n    return this.isIntlInit ? (_a = this === null || this === void 0 ? void 0 : this.$slots) === null || _a === void 0 ? void 0 : _a.default : null;\n  }\n};\nexports.default = ConfigProvider;"],"names":["require","Object","defineProperty","exports","value","tslib_1","lodash_debounce_1","__importDefault","adherev_util_intl_1","adherev_util_resource_1","ConfigProvider","name","props","intl","type","default","emits","data","isIntlInit","$propsChangeHandler","provide","watch","intl.lang","this","$init","intl.locales","intl.prefix","intl.mainLanguage","created","_this","$data","$emit","methods","init","prefix","currentLocale","lang","locales","mainLanguage","isInit","then","Dict","LocalsMoment","$forceUpdate","$nextTick","mounted","render","h","_a","$slots"],"mappings":"aAEAA,QAAQ,gDAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,kBAAoBD,QAAQE,gBAAgBP,QAAQ,oBAEpDQ,oBAAsBH,QAAQE,gBAAgBP,QAAQ,kCAEtDS,wBAA0BJ,QAAQE,gBAAgBP,QAAQ,sCAE1DU,eAAiB,CACnBC,KAAM,qBACNC,MAAO,CACLC,KAAM,CACJC,KAAMb,OACNc,QAAS,WACP,MAAO,MAIbC,MAAO,CAAC,WAAY,eACpBC,KAAM,WACJ,MAAO,CACLC,YAAY,EACZC,oBAAqB,OAGzBC,QAAS,WACP,MAAO,IAETC,MAAO,CACLC,YAAa,WACXC,KAAKC,SAEPC,eAAgB,WACdF,KAAKC,SAEPE,cAAe,WACbH,KAAKC,SAEPG,oBAAqB,WACnBJ,KAAKC,UAGTI,QAAS,WACP,IAAIC,EAAQN,KAEZA,KAAKO,MAAMX,oBAAsBb,kBAAkBS,QAAQ,WACzDc,EAAME,MAAM,gBACX,MAELC,QAAS,CACPR,MAAO,WACL,IAAIK,EAAQN,KAEZf,oBAAoBO,QAAQkB,KAAK,CAC/BC,OAAQX,KAAKV,KAAKqB,QAAU,QAC5BC,cAAeZ,KAAKV,KAAKuB,KACzBC,QAASd,KAAKV,KAAKwB,SAAW,GAC9BC,aAAcf,KAAKV,KAAKyB,cAAgB,SACvC9B,oBAAoBO,QAAQwB,UAAUC,KAAK,WAC5C/B,wBAAwBM,QAAQ0B,KAAKrC,MAAMsC,aAAatC,MAAMyB,EAAMhB,KAAKuB,QAEpEP,EAAMX,YAOTW,EAAMc,eAENd,EAAMe,UAAUf,EAAMC,MAAMX,uBAR5BU,EAAMX,YAAa,EAEnBW,EAAMe,UAAU,WACdrB,KAAKQ,MAAM,mBAUrBc,QAAS,WACPtB,KAAKC,SAEPsB,OAAQ,SAAgBC,GACtB,IAAIC,EAEJ,OAAOzB,KAAKL,WAAgF,QAAlE8B,EAAKzB,MAAAA,UAAmC,EAASA,KAAK0B,cAA2B,IAAPD,OAAgB,EAASA,EAAGjC,QAAU,OAG9IZ,QAAQY,QAAUL"}