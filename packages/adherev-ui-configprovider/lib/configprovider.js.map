{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.configProviderProps = void 0;\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_hooks_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-hooks\"));\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\nvar adherev_util_mixins_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-mixins\"));\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\nexports.configProviderProps = {\n  intl: (0, vue_types_1.object)().def(function () {\n    return {\n      lang: 'zh_CN',\n      locales: {},\n      prefix: 'local',\n      mainLanguage: 'zh_CN'\n    };\n  })\n};\nvar forceUpdate = adherev_util_mixins_1.default.forceUpdate;\nvar useForceUpdate = adherev_ui_hooks_1.default.useForceUpdate;\nvar ConfigProvider = (0, vue_1.defineComponent)({\n  name: 'adv-configprovider',\n  mixins: [forceUpdate],\n  props: exports.configProviderProps,\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    var isIntlInit = (0, vue_1.ref)(false);\n    var $forceUpdate = useForceUpdate();\n    var init = function init() {\n      return adherev_util_intl_1.default.init({\n        prefix: props.intl.prefix || 'local',\n        currentLocale: props.intl.lang,\n        locales: props.intl.locales || {},\n        mainLanguage: props.intl.mainLanguage || 'zh_CN'\n      }, adherev_util_intl_1.default.isInit()).then(function () {\n        adherev_util_resource_1.default.Dict.value.LocalsMoment.value[props.intl.lang]();\n        if (!isIntlInit.value) {\n          isIntlInit.value = true;\n        } else {\n          $forceUpdate();\n        }\n      });\n    };\n    (0, vue_1.watch)([function () {\n      return props.intl.lang;\n    }, function () {\n      return props.intl.locales;\n    }, function () {\n      return props.intl.prefix;\n    }, function () {\n      return props.intl.mainLanguage;\n    }], function () {\n      return init();\n    });\n    (0, vue_1.onMounted)(function () {\n      return init();\n    });\n    return function () {\n      var _a;\n      return isIntlInit.value ? (_a = slots === null || slots === void 0 ? void 0 : slots.default) === null || _a === void 0 ? void 0 : _a.call(slots) : null;\n    };\n  }\n});\nexports.default = ConfigProvider;"],"names":["require","Object","defineProperty","exports","value","configProviderProps","tslib_1","vue_1","vue_types_1","adherev_ui_hooks_1","__importDefault","adherev_util_intl_1","adherev_util_mixins_1","adherev_util_resource_1","forceUpdate","intl","object","def","lang","locales","prefix","mainLanguage","default","useForceUpdate","ConfigProvider","defineComponent","name","mixins","props","setup","_a","init","currentLocale","isInit","then","Dict","LocalsMoment","isIntlInit","$forceUpdate","slots","ref","watch","onMounted","call"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACDD,QAAQE,oBAAsB,KAAA,EAC9B,IAAIC,QAAUN,QAAQ,OAAO,EACzBO,MAAQP,QAAQ,KAAK,EACrBQ,YAAcR,QAAQ,WAAW,EACjCS,mBAAqBH,QAAQI,gBAAgBV,QAAQ,8BAA8B,CAAC,EACpFW,oBAAsBL,QAAQI,gBAAgBV,QAAQ,+BAA+B,CAAC,EACtFY,sBAAwBN,QAAQI,gBAAgBV,QAAQ,iCAAiC,CAAC,EAC1Fa,wBAA0BP,QAAQI,gBAAgBV,QAAQ,mCAAmC,CAAC,EAW9Fc,aAVJX,QAAQE,oBAAsB,CAC5BU,MAAM,EAAIP,YAAYQ,QAAQ,EAAEC,IAAI,WAClC,MAAO,CACLC,KAAM,QACNC,QAAS,GACTC,OAAQ,QACRC,aAAc,OAChB,CACF,CAAC,CACH,EACkBT,sBAAsBU,QAAQR,aAC5CS,eAAiBd,mBAAmBa,QAAQC,eAC5CC,gBAAiB,EAAIjB,MAAMkB,iBAAiB,CAC9CC,KAAM,qBACNC,OAAQ,CAACb,aACTc,MAAOzB,QAAQE,oBACfwB,MAAO,SAAeD,EAAOE,GAIhB,SAAPC,IACF,OAAOpB,oBAAoBW,QAAQS,KAAK,CACtCX,OAAQQ,EAAMb,KAAKK,QAAU,QAC7BY,cAAeJ,EAAMb,KAAKG,KAC1BC,QAASS,EAAMb,KAAKI,SAAW,GAC/BE,aAAcO,EAAMb,KAAKM,cAAgB,OAC3C,EAAGV,oBAAoBW,QAAQW,OAAO,CAAC,EAAEC,KAAK,WAC5CrB,wBAAwBS,QAAQa,KAAK/B,MAAMgC,aAAahC,MAAMwB,EAAMb,KAAKG,MAAM,EAC1EmB,EAAWjC,MAGdkC,EAAa,EAFbD,EAAWjC,MAAQ,CAAA,CAIvB,CAAC,CACH,CAjBA,IAAImC,EAAQT,EAAGS,MACXF,GAAa,EAAI9B,MAAMiC,KAAK,CAAA,CAAK,EACjCF,EAAef,eAAe,EA8BlC,OAdA,EAAIhB,MAAMkC,OAAO,CAAC,WAChB,OAAOb,EAAMb,KAAKG,IACpB,EAAG,WACD,OAAOU,EAAMb,KAAKI,OACpB,EAAG,WACD,OAAOS,EAAMb,KAAKK,MACpB,EAAG,WACD,OAAOQ,EAAMb,KAAKM,YACpB,GACSU,CACR,GACD,EAAIxB,MAAMmC,WACDX,CACR,EACM,WACL,IAAID,EACJ,OAAOO,EAAWjC,MAAQ,OAAC0B,EAAKS,MAAAA,EAAqC,KAAA,EAASA,EAAMjB,SAAqC,KAAA,EAASQ,EAAGa,KAAKJ,CAAK,EAAI,IACrJ,CACF,CACF,CAAC,EACDpC,QAAQmB,QAAUE"}