{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar vue_1 = require(\"vue\");\nvar vue_types_1 = require(\"vue-types\");\nvar adherev_ui_hooks_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-ui-hooks\"));\nvar adherev_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-intl\"));\nvar adherev_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adherev-util-resource\"));\nvar props = {\n  intl: (0, vue_types_1.object)().def(function () {\n    return {\n      lang: 'zh_CN',\n      locales: {},\n      prefix: 'local'\n    };\n  })\n};\nvar ConfigProvider = (0, vue_1.defineComponent)({\n  name: 'adv-configprovider',\n  props: props,\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    var isIntlInit = (0, vue_1.ref)(false);\n    var useForceUpdate = adherev_ui_hooks_1.default.useForceUpdate;\n    var init = function init() {\n      return adherev_util_intl_1.default.init({\n        prefix: props.intl.prefix || 'local',\n        currentLocale: props.intl.lang,\n        locales: props.intl.locales || {}\n      }, adherev_util_intl_1.default.isInit()).then(function () {\n        adherev_util_resource_1.default.Dict.value.LocalsMoment.value[props.intl.lang]();\n        if (!isIntlInit.value) {\n          isIntlInit.value = true;\n        } else {\n          useForceUpdate();\n        }\n      });\n    };\n    (0, vue_1.watch)([function () {\n      return props.intl.lang;\n    }, function () {\n      return props.intl.locales;\n    }, function () {\n      return props.intl.prefix;\n    }], function () {\n      return init();\n    });\n    (0, vue_1.onMounted)(function () {\n      return init();\n    });\n    return function () {\n      var _a;\n      return isIntlInit.value ? (_a = slots === null || slots === void 0 ? void 0 : slots.default) === null || _a === void 0 ? void 0 : _a.call(slots) : null;\n    };\n  }\n});\nexports.default = ConfigProvider;"],"names":["require","Object","defineProperty","exports","value","tslib_1","vue_1","vue_types_1","adherev_ui_hooks_1","__importDefault","adherev_util_intl_1","adherev_util_resource_1","props","intl","object","def","lang","locales","prefix","ConfigProvider","defineComponent","name","setup","_a","init","default","currentLocale","isInit","then","Dict","LocalsMoment","isIntlInit","useForceUpdate","slots","ref","watch","onMounted","call"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EACtDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACD,IAAIC,QAAUL,QAAQ,OAAO,EACzBM,MAAQN,QAAQ,KAAK,EACrBO,YAAcP,QAAQ,WAAW,EACjCQ,mBAAqBH,QAAQI,gBAAgBT,QAAQ,8BAA8B,CAAC,EACpFU,oBAAsBL,QAAQI,gBAAgBT,QAAQ,+BAA+B,CAAC,EACtFW,wBAA0BN,QAAQI,gBAAgBT,QAAQ,mCAAmC,CAAC,EAC9FY,MAAQ,CACVC,MAAM,EAAIN,YAAYO,QAAQ,EAAEC,IAAI,WAClC,MAAO,CACLC,KAAM,QACNC,QAAS,GACTC,OAAQ,OACV,CACF,CAAC,CACH,EACIC,gBAAiB,EAAIb,MAAMc,iBAAiB,CAC9CC,KAAM,qBACNT,MAAOA,MACPU,MAAO,SAAeV,EAAOW,GAIhB,SAAPC,IACF,OAAOd,oBAAoBe,QAAQD,KAAK,CACtCN,OAAQN,EAAMC,KAAKK,QAAU,QAC7BQ,cAAed,EAAMC,KAAKG,KAC1BC,QAASL,EAAMC,KAAKI,SAAW,EACjC,EAAGP,oBAAoBe,QAAQE,OAAO,CAAC,EAAEC,KAAK,WAC5CjB,wBAAwBc,QAAQI,KAAKzB,MAAM0B,aAAa1B,MAAMQ,EAAMC,KAAKG,MAAM,EAC1Ee,EAAW3B,MAGd4B,EAAe,EAFfD,EAAW3B,MAAQ,CAAA,CAIvB,CAAC,CACH,CAhBA,IAAI6B,EAAQV,EAAGU,MACXF,GAAa,EAAIzB,MAAM4B,KAAK,CAAA,CAAK,EACjCF,EAAiBxB,mBAAmBiB,QAAQO,eA2BhD,OAZA,EAAI1B,MAAM6B,OAAO,CAAC,WAChB,OAAOvB,EAAMC,KAAKG,IACpB,EAAG,WACD,OAAOJ,EAAMC,KAAKI,OACpB,EAAG,WACD,OAAOL,EAAMC,KAAKK,MACpB,GACSM,CACR,GACD,EAAIlB,MAAM8B,WACDZ,CACR,EACM,WACL,IAAID,EACJ,OAAOQ,EAAW3B,MAAQ,OAACmB,EAAKU,MAAAA,EAAqC,KAAA,EAASA,EAAMR,SAAqC,KAAA,EAASF,EAAGc,KAAKJ,CAAK,EAAI,IACrJ,CACF,CACF,CAAC,EACD9B,QAAQsB,QAAUN"}