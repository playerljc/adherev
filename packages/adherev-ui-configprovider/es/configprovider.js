import{defineComponent,onMounted,ref,watch,nextTick}from"vue";import{object}from"vue-types";import debounce from"lodash.debounce";import Hooks from"@baifendian/adherev-ui-hooks";import Intl from"@baifendian/adherev-util-intl";import Mixins from"@baifendian/adherev-util-mixins";import Resource from"@baifendian/adherev-util-resource";var configProviderProps={intl:object().def(function(){return{lang:"zh_CN",locales:{},prefix:"local",mainLanguage:"zh_CN"}})},forceUpdate=Mixins.forceUpdate,useForceUpdate=Hooks.useForceUpdate,ConfigProvider=defineComponent({name:"adv-configprovider",mixins:[forceUpdate],props:configProviderProps,emits:["intlInit","propsChange"],setup:function(n,e){function i(){return Intl.init({prefix:n.intl.prefix||"local",currentLocale:n.intl.lang,locales:n.intl.locales||{},mainLanguage:n.intl.mainLanguage||"zh_CN"},Intl.isInit()).then(function(){Resource.Dict.value.LocalsMoment.value[n.intl.lang](),r.value?(a(),nextTick(l)):(r.value=!0,nextTick(function(){t("intlInit")}))})}var o=e.slots,t=e.emit,r=ref(!1),a=useForceUpdate(),l=debounce(function(){t("propsChange")},200);return watch([function(){return n.intl.lang},function(){return n.intl.locales},function(){return n.intl.prefix},function(){return n.intl.mainLanguage}],i),onMounted(i),function(){var n;return r.value?null==(n=null==o?void 0:o.default)?void 0:n.call(o):null}}});export default ConfigProvider;export{configProviderProps};
//# sourceMappingURL=configprovider.js.map
