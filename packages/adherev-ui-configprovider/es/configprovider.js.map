{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["import debounce from 'lodash.debounce';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Resource from '@baifendian/adherev-util-resource';\nvar ConfigProvider = {\n  name: 'adv-configprovider',\n  props: {\n    intl: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  emits: ['intlInit', 'propsChange'],\n  data: function data() {\n    return {\n      isIntlInit: false,\n      $propsChangeHandler: null\n    };\n  },\n  provide: function provide() {\n    return {};\n  },\n  watch: {\n    'intl.lang': function intlLang() {\n      this.$init();\n    },\n    'intl.locales': function intlLocales() {\n      this.$init();\n    },\n    'intl.prefix': function intlPrefix() {\n      this.$init();\n    },\n    'intl.mainLanguage': function intlMainLanguage() {\n      this.$init();\n    }\n  },\n  created: function created() {\n    var _this = this;\n    this.$data.$propsChangeHandler = debounce(function () {\n      _this.$emit('propsChange');\n    }, 200);\n  },\n  methods: {\n    $init: function $init() {\n      var _this = this;\n      Intl.init({\n        prefix: this.intl.prefix || 'local',\n        currentLocale: this.intl.lang,\n        locales: this.intl.locales || {},\n        mainLanguage: this.intl.mainLanguage || 'zh_CN'\n      }, Intl.isInit()).then(function () {\n        Resource.Dict.value.LocalsMoment.value[_this.intl.lang]();\n        if (!_this.isIntlInit) {\n          _this.isIntlInit = true;\n          _this.$nextTick(function () {\n            this.$emit('intlInit');\n          });\n        } else {\n          _this.$forceUpdate();\n          _this.$nextTick(_this.$data.$propsChangeHandler);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.$init();\n  },\n  render: function render(h) {\n    var _a;\n    return this.isIntlInit ? (_a = this === null || this === void 0 ? void 0 : this.$slots) === null || _a === void 0 ? void 0 : _a.default : null;\n  }\n};\nexport default ConfigProvider;"],"names":["debounce","Intl","Resource","ConfigProvider","name","props","intl","type","Object","default","emits","data","isIntlInit","$propsChangeHandler","provide","watch","intl.lang","this","$init","intl.locales","intl.prefix","intl.mainLanguage","created","_this","$data","$emit","methods","init","prefix","currentLocale","lang","locales","mainLanguage","isInit","then","Dict","value","LocalsMoment","$forceUpdate","$nextTick","mounted","render","h","_a","$slots"],"mappings":"OAAOA,aAAc,yBACdC,SAAU,uCACVC,aAAc,oCACrB,IAAIC,eAAiB,CACnBC,KAAM,qBACNC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAAS,WACP,MAAO,EACT,CACF,CACF,EACAC,MAAO,CAAC,WAAY,eACpBC,KAAM,WACJ,MAAO,CACLC,WAAY,CAAA,EACZC,oBAAqB,IACvB,CACF,EACAC,QAAS,WACP,MAAO,EACT,EACAC,MAAO,CACLC,YAAa,WACXC,KAAKC,MAAM,CACb,EACAC,eAAgB,WACdF,KAAKC,MAAM,CACb,EACAE,cAAe,WACbH,KAAKC,MAAM,CACb,EACAG,oBAAqB,WACnBJ,KAAKC,MAAM,CACb,CACF,EACAI,QAAS,WACP,IAAIC,EAAQN,KACZA,KAAKO,MAAMX,oBAAsBb,SAAS,WACxCuB,EAAME,MAAM,aAAa,CAC3B,EAAG,GAAG,CACR,EACAC,QAAS,CACPR,MAAO,WACL,IAAIK,EAAQN,KACZhB,KAAK0B,KAAK,CACRC,OAAQX,KAAKX,KAAKsB,QAAU,QAC5BC,cAAeZ,KAAKX,KAAKwB,KACzBC,QAASd,KAAKX,KAAKyB,SAAW,GAC9BC,aAAcf,KAAKX,KAAK0B,cAAgB,OAC1C,EAAG/B,KAAKgC,OAAO,CAAC,EAAEC,KAAK,WACrBhC,SAASiC,KAAKC,MAAMC,aAAaD,MAAMb,EAAMjB,KAAKwB,MAAM,EACnDP,EAAMX,YAMTW,EAAMe,aAAa,EACnBf,EAAMgB,UAAUhB,EAAMC,MAAMX,mBAAmB,IAN/CU,EAAMX,WAAa,CAAA,EACnBW,EAAMgB,UAAU,WACdtB,KAAKQ,MAAM,UAAU,CACvB,CAAC,EAKL,CAAC,CACH,CACF,EACAe,QAAS,WACPvB,KAAKC,MAAM,CACb,EACAuB,OAAQ,SAAgBC,GACtB,IAAIC,EACJ,OAAO1B,KAAKL,WAAa,OAAC+B,EAAK1B,MAAAA,KAAmC,KAAA,EAASA,KAAK2B,QAAoC,KAAA,EAASD,EAAGlC,QAAU,IAC5I,CACF,iBACeN"}