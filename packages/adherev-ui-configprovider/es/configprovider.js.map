{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["import { defineComponent, onMounted, ref, watch } from 'vue';\nimport { object } from 'vue-types';\nimport Hooks from '@baifendian/adherev-ui-hooks';\nimport Intl from '@baifendian/adherev-util-intl';\nimport Mixins from '@baifendian/adherev-util-mixins';\nimport Resource from '@baifendian/adherev-util-resource';\nvar props = {\n  intl: object().def(function () {\n    return {\n      lang: 'zh_CN',\n      locales: {},\n      prefix: 'local'\n    };\n  })\n};\nvar forceUpdate = Mixins.forceUpdate;\nvar useForceUpdate = Hooks.useForceUpdate;\nvar ConfigProvider = defineComponent({\n  name: 'adv-configprovider',\n  mixins: [forceUpdate],\n  props: props,\n  setup: function setup(props, _a) {\n    var slots = _a.slots;\n    var isIntlInit = ref(false);\n    var $forceUpdate = useForceUpdate();\n    var init = function init() {\n      return Intl.init({\n        prefix: props.intl.prefix || 'local',\n        currentLocale: props.intl.lang,\n        locales: props.intl.locales || {}\n      }, Intl.isInit()).then(function () {\n        Resource.Dict.value.LocalsMoment.value[props.intl.lang]();\n        if (!isIntlInit.value) {\n          isIntlInit.value = true;\n        } else {\n          $forceUpdate();\n        }\n      });\n    };\n    watch([function () {\n      return props.intl.lang;\n    }, function () {\n      return props.intl.locales;\n    }, function () {\n      return props.intl.prefix;\n    }], function () {\n      return init();\n    });\n    onMounted(function () {\n      return init();\n    });\n    return function () {\n      var _a;\n      return isIntlInit.value ? (_a = slots === null || slots === void 0 ? void 0 : slots.default) === null || _a === void 0 ? void 0 : _a.call(slots) : null;\n    };\n  }\n});\nexport default ConfigProvider;"],"names":["defineComponent","onMounted","ref","watch","object","Hooks","Intl","Mixins","Resource","props","intl","def","lang","locales","prefix","forceUpdate","useForceUpdate","ConfigProvider","name","mixins","setup","_a","init","currentLocale","isInit","then","Dict","value","LocalsMoment","isIntlInit","$forceUpdate","slots","default","call"],"mappings":"OAASA,gBAAiBC,UAAWC,IAAKC,KAAkB,KAAL,aAC9CC,MAAyB,KAAX,mBAChBC,UAAW,sCACXC,SAAU,uCACVC,WAAY,yCACZC,aAAc,oCACrB,IAAIC,MAAQ,CACVC,KAAMN,OAAO,EAAEO,IAAI,WACjB,MAAO,CACLC,KAAM,QACNC,QAAS,GACTC,OAAQ,OACV,CACF,CAAC,CACH,EACIC,YAAcR,OAAOQ,YACrBC,eAAiBX,MAAMW,eACvBC,eAAiBjB,gBAAgB,CACnCkB,KAAM,qBACNC,OAAQ,CAACJ,aACTN,MAAOA,MACPW,MAAO,SAAeX,EAAOY,GAIhB,SAAPC,IACF,OAAOhB,KAAKgB,KAAK,CACfR,OAAQL,EAAMC,KAAKI,QAAU,QAC7BS,cAAed,EAAMC,KAAKE,KAC1BC,QAASJ,EAAMC,KAAKG,SAAW,EACjC,EAAGP,KAAKkB,OAAO,CAAC,EAAEC,KAAK,WACrBjB,SAASkB,KAAKC,MAAMC,aAAaD,MAAMlB,EAAMC,KAAKE,MAAM,EACnDiB,EAAWF,MAGdG,EAAa,EAFbD,EAAWF,MAAQ,CAAA,CAIvB,CAAC,CACH,CAhBA,IAAII,EAAQV,EAAGU,MACXF,EAAa3B,IAAI,CAAA,CAAK,EACtB4B,EAAed,eAAe,EA2BlC,OAZAb,MAAM,CAAC,WACL,OAAOM,EAAMC,KAAKE,IACpB,EAAG,WACD,OAAOH,EAAMC,KAAKG,OACpB,EAAG,WACD,OAAOJ,EAAMC,KAAKI,MACpB,GACSQ,CACR,EACDrB,UACSqB,CACR,EACM,WACL,IAAID,EACJ,OAAOQ,EAAWF,MAAQ,OAACN,EAAKU,MAAAA,EAAqC,KAAA,EAASA,EAAMC,SAAqC,KAAA,EAASX,EAAGY,KAAKF,CAAK,EAAI,IACrJ,CACF,CACF,CAAC,iBACcd"}