module.exports=function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=2)}([function(e,t){e.exports=require("@baifendian/adherev-util")},function(e,t){e.exports=require("classnames")},function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),s=n(0),r=n.n(s),u="adherev-ui-surnames",i={name:"adv-surnames",props:{className:{type:String,default:""},position:{type:String,default:"right",validator:function(e){return-1!==["top","right","bottom","left"].indexOf(e)}},indexes:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}}},data:function(){return{$key:!1,$isMouseClicked:!1,$isMouseMoved:!1,$startY:null,$startX:null,$curIndexName:null,$indexPositionMap:null,$maskEl:null}},computed:{getClassName:function(){var e=this.position,t=this.className;return o()(u,u+"-config-position-"+e,t.split(" "))}},mounted:function(){this.initEvent(),this.createMask(),this.adapterDimension(),this.createIndexPosition()},updated:function(){this.adapterDimension(),this.createIndexPosition()},beforeDestroy:function(){var e=this.$data.$maskEl;e&&e.parentElement.removeChild(e)},methods:{onClick:function(e){e.preventDefault(),e.stopPropagation(),this.clickDetail(e)},onTouchmove:function(e){e.preventDefault();var t=e.changedTouches[0].pageY,n=e.changedTouches[0].pageX,e=e.target,e=r.a.getTopDom(e,u+"-index-item");this.$data.$curIndexName=e.dataset.name,this.moveDetail(n,t)},onTouchend:function(){var e=this.$refs.highlightedEl;e.style.display="none",e.innerText="",e.style.transform="translate3d(0,0,0)"},onMousedown:function(e){e.preventDefault(),this.$data.$startY=e.pageY,this.$data.$startX=e.pageX;e=e.target,e=r.a.getTopDom(e,u+"-index-item");this.$data.$curIndexName=e.dataset.name,this.$data.$isMouseClicked=!0},onMousemove:function(e){if(!this.$data.$isMouseClicked)return!1;this.$data.$isMouseMoved=!0,e.preventDefault();var t=e.pageY,e=e.pageX;this.moveDetail(e,t)},onMouseleave:function(){var e=this.$refs.highlightedEl;this.$data.$isMouseClicked=!1,this.$data.$isMouseMoved=!1,e.style.display="none",e.innerText="",e.style.transform="translate3d(0,0,0)"},onMouseup:function(e){var t=this.$refs.highlightedEl,n=this.$data;if(n.$isMouseMoved)return n.$isMouseClicked=!1,n.$isMouseMoved=!1,t.style.display="none",t.innerText="",!(t.style.transform="translate3d(0,0,0)");e.preventDefault(),this.clickDetail(e)},onResize:function(){this.update()},clickDetail:function(e){var t=e.target;e.preventDefault();e=this.$data;if(e.$key)return!1;e.$key=!0,e.$maskEl.style.display="block";var t=r.a.getTopDom(t,u+"-index-item");this.scrollToAnimation(null===(t=null==t?void 0:t.dataset)||void 0===t?void 0:t.name)},moveDetail:function(e,t){var n,e=this.findIndex(e,t);e&&((t=this.$refs.highlightedEl).innerText=e.name,t.style.display="block","vertical"===this.getDirection()?(n=e.offsetTop+Math.floor(e.height/2),t.style.transform="translate3d(0,"+n+"px,0)"):(n=e.offsetLeft+e.width,t.style.transform="translate3d("+n+"px,0,0)"),this.scrollTo(e.name))},initEvent:function(){var e=this.$refs.indexInnerEl;r.a.isTouch()?(e.addEventListener("click",this.onClick),e.addEventListener("touchmove",this.onTouchmove),e.addEventListener("touchend",this.onTouchend)):(e.addEventListener("mousedown",this.onMousedown),e.addEventListener("mousemove",this.onMousemove),e.addEventListener("mouseleave",this.onMouseleave),e.addEventListener("mouseup",this.onMouseup),window.addEventListener("resize",this.onResize))},adapterDimension:function(){var e=this.$refs,t=e.el,e=e.indexInnerEl;"vertical"===this.getDirection()?(null==t||(t.style.height=(null==e?void 0:e.offsetHeight)+50+"px"),null==t||(t.style.width="100%")):null==t||(t.style.height="100%")},createIndexPosition:function(){var e=this.$refs.indexInnerEl,t=this.$data,n=e.querySelectorAll("."+u+"-index-item");t.$indexPositionMap=[];for(var i=0;i<n.length;i++){var o=n[i],s=o.dataset.name,r=o.getBoundingClientRect();t.$indexPositionMap.push({name:s,top:r.top,bottom:r.bottom,left:r.left,right:r.right,offsetTop:o.offsetTop,offsetLeft:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight})}},createMask:function(){var e=document.createElement("div");e.innerHTML="<div class='"+u+"-mask'></div>",this.$data.$maskEl=e.firstElementChild,document.body.appendChild(this.$data.$maskEl)},scrollToAnimation:function(n,e){void 0===e&&(e=100);var i=this,t=this.$refs,o=t.contentEl,s=t.el,r=this.$data,t=o.querySelector("."+u+"-group-title[data-name='"+n+"']"),a=o.scrollTop,l=t.offsetTop,t=screen.updateInterval,d=s.scrollHeight/((100|e)/(t||16.7)+((100|e)%(t||16.7)!=0?1:0));this.$emit("before-scroll",n),window.requestAnimationFrame(function e(){function t(){r.$key=!1,r.$isMouseClicked=!1,r.$maskEl.style.display="none",i.$emit("scroll",n)}o.scrollTop<l?l<a+d?a=l:a+=d:a-d<l?a=l:a-=d,o.scrollTop=a,o.scrollTop<l?l<=a?t():window.requestAnimationFrame(e):a<=l?t():window.requestAnimationFrame(e)})},scrollTo:function(e){var t=this.$refs.contentEl;t.scrollTop=t.querySelector("."+u+"-group-title[data-name='"+e+"']").offsetTop,this.$emit("scroll",e)},getDirection:function(){var e=this.position;return"left"===e||"right"===e?"vertical":"horizontal"},findIndex:function(e,t){for(var n,i,o=this.getDirection(),s=this.$data,r=s.$startX,a=s.$startY,l=s.$curIndexName,d=s.$indexPositionMap,u="vertical"===o?t-a:e-r,c=d.find(function(e){return e.name===l}),f=0,h=d.length-1;f<=h&&f<=d.length-1&&h<=d.length-1;){var p=d[n=h+f>>1],m=void 0,v=void 0,g=void 0,g="vertical"===o?(m=c.top+u,c.bottom,v=p.top,p.bottom):(m=c.left+u,c.right,v=p.left,p.right);if(v<=m&&m<=g){i=p;break}m<v?h=n-1:f=1+n}return i||null},update:function(){this.adapterDimension(),this.createIndexPosition()},renderIndex:function(t){var n=this.$scopedSlots;return this.indexes.map(function(e){return t("a",{key:e.index,class:u+"-index-item",attrs:{"data-name":e.index}},[n.index(e)])})},renderContent:function(t){var n=this.$scopedSlots;return this.dataSource.map(function(e){return t("div",{key:e.index,class:u+"-group"},[t("a",{class:u+"-group-title",attrs:{"data-name":e.index}},[n.title(e)]),t("div",{class:u+"-group-inner"},[n.content(e)])])})}},render:function(e){return e("div",{class:this.getClassName,ref:"el"},[e("div",{class:u+"-highlighted",ref:"highlightedEl"}),e("div",{class:u+"-content",ref:"contentEl"},[this.renderContent(e)]),e("div",{class:u+"-index",ref:"indexEl"},[e("div",{class:u+"-index-inner",ref:"indexInnerEl"},[this.renderIndex(e)])])])}},n=r.a._util,s=n.withInstall,a=n.withVue,l=s(i);l.isUse=function(){return!0},l.use=function(e){e.use(l),a(e,"Surnames",l)},t.default=l}]).default;
//# sourceMappingURL=index.js.map
